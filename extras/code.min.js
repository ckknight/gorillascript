(function(e){var t=function(e){function t(n){var r=Object.prototype.hasOwnProperty;if(r.call(t._cache,n))return t._cache[n];if(r.call(t,n)){var o=t[n];return delete t[n],t._cache[n]=o.call({})}return e?e(n):void 0}return t._cache={},t["./utils"]=function(){var e={exports:this},t=this;return function(e){"use strict";function n(e,t){return l(t)<1?"":1===t?e:l(t)&1?d(e)+d(n(e,l(t)-1)):n(d(e)+d(e),l(t)/2)}var r,o,a,i,s,c,l,u,f,d,p,h,_,m;r=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},o=function(e,t){function n(){var n,a,i,s,c;for(a=o,i=e-1;i>=0;--i)c=(n=arguments[i])!=null?n:r,s=a.get(c),null==s&&(s=0===i?t.apply(this,arguments):m(),a.set(c,s)),a=s;return a}var r,o,a;return o=m(),r={},a=n(),a.generic=n,a},a=function(){function e(){return!0}function t(e){return"string"==typeof e}function n(e){return"number"==typeof e}function r(e){return"function"==typeof e}function o(e){return"boolean"==typeof e}return function(a){if(null==a)return e;switch(a){case String:return t;case Number:return n;case Function:return r;case Boolean:return o;case Array:return i;case Object:return s;default:return function(e){return e instanceof a}}}}(),i=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),s=function(e){return"object"==typeof e&&null!==e},c=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+h(e));return e.displayName||e.name||""},l=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+h(e));return e},u=Object.prototype.hasOwnProperty,f=Array.prototype.slice,d=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+h(e))},p=function(e){if(null==e)throw TypeError("Expected an object, got "+h(e));return i(e)?e:"string"==typeof e?e.split(""):f.call(e)},h=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),m=typeof e.WeakMap=="function"?e.WeakMap:m=function(){function e(){var t;return t=this instanceof e?this:r(a),t._keys=[],t._values=[],t._chilly=[],t._uid=n(),t}function t(){return Math.random().toString(36).slice(2)}function n(){return d(t())+"-"+d((new Date).getTime())+"-"+d(t())+"-"+d(t())}function o(e){var t,n;n=this._uid,u.call(e,n)&&(t=this._chilly,t.indexOf(e)===-1&&(t.push(e),this._keys.push(e),this._values.push(e[n])))}var a,i,s;return a=e.prototype,e.displayName="WeakMap",s=Object.isExtensible||function(){return!0},a.get=function(e){var t,n;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");return s(e)?u.call(e,t=this._uid)?e[t]:void 0:(o.call(this,e),n=this._keys.indexOf(e),-1===n?void 0:this._values[n])},a.has=function(e){if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");return s(e)?u.call(e,this._uid):(o.call(this,e),this._keys.indexOf(e)!==-1)},i=typeof Object.defineProperty=="function"?Object.defineProperty:function(e,t,n){e[t]=n.value},a.set=function(e,t){var n,r;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");s(e)?i(e,this._uid,{configurable:!0,writable:!0,enumerable:!1,value:t}):(o.call(this,e),r=this._keys,n=r.indexOf(e),-1===n&&(n=r.length,r[n]=e),this._values[n]=t)},a["delete"]=function(e){var t,n;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");s(e)?delete e[this._uid]:(o.call(this,e),n=this._keys,t=n.indexOf(e),-1!==t&&(n.splice(t,1),this._values.splice(t,1)))},e}(),t.stringRepeat=n,t.padLeft=function(e,t,r){return d(n(r,l(t)-l(e.length)))+d(e)},t.padRight=function(e,t,r){return d(e)+d(n(r,l(t)-l(e.length)))},t.Cache=_=o(2,function(e,t){var n,o;return n=a(e),o=a(t),function(){function a(){var e;return e=this instanceof a?this:r(i),e.weakmap=m(),e}var i;return i=a.prototype,a.displayName="Cache<"+(null!=e?c(e):"")+", "+(null!=t?c(t):"")+">",i.get=function(t){if(!n(t))throw TypeError("Expected key to be a "+c(e)+", got "+h(t));return this.weakmap.get(t)},i.getOrAdd=function(r,a){var i,s;if(!n(r))throw TypeError("Expected key to be a "+c(e)+", got "+h(r));if("function"!=typeof a)throw TypeError("Expected factory to be a Function, got "+h(a));if(s=this.weakmap,i=s.get(r),void 0===i){if(i=a(r),!o(i))throw Error("Expected factory result to be a "+c(t)+", got "+h(i));s.set(r,i)}return i},a}()})}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./jsutils"]=function(){var e={exports:this},n=this;return function(){"use strict";var e,r,o,a,i,s,c,l,u,f,d,p,h,_;e=function(e,t){var n;if(null==e)throw TypeError("Expected parent to be an object, got "+d(e));if(n=e[t],"function"!=typeof n)throw Error("Trying to bind child '"+String(t)+"' which is not a function");return function(){return n.apply(e,arguments)}},r=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},o=typeof Array.prototype.indexOf=="function"?function(){var e;return e=Array.prototype.indexOf,function(t,n){return e.call(n,t)!==-1}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},a=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),i=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},s=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+d(e));return e},c=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+d(e))},f=function(e){if(null==e)throw TypeError("Expected an object, got "+d(e));return a(e)?e:"string"==typeof e?e.split(""):l.call(e)},d=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),h=t("./utils").padLeft,p=function(){var e,t,n;return e=/^[a-zA-Z_\$][a-zA-Z_\$0-9]*$/,t=/^[a-zA-Z_\$\u00a0-\uffff][a-zA-Z_\$0-9\u00a0-\uffff]*$/,n=["arguments","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","eval","false","finally","for","function","if","implements","import","in","Infinity","instanceof","interface","let","NaN","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],function(r,a){var i;if("string"!=typeof r)throw TypeError("Expected name to be a String, got "+d(r));if(null==a)a=!1;else if("boolean"!=typeof a)throw TypeError("Expected allowUnicode to be a Boolean, got "+d(a));return i=a?t:e,i.test(r)&&!o(r,n)}}(),_=function(){function t(e,t,n){var r;for(null==n&&(n="  "),r=0,s(t);t>r;++r)e(n)}function n(e){var t;return t=r(e),t.indent=s(e.indent)+1,t}function o(e){var t,n,r;if(null==e)return!1;if(e instanceof RegExp)return o(e.source);if(e instanceof Date)return!1;if(a(e))switch(e.length){case 0:return!1;case 1:return o(e[0]);default:return!0}else switch(typeof e){case"string":return s(e.length)>=l;case"number":case"boolean":return!1;case"object":t=-1;for(n in e)if(c.call(e,n)&&(++t,r=e[n],t>=1||o(n)||o(r)))return!0;return!1;default:return!0}}var l,m,y;return l=50,m=7,y={"null":function(e,t){t("null")},undefined:function(e,t){t("void 0")},number:function(e,t){t(0===e?1/s(e)<0?"-0":"0":isFinite(e)?String(e):e!==e?"0/0":s(e)>0?"1/0":"-1/0")},regexp:function(e,t){t("/"),t(e.source.replace(/(\\\\)*\\?\//g,"$1\\/")||"(?:)"),t("/"),e.global&&t("g"),e.ignoreCase&&t("i"),e.multiline&&t("m")},string:function(){function e(e){switch(e){case"\b":return"\\b";case"	":return"\\t";case"\n":return"\\n";case"\f":return"\\f";case"\r":return"\\r";case"\n":return"\\n";case'"':return'\\"';case"'":return"\\'";case"\\":return"\\\\";default:return"\\u"+u(h(e.charCodeAt(0).toString(16),4,"0"))}}function t(t){return'"'+u(t.replace(o,e))+'"'}function n(t){return"'"+u(t.replace(a,e))+"'"}function r(e,t){return i(e.length,t.length)?e:t}var o,a;return o=/[\u0000-\u001f"\\\u0080-\uffff]/g,a=/[\u0000-\u001f'\\\u0080-\uffff]/g,function(e,o){return o(e.indexOf('"')===-1?t(e):e.indexOf("'")===-1?n(e):r(t(e),n(e)))}}(),"boolean":function(e,t){return t(e?"true":"false")},date:function(e,t){return t("new Date("),t(String(e.getTime())),t(")")},array:function(e,r,a){var i,c,l,u,d,p,h;if(u="indent"in a,e.length===0)return r("[]");if(u&&s(e.length)>1&&(s(e.length)>=m||function(){var t,n,r,a;for(t=f(e),n=0,r=t.length;r>n;++n)if(a=t[n],o(a))return!0;return!1}())){for(r("[\n"),l=n(a),i=f(e),d=0,h=i.length;h>d;++d)p=i[d],t(r,l.indent),_(p,r,l),h-1>d&&r(","),r("\n");return t(r,a.indent),r("]")}for(r("["),i=f(e),d=0,c=i.length;c>d;++d)p=i[d],d>0&&(r(","),u&&r(" ")),_(p,r,a);return r("]")},object:function(){function e(e,t,n){var r;p(e)?t(e):(r=Number(e),r===r&&String(r)===e?t(e):_(e,t,n))}return function(r,a,i){var s,l,u,d,p,h,y,g,b,v;s=[];for(y in r)c.call(r,y)&&(v=r[y],s.push({key:y,value:v}));if(b=s,p="indent"in i,b.length===0)return a("{}");if(p&&b.length>1&&(b.length>=m||function(){var e,t,n,r,a,i;for(e=f(b),t=0,n=e.length;n>t;++t)if(a=(r=e[t]).key,i=r.value,o(a)||o(i))return!0;return!1}())){for(a("{\n"),d=n(i),h=0,g=b.length;g>h;++h)y=(u=b[h]).key,v=u.value,t(a,d.indent),e(y,a,d),a(": "),_(v,a,d),g-1>h&&a(","),a("\n");return t(a,i.indent),a("}")}for(a("{"),h=0,l=b.length;l>h;++h)y=(u=b[h]).key,v=u.value,h>0&&(a(","),p&&a(" ")),e(y,a,i),a(":"),p&&a(" "),_(v,a,i);return a("}")}}()},function(t,n,r){var o,i,s;if(null==n)n=null;else if("function"!=typeof n)throw TypeError("Expected sb to be one of Function or null, got "+d(n));if(null==r&&(r={}),null==n)return i=[],_(t,e(i,"push"),r),i.join("");if(null===t)y["null"](t,n,r);else if(a(t))y.array(t,n,r);else if(t instanceof RegExp)y.regexp(t,n,r);else if(t instanceof Date)y.date(t,n,r);else{if(c.call(y,o=typeof t)&&(s=y[o]),"function"!=typeof s)throw Error("Cannot convert "+d(t)+" to JS source");s(t,n,r)}}}(),n.toJSSource=_,n.isAcceptableIdent=p}.call(this),e.exports},t["./types"]=function(){var e={exports:this};return function(){"use strict";var n,r,o,a,i,s,c,l,u,f,d,p,h,_,m;n=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},r=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},o=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),a=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},i=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+p(e));return e.displayName||e.name||""},s=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+p(e));return e},c=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u=function(e){if("string"!=typeof e)throw TypeError("Expected a string, got "+p(e));return e},f=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+p(e))},d=function(e){if(null==e)throw TypeError("Expected an object, got "+p(e));return o(e)?e:"string"==typeof e?e.split(""):l.call(e)},p=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),m=t("util"),null!=m&&(h=m.inspect),e.exports=_=function(){function e(){var t;throw t=this instanceof e?this:r(A),TypeError("Type should not be instantiated")}function t(e,t){var n,r,o;for(n=d(e),r=n.length;r--;)if(o=n[r],o.equals(t))return!0;return!1}function _(e,t){var n,r,o,a,i,c,l,u;if(e===t)return e;for(u=[],r=e.length,a=t.length,c=0,l=0;c<s(r)&&l<s(a);)n=e[c],o=t[l],i=n.compare(o),0===i?(u.push(n),++c,++l):s(i)<0?(u.push(n),++c):(u.push(o),++l);for(;c<s(r);++c)u.push(e[c]);for(;l<s(a);++l)u.push(t[l]);switch(u.length){case r:return e;case a:return t;default:return u}}function m(e,t){var n,r,o,a,i,c,l,u;if(e===t)return e;for(r=e.length,a=t.length,u=[],c=0,l=0;c<s(r)&&l<s(a);)n=e[c],o=t[l],i=n.compare(o),0===i?(u.push(n),++c,++l):s(i)<0?++c:++l;switch(u.length){case r:return e;case a:return t;default:return u}}function y(e,t){var n,r,o,a,i,c,l;if(e===t)return[];if(l=[],r=e.length,0===r)return l;if(o=t.length,0===o)return e;for(i=0,c=0;i<s(r)&&c<s(o);)n=e[i],a=n.compare(t[c]),0===a?(++i,++c):s(a)<0?(l.push(n),++i):++c;for(;i<s(r);++i)l.push(e[i]);return l.length===r?e:l}function g(e,t){var n,r,o,i;if(e===t)return!0;if(n=e.length,0===n)return!0;if(r=t.length,a(n,r)){for(o=0,i=0;i<s(r);)if(e[o].equals(t[i])){if(++o,o>=s(n))return!0;++i}else++i;return!1}return!1}function b(e,t){var n,r,o,a,i;if(n=e.length,e===t&&s(n)>0)return!0;for(r=t.length,a=0,i=0;a<s(n)&&i<s(r);){if(o=e[a].compare(t[i]),0===o)return!0;s(o)<0?++a:++i}return!1}function v(e,t){var r,o,a;if(e!==t){if(a=e.length,r=n(a,t.length))return r;for(o=0,s(a);a>o;++o)if(r=e[o].compare(t[o]))return r}return 0}function w(e,t){var n,r;if(e!==t){if(r=e.length,r!==t.length)return!1;for(n=0,s(r);r>n;++n)if(!e[n].equals(t[n]))return!1}return!0}function x(e,t){return e.compare(t)}function I(e,t){switch(e.length){case 0:return F;case 1:return e[0];default:return t&&e.sort(x),R(e)}}function E(e){var t;if("string"==typeof e)return E({type:"simple",name:e});if(t=e.type,"string"!=typeof t)throw TypeError("Unspecified type");if(c.call(k,t))return k[t](e);throw TypeError("Unknown serialization type: "+f(t))}var A,C,N,B,T,k,M,S,D,F,O,j,L,R;return A=e.prototype,e.displayName="Type",A.isSubsetOf=function(){throw Error("Not implemented: "+i(this.constructor)+".isSubsetOf()")},A.isSupersetOf=function(e){return e.isSubsetOf(this)},A.overlaps=function(){throw Error("Not implemented: "+i(this.constructor)+".overlaps()")},A.compare=function(){throw Error("Not implemented: "+i(this.constructor)+".compare()")},A.equals=function(){throw Error("Not implemented: "+i(this.constructor)+".equals()")},A.union=function(){throw Error("Not implemented: "+i(this.constructor)+".union()")},A.intersect=function(){throw Error("Not implemented: "+i(this.constructor)+".intersect()")},A.complement=function(){var e;return(e=this._complement)==null?this._complement=T(this):e},A.array=function(){var t;return(t=this._array)==null?this._array=e.generic(B,this):t},A["function"]=function(){var t,n;return n=l.call(arguments),(t=this._function)==null?this._function=e.generic.apply(e,[M,this].concat(d(n))):t},k={},e.fromJSON=E,D=function(){var e;return e=-1,function(){return++e,e}}(),L=function(e){function t(e){var n;if(n=this instanceof t?this:r(o),"string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));return n.name=e,n.id=D(),n}var o,a;return a=e.prototype,o=t.prototype=r(a),o.constructor=t,t.displayName="SimpleType",typeof e.extended=="function"&&e.extended(t),o.toString=function(){return this.name},o.equals=function(e){return this===e},o.compare=function(e){return this===e?0:e instanceof t?n(this.name,e.name)||n(this.id,e.id):n("SimpleType",e.constructor.displayName)},o.union=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this===n?this:I([this,n],!0):n.union(this)},o.intersect=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this===n?this:F:n.intersect(this)},o.isSubsetOf=function(n){var r;if(r=this,!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this===n:n instanceof R?function(){var e,t,o;for(e=d(n.types),t=e.length;t--;)if(o=e[t],r===o)return!0;return!1}():n instanceof T?!this.isSubsetOf(n.untype):n===C},o.overlaps=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this===n:n.overlaps(this)},o.inspect=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(c.call(e,r)&&(n=!1,o=e[r],o===t))return"Type."+r;return"Type.make("+f(h(t.name))+")"}()},o.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(c.call(e,r)&&(n=!1,o=e[r],o===t))return r;throw Error("Cannot serialize custom type: "+String(t))}()},k.simple=function(t){var n;return n=t.name,c.call(e,n)&&e[n]||function(){throw Error("Unknown type: "+String(n))}()},t}(e),e.make=function(e){return L(e)},S=function(e){function t(n,a){var s,c,l;if(l=this instanceof t?this:r(u),!(n instanceof L))throw TypeError("Expected base to be a "+i(L)+", got "+p(n));if(l.base=n,!o(a))throw TypeError("Expected args to be an Array, got "+p(a));for(s=a.length;s--;)if(!(a[s]instanceof e))throw TypeError("Expected "+("args["+s+"]")+" to be a "+i(e)+", got "+p(a[s]));if(a.length===0)throw Error("Must provide at least one generic type argument");if(l.id=D(),l.args=a.slice(),l.base===B&&a.length===1){if((c=a[0]._array)!=null)return c;a[0]._array=l}else if(l.base===M&&a.length===1){if((c=a[0]._function)!=null)return c;a[0]._function=l}return l}function l(e,t){return a(e.id,t.id)?(t.base=e.base,t.args=e.args,t.id=e.id,void 0):l(t,e)}var u,f;return f=e.prototype,u=t.prototype=r(f),u.constructor=t,t.displayName="GenericType",typeof e.extended=="function"&&e.extended(t),u.toString=function(){var e,t;return t=this,(e=this._name)==null?this._name=function(){var e,n,r,o,a;if(t.base===B&&t.args.length===1)return t.args[0]===C?"[]":"["+String(t.args[0])+"]";if(t.base===M&&t.args.length===1)return t.args[0]===C?"->":"-> "+String(t.args[0]);for(a=[],a.push(String(t.base)),a.push("<"),e=d(t.args),o=0,n=e.length;n>o;++o)r=e[o],o>0&&(a.push(","),r!==C&&t.args[o-1]!==C&&a.push(" ")),r!==C&&a.push(String(r));return a.push(">"),a.join("")}():e},u.equals=function(e){return e===this?!0:e instanceof t?this.id===e.id?!0:this.base===e.base&&w(this.args,e.args)?(l(this,e),!0):!1:!1},u.compare=function(e){var r,o;return e===this?0:e instanceof t?this.id===e.id?0:(r=this.base.compare(e.base))?r:(o=v(this.args,e.args),o||l(this,e),o):n("GenericType",e.constructor.displayName)},u.union=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this.equals(n)?this:this.isSubsetOf(n)?n:n.isSubsetOf(this)?this:I([this,n],!0):n instanceof L?I([this,n],!0):n.union(this)},u.intersect=function(n){var r,o,a,c,l,u,f,d,h,_;if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));if(n instanceof t){if(this.base!==n.base)return F;if(this.equals(n))return this;if(o=this.args,_=n.args,u=o.length,u!==_.length)return F;for(l=!0,c=!0,d=[],a=0,s(u);u>a;++a)r=o[a],h=_[a],f=o[a].intersect(_[a]),l&&r!==f&&(l=!1),c&&h!==f&&(c=!1),d.push(f);return l?this:c?n:t(this.base,d)}return n instanceof L?F:n.intersect(this)},u.isSubsetOf=function(n){var r,o,a,c,l;if(r=this,!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));if(n instanceof t){if(this.base!==n.base)return!1;if(this.equals(n))return!0;if(o=this.args,l=n.args,c=o.length,c!==l.length)return!1;for(a=0,s(c);c>a;++a)if(!o[a].isSubsetOf(l[a]))return!1;return!0}return n instanceof R?function(){var e,t,o;for(e=d(n.types),t=e.length;t--;)if(o=e[t],r.isSubsetOf(o))return!0;return!1}():n instanceof T?!this.isSubsetOf(n.untype):n===C},u.overlaps=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this.base!==n.base?!1:this.args.length===n.args.length:n instanceof L?!1:n.overlaps(this)},u.inspect=function(e){var t,n,r,o,a;for(null!=e&&(e=s(e)-1),a=["Type.generic("],a.push(h(this.base,null,e)),t=d(this.args),n=0,r=t.length;r>n;++n)o=t[n],a.push(", "),a.push(h(o,null,e));return a.push(")"),a.join("")},u.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(c.call(e,r)&&(n=!1,o=e[r],o===t))return r;return{type:"generic",base:t.base,args:t.args}}()},k.generic=function(n){var r,o,a;return o=n.base,r=n.args,a=e.fromJSON(o),a===B&&r.length===1?e.fromJSON(r[0]).array():a===M&&r.length===1?e.fromJSON(r[0])["function"]():t(a,function(){var t,n,o,a,i;for(t=[],n=d(r),o=0,a=n.length;a>o;++o)i=n[o],t.push(e.fromJSON(i));return t}())},t}(e),e.generic=function(t){var n;return n=l.call(arguments,1),S("string"==typeof t?e.make(t):t,n)},j=function(e){function t(o){var a,i,s,f;if(a=this instanceof t?this:r(l),"object"!=typeof o||null===o)throw TypeError("Expected data to be an Object, got "+p(o));s=[];for(i in o)if(c.call(o,i)){if(f=o[i],!(f instanceof e))throw TypeError("Expected data["+u(JSON.stringify(i))+"] to be a Type, got "+p(f));f!==C&&s.push([i,f])}return s.sort(function(e,t){return n(e[0],t[0])}),s.length===0&&e.object!=null?e.object:(a.pairs=s,a.id=D(),a)}function o(e,t){return a(e.id,t.id)?(t.pairs=e.pairs,t.id=e.id,void 0):o(t,e)}var l,_;return _=e.prototype,l=t.prototype=r(_),l.constructor=t,t.displayName="ObjectType",typeof e.extended=="function"&&e.extended(t),l.toString=function(){var e,t;return t=this,(e=this._name)==null?this._name="{"+f(function(){var e,n,r,o,a,i,s;for(e=[],n=d(t.pairs),r=0,o=n.length;o>r;++r)i=(a=n[r])[0],s=a[1],e.push(f(i)+": "+String(s));return e}().join(", "))+"}":e},l.equals=function(e){var n,r,a,i,s,c,l;if(e===this)return!0;if(e instanceof t){if(l=this.pairs,s=e.pairs,l===s)return!0;if(l.length!==s.length)return!1;for(n=d(l),a=0,r=n.length;r>a;++a)if(c=n[a],i=s[a],c[0]!==i[0]||!c[1].equals(i[1]))return!1;return o(this,e),!0}return!1},l.compare=function(e){var r,a,i,s,c,l,u,f;if(this===e)return 0;if(e instanceof t){if(f=this.pairs,l=e.pairs,f===l)return 0;if(i=n(f.length,l.length))return i;for(r=d(f),s=0,a=r.length;a>s;++s)if(u=r[s],c=l[s],i=n(u[0],c[0])||u[1].compare(c[1]))return i;return o(this,e),0}return n("ObjectType",e.constructor.displayName)},l.union=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?this.equals(n)?this:this.isSubsetOf(n)?n:n.isSubsetOf(this)?this:I([this,n],!0):n instanceof L||n instanceof S?I([this,n],!0):n.union(this)},l.intersect=function(n){var r,o,a,s,l,u,f;if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));if(n instanceof t){if(this.equals(n))return this;if(this.isSubsetOf(n))return this;if(n.isSubsetOf(this))return n;for(u={},r=d(this.pairs),o=0,a=r.length;a>o;++o)l=(s=r[o])[0],f=s[1],u[l]=f;for(r=d(n.pairs),o=0,a=r.length;a>o;++o)l=(s=r[o])[0],f=s[1],u[l]=c.call(u,l)?u[l].intersect(f):f;return t(u)}return n instanceof L||n instanceof S?F:n.intersect(this)},l.isSubsetOf=function(n){var r,c,l,u,f,h,_,m,y,g,b,v;if(f=this,!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));if(n instanceof t){if(this===n||n===e.object)return!0;if(this===e.object)return!1;if(v=this.pairs,y=n.pairs,v===n.pairs)return!0;for(h=0,_=v.length,r=d(y),c=0,l=r.length;l>c;++c)for(m=(u=r[c])[0],g=u[1];h<=s(_);++h){if(h===_)return!1;if(b=v[h],b[0]===m){if(b[1].isSubsetOf(g)){++h;break}return!1}if(!a(b[0],m))return!1}return h===_&&o(this,n),!0}return n instanceof R?function(){var e,t,r;for(e=d(n.types),t=e.length;t--;)if(r=e[t],f.isSubsetOf(r))return!0;return!1}():n instanceof T?!this.isSubsetOf(n.untype):n===C},l.overlaps=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof t?!0:n instanceof L||n instanceof S?!1:n.overlaps(this)},l.value=function(t){var n,r,o,a;if("string"!=typeof t)throw TypeError("Expected key to be a String, got "+p(t));for(n=d(this.pairs),r=n.length;r--;){if(o=n[r],a=o[0],a===t)return o[1];if(t>a)return e.any}return e.any},l.inspect=function(t){var n,r,o,a,i,c,l;if(this===e.object)return"Type.object";for(c={},n=d(this.pairs),r=0,o=n.length;o>r;++r)i=(a=n[r])[0],l=a[1],c[i]=l;return"Type.makeObject("+f(h(c,null,null!=t?s(t)-1:null))+")"},l.toJSON=function(){var e,t,n,r,o,a,i;if(this.pairs.length===0)return"object";for(a={},e=d(this.pairs),t=0,n=e.length;n>t;++t)o=(r=e[t])[0],i=r[1],a[o]=i;return{type:"object",pairs:a}},k.object=function(n){var r,o,a,i;a=n.pairs,r={};for(o in a)c.call(a,o)&&(i=a[o],r[o]=e.fromJSON(i));return t(r)},t}(e),e.makeObject=function(e){return j(e)},R=function(e){function l(t){var n,a;if(a=this instanceof l?this:r(x),!o(t))throw TypeError("Expected types to be an Array, got "+p(t));for(n=t.length;n--;)if(!(t[n]instanceof e))throw TypeError("Expected "+("types["+n+"]")+" to be a "+i(e)+", got "+p(t[n]));if(a.types=t,t.length<=1)throw Error("Must provide at least 2 types to UnionType");return a.id=D(),a}function u(e,t){return a(e.id,t.id)?(t.types=e.types,t.id=e.id):u(t,e)}var y,x;return y=e.prototype,x=l.prototype=r(y),x.constructor=l,l.displayName="UnionType",typeof e.extended=="function"&&e.extended(l),x.toString=function(){var e;return(e=this._name)==null?this._name="("+f(this.types.join("|"))+")":e},x.equals=function(e){return e===this?!0:e instanceof l?this.id===e.id?!0:this.types===e.types||w(this.types,e.types)?(u(this,e),!0):!1:!1},x.compare=function(e){var t;return e===this?0:e instanceof l?this.id===e.id?0:this.types===e.types?(u(this,e),0):(t=v(this.types,e.types),0===t&&u(this,e),t):n("UnionType",e.constructor.displayName)},x.union=function(t){var n,r,o,a,s,c;if(!(t instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(t));if(t instanceof L||t instanceof S)return c=_(this.types,[t]),c===this.types?this:I(c);if(t instanceof j){if(t===e.object){for(a=[t],n=d(this.types),r=0,o=n.length;o>r;++r)if(s=n[r],s instanceof j){if(s===e.object)return this}else a.push(s);return I(a)}for(a=[t],n=d(this.types),r=0,o=n.length;o>r;++r)if(s=n[r],s instanceof j){if(t.isSubsetOf(s))return this;s.isSubsetOf(t)||a.push(s)}else a.push(s);return I(a)}return t instanceof l?(c=_(this.types,t.types),c===this.types?this:c===t.types?t:I(c)):t.union(this)},x.intersect=function(t){var n;if(!(t instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(t));return t instanceof L||t instanceof S||t instanceof j?I(m(this.types,[t])):t instanceof l?(n=m(this.types,t.types),n===this.types?this:n===t.types?t:I(n)):t.intersect(this)},x.isSubsetOf=function(t){if(!(t instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(t));return t instanceof l?g(this.types,t.types):t instanceof T?!this.overlaps(t.untype):t===C},x.overlaps=function(n){var r;if(r=this,!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof L?t(this.types,n):n instanceof S||n instanceof j?function(){var e,t,o;for(e=d(r.types),t=e.length;t--;)if(o=e[t],o.overlaps(n))return!0;return!1}():n instanceof l?b(this.types,n.types):n.overlaps(this)},x.inspect=function(e){var t;return t=this,"("+f(function(){var n,r,o,a,i;for(n=[],r=d(t.types),o=0,a=r.length;a>o;++o)i=r[o],n.push(h(i,null,null!=e?s(e)-1:null));return n}().join(").union("))+")"},x.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(c.call(e,r)&&(n=!1,o=e[r],o===t))return r;return{type:"union",types:t.types}}()},k.union=function(t){var n,r,o,a,i;for(i=t.types,o=e.none,n=d(i),r=n.length;r--;)a=n[r],o=o.union(e.fromJSON(a));return o},l}(e),T=function(e){function o(t){var n;if(n=this instanceof o?this:r(u),!(t instanceof e))throw TypeError("Expected untype to be a "+i(e)+", got "+p(t));return n.untype=t,n.id=D(),n}function s(e,t){return a(e.id,t.id)?(t.id=e.id,t.untype=e.untype):s(t,e)}function l(e){return e instanceof R?e.types:[e]}var u,d;return d=e.prototype,u=o.prototype=r(d),u.constructor=o,o.displayName="ComplementType",typeof e.extended=="function"&&e.extended(o),u.toString=function(){var e;return(e=this._name)==null?this._name="any \\ "+String(this.untype):e},u.equals=function(e){return this===e?!0:e instanceof o?this.id===e.id?!0:this.untype.equals(e.untype)?(s(this,e),!0):!1:!1},u.compare=function(e){var t;return this===e?0:e instanceof o?this.id===e.id?0:(t=this.untype.compare(e.untype),0===t&&s(this,e),t):n("ComplementType",e.constructor.displayName)},u.union=function(t){var n,r;if(!(t instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(t));return t instanceof L||t instanceof S||t instanceof j?(n=l(this.untype),r=y(n,[t]),r===n?this:I(r).complement()):t instanceof R?(n=l(this.untype),r=y(n,t.types),r===n?this:I(r).complement()):t instanceof o?this.untype.intersect(t.untype).complement():t.union(this)},u.intersect=function(n){var r;if(!(n instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(n));return n instanceof L||n instanceof S||n instanceof j?t(l(this.untype),n)?F:n:n instanceof R?(r=y(n.types,l(this.untype)),r===n.types?n:I(r)):n instanceof o?this.untype.union(n.untype).complement():n.intersect(this)},u.isSubsetOf=function(t){if(!(t instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(t));return t instanceof o?t.untype.isSubsetOf(this.untype):t===C},u.overlaps=function(t){var n;if(n=this,!(t instanceof e))throw TypeError("Expected other to be a "+i(e)+", got "+p(t));return t instanceof L||t instanceof S?!this.untype.overlaps(t):t instanceof j?function(){var e,r,o;for(e=l(n.untype),r=e.length;r--;)if(o=e[r],o instanceof j&&t.isSubsetOf(o))return!1;return!0}():t instanceof R?y(t.types,l(this.untype)).length>0:t instanceof o?!0:t.overlaps(this)},u.complement=function(){return this.untype},u.inspect=function(e){return f(this.untype.inspect(e))+".complement()"},u.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(c.call(e,r)&&(n=!1,o=e[r],o===t))return r;return{type:"complement",untype:t.complement()}}()},k.complement=function(t){var n;return n=t.untype,e.fromJSON(n).complement()},o}(e),C=e.any=new(N=function(e){function t(){var e;if(e=this instanceof t?this:r(o),C)throw Error("Cannot instantiate more than once");return e}var o,a;return a=e.prototype,o=t.prototype=r(a),o.constructor=t,t.displayName="AnyType",typeof e.extended=="function"&&e.extended(t),o.toString=function(){return"any"},o.equals=function(e){return this===e},o.compare=function(e){return this===e?0:n("AnyType",e.constructor.displayName)},o.union=function(){return this},o.intersect=function(e){return e},o.isSubsetOf=function(e){return this===e},o.overlaps=function(){return!0},o.complement=function(){return F},o.inspect=function(){return"Type.any"},o.toJSON=function(){return"any"},k.any=function(){return C},t}(e)),F=e.none=new(O=function(e){function t(){var e;if(e=this instanceof t?this:r(o),F)throw Error("Cannot instantiate more than once");return e}var o,a;return a=e.prototype,o=t.prototype=r(a),o.constructor=t,t.displayName="NoneType",typeof e.extended=="function"&&e.extended(t),o.toString=function(){return"none"},o.equals=function(e){return this===e},o.compare=function(e){return this===e?0:n("NoneType",e.constructor.displayName)},o.union=function(e){return e},o.intersect=function(){return this},o.isSubsetOf=function(){return!0},o.overlaps=function(){return!1},o.complement=function(){return C},o.inspect=function(){return"Type.none"},o.toJSON=function(){return"none"},k.none=function(){return F},t}(e)),B=e.arrayBase=e.make("Array"),M=e.functionBase=e.make("Function"),e.undefined=e.make("undefined"),e["null"]=e.make("null"),e.boolean=e.make("Boolean"),e.string=e.make("String"),e.stringArray=e.string.array(),e.number=e.make("Number"),e.numberArray=e.number.array(),e.array=C.array(),e.args=e.make("Arguments"),e.object=e.makeObject({}),e["function"]=C["function"](),e.regexp=e.make("RegExp"),e.date=e.make("Date"),e.error=e.make("Error"),e.promise=e.makeObject({then:e.any["function"](e["function"],e["function"])}),e.numeric=e.number.union(e.undefined).union(e["null"]).union(e.boolean),e.stringOrNumber=e.string.union(e.number),e.arrayLike=e.array.union(e.args),e.undefinedOrNull=e.undefined.union(e["null"]),e.notUndefinedOrNull=e.undefinedOrNull.complement(),e.primitive=e.undefinedOrNull.union(e.boolean).union(e.string).union(e.number),e.nonPrimitive=e.primitive.complement(),e.alwaysFalsy=e.undefinedOrNull,e.potentiallyTruthy=e.alwaysFalsy.complement(),e.potentiallyFalsy=e.alwaysFalsy.union(e.number).union(e.string).union(e.boolean),e.alwaysTruthy=e.potentiallyFalsy.complement(),e
}()}.call(this),e.exports},t["./jsast"]=function(){var e={exports:this},n=this;return function(){"use strict";function e(e){var t;return t=g(e),t.indent=A(t.indent)+1,t}function r(e){function t(n){var r,o,a;a=String(n),o=a.split(/(?:\r\n?|[\n\u2028\u2029])/g),o.length===1?t.column=A(t.column)+A(o[0].length):(r=o.length,t.line=A(t.line)+(A(r)-1),t.column=A(o[A(r)-1].length)+1),e(a)}return t.line=1,t.column=1,t.indent=function(n){e(X(n)),t.column=A(t.column)+A(n)},t}function o(e){var t;return t=r(e)}function a(){var e,t;return e=[],t=r(function(t){e.push(t)}),t.toString=function(){var t;switch(e.length){case 0:return"";case 1:return e[0];default:return t=e.join(""),e.splice(0,e.length,t),t}},t}function i(e,t,n){var r;if("number"!=typeof e)throw TypeError("Expected line to be a Number, got "+k(e));if("number"!=typeof t)throw TypeError("Expected column to be a Number, got "+k(t));if(null==n)n=void 0;else if("string"!=typeof n&&"number"!=typeof n)throw TypeError("Expected file to be one of String or Number or undefined, got "+k(n));if(r={line:e,column:t},n){if("string"!=typeof n)throw TypeError("Must provide a valid string for file");r.file=n}return r}function s(e,t){var n,r,o,a,i,s,c;if(!w(e))throw TypeError("Expected array to be an Array, got "+k(e));if("function"!=typeof t)throw TypeError("Expected walker to be a Function, got "+k(t));for(a=!1,n=[],r=0,o=e.length;o>r;++r)i=e[r],s=t(i),null==s&&(s=i.walk(t)),i!==s&&(a=!0),n.push(s);return c=n,a?c:e}function c(e){return null!=e?A(e)-1:null}function l(e,t){var n,r,o,a,i,s,l,u,f;for(i=N.call(arguments,3),s=c(e),l=!1,r=i.length;r--&&(a=i[r],!a||a instanceof st||w(a)&&a.length===0);)i.pop();for(n=[],r=0,o=i.length;o>r;++r)a=i[r],n.push(rt(a,null,s));return f=n,u=function(){var e,t,n;for(e=0,t=f.length;t>e;++e)if(n=f[e],f.length>50||n.indexOf("\n")!==-1)return!0;return!1}(),u?(f=function(){var e,t,n,r;for(e=[],t=0,n=f.length;n>t;++t)r=f[t],e.push("  "+B(r.split("\n").join("\n  ")));return e}(),B(t)+"(\n"+B(f.join(",\n"))+")"):B(t)+"("+B(f.join(", "))+")"}function u(e,t,n){var r,o,a,i,s;if(!w(e))throw TypeError("Expected array to be an Array, got "+k(e));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected keepTrailing to be a Boolean, got "+k(n));if(e.length===0)return e;for(s=[],i=-1,o=0,r=e.length;r>o;++o)a=e[o],i=a instanceof st?o:-1,s.push(f(a,t));return n||-1===i||s.splice(i,1/0),s}function f(e,t){return w(e)?u(e):e instanceof st?t:e}function d(e,t){if(t instanceof it)throw Error("Cannot convert "+k(t)+" to a Const");return t instanceof RegExp?ut(e,t.source,t.flags):V(e,t)}function p(e){if("number"!=typeof e)throw TypeError("Expected value to be a Number, got "+k(e));return 0>e||0===e&&0>1/e}function h(e,t){var n,r,o,a,i;for(o=[],n=T(e),r=n.length;r--;){if(a=n[r],v(a.name,o))throw Error("Duplicate parameter: "+B(a.name));o.push(a.name)}for(n=T(t),r=n.length;r--;){if(i=n[r],v(i,o))throw Error("Duplicate variable: "+B(i));o.push(i)}}function _(e,t,n,r,o,a){var i,s,c,l,u,f,d;for(f=e.minify,i=T(n),s=0,c=i.length;c>s;++s)l=i[s],f||t.indent(e.indent),t(yt(l)),t(";"),a=!1,f||(t("\n"),a=!0);if(A(r.length)>0){for(f||t.indent(e.indent),t("var "),i=T(r),u=0,c=i.length;c>u;++u)d=i[u],u>0&&(t(","),f||t(" ")),Q(o.pos,r[u],!0).compile(e,at.insideParentheses,!1,t);t(";"),a=!1,f||(t("\n"),a=!0)}o.isNoop()||(f||t.indent(e.indent),o.compileAsStatement(e,a,t),f||t("\n"))}function m(t,n,r,o,a,i,s){var c,l,u,f,d;for(n("function"),f=t.minify,f&&null==r||n(" "),null!=r&&r.compile(t,at.insideParentheses,!1,n),n("("),c=T(o),u=0,l=c.length;l>u;++u)d=c[u],u>0&&(n(","),f||n(" ")),d.compile(t,at.insideParentheses,!1,n);return n(")"),f||n(" "),n("{"),(i.length||a.length||!s.isNoop())&&(f||n("\n"),_(e(t),n,a,i,s,!f),f||n.indent(t.indent)),n("}")}function y(e){var t,n,r,o,a;if(null==e)return[];if(w(e)){for(t=[],n=T(e),r=0,o=n.length;o>r;++r)a=n[r],t.push($(a));return t}throw Error("Expected an array, got "+k(e))}var g,b,v,w,x,I,E,A,C,N,B,T,k,M,S,D,F,O,j,L,R,P,U,V,q,W,G,J,z,H,K,$,Y,X,Q,Z,et,tt,nt,rt,ot,at,it,st,ct,lt,ut,ft,dt,pt,ht,_t,mt,yt,gt,bt,vt,wt,xt;g=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},b=function(e,t){var n;for(n in t)C.call(t,n)&&(e[n]=t[n]);return e},v=typeof Array.prototype.indexOf=="function"?function(){var e;return e=Array.prototype.indexOf,function(t,n){return e.call(n,t)!==-1}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},w=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),x=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e},I=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},E=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+k(e));return e.displayName||e.name||""},A=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+k(e));return e},C=Object.prototype.hasOwnProperty,N=Array.prototype.slice,B=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+k(e))},T=function(e){if(null==e)throw TypeError("Expected an object, got "+k(e));return w(e)?e:"string"==typeof e?e.split(""):N.call(e)},k=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),wt=t("util"),null!=wt&&(rt=wt.inspect),lt=t("./utils").padLeft,ot=(M=t("./jsutils")).isAcceptableIdent,yt=M.toJSSource,at=function(){return this.block=1,this.insideParentheses=2,this.sequence=3,this.assignment=4,this.inlineCondition=5,this.logicalOr=6,this.logicalAnd=7,this.bitwiseOr=8,this.bitwiseAnd=9,this.bitwiseXor=10,this.equality=11,this.relational=12,this.bitwiseShift=13,this.addition=14,this.multiplication=15,this.unary=16,this.increment=17,this.callOrAccess=18,this.newCall=19,this}.call({}),nt="  ",X=function(){var e;return e=[""],function(t){var n,r;if(A(t)>=e.length)for(r=e[e.length-1],n=e.length,A(t);t>=n;++n)r=B(r)+nt,e.push(r);return e[t]}}(),n.Node=it=function(){function e(){var n;throw n=this instanceof e?this:g(t),Error("Node cannot be instantiated directly")}var t;return t=e.prototype,e.displayName="Node",t.toString=function(e){var t;return null==e&&(e={}),t=a(),this.compileAsStatement(b({indent:0,bare:!0},e),!0,t),t.toString()},t.compile=function(){throw Error("Not implemented: "+E(this.constructor)+".compile()")},t.maybeToStatement=function(){return typeof this.toStatement=="function"?this.toStatement():this},t.isConst=function(){return!1},t.isNoop=function(){return!1},t.constValue=function(){throw Error(B(this.constructor.name)+" has no const value")},t.isLarge=function(){return!0},t.isSmall=function(){return!this.isLarge()},t.mutateLast=function(){return this},t.exitType=function(){return null},t.last=function(){return this},t.toJSON=function(){return[this.constructor.name,this.pos.line,this.pos.column,this.pos.file||0].concat(T(this._toJSON()))},t._toJSON=function(){return[]},e}(),n.Expression=z=function(e){function t(){var e;throw e=this instanceof t?this:g(n),Error("Expression cannot be instantiated directly")}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Expression",typeof e.extended=="function"&&e.extended(t),n.compileAsBlock=function(e,t,n,r){this.compile(e,t,n,r)},n.compileAsStatement=function(e,t,n){typeof this.toStatement=="function"?this.toStatement().compileAsStatement(e,t,n):(this.compile(e,at.block,t,n),n(";"))},n.isLarge=function(){return!1},n.mutateLast=function(e){return e(this)},t}(it),n.Statement=pt=function(e){function t(){var e;throw e=this instanceof t?this:g(r),Error("Expression cannot be instantiated directly")}var n,r;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="Statement",typeof e.extended=="function"&&e.extended(t),r.compileAsStatement=function(e,t,n){return this.compile(e,at.block,t,n)},t}(it),n.Access=function(e,t){var n,r,o,a,i;for(a=N.call(arguments,2),i=t,n=0,r=a.length;r>n;++n)o=a[n],i=F(e,i,".",o);return i},n.Arguments=S=function(e){function t(e){var r;if(r=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));return r.pos=e,r}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Arguments",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o;(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("arguments")},n.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},n.walk=function(){return this},n.isNoop=function(){return!0},n.inspect=function(e){return l(e,"Arguments",this.pos)},t.fromJSON=function(e,n,r){return t(i(e,n,r))},t}(z),n.Arr=D=function(t){function n(e,r){var o,i;if(i=this instanceof n?this:g(a),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(i.pos=e,null==r)r=[];else{if(!w(r))throw TypeError("Expected elements to be an Array, got "+k(r));for(o=r.length;o--;)if(!(r[o]instanceof t))throw TypeError("Expected "+("elements["+o+"]")+" to be a "+E(t)+", got "+k(r[o]))}return i.elements=r,i}function r(t,n,r,o,a){var i,s,c,l,u;for(s=e(n),i=T(t),c=0,u=i.length;u>c;++c)l=i[c],a("\n"),a.indent(s.indent),l.compile(s,at.sequence,!1,a),u-1>c&&a(",");a("\n"),a.indent(n.indent)}function o(e,t,n,r,o){var a,i,s,c;for(a=T(e),s=0,i=a.length;i>s;++s)c=a[s],s>0&&(o(","),t.minify||o(" ")),c.compile(t,at.sequence,!1,o)}var a,c;return c=t.prototype,a=n.prototype=g(c),a.constructor=n,n.displayName="Arr",typeof t.extended=="function"&&t.extended(n),a.compile=function(e,t,n,a){var i,s;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(i=e.sourcemap)!=null&&i.add(a.line,a.column,this.pos.line,this.pos.column),a("["),s=!e.minify&&this.shouldCompileLarge()?r:o,s(this.elements,e,t,n,a),a("]"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},a.compileAsBlock=function(e,t,n,r){return j(this.pos,this.elements).compileAsBlock(e,t,n,r)},a.compileAsStatement=function(e,t,n){L(this.pos,this.elements).compile(e,t,n)},a.shouldCompileLarge=function(){switch(this.elements.length){case 0:return!1;case 1:return this.elements[0].isLarge();default:return this.isLarge()}},a.isSmall=function(){switch(this.elements.length){case 0:return!0;case 1:return this.elements[0].isSmall();default:return!1}},a.isLarge=function(){var e,t;return t=this,(e=this._isLarge)==null?this._isLarge=A(this.elements.length)>4||function(){var e,n,r;for(e=T(t.elements),n=e.length;n--;)if(r=e[n],!r.isSmall())return!0;return!1}():e},a.isNoop=function(){var e,t;return t=this,(e=this._isNoop)==null?this._isNoop=function(){var e,n,r;for(e=T(t.elements),n=e.length;n--;)if(r=e[n],!r.isNoop())return!1;return!0}():e},a.walk=function(e){var t;return t=s(this.elements,e),this.elements!==t?n(this.pos,t):this},a.inspect=function(e){return l(e,"Arr",this.pos,this.elements)},a._toJSON=function(){return u(this.elements,0)},n.fromJSON=function(e,t,r){var o;return o=N.call(arguments,3),n(i(e,t,r),y(o))},n}(z),n.Assign=function(e,t,n){return F(e,t,"=",n)},n.BinaryChain=function(e,t){var n,r,o,a,i,s,c,l;if(a=N.call(arguments,2),"+"===t)for(s=a.length-2;s>=0;--s)c=a[s],l=a[s+1],("string"==typeof c||c instanceof V&&typeof c.value=="string")&&("string"==typeof l||l instanceof V&&typeof l.value=="string")&&a.splice(s,2,B("string"==typeof c?c:c.value)+B("string"==typeof l?l:l.value));for(i=a[0],n=1,r=a.length;r>n;++n)o=a[n],i=F(e,i,t,o);return i},n.And=function(e){var t,n,r,o;if(n=N.call(arguments,1),n.length===0)return V(e,!0);for(r=n[0],o=1,t=n.length;t>o;++o)r=F(e,r,"&&",n[o]);return r},n.Or=function(e){var t,n,r,o;if(n=N.call(arguments,1),n.length===0)return V(e,!1);for(r=n[0],o=1,t=n.length;t>o;++o)r=F(e,r,"||",n[o]);return r},n.Binary=F=function(e){function t(n,r,a,i){var s;if(s=this instanceof t?this:g(o),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+k(n));if(s.pos=n,null==r&&(r=st(n)),"string"!=typeof a)throw TypeError("Expected op to be a String, got "+k(a));if(s.op=a,null==i&&(i=st(n)),!C.call(h,a))throw Error("Unknown binary operator: "+B(yt(a)));return r instanceof e||(r=d(n,r)),i instanceof e||(i=d(n,i)),s.left=r,s.right=i,s}function n(e,t,n,r,o,a,i){var s,c,l;s=n instanceof V&&typeof n.value=="string"&&ot(n.value),l=!I(o,at.callOrAccess),l&&i("("),t instanceof V&&typeof t.value=="number"?(c=yt(t.value),p(t.value)||!isFinite(t.value)?(i("("),i(c),i(")")):(i(c),s&&c.indexOf("e")===-1&&c.indexOf(".")===-1&&i("."))):t.isConst()&&t.constValue()===void 0?(i("("),(t instanceof V?t:V(t.pos,void 0)).compile(r,at.insideParentheses,!1,i),i(")")):t.compile(r,at.callOrAccess,a,i),s?(i("."),i(n.value)):(i("["),n.compile(r,at.insideParentheses,!1,i),i("]")),l&&i(")")}function r(e,n,r,o,a,i,s){var c,l,f,d;l=h[e],c=u[l],d="paren"===c?!x(a,l):!I(a,l),d&&s("("),n.compile(o,"right"===c&&n instanceof t&&h[n.op]===l?A(l)+1:l,i&&!d,s),f=!o.minify||/^\w/.test(e),f&&s(" "),s(e),f&&s(" "),r.compile(o,"left"===c&&r instanceof t&&h[r.op]===l?A(l)+1:l,!1,s),d&&s(")")}var o,a,s,c,u,h;return a=e.prototype,o=t.prototype=g(a),o.constructor=t,t.displayName="Binary",typeof e.extended=="function"&&e.extended(t),o.compile=function(e,t,o,a){var i,s;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(i=e.sourcemap)!=null&&i.add(a.line,a.column,this.pos.line,this.pos.column),s=this.op==="."?n:r,s(this.op,this.left,this.right,e,t,o,a),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},o.compileAsBlock=function(e,t,n,r){var o;C.call(c,this.op)||(o=this.op)==="&&"||"||"===o?a.compileAsBlock.call(this,e,t,n,r):j(this.pos,[this.left,this.right]).compileAsBlock(e,t,n,r)},o.compileAsStatement=function(e,t,n){var r,o,i;r=this,o=this.left,i=this.op,C.call(c,i)?a.compileAsStatement.call(this,e,t,n):L(this.pos,[this.left,this.right]).compileAsStatement(e,t,n)},c={"=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"<<=":!0,">>=":!0,">>>=":!0,"&=":!0,"^=":!0,"|=":!0},h={".":at.callOrAccess,"*":at.multiplication,"/":at.multiplication,"%":at.multiplication,"+":at.addition,"-":at.addition,"<<":at.bitwiseShift,">>":at.bitwiseShift,">>>":at.bitwiseShift,"<":at.relational,"<=":at.relational,">":at.relational,">=":at.relational,"in":at.relational,"instanceof":at.relational,"==":at.equality,"!=":at.equality,"===":at.equality,"!==":at.equality,"&":at.bitwiseAnd,"^":at.bitwiseXor,"|":at.bitwiseOr,"&&":at.logicalAnd,"||":at.logicalOr,"=":at.assignment,"+=":at.assignment,"-=":at.assignment,"*=":at.assignment,"/=":at.assignment,"%=":at.assignment,"<<=":at.assignment,">>=":at.assignment,">>>=":at.assignment,"&=":at.assignment,"^=":at.assignment,"|=":at.assignment},s={},s[at.equality]="paren",s[at.relational]="paren",s[at.addition]="left",s[at.multiplication]="left",s[at.bitwiseAnd]="none",s[at.bitwiseOr]="none",s[at.bitwiseXor]="none",s[at.bitwiseShift]="left",s[at.assignment]="right",u=s,o.isLarge=function(){var e;return(e=this._isLarge)==null?this._isLarge=!this.left.isSmall()||!this.right.isSmall():e},o.isSmall=function(){var e;return(e=this._isSmall)==null?this._isSmall=this.left.isSmall()&&this.right.isSmall():e},o.isNoop=function(){var e;return(e=this._isNoop)==null?this._isNoop=!C.call(c,this.op)&&this.left.isNoop()&&this.right.isNoop():e},o.walk=function(e){var n,r,o,a;return r=!1,o=(n=e(this.left))!=null?n:this.left.walk(e),a=(n=e(this.right))!=null?n:this.right.walk(e),this.left!==o||this.right!==a?t(this.pos,o,this.op,a):this},o.inspect=function(e){return l(e,"Binary",this.pos,this.left,this.op,this.right)},o._toJSON=function(){var e;return e=[f(this.left,0),this.op],f(this.right)&&e.push.apply(e,T(this.right.toJSON())),e},t.fromJSON=function(e,n,r,o,a){var s;return s=N.call(arguments,5),t(i(e,n,r),$(o),a,$(s))},t}(z),n.BlockStatement=L=function(t){function n(e,t,o){var a,i,s,c,l,u,f;if(c=this instanceof n?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(c.pos=e,null==t)t=[];else{if(!w(t))throw TypeError("Expected body to be an Array, got "+k(t));for(a=t.length;a--;)if(!(t[a]instanceof it))throw TypeError("Expected "+("body["+a+"]")+" to be a "+E(it)+", got "+k(t[a]))}if(null==o)o=null;else if(!(o instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(o));for(c.label=o,u=[],i=0,s=t.length;s>i&&(l=t[i],f=l.maybeToStatement(),!(f instanceof n)||f.label||f.pos.file!==e.file&&f.pos.file?f instanceof st||u.push(f):u.push.apply(u,T(f.body)),f.exitType()==null);++i);switch(u.length){case 0:return st(e);case 1:return e.file&&!u[0].pos.file&&(u[0].pos.file=e.file),u[0]}return c.body=u,c}var r,o;return o=t.prototype,r=n.prototype=g(o),r.constructor=n,n.displayName="BlockStatement",typeof t.extended=="function"&&t.extended(n),r.compile=function(t,n,r,o){var a,i,s,c,l,u,f,d,p,h,_;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");for(a=[],i=T(this.body),s=0,c=i.length;c>s;++s)h=i[s],h.isNoop()||a.push(h);for(_=a,t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(l=t.sourcemap)!=null&&l.add(o.line,o.column,this.pos.line,this.pos.column),u=this.label!=null?e(t):t,p=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),r=!1,o(":"),p||o(" "),o("{"),p||(o("\n"),o.indent(u.indent),r=!0)),f=0,c=_.length;c>f;++f)d=_[f],f>0&&!p&&(o("\n"),o.indent(u.indent),r=!0),d.compileAsStatement(u,r,o),r=!1;this.label!=null&&(p||(o("\n"),o.indent(t.indent)),o("}")),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,n,r;return n=s(this.body,e),r=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,this.body!==n||this.label!==r?O(this.pos,n,r):this},r.mutateLast=function(e,t){var n,r,o;return r=this.last(),o=r.mutateLast(e,t),r!==o?(n=N.call(this.body,0,-1),n.push(o),O(this.pos,n)):this},r.exitType=function(){return this.last().exitType()},r.last=function(){var e;return(e=this.body)[A(e.length)-1]},r.isNoop=function(){var e,t;return t=this,(e=this._isNoop)==null?this._isNoop=function(){var e,n,r;for(e=T(t.body),n=e.length;n--;)if(r=e[n],!r.isNoop())return!1;return!0}():e},r.inspect=function(e){return l(e,"BlockStatement",this.pos,this.body,this.label)},r._toJSON=function(){return[this.label||0].concat(T(this.body))},n.fromJSON=function(e,t,r,o){var a;return a=N.call(arguments,4),n(i(e,t,r),y(a),o?$(o):null)},n}(pt),n.BlockExpression=j=function(e){function t(r,o){var a,i,s,c,l,u;if(i=this instanceof t?this:g(n),"object"!=typeof r||null===r)throw TypeError("Expected pos to be an Object, got "+k(r));if(i.pos=r,null==o)o=[];else{if(!w(o))throw TypeError("Expected body to be an Array, got "+k(o));for(a=o.length;a--;)if(!(o[a]instanceof e))throw TypeError("Expected "+("body["+a+"]")+" to be a "+E(e)+", got "+k(o[a]))}for(u=[],s=0,l=o.length;l>s;++s)c=o[s],s!==l-1&&!c instanceof st||(c instanceof t&&(c.pos.file===r.file||!c.pos.file)?(u.push.apply(u,T(c.body)),l-1>s&&u[u.length-1]instanceof st&&u.pop()):c instanceof st||u.push(c));switch(u.length){case 0:return st(r);case 1:return r.file&&!u[0].pos.file&&(u[0].pos.file=r.file),u[0]}return i.body=u,i}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="BlockExpression",typeof e.extended=="function"&&e.extended(t),n.toStatement=function(){return L(this.pos,this.body)},n.compile=function(e,t,n,r){var o,a,i,s,c,l,u,f,d,p;if(t===at.block)this.toStatement().compile(e,t,n,r);else{for(o=[],a=T(this.body),c=0,u=a.length;u>c;++c)f=a[c],f.isNoop()&&c!==u-1||o.push(f);for(d=o,e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(s=e.sourcemap)!=null&&s.add(r.line,r.column,this.pos.line,this.pos.column),p=!I(t,at.insideParentheses)&&d.length>1,p&&r("("),c=0,i=d.length;i>c;++c)l=d[c],c>0&&(r(","),e.minify||r(" ")),l.compile(e,p?at.sequence:t,!1,r);p&&r(")"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()}},n.compileAsBlock=function(e,t,n,r){var o,a,i,s,c,l,u,f,d,p;if(t===at.block)this.compile(e,t,n,r);else{for(o=[],a=T(this.body),c=0,u=a.length;u>c;++c)f=a[c],f.isNoop()||o.push(f);for(d=o,e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(s=e.sourcemap)!=null&&s.add(r.line,r.column,this.pos.line,this.pos.column),p=!I(t,at.insideParentheses)&&d.length>1,p&&r("("),c=0,i=d.length;i>c;++c)l=d[c],c>0&&r(", "),l.compileAsBlock(e,p?at.sequence:t,!1,r);p&&r(")"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()}},n.isLarge=function(){var e,t;return t=this,(e=this._isLarge)==null?this._isLarge=A(this.body.length)>4||function(){var e,n,r;for(e=T(t.body),n=e.length;n--;)if(r=e[n],r.isLarge())return!0;return!1}():e},n.isSmall=function(){return!1},n.isNoop=function(){var e,t;return t=this,(e=this._isNoop)==null?this._isNoop=function(){var e,n,r;for(e=T(t.body),n=e.length;n--;)if(r=e[n],!r.isNoop())return!1;return!0}():e},n.walk=L.prototype.walk,n.last=function(){var e;return(e=this.body)[A(e.length)-1]},n.inspect=function(e){return l(e,"BlockExpression",this.pos,this.body)},n._toJSON=function(){return this.body},t.fromJSON=function(e,n,r){var o;return o=N.call(arguments,3),t(i(e,n,r),y(o))},t}(z),O=n.Block=function(e,t,n){var r;if(null==t)t=[];else{if(!w(t))throw TypeError("Expected body to be an Array, got "+k(t));for(r=t.length;r--;)if(!(t[r]instanceof it))throw TypeError("Expected "+("body["+r+"]")+" to be a "+E(it)+", got "+k(t[r]))}if(null==n)n=null;else if(!(n instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(n));return t.length===0?st(e):null==n&&function(){var e,n;for(e=t.length;e--;)if(n=t[e],!(n instanceof z))return!1;return!0}()?j(e,t):L(e,t,n)},n.Break=R=function(e){function t(e,r){var o;if(o=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(o.pos=e,null==r)r=null;else if(!(r instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(r));return o.label=r,o}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Break",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o;if(t!==at.block)throw Error("Cannot compile a statement except on the Block level");e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("break"),this.label!=null&&(r(" "),this.label.compile(e,at.insideParentheses,!1,r)),r(";"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile(this.pos.file)},n.walk=function(){return this},n.exitType=function(){return"break"},n.walk=function(e){var n,r;return r=this.label!=null?(n=e(this.label))!=null?n:this.label.walk(e):this.label,r!==this.label?t(this.pos,r):this},n.inspect=function(e){return l(e,"Break",this.pos,this.label)},n.isLarge=function(){return!1},n._toJSON=function(){return this.label!=null?[this.label]:[]},t.fromJSON=function(e,n,r,o){return t(i(e,n,r),o?$(o):null)},t}(pt),n.Call=P=function(t){function n(e,r,o,i){var s,c;if(c=this instanceof n?this:g(a),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(c.pos=e,null==r)r=st(e);else if(!(r instanceof t))throw TypeError("Expected func to be a "+E(t)+", got "+k(r));if(c.func=r,null==o)o=[];else{if(!w(o))throw TypeError("Expected args to be an Array, got "+k(o));for(s=o.length;s--;)if(!(o[s]instanceof t))throw TypeError("Expected "+("args["+s+"]")+" to be a "+E(t)+", got "+k(o[s]))}if(c.args=o,null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected isNew to be a Boolean, got "+k(i));return c.isNew=i,c}function r(t,n,r,o,a){var i,s,c,l,u;for(a("("),s=e(n),i=T(t),c=0,u=i.length;u>c;++c)l=i[c],a("\n"),a.indent(s.indent),l.compile(s,at.sequence,!1,a),u-1>c&&a(",");a("\n"),a.indent(n.indent),a(")")}function o(e,t,n,r,o){var a,i,s,c;for(o("("),a=T(e),c=0,i=a.length;i>c;++c)s=a[c],c>0&&(o(","),t.minify||o(" ")),s.compile(t,at.sequence,!1,o);o(")")}var a,c;return c=t.prototype,a=n.prototype=g(c),a.constructor=n,n.displayName="Call",typeof t.extended=="function"&&t.extended(n),a.compile=function(e,t,n,a){var i,s,c;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(i=e.sourcemap)!=null&&i.add(a.line,a.column,this.pos.line,this.pos.column),c=!I(t,at.callOrAccess)||!this.isNew&&(this.func instanceof Y||this.func instanceof F&&this.func.op==="."&&this.func.left instanceof Y),c&&a("("),this.isNew&&a("new "),this.func.compile(e,this.isNew?at.newCall:at.callOrAccess,n&&!c&&!this.isNew,a),s=!e.minify&&this.shouldCompileLarge()?r:o,s(this.args,e,t,n,a),c&&a(")"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},a.shouldCompileLarge=function(){var e;return e=this,A(this.args.length)>4?!0:function(){var t,n,r,o;for(t=T(e.args),r=t.length,n=r-2;n>=0;--n)if(o=t[n],!o.isSmall())return!0;return!1}()},a.hasLargeArgs=function(){var e,t;return t=this,(e=this._hasLargeArgs)==null?this._hasLargeArgs=A(this.args.length)>4?!0:function(){var e,n,r;for(e=T(t.args),n=e.length;n--;)if(r=e[n],!r.isSmall())return!0;return!1}():e},a.isLarge=function(){return this.func.isLarge()||this.hasLargeArgs()},a.isSmall=function(){var e,t;return t=this,(e=this._isSmall)==null?this._isSmall=this.func.isSmall()?function(){switch(t.args.length){case 0:return!0;case 1:return t.args[0].isSmall();default:return!1}}():!1:e},a.walk=function(e){var t,r,o;return o=(t=e(this.func))!=null?t:this.func.walk(e),r=s(this.args,e),this.func!==o||this.args!==r?n(this.pos,o,r,this.isNew):this},a.inspect=function(e){return l(e,"Call",this.pos,this.func,this.args,this.isNew)},a._toJSON=function(){return[f(this.func,0),this.isNew?1:0].concat(T(u(this.args,0)))},n.fromJSON=function(e,t,r,o,a){var s;return s=N.call(arguments,5),n(i(e,t,r),$(o),y(s),!!a)},n}(z),n.Comment=U=function(e){function t(e,r){var o;if(o=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(o.pos=e,"string"!=typeof r)throw TypeError("Expected text to be a String, got "+k(r));if(o.text=r,r.substring(0,2)!=="/*")throw Error("Expected text to start with '/*'");if(r.slice(-2)!=="*/")throw Error("Expected text to end with '*/'");return o}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Comment",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o,a,i,s,c;for(c=this.text.split("\n"),o=T(c),i=0,a=o.length;a>i;++i)s=o[i],i>0&&(r("\n"),e.minify||r.indent(e.indent)),r(s)},n.isConst=function(){return!0},n.constValue=function(){},n.isNoop=function(){return!1},n.walk=function(){return this},n.inspect=function(){return l("Comment",this.pos,this.text)},n._toJSON=function(){return[this.text]},t.fromJSON=function(e,n,r,o){return t(i(e,n,r),o)},t}(pt),n.Const=V=function(e){function t(e,r){var o;if(o=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(o.pos=e,null!=r&&"boolean"!=typeof r&&"number"!=typeof r&&"string"!=typeof r)throw TypeError("Expected value to be one of undefined or null or Boolean or Number or String, got "+k(r));return o.value=r,o}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Const",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o,a,i;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),a=this.value,void 0===a&&e.undefinedName!=null?r(e.undefinedName):(i=!x(t,at.increment)&&(void 0===a||"number"==typeof a&&!isFinite(a)),i&&r("("),r(yt(a)),i&&r(")")),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},n.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},n.isConst=function(){return!0},n.isNoop=t.prototype.isConst,n.constValue=function(){return this.value},n.walk=function(){return this},n.inspect=function(e){return"Const("+B(rt(this.value,null,c(e)))+")"},n._toJSON=function(){return typeof this.value!="number"||isFinite(this.value)?this.value===0&&p(this.value)?[0,2]:this.value===void 0?[]:[this.value]:[A(this.value)>0?1:A(this.value)<0?-1:0,1]},t.fromJSON=function(e,n,r,o,a){return t(i(e,n,r),1===a?A(o)/0:0===o&&2===a?-0:o)},t}(z),n.Continue=q=function(e){function t(e,r){var o;if(o=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(o.pos=e,null==r)r=null;else if(!(r instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(r));return o.label=r,o}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Continue",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o;if(t!==at.block)throw Error("Cannot compile a statement except on the Block level");return e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("continue"),this.label!=null&&(r(" "),this.label.compile(e,at.insideParentheses,!1,r)),r(";"),e.sourcemap!=null&&this.pos.file?e.sourcemap.popFile():void 0},n.walk=function(){return this},n.exitType=function(){return"continue"},n.isLarge=function(){return!1},n.walk=function(e){var n,r;return r=this.label!=null?(n=e(this.label))!=null?n:this.label.walk(e):this.label,r!==this.label?t(this.pop,r):this},n.inspect=function(e){return l(e,"Continue",this.pos,this.label)},n._toJSON=function(){return this.label!=null?[this.label]:[]},t.fromJSON=function(e,n,r,o){return t(i(e,n,r),o?$(o):null)},t}(pt),n.Debugger=W=function(e){function t(e){var r;if(r=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));return r.pos=e,r}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Debugger",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o;if(t!==at.block)throw Error("Cannot compile a statement except on the Block level");return(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("debugger;")},n.walk=function(){return this},n.isLarge=function(){return!1},n.inspect=function(e){return l(e,"Debugger",this.pos)},t.fromJSON=function(e,n,r){return t(i(e,n,r))},t}(pt),n.DoWhile=G=function(t){function n(e,t,o,a){var i;if(i=this instanceof n?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(i.pos=e,null==t)t=st(e);else if(!(t instanceof it))throw TypeError("Expected body to be a "+E(it)+", got "+k(t));if(null==o)o=st(e);else if(!(o instanceof z))throw TypeError("Expected test to be a "+E(z)+", got "+k(o));if(i.test=o,null==a)a=null;else if(!(a instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(a));return i.label=a,i.body=t.maybeToStatement(),o.isConst()&&!o.constValue()?O(e,[i.body],a):i}var r,o;return o=t.prototype,r=n.prototype=g(o),r.constructor=n,n.displayName="DoWhile",typeof t.extended=="function"&&t.extended(n),r.compile=function(t,n,r,o){var a,i;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(a=t.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column),i=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),r=!1,o(":"),i||o(" ")),o("do"),this.body.isNoop()?o(";"):(i||o(" "),o("{"),i||(o("\n"),o.indent(A(t.indent)+1),r=!0),this.body.compileAsStatement(e(t),r,o),r=!1,i||(o("\n"),o.indent(t.indent)),o("}")),i||o(" "),o("while"),i||o(" "),o("("),this.test.compile(t,at.insideParentheses,!1,o),o(");"),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()
},r.walk=function(e){var t,r,o,a;return r=(t=e(this.body))!=null?t:this.body.walk(e),a=(t=e(this.test))!=null?t:this.test.walk(e),o=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,r!==this.body||a!==this.test||o!==this.label?n(this.pos,r,a,o):this},r.inspect=function(e){return l(e,"DoWhile",this.pos,this.body,this.test,this.label)},r._toJSON=function(){return[this.label||0,f(this.test,0),f(this.body,0)]},n.fromJSON=function(e,t,r,o,a,s){return n(i(e,t,r),$(s),$(a),o?$(o):null)},n}(pt),n.Eval=J=function(e){function t(r,o){var a;if(a=this instanceof t?this:g(n),"object"!=typeof r||null===r)throw TypeError("Expected pos to be an Object, got "+k(r));return a.pos=r,null==o&&(o=st(r)),o instanceof e||(o=d(r,o)),a.code=o,a}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Eval",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),this.code instanceof V?r(String(this.code.value)):(r("eval("),this.code.compile(e,at.sequence,!1,r),r(")")),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},n.walk=function(e){var n,r;return r=(n=e(this.code))!=null?n:this.code.walk(e),r!==this.code?t(this.pops,r):this},n.inspect=function(e){return l(e,"Eval",this.pos,this.code)},n._toJSON=function(){return[f(this.code,0)]},t.fromJSON=function(e,n,r,o){return t(i(e,n,r),$(o))},t}(z),n.For=H=function(t){function n(e,t,o,a,i,s){var c;if(c=this instanceof n?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(c.pos=e,null==t)t=st(e);else if(!(t instanceof z))throw TypeError("Expected init to be a "+E(z)+", got "+k(t));if(c.init=t,null==o&&(o=V(e,!0)),null==a)a=st(e);else if(!(a instanceof z))throw TypeError("Expected step to be a "+E(z)+", got "+k(a));if(c.step=a,!(i instanceof it))throw TypeError("Expected body to be a "+E(it)+", got "+k(i));if(null==s)s=null;else if(!(s instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(s));return c.label=s,o instanceof z||(o=d(e,o)),o.isConst()&&!o.constValue()?t:(c.test=o,c.body=i.maybeToStatement(),c)}var r,o;return o=t.prototype,r=n.prototype=g(o),r.constructor=n,n.displayName="For",typeof t.extended=="function"&&t.extended(n),r.compile=function(t,n,r,o){var a,i,s;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");s=this.test.isConst()&&typeof this.test.constValue()!="boolean"?V(this.pos,!!this.test.constValue()):this.test,t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(a=t.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column),i=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),o(":"),i||o(" ")),this.init.isNoop()&&this.step.isNoop()?(o("while"),i||o(" "),o("("),s.compile(t,at.insideParentheses,!1,o)):(o("for"),i||o(" "),o("("),this.init.isNoop()||this.init.compileAsBlock(t,at.insideParentheses,!1,o),o(";"),i||o(" "),s.isConst()&&s.constValue()||s.compile(t,at.insideParentheses,!1,o),o(";"),i||o(" "),this.step.isNoop()||this.step.compileAsBlock(t,at.insideParentheses,!1,o)),o(")"),this.body.isNoop()?o(";"):(i||o(" "),o("{"),i||(o("\n"),o.indent(A(t.indent)+1)),this.body.compileAsStatement(e(t),!i,o),i||(o("\n"),o.indent(t.indent)),o("}")),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,r,o,a,i,s;return o=(t=e(this.init))!=null?t:this.init.walk(e),s=(t=e(this.test))!=null?t:this.test.walk(e),i=(t=e(this.step))!=null?t:this.step.walk(e),r=(t=e(this.body))!=null?t:this.body.walk(e),a=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,o!==this.init||s!==this.test||i!==this.step||r!==this.body||a!==this.label?n(this.pos,o,s,i,r,a):this},r.inspect=function(e){return l(e,"For",this.pos,this.init,this.test,this.step,this.body,this.label)},r._toJSON=function(){var e;return e=[this.label||0,f(this.init,0),f(this.test,0),f(this.step,0)],f(this.body)&&e.push.apply(e,T(this.body.toJSON())),e},n.fromJSON=function(e,t,r,o,a,s,c){var l;return l=N.call(arguments,7),n(i(e,t,r),$(a),$(s),$(c),$(l),o?$(o):null)},n}(pt),n.ForIn=K=function(t){function n(e,t,o,a,i){var s;if(s=this instanceof n?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(s.pos=e,!(t instanceof Q))throw TypeError("Expected key to be a "+E(Q)+", got "+k(t));if(s.key=t,null==o)o=st(line,column);else if(!(o instanceof z))throw TypeError("Expected object to be a "+E(z)+", got "+k(o));if(s.object=o,null==a)a=st(line,column);else if(!(a instanceof it))throw TypeError("Expected body to be a "+E(it)+", got "+k(a));if(null==i)i=null;else if(!(i instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(i));return s.label=i,s.body=a.maybeToStatement(),s}var r,o;return o=t.prototype,r=n.prototype=g(o),r.constructor=n,n.displayName="ForIn",typeof t.extended=="function"&&t.extended(n),r.compile=function(t,n,r,o){var a,i;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(a=t.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column),i=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),o(":"),i||o(" ")),o("for"),i||o(" "),o("("),this.key.compile(t,at.insideParentheses,!1,o),o(" in "),this.object.compile(t,at.insideParentheses,!1,o),o(")"),this.body.isNoop()?o(";"):(i||o(" "),o("{"),i||(o("\n"),o.indent(A(t.indent)+1)),this.body.compileAsStatement(e(t),!i,o),i||(o("\n"),o.indent(t.indent)),o("}")),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,r,o,a,i;return o=(t=e(this.key))!=null?t:this.key.walk(e),i=(t=e(this.object))!=null?t:this.object.walk(e),r=(t=e(this.body))!=null?t:this.body.walk(e),a=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,o!==this.key||i!==this.object||r!==this.body||a!==this.label?n(this.pos,o,i,r):this},r.inspect=function(e){return l(e,"ForIn",this.pos,this.key,this.object,this.body,this.label)},r._toJSON=function(){var e;return e=[this.label||0,this.key,f(this.object,0)],f(this.body)&&e.push.apply(e,T(this.body.toJSON())),e},n.fromJSON=function(e,t,r,o,a,s){var c;return c=N.call(arguments,6),n(i(e,t,r),$(a),$(s),$(c),o?$(o):null)},n}(pt),n.Func=Y=function(e){function t(e,n,o,a,i,s){var c,l,u,f;if(f=this instanceof t?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(f.pos=e,null==n)n=null;else if(!(n instanceof Q))throw TypeError("Expected name to be one of null or "+E(Q)+", got "+k(n));if(f.name=n,null==o)o=[];else{if(!w(o))throw TypeError("Expected params to be an Array, got "+k(o));for(c=o.length;c--;)if(!(o[c]instanceof Q))throw TypeError("Expected "+("params["+c+"]")+" to be a "+E(Q)+", got "+k(o[c]))}if(f.params=o,null==a)a=[];else{if(!w(a))throw TypeError("Expected variables to be an Array, got "+k(a));for(l=a.length;l--;)if(typeof a[l]!="string")throw TypeError("Expected "+("variables["+l+"]")+" to be a String, got "+k(a[l]))}if(f.variables=a,null==i)i=st(line,column);else if(!(i instanceof it))throw TypeError("Expected body to be a "+E(it)+", got "+k(i));if(f.body=i,null==s)s=[];else{if(!w(s))throw TypeError("Expected declarations to be an Array, got "+k(s));for(u=s.length;u--;)if(typeof s[u]!="string")throw TypeError("Expected "+("declarations["+u+"]")+" to be a String, got "+k(s[u]))}return f.declarations=s,h(o,a),f}var n,r;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="Func",typeof e.extended=="function"&&e.extended(t),r.compile=function(e,t,n,r){var o,a;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),a=n&&!this.name,a&&r("("),m(e,r,this.name,this.params,this.declarations,this.variables,this.body),a&&r(")"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},r.compileAsStatement=function(e,t,n){this.compile(e,at.block,t,n),t&&this.name||n(";")},r.isLarge=function(){return!0},r.isNoop=function(){return this.name==null},r.walk=function(e){var n,r,o,a;return o=this.name?(n=e(this.name))!=null?n:this.name.walk(e):this.name,a=s(this.params,e),r=this.body.walk(e),o!==this.name||a!==this.params||r!==this.body?t(this.pos,o,a,this.variables,r,this.declarations,this.meta):this},r.inspect=function(e){return l(e,"Func",this.pos,this.name,this.params,this.variables,this.body,this.declarations,this.meta)},r._toJSON=function(){var e;return e=[this.name||0,u(this.params,0),u(this.variables,0),u(this.declarations,0)],f(this.body)&&e.push.apply(e,T(this.body.toJSON())),e},t.fromJSON=function(e,n,r,o,a,s,c){var l;return l=N.call(arguments,7),t(i(e,n,r),o?$(o):void 0,y(a),s,$(l),c)},t}(z),n.Ident=Q=function(e){function t(e,n,r){var a;if(a=this instanceof t?this:g(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(a.pos=e,"string"!=typeof n)throw TypeError("Expected name to be a String, got "+k(n));if(a.name=n,null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected allowUnacceptable to be a Boolean, got "+k(r));if(!r&&!ot(n,!0))throw Error("Not an acceptable identifier name: "+n);return a}function n(e){return"\\u"+B(lt(e.charCodeAt(0).toString(16),4,"0"))}var r,o;return r=e.prototype,o=t.prototype=g(r),o.constructor=t,t.displayName="Ident",typeof e.extended=="function"&&e.extended(t),o.compile=function(e,t,r,o){var a;(a=e.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column,this.pos.file),o(this.name.replace(/[\u0000-\u001f\u0080-\uffff]/g,n))},o.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},o.walk=function(){return this},o.inspect=function(e){return l(e,"Ident",this.pos,this.name)},o.isNoop=function(){return!0},o._toJSON=function(){return[this.name]},t.fromJSON=function(e,n,r,o){return t(i(e,n,r),o)},t}(z),n.IfStatement=tt=function(t){function n(e,t,o,a,i){var s;if(s=this instanceof n?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(s.pos=e,null==t)t=st(e);else if(!(t instanceof z))throw TypeError("Expected test to be a "+E(z)+", got "+k(t));if(null==o)o=st(e);else if(!(o instanceof it))throw TypeError("Expected whenTrue to be a "+E(it)+", got "+k(o));if(null==a)a=st(e);else if(!(a instanceof it))throw TypeError("Expected whenFalse to be a "+E(it)+", got "+k(a));if(null==i)i=null;else if(!(i instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(i));return s.label=i,t instanceof vt&&t.op==="!"&&t.node instanceof vt&&t.node.op==="!"&&(t=t.node.node),t.isConst()?t.constValue()?O(e,[o],i):O(e,[a],i):(o=o.maybeToStatement(),a=a.maybeToStatement(),o instanceof st?a instanceof st?t.maybeToStatement():n.call(s,e,vt(t.pos,"!",t),a,o,i):(a instanceof st&&o instanceof n&&o.whenFalse instanceof st&&o.label==null?(s.test=F(e,t,"&&",o.test),s.whenTrue=o.whenTrue,s.whenFalse=a):(s.test=t,s.whenTrue=o,s.whenFalse=a),s))}var r,o;return o=t.prototype,r=n.prototype=g(o),r.constructor=n,n.displayName="IfStatement",typeof t.extended=="function"&&t.extended(n),r.compile=function(t,r,o,a){var i,s,c,l;if(r!==at.block)throw Error("Cannot compile a statement except on the Block level");this.whenTrue.isNoop()?this.whenFalse.isNoop()?this.test.compileAsStatement(t,!0,a):n(this.pos,vt(this.test.pos,"!",this.test),this.whenFalse,this.whenTrue,this.label).compile(t,r,o,a):(t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(i=t.sourcemap)!=null&&i.add(a.line,a.column,this.pos.line,this.pos.column),c=t.minify,this.label!=null&&(this.label.compile(t,r,o,a),a(":"),c||a(" ")),a("if"),c||a(" "),a("("),this.test.compile(t,at.insideParentheses,!1,a),a(")"),c||a(" "),a("{"),s=e(t),c||(a("\n"),a.indent(s.indent)),this.whenTrue.compileAsStatement(s,!c,a),c||(a("\n"),a.indent(t.indent)),a("}"),l=this.whenFalse,l.isNoop()||(c||a(" "),a("else"),l instanceof n&&l.label==null?(a(" "),l.compile(t,r,!1,a)):(c||a(" "),a("{"),c||(a("\n"),a.indent(s.indent)),l.compileAsStatement(s,!c,a),c||(a("\n"),a.indent(t.indent)),a("}"))),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile())},r.walk=function(e){var t,n,r,o,a;return r=(t=e(this.test))!=null?t:this.test.walk(e),a=(t=e(this.whenTrue))!=null?t:this.whenTrue.walk(e),o=(t=e(this.whenFalse))!=null?t:this.whenFalse.walk(e),n=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,r!==this.test||a!==this.whenTrue||o!==this.whenFalse||n!==this.label?Z(this.pos,r,a,o,n):this},r.mutateLast=function(e,t){var n,r;return r=this.whenTrue.mutateLast(e,t),n=this.whenFalse.mutateLast(e,t),r!==this.whenTrue||n!==this.whenFalse?Z(this.pos,this.test,r,n,this.label):this},r.exitType=function(){var e,t;return this._exitType===void 0?(t=this.whenTrue.exitType(),e=this.whenFalse.exitType(),this._exitType=t===e?t:null):this._exitType},r.isNoop=function(){var e;return(e=this._isNoop)==null?this._isNoop=this.test.isNoop()&&this.whenTrue.isNoop()&&this.whenFalse.isNoop():e},r.inspect=function(e){return l(e,"IfStatement",this.pos,this.test,this.whenTrue,this.whenFalse)},r._toJSON=function(){var e;return e=[this.label||0,f(this.test,0),f(this.whenTrue,0)],f(this.whenFalse)&&e.push.apply(e,T(this.whenFalse.toJSON())),e},n.fromJSON=function(e,t,r,o,a,s){var c;return c=N.call(arguments,6),n(i(e,t,r),$(a),$(s),$(c),o?$(o):null)},n}(pt),n.IfExpression=et=function(t){function n(e,r,o,a){var i;if(i=this instanceof n?this:g(s),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(i.pos=e,null==r)r=st(e);else if(!(r instanceof t))throw TypeError("Expected test to be a "+E(t)+", got "+k(r));return null==o&&(o=st(e)),null==a&&(a=st(e)),o instanceof t||(o=d(e,o)),a instanceof t||(a=d(e,a)),r instanceof vt&&r.op==="!"&&r.node instanceof vt&&r.node.op==="!"&&(r=r.node.node),r.isConst()?r.constValue()?o:a:(a instanceof st&&o instanceof n&&o.whenFalse instanceof st?(i.test=F(e,r,"&&",o.test),i.whenTrue=o.whenTrue,i.whenFalse=a):(i.test=r,i.whenTrue=o,i.whenFalse=a),i)}function r(e,t,n,r,o,a){var i;i=r.minify,e.compile(r,at.inlineCondition,o,a),a(i?"?":" ? "),t.compile(r,at.inlineCondition,!1,a),a(i?":":" : "),n.compile(r,at.inlineCondition,!1,a)}function o(t,r,a,i,s,c){var l,u,f,d;l=e(i),f=t instanceof n,f&&c("("),t.compile(l,f?at.insideParentheses:at.inlineCondition,s&&!f,c),f&&c(")"),u=r.isLarge(),u?(c("\n"),c.indent(l.indent),c("? ")):c(" ? "),d=r instanceof n,d&&c("("),r.compile(l,d?at.insideParentheses:at.inlineCondition,!1,c),d&&c(")"),c("\n"),c.indent(l.indent),c(": "),a instanceof n?o(a.test,a.whenTrue,a.whenFalse,i,!1,c):a.compile(l,at.inlineCondition,!1,c)}var a,s;return a=t.prototype,s=n.prototype=g(a),s.constructor=n,n.displayName="IfExpression",typeof t.extended=="function"&&t.extended(n),s.toStatement=function(){return tt(this.pos,this.test,this.whenTrue,this.whenFalse)},s.compile=function(e,t,n,a){var i,s,c;t===at.block?this.toStatement().compile(e,t,n,a):(e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(i=e.sourcemap)!=null&&i.add(a.line,a.column,this.pos.line,this.pos.column),c=!I(t,at.inlineCondition),c&&a("("),s=e.minify||!this.whenTrue.isLarge()&&!this.whenFalse.isLarge()?r:o,s(this.test,this.whenTrue,this.whenFalse,e,!c&&n,a),c&&a(")"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile())},s.compileAsBlock=function(e,t,n,r){this.whenTrue.isNoop()?this.whenFalse.isNoop()?this.test.compileAsBlock(e,t,n,r):F(this.pos,this.test,"||",this.whenFalse).compileAsBlock(e,t,n,r):this.whenFalse.isNoop()?F(this.pos,this.test,"&&",this.whenTrue).compileAsBlock(e,t,n,r):this.compile(e,t,n,r)},s.isLarge=function(){var e;return(e=this._isLarge)==null?this._isLarge=!this.test.isSmall()||!this.whenTrue.isSmall()||!this.whenFalse.isSmall():e},s.isSmall=function(){return!1},s.isNoop=function(){var e;return(e=this._isNoop)==null?this._isNoop=this.test.isNoop()&&this.whenTrue.isNoop()&&this.whenFalse.isNoop():e},s.walk=tt.prototype.walk,s.inspect=function(e){return l(e,"IfExpression",this.pos,this.test,this.whenTrue,this.whenFalse)},s._toJSON=function(){var e;return e=[f(this.test,0),f(this.whenTrue,0)],f(this.whenFalse)&&e.push.apply(e,T(this.whenFalse.toJSON())),e},n.fromJSON=function(e,t,r,o,a){var s;return s=N.call(arguments,5),n(i(e,t,r),$(o),$(a),$(s))},n}(z),Z=n.If=function(e,t,n,r,o){if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));return n instanceof pt||r instanceof pt||null!=o?tt(e,t,n,r,o):et(e,t,n,r)},n.Noop=st=function(e){function t(e){var n;if(n=this instanceof t?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));return n.pos=e,n}var n,r;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="Noop",typeof e.extended=="function"&&e.extended(t),r.compileAsStatement=function(){},r.compile=function(e,t,n,r){I(t,at.block)||V(this.pos,void 0).compile(e,t,n,r)},r.isConst=function(){return!0},r.isNoop=t.prototype.isConst,r.constValue=function(){},r.walk=function(){return this},r.mutateLast=function(e,t){return(null!=t?t.noop:void 0)?e(this):this},r.inspect=function(e){return l(e,"Noop",this.pos)},t.fromJSON=function(e,n,r){return t(i(e,n,r))},t}(z),n.Obj=ct=function(t){function n(e,t){var o,a;if(a=this instanceof n?this:g(p),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(a.pos=e,null==t)t=[];else{if(!w(t))throw TypeError("Expected elements to be an Array, got "+k(t));for(o=t.length;o--;)if(!(t[o]instanceof h))throw TypeError("Expected "+("elements["+o+"]")+" to be a "+E(h)+", got "+k(t[o]))}return a.elements=t,r(t),a}function r(e){var t,n,r,o,a;for(o=[],t=T(e),n=t.length;n--;){if(a=t[n],r=a.key,v(r,o))throw Error("Found duplicate key: "+B(yt(r)));o.push(r)}}function o(e){var t;return ot(e)?e:(t=Number(e),t===t&&String(t)===e?e:yt(e))}function a(t,n,r){var a,i,s,c,l,u;for(i=e(n),a=T(t),c=0,u=a.length;u>c;++c)s=a[c],r("\n"),r.indent(i.indent),l=s.key,r(o(l)),r(": "),s.value.compile(i,at.sequence,!1,r),u-1>c&&r(",");r("\n"),r.indent(n.indent)}function c(e,t,n){var r,a,i,s,c,l;if(e.length){for(l=t.minify,l||n(" "),r=T(e),s=0,a=r.length;a>s;++s)i=r[s],s>0&&(n(","),l||n(" ")),c=i.key,n(o(c)),n(":"),l||n(" "),i.value.compile(t,at.sequence,!1,n);l||n(" ")}}var u,p,h;return u=t.prototype,p=n.prototype=g(u),p.constructor=n,n.displayName="Obj",typeof t.extended=="function"&&t.extended(n),p.compile=function(e,t,n,r){var o,i,s;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),s=n,s&&r("("),r("{"),i=!e.minify&&this.shouldCompileLarge()?a:c,i(this.elements,e,r),r("}"),s&&r(")"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},p.compileAsBlock=function(e,t,n,r){var o;o=this,j(this.pos,function(){var e,t,n,r,a;for(e=[],t=T(o.elements),n=0,r=t.length;r>n;++n)a=t[n],e.push(a.value);return e}()).compileAsBlock(e,t,n,r)},p.compileAsStatement=function(e,t,n){var r;r=this,L(this.pos,function(){var e,t,n,o,a;for(e=[],t=T(r.elements),n=0,o=t.length;o>n;++n)a=t[n],e.push(a.value);return e}()).compileAsStatement(e,t,n)},p.shouldCompileLarge=function(){switch(this.elements.length){case 0:return!1;case 1:return this.elements[0].isLarge();default:return this.isLarge()}},p.isSmall=function(){switch(this.elements.length){case 0:return!0;case 1:return this.elements[0].isSmall();default:return!1}},p.isLarge=function(){var e,t;return t=this,(e=this._isLarge)==null?this._isLarge=A(this.elements.length)>4||function(){var e,n,r;for(e=T(t.elements),n=e.length;n--;)if(r=e[n],!r.isSmall())return!0;return!1}():e},p.isNoop=function(){var e,t;return t=this,(e=this._isNoop)==null?this._isNoop=function(){var e,n,r;for(e=T(t.elements),n=e.length;n--;)if(r=e[n],!r.isNoop())return!1;return!0}():e},p.walk=function(e){var t;return t=s(this.elements,e),t!==this.elements?n(this.pos,t):this},p.inspect=function(e){return l(e,"Obj",this.pos,this.elements)},p._toJSON=function(){var e,t,n,r,o,a;for(a=[],e=T(this.elements),t=0,n=e.length;n>t;++t)r=e[t],o=r.pos,a.push(o.line,o.column,o.file,r.key,f(r.value));return a},n.fromJSON=function(e,t,r){var o,a,s,c,l,u,f,d,p;for(a=N.call(arguments,3),d=[],s=0,o=a.length;o>s;s+=5)f=a[s],l=a[s+1],u=a[s+2],c=a[s+3],p=a[s+4],d.push(h(i(f,l,u),c,$(p)));return n(i(e,t,r),d)},n.Pair=h=function(){function e(r,o,a){var i;if(i=this instanceof e?this:g(n),"object"!=typeof r||null===r)throw TypeError("Expected pos to be an Object, got "+k(r));if(i.pos=r,"string"!=typeof o)throw TypeError("Expected key to be a String, got "+k(o));return i.key=o,null==a&&(a=st(line,column)),a instanceof t||(a=d(r,a)),i.value=a,i}var n;return n=e.prototype,e.displayName="ObjPair",n.isSmall=function(){return this.value.isSmall()},n.isLarge=function(){return this.value.isLarge()},n.isNoop=function(){return this.value.isNoop()},n.walk=function(t){var n,r;return r=(n=t(this.value))!=null?n:this.value.walk(t),r!==this.value?e(this.pos,this.key,r):this},n.inspect=function(e){return l(e,"Pair",this.pos,this.key,this.value)},e}(),n}(z),n.Regex=ut=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(a.pos=e,"string"!=typeof n)throw TypeError("Expected source to be a String, got "+k(n));if(a.source=n,null==o)o="";else if("string"!=typeof o)throw TypeError("Expected flags to be a String, got "+k(o));return a.flags=o,a}var n,r;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="Regex",typeof e.extended=="function"&&e.extended(t),r.compile=function(e,t,n,r){var o;(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("/"),r(this.source.replace(/(\\\\)*\\?\//g,"$1\\/")||"(?:)"),r("/"),r(this.flags)},r.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},r.isNoop=function(){return!0},r.walk=function(){return this},r.inspect=function(e){return l(e,"Regex",this.pos,this.source,this.flags)},r._toJSON=function(){return[this.source,this.flags]},t.fromJSON=function(e,n,r,o,a){return t(i(e,n,r),o,a)},t}(z),n.Return=ft=function(e){function t(e,r){var o;if(o=this instanceof t?this:g(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(o.pos=e,null==r)r=st(e);else if(!(r instanceof z))throw TypeError("Expected node to be a "+E(z)+", got "+k(r));return o.node=r,typeof r.toStatement=="function"?r.toStatement().mutateLast(function(n){return t(e,n)},{noop:!0}):o}var n,r;return r=e.prototype,n=t.prototype=g(r),n.constructor=t,t.displayName="Return",typeof e.extended=="function"&&e.extended(t),n.compile=function(e,t,n,r){var o;e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("return"),this.node.isConst()&&this.node.constValue()===void 0||(r(" "),this.node.compile(e,at.insideParentheses,!1,r)),r(";"),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},n.walk=function(e){var n,r;return r=(n=e(this.node))!=null?n:this.node.walk(e),r!==this.node?t(this.pos,r):this},n.exitType=function(){return"return"},n.isSmall=function(){return this.node.isSmall()},n.isLarge=function(){return this.node.isLarge()},n.inspect=function(e){return l(e,"Return",this.pos,this.node)},n.mutateLast=function(e,n){var r;return(null!=n?n["return"]:void 0)?(r=this.node.mutateLast(e,n),r!==this.node?t(this.pos,r):this):this},n._toJSON=function(){return f(this.node)?this.node.toJSON():[]},t.fromJSON=function(e,n,r){var o;return o=N.call(arguments,3),t(i(e,n,r),$(o))},t}(pt),n.Root=dt=function(){function e(t,r,o,a){var i,s,c;if(c=this instanceof e?this:g(n),"object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+k(t));if(c.pos=t,null==r)r=st(t);else if(!(r instanceof it))throw TypeError("Expected body to be a "+E(it)+", got "+k(r));if(c.body=r,null==o)o=[];else{if(!w(o))throw TypeError("Expected variables to be an Array, got "+k(o));for(i=o.length;i--;)if(typeof o[i]!="string")throw TypeError("Expected "+("variables["+i+"]")+" to be a String, got "+k(o[i]))}if(c.variables=o,null==a)a=[];else{if(!w(a))throw TypeError("Expected declarations to be an Array, got "+k(a));for(s=a.length;s--;)if(typeof a[s]!="string")throw TypeError("Expected "+("declarations["+s+"]")+" to be a String, got "+k(a[s]))}return c.declarations=a,h([],o),c}var n;return n=e.prototype,e.displayName="Root",n.compile=function(e){var n,r,i,s,c,l,u,f,d,p,h,m,y,g;return null==e&&(e={}),e.indent||(e.indent=0),e.uglify||typeof e.writer!="function"||(g=e.writer),p=g?o(g):a(),h=(new Date).getTime(),e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(n=e.sourcemap)!=null&&n.add(p.line,p.column,this.pos.line,this.pos.column),_(e,p,this.declarations,this.variables,this.body,!0),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile(),i=(new Date).getTime(),typeof e.progress=="function"&&e.progress("compile",A(i)-A(h)),s=0,null==g&&(r=p.toString(),e.uglify&&(c=t("fs"),e.sourcemap!=null&&(d=t("path"),f=t("os"),m=d.join(f.tmpDir(),"gs-"+Math.random()*4294967296+".map"),c.writeFileSync(m,e.sourcemap.toString(),"utf8")),y=t("uglify-js"),(n=y.AST_Node)!=null&&(u=n.warn_function),"function"==typeof u&&(y.AST_Node.warn_function=function(){}),l=y.minify(r,{fromString:!0,inSourceMap:m,outSourceMap:(n=e.sourcemap)!=null?n.generatedFile:void 0}),null!=u&&(y.AST_Node.warn_function=u),null!=m&&c.unlinkSync(m),r=l.code,s=(new Date).getTime(),typeof e.progress=="function"&&e.progress("uglify",s-A(i)),e.sourcemap!=null&&(e.sourcemap=l.map)),typeof e.writer=="function"&&(e.writer(r),r="")),{compileTime:A(i)-A(h),uglifyTime:e.uglify?s-A(i):void 0,code:r||""}},n.toString=function(e){return null==e&&(e={}),this.compile(e).code},n.isLarge=function(){return!0},n.walk=function(t){var n;return n=this.body.walk(t),n!==this.body?e(this.pos,n,this.variables,this.declarations):this},n.mutateLast=function(t,n){var r;return r=this.body.mutateLast(t,n),r!==this.body?e(this.pos,r,this.variables,this.declarations):this},n.exitType=function(){return this.last().exitType()},n.last=function(){var e;return(e=this.body)[A(e.length)-1]},n.inspect=function(e){return l(e,"Root",this.pos,this.body,this.variables,this.declarations)},n._toJSON=function(){var e;return e=[u(this.variables,0),u(this.declarations,0)],f(this.body)&&e.push.apply(e,T(this.body.toJSON())),e},e.fromJSON=function(t,n,r,o,a){var s;return s=N.call(arguments,5),e(i(t,n,r),$(s),o,a)},e}(),n.This=_t=function(e){function t(e){var n;if(n=this instanceof t?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));return n.pos=e,n}var n,r;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="This",typeof e.extended=="function"&&e.extended(t),r.compile=function(e,t,n,r){var o;(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("this")},r.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},r.isNoop=function(){return!0},r.walk=function(){return this},r.inspect=function(e){return l(e,"This",this.pos)},t.fromJSON=function(e,n,r){return t(i(e,n,r))},t}(z),n.Throw=mt=function(e){function t(e,n){var o;if(o=this instanceof t?this:g(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(o.pos=e,null==n)n=st(line,column);else if(!(n instanceof z))throw TypeError("Expected node to be a "+E(z)+", got "+k(n));return o.node=n,typeof n.toStatement=="function"?n.toStatement().mutateLast(function(e){return t(o.pos,e)},{noop:!0}):o}var n,r;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="Throw",typeof e.extended=="function"&&e.extended(t),r.compile=function(e,t,n,r){var o;return e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(o=e.sourcemap)!=null&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("throw "),this.node.compile(e,at.insideParentheses,!1,r),r(";"),e.sourcemap!=null&&this.pos.file?e.sourcemap.popFile():void 0},r.walk=function(e){var n,r;return r=(n=e(this.node))!=null?n:this.node.walk(e),r!==this.node?t(this.pos,r):this},r.exitType=function(){return"throw"},r.isSmall=function(){return this.node.isSmall()},r.isLarge=function(){return this.node.isLarge()},r.inspect=function(e){return l(e,"Throw",this.pos,this.node)},r._toJSON=function(){return f(this.node)?this.node.toJSON():[]},t.fromJSON=function(e,n,r){var o;return o=N.call(arguments,3),t(i(e,n,r),$(o))},t}(pt),n.Switch=ht=function(t){function n(e,t,r,i,s){var c,l;if(l=this instanceof n?this:g(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(l.pos=e,null==t&&(t=st(e)),null==r)r=[];else{if(!w(r))throw TypeError("Expected cases to be an Array, got "+k(r));for(c=r.length;c--;)if(!(r[c]instanceof a))throw TypeError("Expected "+("cases["+c+"]")+" to be a "+E(a)+", got "+k(r[c]))}if(l.cases=r,null==i)i=st(e);else if(!(i instanceof it))throw TypeError("Expected defaultCase to be a "+E(it)+", got "+k(i));if(null==s)s=null;else if(!(s instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(s));return l.label=s,t instanceof z||(t=d(e,t)),l.node=t,l.defaultCase=i.maybeToStatement(),l}var r,o,a;return r=t.prototype,o=n.prototype=g(r),o.constructor=n,n.displayName="Switch",typeof t.extended=="function"&&t.extended(n),o.compile=function(t,n,r,o){var a,i,s,c,l,u,f;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");for(t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(c=t.sourcemap)!=null&&c.add(o.line,o.column,this.pos.line,this.pos.column),f=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),o(":"),f||o(" ")),o("switch"),f||o(" "),o("("),this.node.compile(t,at.insideParentheses,!1,o),o(")"),f||o(" "),o("{"),u=e(t),a=T(this.cases),i=0,s=a.length;s>i;++i)l=a[i],f||(o("\n"),o.indent(t.indent)),o("case "),l.node.compile(t,at.insideParentheses,!1,o),o(":"),l.body.isNoop()||(l.node.isSmall()&&l.body.isSmall()?(f||o(" "),l.body.compileAsStatement(t,!0,o)):(f||(o("\n"),o.indent(u.indent)),l.body.compileAsStatement(u,!0,o)));this.defaultCase.isNoop()||(f||(o("\n"),o.indent(t.indent)),o("default:"),this.defaultCase.isSmall()?(f||o(" "),this.defaultCase.compileAsStatement(t,!0,o)):(f||(o("\n"),o.indent(u.indent)),this.defaultCase.compileAsStatement(u,!0,o))),f||(o("\n"),o.indent(t.indent)),o("}"),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()},o.walk=function(e){var t,r,o,a,i;return i=(t=e(this.node))!=null?t:this.node.walk(e),r=s(this.cases,e),o=(t=e(this.defaultCase))!=null?t:this.defaultCase.walk(e),a=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,i!==this.node||r!==this.cases||o!==this.defaultCase||a!==this.label?n(this.pos,i,r,o,a):this},o.inspect=function(e){return this.inspectHelper(e,"Switch",this.pos,this.node,this.cases,this.defaultCase,this.label)},o._toJSON=function(){var e,t,n,r,o;for(o=[this.label||0,f(this.node,0)],e=T(this.cases),t=0,n=e.length;n>t;++t)r=e[t],o.push(r.pos.line,r.pos.column,r.pos.file,f(r.node,0),f(r.body,0));return this.defaultCase instanceof st||o.push(f(this.defaultCase,0)),o},n.fromJSON=function(e,t,r,o,s){var c,l,u,f,d,p,h,_,m,y;switch(c=N.call(arguments,5),m=c.length,m%5){case 0:break;case 1:--m,h=c[m];break;default:throw Error("Unknown number of arguments passed to fromJSON")}for(y=[],_=0;m>_;_+=5)d=c[_],u=c[_+1],f=c[_+2],p=c[_+3],l=c[_+4],y.push(a(i(d,u,f),$(p),$(l)));return n(i(e,t,r),$(s),y,$(h),o?$(o):null)},n.Case=a=function(){function e(n,r,o){var a;if(a=this instanceof e?this:g(t),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+k(n));if(a.pos=n,null==r&&(r=st(n)),null==o)o=st(n);else if(!(o instanceof it))throw TypeError("Expected body to be a "+E(it)+", got "+k(o));
return r instanceof z||(r=d(n,r)),a.node=r,a.body=o.maybeToStatement(),a}var t;return t=e.prototype,e.displayName="SwitchCase",t.isLarge=function(){return!0},t.isSmall=function(){return!1},t.walk=function(t){var n,r,o;return o=(n=t(this.node))!=null?n:this.node.walk(t),r=(n=t(this.body))!=null?n:this.body.walk(t),o!==this.node||r!==this.body?e(this.pos,o,r):this},t.inspect=function(e){return l(e,"Case",this.pos,this.node,this.body)},e}(),n}(pt),n.TryCatch=gt=function(t){function n(e,t,r,a,i){var s;if(s=this instanceof n?this:g(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(s.pos=e,null==t)t=st(e);else if(!(t instanceof it))throw TypeError("Expected tryBody to be a "+E(it)+", got "+k(t));if(!(r instanceof Q))throw TypeError("Expected catchIdent to be a "+E(Q)+", got "+k(r));if(s.catchIdent=r,null==a)a=st(e);else if(!(a instanceof it))throw TypeError("Expected catchBody to be a "+E(it)+", got "+k(a));if(null==i)i=null;else if(!(i instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(i));return s.label=i,s.tryBody=t.maybeToStatement(),s.tryBody.isNoop()?s.tryBody:(s.catchBody=a.maybeToStatement(),s)}var r,o;return r=t.prototype,o=n.prototype=g(r),o.constructor=n,n.displayName="TryCatch",typeof t.extended=="function"&&t.extended(n),o.compile=function(t,n,r,o){var a,i,s;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(a=t.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column),s=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),o(":"),s||o(" ")),o(s?"try{":"try {\n"),i=e(t),s||o.indent(i.indent),this.tryBody.compileAsStatement(i,!0,o),s||(o("\n"),o.indent(t.indent)),o(s?"}catch(":"} catch ("),this.catchIdent.compile(t,at.insideParentheses,!1,o),o(s?"){":") {"),this.catchBody.isNoop()||(s||(o("\n"),o.indent(i.indent)),this.catchBody.compileAsStatement(i,!0,o),s||(o("\n"),o.indent(t.indent))),o("}"),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()},o.walk=function(e){var t,r,o,a,i;return i=(t=e(this.tryBody))!=null?t:this.tryBody.walk(e),o=(t=e(this.catchIdent))!=null?t:this.catchIdent.walk(e),r=(t=e(this.catchBody))!=null?t:this.catchBody.walk(e),a=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,i!==this.tryBody||o!==this.catchIdent||r!==this.catchBody||a!==this.label?n(this.pos,i,o,r,a):this},o.inspect=function(e){return l(e,"TryCatch",this.pos,this.tryBody,this.catchIdent,this.catchBody,this.label)},o._toJSON=function(){var e;return e=[this.label||0,f(this.tryBody,0),this.catchIdent],f(this.catchBody)&&e.push.apply(e,T(this.catchBody.toJSON())),e},n.fromJSON=function(e,t,r,o,a,s){var c;return c=N.call(arguments,6),n(i(e,t,r),$(a),$(s),$(c),o?$(o):null)},n}(pt),n.TryFinally=bt=function(t){function n(e,t,r,a){var i;if(i=this instanceof n?this:g(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+k(e));if(i.pos=e,null==t)t=st(e);else if(!(t instanceof it))throw TypeError("Expected tryBody to be a "+E(it)+", got "+k(t));if(null==r)r=st(e);else if(!(r instanceof it))throw TypeError("Expected finallyBody to be a "+E(it)+", got "+k(r));if(null==a)a=null;else if(!(a instanceof Q))throw TypeError("Expected label to be one of "+(E(Q)+" or null")+", got "+k(a));if(i.label=a,i.tryBody=t.maybeToStatement(),i.finallyBody=r.maybeToStatement(),null==a){if(i.tryBody.isNoop())return i.finallyBody;if(i.finallyBody.isNoop())return i.tryBody}return i}var r,o;return r=t.prototype,o=n.prototype=g(r),o.constructor=n,n.displayName="TryFinally",typeof t.extended=="function"&&t.extended(n),o.compile=function(t,n,r,o){var a,i,s;if(n!==at.block)throw Error("Cannot compile a statement except on the Block level");t.sourcemap!=null&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),(a=t.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column),s=t.minify,this.label!=null&&(this.label.compile(t,n,r,o),o(":"),s||o(" ")),o(s?"try{":"try {\n"),i=e(t),s||o.indent(i.indent),this.tryBody instanceof gt&&this.tryBody.label==null?(this.tryBody.tryBody.compileAsStatement(i,!0,o),s||(o("\n"),o.indent(t.indent)),o(s?"}catch(":"} catch ("),this.tryBody.catchIdent.compile(t,at.insideParentheses,!1,o),o(s?"){":") {"),this.tryBody.catchBody.isNoop()||(s||(o("\n"),o.indent(i.indent)),this.tryBody.catchBody.compileAsStatement(i,!0,o),s||(o("\n"),o.indent(t.indent)))):(this.tryBody.compileAsStatement(i,!0,o),s||(o("\n"),o.indent(t.indent))),o(s?"}finally{":"} finally {\n"),s||o.indent(i.indent),this.finallyBody.compileAsStatement(i,!0,o),s||(o("\n"),o.indent(t.indent)),o("}"),t.sourcemap!=null&&this.pos.file&&t.sourcemap.popFile()},o.walk=function(e){var t,r,o,a;return a=(t=e(this.tryBody))!=null?t:this.tryBody.walk(e),r=(t=e(this.finallyBody))!=null?t:this.finallyBody.walk(e),o=this.label!=null?(t=e(this.label))!=null?t:this.label.walk(e):this.label,a!==this.tryBody||r!==this.finallyBody||o!==this.label?n(this.pos,a,r,o):this},o.inspect=function(e){return l(e,"TryFinally",this.pos,this.tryBody,this.finallyBody,this.label)},o._toJSON=function(){var e;return e=[this.label||0,f(this.tryBody,0)],f(this.finallyBody)&&e.push.apply(e,T(this.finallyBody.toJSON())),e},n.fromJSON=function(e,t,r,o,a){var s;return s=N.call(arguments,5),n(i(e,t,r),$(a),$(s),o?$(o):null)},n}(pt),n.Unary=vt=function(e){function t(n,o,i){var s;if(s=this instanceof t?this:g(r),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+k(n));if(s.pos=n,"string"!=typeof o)throw TypeError("Expected op to be a String, got "+k(o));if(s.op=o,null==i&&(i=st(n)),!v(o,a))throw Error("Unknown unary operator: "+o);if(i instanceof e||(i=d(line,column,i)),!("delete"!==o||i instanceof F&&i.op==="."))throw Error("Cannot use delete operator on a non-access");return s.node=i,s}var n,r,o,a;return n=e.prototype,r=t.prototype=g(n),r.constructor=t,t.displayName="Unary",typeof e.extended=="function"&&e.extended(t),r.compile=function(e,n,r,o){var a,i;i=this.op,e.sourcemap!=null&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),(a=e.sourcemap)!=null&&a.add(o.line,o.column,this.pos.line,this.pos.column),"++post"===i||"--post"===i?(this.node.compile(e,at.unary,!1,o),o(i.substring(0,2))):(o(i),("typeof"===i||"void"===i||"delete"===i||("+"===i||"-"===i||"++"===i||"--"===i)&&(this.node instanceof t&&("+"===i||"-"===i||"++"===i||"--"===i)||this.node instanceof V&&typeof this.node.value=="number"&&p(this.node.value)))&&o(" "),this.node.compile(e,at.unary,!1,o)),e.sourcemap!=null&&this.pos.file&&e.sourcemap.popFile()},r.compileAsBlock=function(e,t,n,r){var a;a=this.op,C.call(o,a)?this.compile(e,t,n,r):this.node.compileAsBlock(e,t,n,r)},r.compileAsStatement=function(e,t,r){var a;a=this.op,C.call(o,a)?n.compileAsStatement.call(this,e,t,r):this.node.compileAsStatement(e,t,r)},a=["++","--","++post","--post","!","~","+","-","typeof","void","delete"],o={"++":!0,"--":!0,"++post":!0,"--post":!0,"delete":!0},r.isLarge=function(){return this.node.isLarge()},r.isSmall=function(){return this.node.isSmall()},r.isNoop=function(){var e;return(e=this._isNoop)==null?this._isNoop=!C.call(o,this.op)&&this.node.isNoop():e},r.walk=function(e){var n,r;return r=(n=e(this.node))!=null?n:this.node.walk(e),r!==this.node?t(this.pos,this.op,r):this},r.inspect=function(e){return l(e,"Unary",this.pos,this.op,this.node)},r._toJSON=function(){var e;return e=[this.op],f(this.node)&&e.push.apply(e,T(this.node.toJSON())),e},t.fromJSON=function(e,n,r,o){var a;return a=N.call(arguments,4),t(i(e,n,r),o,$(a))},t}(z),xt=n.While=function(e,t,n,r){return H(e,null,t,null,n,r)},$=n.fromJSON=function(e){var t,r;if(!e)return st(i(0,0));if(w(e)){if(e.length===0)return st(i(0,0));if(r=e[0],A(e.length)<1||"string"!=typeof r)throw Error("Expected an array with a string as its first item");if(!C.call(n,r))throw Error("Unknown node type: "+B(e.type));return(t=n[r]).fromJSON.apply(t,T(N.call(e,1)))}if("object"==typeof e&&null!==e){if(typeof e.type!="string")throw Error("Expected an object with a string 'type' key");if(!C.call(n,e.type))throw Error("Unknown node type: "+B(e.type));return n[e.type].fromJSON(e)}throw TypeError("Must provide an object or array to deserialize")}}.call(this),e.exports},t["./parser"]=function(){var e={exports:this};return function(n){"use strict";function r(e){if(!e)throw Error("Assertion failed: "+String(e));return e}function o(e,t){if(null==e)e=null;else if("string"!=typeof e)throw TypeError("Expected name to be one of null or String, got "+at(e));if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+at(t));return e&&(t.parserName=e),t}function a(e){return e}function i(e,t){var n;if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+at(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected dontCache to be a Boolean, got "+at(t));return t?e:(n=no(),o(e.parserName,function(t){var r,o,a,i,s,c,l,u,f;if(a=t.cache,c=t.index,i=t.indent.peek(),s=(r=a[o=i-1])!=null?r:a[o]=[],l=(r=s[o=c%16])!=null?r:s[o]=[],u=l[n],u&&u[0]===c)return t.index=u[1],t.line=u[2],u[3];if(f=e(t),t.indent.peek()!==i)throw Error("Changed indent during cache process: from "+rt(i)+" to "+rt(t.indent.peek()));return l[n]=[c,t.index,t.line,f],f}))}function s(e,t,n){var r,a,i,s,c,l,u,f,d,p;if(!H(e))throw TypeError("Expected array to be an Array, got "+at(e));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected dontCache to be a Boolean, got "+at(n));if(e.length===0)throw Error("Cannot provide an empty array");for(l=[],d=[],c=[],p=!1,a=0,r=e.length;r>a;++a){if(i=e[a],s=void 0,u=void 0,H(i)){if(i.length!==2)throw Error("Found an array with "+rt(i.length)+" length at index #"+a);if(typeof i[0]!="string")throw TypeError("Array in index #"+a+" has an improper key: "+at(i[0]));if(typeof i[1]!="function")throw TypeError("Array in index #"+a+" has an improper rule: "+at(i[1]));s=i[0],u=i[1]}else{if("function"!=typeof i)throw TypeError("Found a non-array, non-function in index #"+a+": "+at(i));u=i}d.push(u),c.push(s),f=u.parserName||"<unknown>",a>0&&l[l.length-1].slice(-1)==='"'&&f.charCodeAt(0)===34&&f.slice(-1)==='"'?(l[l.length-1]=l[l.length-1].substring(0,Q(l[l.length-1].length)-1),l.push(f.substring(1))):(a>0&&(l.push(" "),p=!0),l.push(f))}return p&&(l.splice(0,0,"("),l.push(")")),l=l.join(""),function(){var e;return e=o(l,function(e){var t,n,r,o,a,i,s;for(n=e.clone(),i={},r=0,t=d.length;t>r;++r){if(s=d[r],o=s(n),!o)return!1;a=c[r],a&&("this"===a?i=o:i[a]=o)}return e.update(n),i}),o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?"function"==typeof t?t(a,n,r,o):void 0!==t?t:a:!1})}()}function c(e,t,n){var r;return r=JSON.stringify(t),function(){var a;return a=function(){var a;return a=o(r,function(n){var o,a;return o=n.clone(),a=e(o),a===t?(n.update(o),a):(n.fail(r),!1)}),o(null!=a&&a.parserName||"<unknown>",function(e){var t,r,o;return t=e.index,r=e.line,o=a(e),o?"function"==typeof n?n(o,e,t,r):void 0!==n?n:o:!1})}(),function(e){var t,n;return t=e.clone(),t.preventFail(),n=a(t),t.unpreventFail(),n?(e.update(t),n):(e.fail(r),!1)}}()}function l(e,t){return c(Oa,e,t)}function u(e,t){return c(Ss,e,t)}function f(e,t){var n;return n=[gs],n.push.apply(n,function(){var t,n,r,o,a;for(t=[],n=ot(e.split(/([a-z]+)/gi)),o=0,r=n.length;r>o;++o)a=n[o],a&&(0===o%2?t.push(c(vt,a)):t.push(c(_t,a)));return t}()),s(n,t||e)}function d(e,t){var n;return n=JSON.stringify(e),function(){var r;return r=o(n,function(t){var r,o;return r=t.clone(),o=fa(r),o===e?(t.update(r),o):(t.fail(n),!1)}),o(null!=r&&r.parserName||"<unknown>",function(e){var n,o,a;return n=e.index,o=e.line,a=r(e),a?"function"==typeof t?t(a,e,n,o):void 0!==t?t:a:!1})}()}function p(e,t){if(!(e instanceof xs))throw TypeError("Expected stack to be a "+X(xs)+", got "+at(e));return function(n){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+at(n));return o(n.parserName,function(r){e.push(t);try{return n(r)}finally{e.pop()}})}}function h(e){var t;return t=e.clone(),Ua(t)&&Mr(t)&&fn(t)&&(e.update(t),!0)}function _(e,t){var n,r,o,a;for(null==t&&(t=[]),n=ot(e),r=0,o=n.length;o>r;++r)a=n[r],t.push(Kr(a));return t}function m(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=mt(n))&&(e.update(n),t)}function y(e){var t;return t=o(rt(null!=e&&e.parserName||"digit")+"+",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return o.length<1?!1:(t.update(n),o)}),function(){var e;return e=function(){var e;return e=function(){var e;return e=o(rt(null!=pc&&pc.parserName||"Underscore")+"+",function(e){var t,n,r;for(t=e.clone(),r=[];n=pc(t);)r.push(n);return r.length<1?!1:(e.update(t),r)}),function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&(r=t(o))&&(n.update(o),r)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},(r.head=t(o))&&(r.tail=e(o))&&(n.update(o),r)}function r(e){var t,n,r,o,a;for(a=_(e.head),t=ot(e.tail),n=0,r=t.length;r>n;++n)o=t[n],_(o,a);return a.join("")}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}()}function g(e,t,n){var r;return r=y(n),function(){var n;return n=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Sa(n)&&Mi(n)&&Sa(n)&&(t=r(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),function(){function a(e){var o,a;return a=e.clone(),o={},vc(a)&&(o.separator=t(a))&&(o.integer=r(a))&&(o.decimal=n(a))&&Sa(a)&&(e.update(a),o)}function i(t,n,r){var o,a,i,s,c;if(s=t.integer,o=t.decimal,o===Qa&&(o=""),c=parseInt(s,e),isFinite(c)||(i=o?"."+rt(o):"",n.error("Unable to parse number: 0"+rt(Kr(t.separator))+rt(s)+i)),o)for(;;){if(a=parseInt(o,e),isFinite(a)){c+=a/Math.pow(Q(e),Q(o.length));break}o=o.slice(0,-1)}return n["const"](r,c)}return o(null!=a&&a.parserName||"<unknown>",function(e){var t,n,r;return t=e.index,n=e.line,r=a(e),r?i(r,e,t,n):!1})}()}()}function b(e,t){return l(e,function(e,n,r){return n["const"](r,t)})}function v(e,t,n){var r,o,a,i,s,c;for(c=[],i=[],r=ot(e),o=0,a=r.length;a>o;++o)s=r[o],"number"==typeof s?i.push(s):s instanceof Za||(c.push(t["const"](n,_(i).join(""))),i=[],c.push(s));return i.length>0&&c.push(t["const"](n,_(i).join(""))),c}function w(e,t,n){var r,o,a,i,s,c,l,u;for(c=[e.first],(c[0].length===0||c[0].length===1&&c[0][0]==="")&&c.shift(),a=1,r=Q(e.emptyLines.length);r>a;++a)c.push([""]);for(c.push.apply(c,ot(e.rest)),i=c.length,i>0&&(c[i-1].length===0||c[i-1].length===1&&c[i-1][0]==="")&&(c.pop(),--i),u=[],a=0,o=c.length;o>a;++a)s=c[a],a>0&&u.push("\n"),u.push.apply(u,ot(s));for(a=u.length-2;a>=0;--a)typeof u[a]=="string"&&typeof u[a+1]=="string"&&u.splice(a,2,""+u[a]+u[a+1]);for(a=0,o=u.length;o>a;++a)l=u[a],"string"==typeof l&&(u[a]=t["const"](n,l));return u}function x(e,t){return function(){var n;return n=function(){var n,r;return n=function(){function e(e){var t,n;return n=e.clone(),t=void 0,bt(n)&&(t=Ua(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),r=function(){function e(){return[]}var n;return n=function(){var e,n;return e=function(){function e(){return[]}var n;return n=function(){var e;return e=function(){function e(e){var n,r;return r=e.clone(),n=void 0,Ua(r)&&As(r)&&(n=t(r))&&(e.update(r),n)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},As(o)&&(r.head=t(o))&&(r.tail=e(o))&&(n.update(o),r)}function r(e){return[e.head].concat(ot(e.tail))}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),o(rt(null!=n&&n.parserName||"<unknown>")+"?",function(t){var r,o;return r=t.index,o=t.line,n(t)||e(void 0,t,r,o)})}(),n=o(rt(null!=Ua&&Ua.parserName||"Newline")+"?",function(e){return Ua(e)||!0}),function(t){var r,o;return o=t.clone(),r=void 0,Ia(o)&&(r=e(o))&&n(o)&&Oi(o)&&(t.update(o),r)}}(),o(rt(null!=n&&n.parserName||"<unknown>")+"?",function(t){var r,o;return r=t.index,o=t.line,n(t)||e(void 0,t,r,o)})}(),function(){function a(o){var a,i;return i=o.clone(),a={},e(i)&&(a.first=t(i))&&(a.emptyLines=n(i))&&(a.rest=r(i))&&e(i)&&(o.update(i),a)}function i(e,t,n){var r,o,a,i,s,c;for(r=[],o=ot(w(e,t,n)),a=0,i=o.length;i>a;++a)s=o[a],s.isConst()&&s.constValue()===""||r.push(s);return c=r,c.length===0?t["const"](n,""):c.length===1&&c[0].isConst()&&typeof c[0].constValue()=="string"?c[0]:t.string(n,c)}return o(null!=a&&a.parserName||"<unknown>",function(e){var t,n,r;return t=e.index,n=e.line,r=a(e),r?i(r,e,t,n):!1})}()}(),o(null!=n&&n.parserName||"<unknown>",function(t){var r;if(e(t.clone())){if(r=n(t),!r)throw ls;return r}return!1})}()}function I(e,t,n,r){var o;return o=t.macros.getByLabel("mutateFunction"),o?o.func({op:"",node:e},t,n,r):e}function E(e,t){var n,r,o,a;for(a=0,n=ot(e),r=n.length;r--;)o=n[r],o instanceof Ei&&o.spread&&(++a,a>1&&t.error("Cannot have more than one spread parameter"));return e}function A(e){if(!H(e))throw TypeError("Expected array to be an Array, got "+at(e));for(;e.length&&e[e.length-1]instanceof Za;)e.pop();return e}function C(e,t,n){var r,o,a,i,s;if(t instanceof Ei)if((a=t.ident)instanceof Bo||a instanceof Js)e.scope.add(t.ident,n||t.isMutable,t.asType?Ga(t.asType):t.spread?rc.array:rc.any);else{if(!(t.ident instanceof xt))throw Error("Unknown param ident: "+at(t.ident));if(!(t.ident.child instanceof kn)||typeof t.ident.child.value!="string")throw Error("Expected constant access: "+at(t.ident.child));e.scope.add(Bo(t.line,t.column,t.scopeId,t.ident.child.value),n||t.isMutable,t.asType?Ga(t.asType):t.spread?rc.array:rc.any)}else if(t instanceof kt)for(r=ot(t.elements),o=r.length;o--;)i=r[o],C(e,i,n);else if(t instanceof ci)for(r=ot(t.pairs),o=r.length;o--;)s=r[o],C(e,s.value,n);else if(!(t instanceof Za))throw Error("Unknown param node type: "+at(t))}function N(e,t){var n,r,o,a,i;for(n=ot(e),r=0,o=n.length;o>r;++r)i=n[r],i instanceof js&&(a=i.ident,a instanceof Bo&&t.scope.add(a,!0,rc.any))}function B(e,t){var n,r;return e.clearCache(),r=e.index,an(e),cs(e),Mr(e),n=null!=t?function(n){var r;return ct(e,(r=!1,function(o,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=o?(e.clearCache(),t(o)):n(a)}))}:function(t){return t(ct(e))},n(function(n){var o,a;return a=n||e.nothing(r),Mr(e),gs(e),o=e.root(r,e.options.filename,a),e.clearCache(),null!=t?t(null,o):o})}function T(e,t){return function(n){var r;return r=n.options[e],"string"!=typeof r&&(r=t),co(r)(n)}}function k(e){if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+at(e));return e.replace(/\s+/g," ")}function M(e,t,n){var r,o,a,i,s,c,l;for(l=[],i=!1,r=ot(e),o=0,a=r.length;a>o;++o)s=r[o],c=t(s,n),l.push(c),s!==c&&(i=!0);return i?l:e}function S(e,t){var n,r,o,a;return n=arguments.length-1,n>2?r=tt.call(arguments,2,n):(n=2,r=[]),o=arguments[n],a=!1,U(1,Q(e.length),!0,function(n,o){var i,s;return s=e[n],t.apply(void 0,[s].concat(ot(r),[(i=!1,function(e,t){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?o(e):(s!==t&&(a=!0),o(null,t))})]))},function(t,n){return"undefined"!=typeof t&&null!==t?o(t):o(null,a?n:e)})}function D(e){var t,n,r,a,i;if(!H(e))throw TypeError("Expected rules to be an Array, got "+at(e));for(t=e.length;t--;)if(typeof e[t]!="function")throw TypeError("Expected "+("rules["+t+"]")+" to be a Function, got "+at(e[t]));for(a=["("],r=0,n=e.length;n>r;++r)i=e[r],r>0&&a.push(" | "),a.push(i.parserName||"<unknown>");return a.push(")"),o(a.join(""),function(t){var n,r,o,a;for(n=0,r=e.length;r>n;++n)if(a=e[n],o=a(t))return o;return!1})}function F(e,t){var n,r,o,a,i,s,c,l,u;for(i=tt.call(arguments,4),s=null!=e?Q(e)-1:null,c=!1,r=i.length;r--&&(a=i[r],!a||a instanceof Za||H(a)&&a.length===0);)i.pop();for(n=[],r=0,o=i.length;o>r;++r)a=i[r],n.push(Wo(a,null,s));return u=n,l=function(){var e,t,n;for(e=0,t=u.length;t>e;++e)if(n=u[e],u.length>50||n.indexOf("\n")!==-1)return!0;return!1}(),l?(u=function(){var e,t,n,r;for(e=[],t=0,n=u.length;n>t;++t)r=u[t],e.push("  "+rt(r.split("\n").join("\n  ")));return e}(),rt(t)+"(\n"+rt(u.join(",\n"))+")"):rt(t)+"("+rt(u.join(", "))+")"}function O(e){var t,n,r,o,a,i;for(i=[],t=ot(e),n=0,r=t.length;r>n;++n)o=t[n],o!==a&&i.push(o),a=o;return i}function j(e){var t;switch(t=O(e.slice().sort(function(e,t){return q(e.toLowerCase(),t.toLowerCase())})),t.length){case 0:return"End of input";case 1:return t[0];case 2:return rt(t[0])+" or "+rt(t[1]);default:return rt(tt.call(t,0,-1).join(", "))+", or "+rt(t[Q(t.length)-1])}}function L(e,t){return"Expected "+rt(j(e))+", but "+rt(t)+" found"}function R(e,t,n,r){var o,a,i,s;if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+at(e));if(null==t)t=null;else if(!(t instanceof ua))throw TypeError("Expected macros to be one of "+(X(ua)+" or null")+", got "+at(t));if(null==n)n={};else if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+at(n));if(null==r)r=null;else if("function"!=typeof r)throw TypeError("Expected callback to be one of Function or null, got "+at(r));return a=Is(e,null!=t?t.clone():void 0,n),i=a.options.embedded?Nr:B,s=(new Date).getTime(),o=null!=r?function(e){var t;return i(a,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n&&n!==ls?r(n):e(o)}))}:function(e){try{return e(i(a))}catch(t){if(t!==ls)throw t;return e()}},o(function(e){var t,o,i,c,l,u,f,d;if(i=(new Date).getTime(),typeof n.progress=="function"&&n.progress("parse",Q(i)-Q(s)),!e||$(a.index,a.data.length)){if(l=(o=a.failures).index,f=o.line,d=o.messages,u=$(l,a.data.length)?JSON.stringify(a.data.substring(l,Q(l)+20)):"end-of-input",c=Ni(L(d,u),a.data,f),null!=r)return r(c);throw c}return t=null!=r?function(t){var n;return a.macroExpandAllAsync(e,(n=!1,function(e,o){if(n)throw Error("Attempted to call function more than once");return n=!0,null!=e?r(e):t(o)}))}:function(t){return t(a.macroExpandAll(e))},t(function(e){var t,o,c,l;return t=(new Date).getTime(),typeof n.progress=="function"&&n.progress("macroExpand",Q(t)-Q(i)),c=e.reduce(a),o=(new Date).getTime(),typeof n.progress=="function"&&n.progress("reduce",Q(o)-Q(t)),l={result:c,macros:a.macros,parseTime:Q(i)-Q(s),macroExpandTime:Q(t)-Q(i),reduceTime:Q(o)-Q(t),time:Q(o)-Q(s)},null!=r?r(null,l):l})})}function P(e){var t,n,r,o,a;for(a=[],t=ot(e),n=0,r=t.length;r>n;++n)o=t[n],z(o,a)||a.push(o);return a}var U,V,q,W,G,J,z,H,K,$,Y,X,Q,Z,et,tt,nt,rt,ot,at,it,st,ct,lt,ut,ft,dt,pt,ht,_t,mt,yt,gt,bt,vt,wt,xt,It,Et,At,Ct,Nt,Bt,Tt,kt,Mt,St,Dt,Ft,Ot,jt,Lt,Rt,Pt,Ut,Vt,qt,Wt,Gt,Jt,zt,Ht,Kt,$t,Yt,Xt,Qt,Zt,en,tn,nn,rn,on,an,sn,cn,ln,un,fn,dn,pn,hn,_n,mn,yn,gn,bn,vn,wn,xn,In,En,An,Cn,Nn,Bn,Tn,kn,Mn,Sn,Dn,Fn,On,jn,Ln,Rn,Pn,Un,Vn,qn,Wn,Gn,Jn,zn,Hn,Kn,$n,Yn,Xn,Qn,Zn,er,tr,nr,rr,or,ar,ir,sr,cr,lr,ur,fr,dr,pr,hr,_r,mr,yr,gr,br,vr,wr,xr,Ir,Er,Ar,Cr,Nr,Br,Tr,kr,Mr,Sr,Dr,Fr,Or,jr,Lr,Rr,Pr,Ur,Vr,qr,Wr,Gr,Jr,zr,Hr,Kr,$r,Yr,Xr,Qr,Zr,eo,to,no,ro,oo,ao,io,so,co,lo,uo,fo,po,ho,_o,mo,yo,go,bo,vo,wo,xo,Io,Eo,Ao,Co,No,Bo,To,ko,Mo,So,Do,Fo,Oo,jo,Lo,Ro,Po,Uo,Vo,qo,Wo,Go,Jo,zo,Ho,Ko,$o,Yo,Xo,Qo,Zo,ea,ta,na,ra,oa,aa,ia,sa,ca,la,ua,fa,da,pa,ha,_a,ma,ya,ga,ba,va,wa,xa,Ia,Ea,Aa,Ca,Na,Ba,Ta,ka,Ma,Sa,Da,Fa,Oa,ja,La,Ra,Pa,Ua,Va,qa,Wa,Ga,Ja,za,Ha,Ka,$a,Ya,Xa,Qa,Za,ei,ti,ni,ri,oi,ai,ii,si,ci,li,ui,fi,di,pi,hi,_i,mi,yi,gi,bi,vi,wi,xi,Ii,Ei,Ai,Ci,Ni,Bi,Ti,ki,Mi,Si,Di,Fi,Oi,ji,Li,Ri,Pi,Ui,Vi,qi,Wi,Gi,Ji,zi,Hi,Ki,$i,Yi,Xi,Qi,Zi,es,ts,ns,rs,os,as,is,ss,cs,ls,us,fs,ds,ps,hs,_s,ms,ys,gs,bs,vs,ws,xs,Is,Es,As,Cs,Ns,Bs,Ts,ks,Ms,Ss,Ds,Fs,Os,js,Ls,Rs,Ps,Us,Vs,qs,Ws,Gs,Js,zs,Hs,Ks,$s,Ys,Xs,Qs,Zs,ec,tc,nc,rc,oc,ac,ic,sc,cc,lc,uc,fc,dc,pc,hc,_c,mc,yc,gc,bc,vc;U=function(e,t,n,r,o){function a(e,t){c||(--f,null!=e&&null==s&&(s=e),n&&null==s&&arguments.length>1&&u.push(t),d||i())}function i(){for(;!c&&null==s&&e>f&&++l<t;)++f,d=!0,r(l,Z(a)),d=!1;c||null==s&&0!==f||(c=!0,null!=s?o(s):o(null,u))}var s,c,l,u,f,d;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+at(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+at(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+at(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+at(r));if("function"!=typeof o)throw TypeError("Expected onComplete to be a Function, got "+at(o));return u=n?[]:null,0>=t?o(null,u):((1>e||e!==e)&&(e=1/0),s=null,f=0,d=!1,c=!1,l=-1,i(),void 0)},V=function(e,t){var n;if(null==e)throw TypeError("Expected parent to be an object, got "+at(e));if(n=e[t],"function"!=typeof n)throw Error("Trying to bind child '"+String(t)+"' which is not a function");return function(){return n.apply(e,arguments)}},q=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},W=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},G=function(e,t){var n;if("number"!=typeof e)throw TypeError("Expected numArgs to be a Number, got "+at(e));if("function"!=typeof t)throw TypeError("Expected f to be a Function, got "+at(t));return e>1?(n=function(r){var o;return Q(r.length)>=e?t.apply(this,r):o=function(){return arguments.length===0?o:n.call(this,r.concat(tt.call(arguments)))}},n([])):t},J=function(e,t){var n;for(n in t)et.call(t,n)&&(e[n]=t[n]);return e},z=typeof Array.prototype.indexOf=="function"?function(){var e;return e=Array.prototype.indexOf,function(t,n){return e.call(n,t)!==-1}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},H=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),K=typeof Object.keys=="function"?Object.keys:function(e){var t,n;n=[];for(t in e)et.call(e,t)&&n.push(t);return n},$=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e},Y=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},X=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+at(e));return e.displayName||e.name||""},Q=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+at(e));return e},Z=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+at(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+at(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),et=Object.prototype.hasOwnProperty,tt=Array.prototype.slice,nt=function(e){if("string"!=typeof e)throw TypeError("Expected a string, got "+at(e));return e},rt=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+at(e))},ot=function(e){if(null==e)throw TypeError("Expected an object, got "+at(e));return H(e)?e:"string"==typeof e?e.split(""):tt.call(e)},at=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),as=typeof n.setImmediate=="function"?n.setImmediate:"undefined"!=typeof process&&typeof process.nextTick=="function"?process.nextTick:function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+at(e));return setTimeout(e,0)},rc=t("./types"),mc=t("util"),null!=mc&&(Wo=mc.inspect),Hr=typeof Object.freeze=="function"?Object.freeze:function(e){return e},qa="function"==typeof as?as:"undefined"!=typeof process&&typeof process.nextTick=="function"?process.nextTick:function(e){return setTimeout(e,0)},ls=Hr({toString:function(){return"short-circuit"}}),Qa=Hr({toString:function(){return""}}),fr="<%",cr="%>",dr="<%=",lr="%>",ur="<%--",sr="--%>",no=function(){var e;return e=-1,function(){return++e}}(),fo=function(){var e;return e=-1,function(){return++e}}(),xs=function(){function e(n,r){var o;return o=this instanceof e?this:W(t),null==r&&(r=[]),o.initial=n,o.data=r,o}var t;return t=e.prototype,e.displayName="Stack",t.push=function(e){return this.data.push(e)},t.pop=function(){var e,t;if(e=this.data,t=e.length,0===t)throw Error("Cannot pop");return e.pop()},t.canPop=function(){return Q(this.data.length)>0},t.peek=function(){var e,t;return e=this.data,t=e.length,0===t?this.initial:e[Q(t)-1]},t.clone=function(){return e(this.initial,this.data.slice())},e}(),yt=xs("statement"),Go=p(yt,"statement"),Po=p(yt,"expression"),ht=xs(!1),qo=p(ht,!0),ut=xs(!1),ko=p(ut,!0),ft=xs(!1),Ro=p(ft,!0),gt=xs(!1),ji=p(gt,!0),st=xs(!1),Rt=p(st,!0),bs=i(o("SpaceChar",function(e){var t;return t=e.data.charCodeAt(e.index),(128>t?9===t||11===t||12===t||32===t:160===t||5760===t||6158===t||t>=8192&&8202>=t||8239===t||8287===t||12288===t||65263===t)?(e.index=Q(e.index)+1,t):(e.fail("space"),!1)})),bt=o("_Space",function(e){for(;bs(e););return!0}),Ua=i(o("Newline",function(e){var t,n,r;return n=e.data,r=e.index,t=n.charCodeAt(r),13===t||10===t||8232===t||8233===t?(++r,13===t&&n.charCodeAt(r)===10&&++r,e.index=r,++e.line,!0):(e.fail("newline"),!1)})),Or=o("Eof",function(e){return e.index>=e.data.length}),dn=o("CheckStop",function(){var e;return e=o("Stop",function(e){return Ua(e)||Or(e)||hr(e)||mr(e)}),function(t){return e(t.clone())}}()),Va=i(o("NewlineWithCheckIndent",function(e){return e.options.noindent?Mr(e):h(e)})),Na=i(o("MaybeComment",function(){var e,t;return t=o("SingleLineComment",function(e){var t,n,r,o;if(n=e.data,r=e.index,n.charCodeAt(r)!==47||n.charCodeAt(+r+1)!==47)return!1;for(o=n.length,r=Q(r)+2;;++r)if(r>=o||(t=n.charCodeAt(r))===13||10===t)return e.index=r,!0}),e=o("MultiLineComment",function(e){var t,n,r,o;if(n=e.data,r=e.index,n.charCodeAt(r)!==47||n.charCodeAt(+r+1)!==42||n.charCodeAt(+r+2)===33)return!1;for(o=n.length,r=Q(r)+2;;++r)if(r>=o)e.error("Multi-line comment never ends");else{if(t=n.charCodeAt(r),42===t&&n.charCodeAt(+r+1)===47)return e.index=+r+2,gs(e),!0;(13===t||10===t||8232===t||8233===t)&&(13===t&&n.charCodeAt(+r+1)===10&&++r,++e.line)}}),function(){function n(n){return t(n)||e(n)}return o(rt(null!=n&&n.parserName||"<unknown>")+"?",function(e){return n(e)||!0})}()}())),Kr=function(){var e;return e=String.fromCharCode,function(t){return-1===t?"\0":Q(t)>65535?""+e((Q(t)-65536>>10)+55296)+e((Q(t)-65536)%1024+56320):e(t)}}(),Qo=i(o("LicenseComment",function(){function e(e){var t,n,r,o,a,i,s,c,l,u,f;if(r=e.data,a=e.index,r.charCodeAt(a)!==47||r.charCodeAt(+a+1)!==42||r.charCodeAt(+a+2)!==33)return!1;for(c=[47,42,33],l=[c],s=r.length,f=a,a=Q(a)+3;;++a)if(a>=s)e.error("Multi-line license comment never ends");else{if(n=r.charCodeAt(a),42===n&&r.charCodeAt(+a+1)===47){for(e.index=+a+2,c.push(42,47),u=[],o=0,t=l.length;t>o;++o)i=l[o],o>0&&u.push("\n"),_(i,u);return e.comment(f,u.join(""))}13===n||10===n||8232===n||8233===n?(13===n&&r.charCodeAt(+a+1)===10&&++a,++e.line,l.push(c=[]),e.index=+a+1,As(e)||e.error("Improper indent in multi-line license comment"),a=e.index-1):c.push(n)}}return function(t){var n,r;return r=t.clone(),n=void 0,bt(r)&&(n=e(r))&&gs(r)&&(t.update(r),n)
}}())),gs=i(o("Space",function(e){var t;return t=e.clone(),bt(t)&&Na(t)&&(e.update(t),!0)})),Ha=i(o("NoSpace",function(e){return!bs(e.clone())})),kr=i(o("EmptyLine",function(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=Ua(n))&&(e.update(n),t)})),Mr=i(o("EmptyLines",function(e){for(;kr(e););return!0})),ms=i(o("SomeEmptyLines",function(e){if(kr(e)){for(;kr(e););return!0}return!1})),Ka=i(o("NoSpaceNewline",function(e){return!kr(e.clone())})),jo={9:4,32:1},Fn=i(o("CountIndent",function(){function e(e){var t,n,r,o;for(o=1,t=ot(e),n=t.length;n--;){if(r=t[n],!et.call(jo,r))throw Error("Unexpected indent char: "+nt(JSON.stringify(r)));o+=Q(jo[r])}return o}var t;return t=o(rt(null!=bs&&bs.parserName||"SpaceChar")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=bs(t);)r.push(n);return e.update(t),r}),o(null!=t&&t.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=t(n),a?e(a,n,r,o):!1})}())),Mo=i(o("IndentationRequired",function(e){return!e.options.noindent})),fn=i(o("CheckIndent",function(e){var t,n;return t=e.clone(),n=Fn(t),n===t.indent.peek()||e.options.noindent?(e.update(t),!0):!1})),It=o("Advance",function(e){var t,n;if(e.options.noindent)throw Error("Can't use Advance if in noindent mode");return t=e.clone(),n=Fn(t),Y(n,t.indent.peek())?!1:(e.indent.push(n),!0)}),Ia=o("MaybeAdvance",function(e){var t,n;return e.options.noindent?!0:(t=e.clone(),n=Fn(t),e.indent.push(n),!0)}),Wi=o("PushIndent",function(){function e(e,t){return t.options.noindent?!0:(t.indent.push(e),!0)}return o(null!=Fn&&Fn.parserName||"CountIndent",function(t){var n,r,o;return n=t.index,r=t.line,o=Fn(t),o?e(o,t,n,r):!1})}()),qi=function(){var e;return e=[],function(t){var n;return(n=e[t])==null?e[t]=o("PushFakeIndent("+rt(t)+")",function(e){return e.options.noindent?!0:(e.indent.push(Q(e.indent.peek())+Q(t)),!0)}):n}}(),Oi=o("PopIndent",function(e){return e.options.noindent?!0:e.indent.canPop()?(e.indent.pop(),!0):e.error("Unexpected dedent")}),vc=i(o("Zero",function(e){return e.data.charCodeAt(e.index)===48?(e.index=Q(e.index)+1,48):(e.fail('"0"'),!1)})),Vn=i(o("DecimalDigit",function(e){var t;return t=e.data.charCodeAt(e.index),t>=48&&57>=t?(e.index=Q(e.index)+1,t):(e.fail("[0-9]"),!1)})),Mi=i(o("Period",function(e){return e.data.charCodeAt(e.index)===46?(e.index=Q(e.index)+1,46):(e.fail('"."'),!1)})),bn=i(o("ColonChar",function(e){return e.data.charCodeAt(e.index)===58?(e.index=Q(e.index)+1,58):(e.fail('":"'),!1)})),Si=i(o("Pipe",function(){function e(e){return e.data.charCodeAt(e.index)===124?(e.index=Q(e.index)+1,124):(e.fail('"|"'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),tr=i(o("DoubleColon",function(e){var t;return t=e.clone(),bn(t)&&bn(t)&&(e.update(t),"::")})),jr=i(o("EqualChar",function(e){return e.data.charCodeAt(e.index)===61?(e.index=Q(e.index)+1,61):(e.fail('"="'),!1)})),xn=i(o("ColonEqual",function(){function e(e){var t;return t=e.clone(),bn(t)&&jr(t)&&(e.update(t),":=")}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),Fa=o("Minus",function(e){return e.data.charCodeAt(e.index)===45?(e.index=Q(e.index)+1,45):(e.fail('"-"'),!1)}),Di=o("Plus",function(e){return e.data.charCodeAt(e.index)===43?(e.index=Q(e.index)+1,43):(e.fail('"+"'),!1)}),Fi=o("PlusOrMinus",function(e){var t;return t=e.data.charCodeAt(e.index),43===t||45===t?(e.index=Q(e.index)+1,t):(e.fail("[+\\-]"),!1)}),Xo=o("Letter",function(e){var t;return t=e.data.charCodeAt(e.index),(128>t?t>=65&&90>=t||t>=97&&122>=t:170===t||181===t||186===t||t>=192&&214>=t||t>=216&&246>=t||t>=248&&705>=t||t>=710&&721>=t||t>=736&&740>=t||748===t||750===t||t>=880&&884>=t||886===t||887===t||t>=890&&893>=t||902===t||t>=904&&906>=t||908===t||t>=910&&929>=t||t>=931&&1013>=t||t>=1015&&1153>=t||t>=1162&&1317>=t||t>=1329&&1366>=t||1369===t||t>=1377&&1415>=t||t>=1488&&1514>=t||t>=1520&&1522>=t||t>=1569&&1610>=t||1646===t||1647===t||t>=1649&&1747>=t||1749===t||1765===t||1766===t||1774===t||1775===t||t>=1786&&1788>=t||1791===t||1808===t||t>=1810&&1839>=t||t>=1869&&1957>=t||1969===t||t>=1994&&2026>=t||2036===t||2037===t||2042===t||t>=2048&&2069>=t||2074===t||2084===t||2088===t||t>=2308&&2361>=t||2365===t||2384===t||t>=2392&&2401>=t||2417===t||2418===t||t>=2425&&2431>=t||t>=2437&&2444>=t||2447===t||2448===t||t>=2451&&2472>=t||t>=2474&&2480>=t||2482===t||t>=2486&&2489>=t||2493===t||2510===t||2524===t||2525===t||t>=2527&&2529>=t||2544===t||2545===t||t>=2565&&2570>=t||2575===t||2576===t||t>=2579&&2600>=t||t>=2602&&2608>=t||2610===t||2611===t||2613===t||2614===t||2616===t||2617===t||t>=2649&&2652>=t||2654===t||t>=2674&&2676>=t||t>=2693&&2701>=t||t>=2703&&2705>=t||t>=2707&&2728>=t||t>=2730&&2736>=t||2738===t||2739===t||t>=2741&&2745>=t||2749===t||2768===t||2784===t||2785===t||t>=2821&&2828>=t||2831===t||2832===t||t>=2835&&2856>=t||t>=2858&&2864>=t||2866===t||2867===t||t>=2869&&2873>=t||2877===t||2908===t||2909===t||t>=2911&&2913>=t||2929===t||2947===t||t>=2949&&2954>=t||t>=2958&&2960>=t||t>=2962&&2965>=t||2969===t||2970===t||2972===t||2974===t||2975===t||2979===t||2980===t||t>=2984&&2986>=t||t>=2990&&3001>=t||3024===t||t>=3077&&3084>=t||t>=3086&&3088>=t||t>=3090&&3112>=t||t>=3114&&3123>=t||t>=3125&&3129>=t||3133===t||3160===t||3161===t||3168===t||3169===t||t>=3205&&3212>=t||t>=3214&&3216>=t||t>=3218&&3240>=t||t>=3242&&3251>=t||t>=3253&&3257>=t||3261===t||3294===t||3296===t||3297===t||t>=3333&&3340>=t||t>=3342&&3344>=t||t>=3346&&3368>=t||t>=3370&&3385>=t||3389===t||3424===t||3425===t||t>=3450&&3455>=t||t>=3461&&3478>=t||t>=3482&&3505>=t||t>=3507&&3515>=t||3517===t||t>=3520&&3526>=t||t>=3585&&3632>=t||3634===t||3635===t||t>=3648&&3654>=t||3713===t||3714===t||3716===t||3719===t||3720===t||3722===t||3725===t||t>=3732&&3735>=t||t>=3737&&3743>=t||t>=3745&&3747>=t||3749===t||3751===t||3754===t||3755===t||t>=3757&&3760>=t||3762===t||3763===t||3773===t||t>=3776&&3780>=t||3782===t||3804===t||3805===t||3840===t||t>=3904&&3911>=t||t>=3913&&3948>=t||t>=3976&&3979>=t||t>=4096&&4138>=t||4159===t||t>=4176&&4181>=t||t>=4186&&4189>=t||4193===t||4197===t||4198===t||t>=4206&&4208>=t||t>=4213&&4225>=t||4238===t||t>=4256&&4293>=t||t>=4304&&4346>=t||4348===t||t>=4352&&4680>=t||t>=4682&&4685>=t||t>=4688&&4694>=t||4696===t||t>=4698&&4701>=t||t>=4704&&4744>=t||t>=4746&&4749>=t||t>=4752&&4784>=t||t>=4786&&4789>=t||t>=4792&&4798>=t||4800===t||t>=4802&&4805>=t||t>=4808&&4822>=t||t>=4824&&4880>=t||t>=4882&&4885>=t||t>=4888&&4954>=t||t>=4992&&5007>=t||t>=5024&&5108>=t||t>=5121&&5740>=t||t>=5743&&5759>=t||t>=5761&&5786>=t||t>=5792&&5866>=t||t>=5888&&5900>=t||t>=5902&&5905>=t||t>=5920&&5937>=t||t>=5952&&5969>=t||t>=5984&&5996>=t||t>=5998&&6e3>=t||t>=6016&&6067>=t||6103===t||6108===t||t>=6176&&6263>=t||t>=6272&&6312>=t||6314===t||t>=6320&&6389>=t||t>=6400&&6428>=t||t>=6480&&6509>=t||t>=6512&&6516>=t||t>=6528&&6571>=t||t>=6593&&6599>=t||t>=6656&&6678>=t||t>=6688&&6740>=t||6823===t||t>=6917&&6963>=t||t>=6981&&6987>=t||t>=7043&&7072>=t||7086===t||7087===t||t>=7168&&7203>=t||t>=7245&&7247>=t||t>=7258&&7293>=t||t>=7401&&7404>=t||t>=7406&&7409>=t||t>=7424&&7615>=t||t>=7680&&7957>=t||t>=7960&&7965>=t||t>=7968&&8005>=t||t>=8008&&8013>=t||t>=8016&&8023>=t||8025===t||8027===t||8029===t||t>=8031&&8061>=t||t>=8064&&8116>=t||t>=8118&&8124>=t||8126===t||t>=8130&&8132>=t||t>=8134&&8140>=t||t>=8144&&8147>=t||t>=8150&&8155>=t||t>=8160&&8172>=t||t>=8178&&8180>=t||t>=8182&&8188>=t||8305===t||8319===t||t>=8336&&8340>=t||8450===t||8455===t||t>=8458&&8467>=t||8469===t||t>=8473&&8477>=t||8484===t||8486===t||8488===t||t>=8490&&8493>=t||t>=8495&&8505>=t||t>=8508&&8511>=t||t>=8517&&8521>=t||8526===t||8579===t||8580===t||t>=11264&&11310>=t||t>=11312&&11358>=t||t>=11360&&11492>=t||t>=11499&&11502>=t||t>=11520&&11557>=t||t>=11568&&11621>=t||11631===t||t>=11648&&11670>=t||t>=11680&&11686>=t||t>=11688&&11694>=t||t>=11696&&11702>=t||t>=11704&&11710>=t||t>=11712&&11718>=t||t>=11720&&11726>=t||t>=11728&&11734>=t||t>=11736&&11742>=t||11823===t||12293===t||12294===t||t>=12337&&12341>=t||12347===t||12348===t||t>=12353&&12438>=t||t>=12445&&12447>=t||t>=12449&&12538>=t||t>=12540&&12543>=t||t>=12549&&12589>=t||t>=12593&&12686>=t||t>=12704&&12727>=t||t>=12784&&12799>=t||t>=13312&&19893>=t||t>=19968&&40907>=t||t>=40960&&42124>=t||t>=42192&&42237>=t||t>=42240&&42508>=t||t>=42512&&42527>=t||42538===t||42539===t||t>=42560&&42591>=t||t>=42594&&42606>=t||t>=42623&&42647>=t||t>=42656&&42725>=t||t>=42775&&42783>=t||t>=42786&&42888>=t||42891===t||42892===t||t>=43003&&43009>=t||t>=43011&&43013>=t||t>=43015&&43018>=t||t>=43020&&43042>=t||t>=43072&&43123>=t||t>=43138&&43187>=t||t>=43250&&43255>=t||43259===t||t>=43274&&43301>=t||t>=43312&&43334>=t||t>=43360&&43388>=t||t>=43396&&43442>=t||43471===t||t>=43520&&43560>=t||t>=43584&&43586>=t||t>=43588&&43595>=t||t>=43616&&43638>=t||43642===t||t>=43648&&43695>=t||43697===t||43701===t||43702===t||t>=43705&&43709>=t||43712===t||43714===t||t>=43739&&43741>=t||t>=43968&&44002>=t||t>=44032&&55203>=t||t>=55216&&55238>=t||t>=55243&&55291>=t||t>=63744&&64045>=t||t>=64048&&64109>=t||t>=64112&&64217>=t||t>=64256&&64262>=t||t>=64275&&64279>=t||64285===t||t>=64287&&64296>=t||t>=64298&&64310>=t||t>=64312&&64316>=t||64318===t||64320===t||64321===t||64323===t||64324===t||t>=64326&&64433>=t||t>=64467&&64829>=t||t>=64848&&64911>=t||t>=64914&&64967>=t||t>=65008&&65019>=t||t>=65136&&65140>=t||t>=65142&&65262>=t||t>=65264&&65276>=t||t>=65313&&65338>=t||t>=65345&&65370>=t||t>=65382&&65470>=t||t>=65474&&65479>=t||t>=65482&&65487>=t||t>=65490&&65495>=t||t>=65498&&65500>=t)?(e.index=Q(e.index)+1,t):(e.fail("letter"),!1)}),ni=o("NumberChar",function(e){var t;return t=e.data.charCodeAt(e.index),(128>t?t>=48&&57>=t:178===t||179===t||185===t||t>=188&&190>=t||t>=1632&&1641>=t||t>=1776&&1785>=t||t>=1984&&1993>=t||t>=2406&&2415>=t||t>=2534&&2543>=t||t>=2548&&2553>=t||t>=2662&&2671>=t||t>=2790&&2799>=t||t>=2918&&2927>=t||t>=3046&&3058>=t||t>=3174&&3183>=t||t>=3192&&3198>=t||t>=3302&&3311>=t||t>=3430&&3445>=t||t>=3664&&3673>=t||t>=3792&&3801>=t||t>=3872&&3891>=t||t>=4160&&4169>=t||t>=4240&&4249>=t||t>=4969&&4988>=t||t>=5870&&5872>=t||t>=6112&&6121>=t||t>=6128&&6137>=t||t>=6160&&6169>=t||t>=6470&&6479>=t||t>=6608&&6618>=t||t>=6784&&6793>=t||t>=6800&&6809>=t||t>=6992&&7001>=t||t>=7088&&7097>=t||t>=7232&&7241>=t||t>=7248&&7257>=t||8304===t||t>=8308&&8313>=t||t>=8320&&8329>=t||t>=8528&&8578>=t||t>=8581&&8585>=t||t>=9312&&9371>=t||t>=9450&&9471>=t||t>=10102&&10131>=t||11517===t||12295===t||t>=12321&&12329>=t||t>=12344&&12346>=t||t>=12690&&12693>=t||t>=12832&&12841>=t||t>=12881&&12895>=t||t>=12928&&12937>=t||t>=12977&&12991>=t||t>=42528&&42537>=t||t>=42726&&42735>=t||t>=43056&&43061>=t||t>=43216&&43225>=t||t>=43264&&43273>=t||t>=43472&&43481>=t||t>=43600&&43609>=t||t>=44016&&44025>=t||t>=65296&&65305>=t)?(e.index=Q(e.index)+1,t):(e.fail("number"),!1)}),pc=i(o("Underscore",function(e){return e.data.charCodeAt(e.index)===95?(e.index=Q(e.index)+1,95):(e.fail('"_"'),!1)})),er=i(o("DollarSign",function(e){return e.data.charCodeAt(e.index)===36?(e.index=Q(e.index)+1,36):(e.fail('"$"'),!1)})),Gt=i(o("AtSign",function(e){return e.data.charCodeAt(e.index)===64?(e.index=Q(e.index)+1,64):(e.fail('"@"'),!1)})),ho=i(o("HashSign",function(){function e(e){return e.data.charCodeAt(e.index)===35?(e.index=Q(e.index)+1,35):(e.fail('"#"'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),Bi=i(o("PercentSign",function(e){return e.data.charCodeAt(e.index)===37?(e.index=Q(e.index)+1,37):(e.fail('"%"'),!1)})),Ds=i(o("SymbolChar",function(e){var t;return t=e.data.charCodeAt(e.index),(128>t?33===t||35===t||37===t||38===t||42===t||43===t||45===t||47===t||t>=60&&63>=t||92===t||94===t||96===t||124===t||126===t||127===t:t>=128&&159>=t||t>=161&&169>=t||t>=171&&177>=t||180===t||t>=182&&184>=t||187===t||191===t||215===t||247===t||t>=706&&709>=t||t>=722&&735>=t||t>=741&&747>=t||749===t||t>=751&&879>=t||885===t||888===t||889===t||t>=894&&901>=t||903===t||907===t||909===t||930===t||1014===t||t>=1154&&1161>=t||t>=1318&&1328>=t||1367===t||1368===t||t>=1370&&1376>=t||t>=1416&&1487>=t||t>=1515&&1519>=t||t>=1523&&1568>=t||t>=1611&&1631>=t||t>=1642&&1645>=t||1648===t||1748===t||t>=1750&&1764>=t||t>=1767&&1773>=t||1789===t||1790===t||t>=1792&&1807>=t||1809===t||t>=1840&&1868>=t||t>=1958&&1968>=t||t>=1970&&1983>=t||t>=2027&&2035>=t||t>=2038&&2041>=t||t>=2043&&2047>=t||t>=2070&&2073>=t||t>=2075&&2083>=t||t>=2085&&2087>=t||t>=2089&&2307>=t||t>=2362&&2364>=t||t>=2366&&2383>=t||t>=2385&&2391>=t||t>=2402&&2405>=t||2416===t||t>=2419&&2424>=t||t>=2432&&2436>=t||2445===t||2446===t||2449===t||2450===t||2473===t||2481===t||t>=2483&&2485>=t||t>=2490&&2492>=t||t>=2494&&2509>=t||t>=2511&&2523>=t||2526===t||t>=2530&&2533>=t||2546===t||2547===t||t>=2554&&2564>=t||t>=2571&&2574>=t||2577===t||2578===t||2601===t||2609===t||2612===t||2615===t||t>=2618&&2648>=t||2653===t||t>=2655&&2661>=t||2672===t||2673===t||t>=2677&&2692>=t||2702===t||2706===t||2729===t||2737===t||2740===t||t>=2746&&2748>=t||t>=2750&&2767>=t||t>=2769&&2783>=t||t>=2786&&2789>=t||t>=2800&&2820>=t||2829===t||2830===t||2833===t||2834===t||2857===t||2865===t||2868===t||t>=2874&&2876>=t||t>=2878&&2907>=t||2910===t||t>=2914&&2917>=t||2928===t||t>=2930&&2946>=t||2948===t||t>=2955&&2957>=t||2961===t||t>=2966&&2968>=t||2971===t||2973===t||t>=2976&&2978>=t||t>=2981&&2983>=t||t>=2987&&2989>=t||t>=3002&&3023>=t||t>=3025&&3045>=t||t>=3059&&3076>=t||3085===t||3089===t||3113===t||3124===t||t>=3130&&3132>=t||t>=3134&&3159>=t||t>=3162&&3167>=t||t>=3170&&3173>=t||t>=3184&&3191>=t||t>=3199&&3204>=t||3213===t||3217===t||3241===t||3252===t||t>=3258&&3260>=t||t>=3262&&3293>=t||3295===t||t>=3298&&3301>=t||t>=3312&&3332>=t||3341===t||3345===t||3369===t||t>=3386&&3388>=t||t>=3390&&3423>=t||t>=3426&&3429>=t||t>=3446&&3449>=t||t>=3456&&3460>=t||t>=3479&&3481>=t||3506===t||3516===t||3518===t||3519===t||t>=3527&&3584>=t||3633===t||t>=3636&&3647>=t||t>=3655&&3663>=t||t>=3674&&3712>=t||3715===t||3717===t||3718===t||3721===t||3723===t||3724===t||t>=3726&&3731>=t||3736===t||3744===t||3748===t||3750===t||3752===t||3753===t||3756===t||3761===t||t>=3764&&3772>=t||3774===t||3775===t||3781===t||t>=3783&&3791>=t||3802===t||3803===t||t>=3806&&3839>=t||t>=3841&&3871>=t||t>=3892&&3903>=t||3912===t||t>=3949&&3975>=t||t>=3980&&4095>=t||t>=4139&&4158>=t||t>=4170&&4175>=t||t>=4182&&4185>=t||t>=4190&&4192>=t||t>=4194&&4196>=t||t>=4199&&4205>=t||t>=4209&&4212>=t||t>=4226&&4237>=t||4239===t||t>=4250&&4255>=t||t>=4294&&4303>=t||4347===t||t>=4349&&4351>=t||4681===t||4686===t||4687===t||4695===t||4697===t||4702===t||4703===t||4745===t||4750===t||4751===t||4785===t||4790===t||4791===t||4799===t||4801===t||4806===t||4807===t||4823===t||4881===t||4886===t||4887===t||t>=4955&&4968>=t||t>=4989&&4991>=t||t>=5008&&5023>=t||t>=5109&&5120>=t||5741===t||5742===t||t>=5787&&5791>=t||t>=5867&&5869>=t||t>=5873&&5887>=t||5901===t||t>=5906&&5919>=t||t>=5938&&5951>=t||t>=5970&&5983>=t||5997===t||t>=6001&&6015>=t||t>=6068&&6102>=t||t>=6104&&6107>=t||t>=6109&&6111>=t||t>=6122&&6127>=t||t>=6138&&6157>=t||6159===t||t>=6170&&6175>=t||t>=6264&&6271>=t||6313===t||t>=6315&&6319>=t||t>=6390&&6399>=t||t>=6429&&6469>=t||6510===t||6511===t||t>=6517&&6527>=t||t>=6572&&6592>=t||t>=6600&&6607>=t||t>=6619&&6655>=t||t>=6679&&6687>=t||t>=6741&&6783>=t||t>=6794&&6799>=t||t>=6810&&6822>=t||t>=6824&&6916>=t||t>=6964&&6980>=t||t>=6988&&6991>=t||t>=7002&&7042>=t||t>=7073&&7085>=t||t>=7098&&7167>=t||t>=7204&&7231>=t||t>=7242&&7244>=t||t>=7294&&7400>=t||7405===t||t>=7410&&7423>=t||t>=7616&&7679>=t||7958===t||7959===t||7966===t||7967===t||8006===t||8007===t||8014===t||8015===t||8024===t||8026===t||8028===t||8030===t||8062===t||8063===t||8117===t||8125===t||t>=8127&&8129>=t||8133===t||t>=8141&&8143>=t||8148===t||8149===t||t>=8156&&8159>=t||t>=8173&&8177>=t||8181===t||t>=8189&&8191>=t||t>=8203&&8231>=t||t>=8234&&8238>=t||t>=8240&&8286>=t||t>=8288&&8303>=t||8306===t||8307===t||t>=8314&&8318>=t||t>=8330&&8335>=t||t>=8341&&8449>=t||t>=8451&&8454>=t||8456===t||8457===t||8468===t||t>=8470&&8472>=t||t>=8478&&8483>=t||8485===t||8487===t||8489===t||8494===t||8506===t||8507===t||t>=8512&&8516>=t||t>=8522&&8525>=t||8527===t||t>=8586&&9311>=t||t>=9372&&9449>=t||t>=9472&&10101>=t||t>=10132&&11263>=t||11311===t||11359===t||t>=11493&&11498>=t||t>=11503&&11516>=t||11518===t||11519===t||t>=11558&&11567>=t||t>=11622&&11630>=t||t>=11632&&11647>=t||t>=11671&&11679>=t||11687===t||11695===t||11703===t||11711===t||11719===t||11727===t||11735===t||t>=11743&&11822>=t||t>=11824&&12287>=t||t>=12289&&12292>=t||t>=12296&&12320>=t||t>=12330&&12336>=t||12342===t||12343===t||t>=12349&&12352>=t||t>=12439&&12444>=t||12448===t||12539===t||t>=12544&&12548>=t||t>=12590&&12592>=t||t>=12687&&12689>=t||t>=12694&&12703>=t||t>=12728&&12783>=t||t>=12800&&12831>=t||t>=12842&&12880>=t||t>=12896&&12927>=t||t>=12938&&12976>=t||t>=12992&&13311>=t||t>=19894&&19967>=t||t>=40908&&40959>=t||t>=42125&&42191>=t||42238===t||42239===t||t>=42509&&42511>=t||t>=42540&&42559>=t||42592===t||42593===t||t>=42607&&42622>=t||t>=42648&&42655>=t||t>=42736&&42774>=t||42784===t||42785===t||42889===t||42890===t||t>=42893&&43002>=t||43010===t||43014===t||43019===t||t>=43043&&43055>=t||t>=43062&&43071>=t||t>=43124&&43137>=t||t>=43188&&43215>=t||t>=43226&&43249>=t||t>=43256&&43258>=t||t>=43260&&43263>=t||t>=43302&&43311>=t||t>=43335&&43359>=t||t>=43389&&43395>=t||t>=43443&&43470>=t||t>=43482&&43519>=t||t>=43561&&43583>=t||43587===t||t>=43596&&43599>=t||t>=43610&&43615>=t||t>=43639&&43641>=t||t>=43643&&43647>=t||43696===t||t>=43698&&43700>=t||43703===t||43704===t||43710===t||43711===t||43713===t||t>=43715&&43738>=t||t>=43742&&43967>=t||t>=44003&&44015>=t||t>=44026&&44031>=t||t>=55204&&55215>=t||t>=55239&&55242>=t||t>=55292&&63743>=t||64046===t||64047===t||64110===t||64111===t||t>=64218&&64255>=t||t>=64263&&64274>=t||t>=64280&&64284>=t||64286===t||64297===t||64311===t||64317===t||64319===t||64322===t||64325===t||t>=64434&&64466>=t||t>=64830&&64847>=t||64912===t||64913===t||t>=64968&&65007>=t||t>=65020&&65135>=t||65141===t||t>=65277&&65295>=t||t>=65306&&65312>=t||t>=65339&&65344>=t||t>=65371&&65381>=t||t>=65471&&65473>=t||65480===t||65481===t||65488===t||65489===t||65496===t||65497===t||t>=65501&&65535>=t)?(e.index=Q(e.index)+1,t):(e.fail("symbolic"),!1)})),nr=i(o("DoubleQuote",function(e){return e.data.charCodeAt(e.index)===34?(e.index=Q(e.index)+1,34):(e.fail("'\"'"),!1)})),ps=i(o("SingleQuote",function(e){return e.data.charCodeAt(e.index)===39?(e.index=Q(e.index)+1,39):(e.fail('"\'"'),!1)})),Hs=i(o("TripleDoubleQuote",function(e){var t;return t=e.clone(),nr(t)&&nr(t)&&nr(t)&&(e.update(t),'"""')})),Xs=i(o("TripleSingleQuote",function(e){var t;return t=e.clone(),ps(t)&&ps(t)&&ps(t)&&(e.update(t),"'''")})),rs=i(o("SemicolonChar",function(e){return e.data.charCodeAt(e.index)===59?(e.index=Q(e.index)+1,59):(e.fail('";"'),!1)})),ns=i(o("Semicolon",function(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=rs(n))&&(e.update(n),t)})),os=i(o("Semicolons",function(e){var t,n,r;for(t=e.clone(),r=[];n=ns(t);)r.push(n);return r.length<1?!1:(e.update(t),r)})),Lt=o("Asterix",function(e){return e.data.charCodeAt(e.index)===42?(e.index=Q(e.index)+1,42):(e.fail('"*"'),!1)}),un=o("Caret",function(e){return e.data.charCodeAt(e.index)===94?(e.index=Q(e.index)+1,94):(e.fail('"^"'),!1)}),mi=i(o("OpenParenthesis",function(){function e(e){return e.data.charCodeAt(e.index)===40?(e.index=Q(e.index)+1,40):(e.fail('"("'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),mn=i(o("CloseParenthesis",function(){function e(e){return e.data.charCodeAt(e.index)===41?(e.index=Q(e.index)+1,41):(e.fail('")"'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),gi=i(o("OpenSquareBracketChar",function(e){return e.data.charCodeAt(e.index)===91?(e.index=Q(e.index)+1,91):(e.fail('"["'),!1)})),yi=i(o("OpenSquareBracket",function(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=gi(n))&&(e.update(n),t)})),yn=i(o("CloseSquareBracket",function(){function e(e){return e.data.charCodeAt(e.index)===93?(e.index=Q(e.index)+1,93):(e.fail('"]"'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),_i=i(o("OpenCurlyBraceChar",function(e){return e.data.charCodeAt(e.index)===123?(e.index=Q(e.index)+1,123):(e.fail('"{"'),!1)})),hi=i(o("OpenCurlyBrace",function(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=_i(n))&&(e.update(n),t)})),hn=i(o("CloseCurlyBraceChar",function(e){return e.data.charCodeAt(e.index)===125?(e.index=Q(e.index)+1,125):(e.fail('"}"'),!1)})),pn=i(o("CloseCurlyBrace",function(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=hn(n))&&(e.update(n),t)})),Jt=i(o("Backslash",function(e){return e.data.charCodeAt(e.index)===92?(e.index=Q(e.index)+1,92):(e.fail('"\\\\"'),!1)})),En=i(o("Comma",function(){function e(e){return e.data.charCodeAt(e.index)===44?(e.index=Q(e.index)+1,44):(e.fail('","'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),Yo=i(o("LessThanSign",function(e){return e.data.charCodeAt(e.index)===60?(e.index=Q(e.index)+1,60):(e.fail('"<"'),!1)})),Aa=i(o("MaybeComma",function(e){return En(e)||!0})),An=i(o("CommaOrNewline",function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=En(n))&&Mr(n)&&(e.update(n),t)}return function(t){return e(t)||ms(t)}}())),ys=o("SomeEmptyLinesWithCheckIndent",function(e){var t;return t=e.clone(),ms(t)&&fn(t)&&(e.update(t),!0)}),Cn=o("CommaOrNewlineWithCheckIndent",function(){var e;return e=function(){var e;return e=o(rt(null!=ys&&ys.parserName||"SomeEmptyLinesWithCheckIndent")+"?",function(e){return ys(e)||!0}),function(t){var n;return n=t.clone(),En(n)&&e(n)&&(t.update(n),!0)}}(),function(t){return e(t)||ys(t)}}()),Ca=o("MaybeCommaOrNewline",function(e){return An(e)||!0}),Ra=o("NameStart",function(e){return Xo(e)||pc(e)||er(e)}),ja=o("NameChar",function(e){return Ra(e)||ni(e)}),La=o("NamePart",function(e){var t,n,r;for(t=e.clone(),r=[];n=ja(t);)r.push(n);return r.length<1?!1:(e.update(t),r)}),_t=i(o("_Name",function(){return function(){var e,t;return e=function(){var e;return e=o(rt(null!=ja&&ja.parserName||"NameChar")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=ja(t);)r.push(n);return e.update(t),r}),function(t){var n,r;return r=t.clone(),n={},(n.head=Ra(r))&&(n.tail=e(r))&&(t.update(r),n)}}(),t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Fa(n)&&(t=La(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},(r.head=e(o))&&(r.tail=t(o))&&(n.update(o),r)}function r(e){var t,n,r,o,a;for(a=[Kr(e.head.head)],_(e.head.tail,a),t=ot(e.tail),n=0,r=t.length;r>n;++n)o=t[n],a.push(Kr(o[0]).toUpperCase()),_(tt.call(o,1),a);return a.join("")}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}()}())),Oa=i(o("Name",function(){function e(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=_t(n))&&(e.update(n),t)}return function(t){var n,r;return n=t.clone(),n.preventFail(),r=e(n),n.unpreventFail(),r?(t.update(n),r):(t.fail("name"),!1)}}())),vt=i(o("_Symbol",function(){function e(e){return _(e).join("")}var t;return t=o(rt(null!=Ds&&Ds.parserName||"SymbolChar")+"+",function(e){var t,n,r;for(t=e.clone(),r=[];n=Ds(t);)r.push(n);return r.length<1?!1:(e.update(t),r)}),o(null!=t&&t.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=t(n),a?e(a,n,r,o):!1})}())),Ss=i(o("Symbol",function(){function e(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&(t=vt(n))&&(e.update(n),t)}return function(t){var n,r;return n=t.clone(),n.preventFail(),r=e(n),n.unpreventFail(),r?(t.update(n),r):(t.fail("symbol"),!1)}}())),mt=function(){function e(e){return _t(e)||vt(e)||xn(e)}return function(){function t(e){return e.join("")}var n;return n=o(rt(null!=e&&e.parserName||"<unknown>")+"+",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return o.length<1?!1:(t.update(n),o)}),o(null!=n&&n.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=n(e),a?t(a,e,r,o):!1})}()}(),At=o("AnyChar",function(e){var t,n,r;return n=e.data,r=e.index,$(r,n.length)?(t=n.charCodeAt(r),++e.index,(13===t||10===t||8232===t||8233===t)&&(++e.line,13===t&&n.charCodeAt(Q(r)+1)===10&&++e.index),t||-1):(e.fail("any"),!1)}),Ps=i(o("ThisLiteral",l("this",function(e,t,n){return t["this"](n)}))),Ws=i(o("ThisShorthandLiteral",function(){function e(e){var t;return t=e.clone(),gs(t)&&Gt(t)&&(e.update(t),!0)}function t(e,t,n){return t["this"](n)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}())),Vs=i(o("ThisOrShorthandLiteral",function(e){return Ps(e)||Ws(e)})),qs=o("ThisOrShorthandLiteralPeriod",function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=Ps(n))&&Mi(n)&&(e.update(n),t)}var t;return t=function(){var e;return e=o(rt(null!=Mi&&Mi.parserName||"Period")+"?",function(e){return Mi(e)||!0}),function(t){var n,r;return r=t.clone(),n=void 0,(n=Ws(r))&&e(r)&&(t.update(r),n)}}(),function(n){return e(n)||t(n)}}()),Sa=i(o("MaybeUnderscores",function(e){for(;pc(e););return!0})),qn=i(o("DecimalNumber",function(){var e;return e=o("DecimalDigits",y(Vn)),function(){var t,n,r;return t=function(){var t;return t=function(){function t(t){var n,r;return r=t.clone(),n=void 0,Sa(r)&&Mi(r)&&Sa(r)&&(n=e(r))&&(t.update(r),n)}function n(e){return"."+rt(e)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(e){var n,r;return n=e.index,r=e.line,t(e)||("function"==typeof Qa?Qa(void 0,e,n,r):Qa)})}(),n=function(){var t;return t=function(){function t(e){var t;return t=e.data.charCodeAt(e.index),69===t||101===t?(e.index=Q(e.index)+1,t):(e.fail("[Ee]"),!1)}var n;return n=o(rt(null!=Fi&&Fi.parserName||"PlusOrMinus")+"?",function(e){var t,n;return t=e.index,n=e.line,Fi(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function r(r){var o,a;return a=r.clone(),o={},(o.e=t(a))&&(o.op=n(a))&&(o.digits=e(a))&&(r.update(a),o)}function a(e){return rt(Kr(e.e))+rt(e.op!==Qa?Kr(e.op):"")+rt(e.digits)}return o(null!=r&&r.parserName||"<unknown>",function(e){var t,n,o;return t=e.index,n=e.line,o=r(e),o?a(o,e,t,n):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(e){var n,r;return n=e.index,r=e.line,t(e)||("function"==typeof Qa?Qa(void 0,e,n,r):Qa)})}(),r=function(){var e;return e=function(){var e;return e=o(rt(null!=La&&La.parserName||"NamePart")+"?",function(e){return La(e)||!0}),function(t){var n;return n=t.clone(),pc(n)&&e(n)&&(t.update(n),!0)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}(),function(){function a(o){var a,i;return i=o.clone(),a={},(a.integer=e(i))&&(a.decimal=t(i))&&(a.scientific=n(i))&&r(i)&&(o.update(i),a)}function i(e,t,n){var r,o,a,i;return r=e.decimal,o=e.scientific,r===Qa&&(r=""),o===Qa&&(o=""),a=rt(e.integer)+rt(r)+rt(o),i=Number(a),isFinite(i)||t.error("Unable to parse number: "+a),t["const"](n,i)}return o(null!=a&&a.parserName||"<unknown>",function(e){var t,n,r;return t=e.index,n=e.line,r=a(e),r?i(r,e,t,n):!1})}()}()}())),_o=o("HexDigit",function(e){var t;return t=e.data.charCodeAt(e.index),t>=48&&57>=t||t>=65&&70>=t||t>=97&&102>=t?(e.index=Q(e.index)+1,t):(e.fail("[0-9A-Fa-f]"),!1)}),yo=o("HexNumber",g(16,function(e){var t;return t=e.data.charCodeAt(e.index),88===t||120===t?(e.index=Q(e.index)+1,t):(e.fail("[Xx]"),!1)},_o)),di=o("OctalDigit",function(e){var t;return t=e.data.charCodeAt(e.index),t>=48&&55>=t?(e.index=Q(e.index)+1,t):(e.fail("[0-7]"),!1)}),pi=o("OctalNumber",g(8,function(e){var t;return t=e.data.charCodeAt(e.index),79===t||111===t?(e.index=Q(e.index)+1,t):(e.fail("[Oo]"),!1)},di)),$t=o("BinaryDigit",function(e){var t;return t=e.data.charCodeAt(e.index),48===t||49===t?(e.index=Q(e.index)+1,t):(e.fail("[01]"),!1)}),Xt=o("BinaryNumber",g(2,function(e){var t;return t=e.data.charCodeAt(e.index),66===t||98===t?(e.index=Q(e.index)+1,t):(e.fail("[Bb]"),!1)},$t)),Gi=o("RadixNumber",function(){var e,t;return e=function(){var e;return e=[],function(t){var n;return(n=e[t])==null?e[t]=function(){var e,n,r,o;switch(t){case 2:r=$t;break;case 8:r=di;break;case 10:r=Vn;break;case 16:r=_o;break;default:for(n=[],o=0,e=Q(t)>10?Q(t):10;e>o;++o)n[o+48]=!0;for(o=0,e=(Q(t)>36?Q(t):36)-10;e>o;++o)n[o+97]=!0,n[o+65]=!0;r=function(e){var t;return t=e.data.charCodeAt(e.index),n[t]?(e.index=Q(e.index)+1,t):!1}}return y(r)}():n}}(),t=o(rt(null!=Vn&&Vn.parserName||"DecimalDigit")+"{1,2}",function(e){var t,n,r;for(t=e.clone(),r=[];r.length<2&&(n=Vn(t));)r.push(n);return r.length<1?!1:(e.update(t),r)}),function(n){var r,o,a,i,s,c,l,u,f,d;if(u=n.index,r=n.clone(),c=t(r),!c)return!1;if(c=_(c).join(""),!ra(r))return!1;if(l=Number(c),isFinite(l)?(2>l||l>36)&&n.error("Radix must be at least 2 and at most 36, not "+l):n.error("Unable to parse radix: "+rt(c)),i=e(l),s=i(r),!s)return!1;if(d=parseInt(s,l),isFinite(d)||n.error("Unable to parse number: "+l+"r"+rt(s)),Sa(r),f=r.clone(),Mi(f)&&(Sa(f),o=i(f)))for(r.update(f);;)if(a=parseInt(o,l),a!==a)n.error("Unable to parse number: "+l+"r"+rt(s)+"."+rt(o));else{if(isFinite(a)){d+=a/Math.pow(l,Q(o.length));break}o=o.slice(0,-1)}return Sa(r),n.update(r),n["const"](u,d)}}()),ri=i(o("NumberLiteral",function(){function e(e){return yo(e)||pi(e)||Xt(e)||Gi(e)||qn(e)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),ti=i(o("NullLiteral",b("null",null))),gc=i(o("VoidLiteral",function(){var e,t;return e=b("undefined",void 0),t=b("void",void 0),function(n){return e(n)||t(n)}}())),Uo=o("InfinityLiteral",b("Infinity",1/0)),Pa=o("NaNLiteral",b("NaN",0/0)),ec=o("TrueLiteral",b("true",!0)),Gr=o("FalseLiteral",b("false",!1)),fs=o("SimpleConstantLiteral",function(e){return ti(e)||gc(e)||Uo(e)||Pa(e)||ec(e)||Gr(e)}),aa=i(o("LowerX",function(e){return e.data.charCodeAt(e.index)===120?(e.index=Q(e.index)+1,120):(e.fail('"x"'),!1)})),mo=o("HexEscapeSequence",function(){var e;return e=function(){var e;return e=o(rt(null!=_o&&_o.parserName||"HexDigit")+"{2}",function(e){var t,n,r;for(t=e.clone(),r=[];r.length<2&&(n=_o(t));)r.push(n);return r.length<2?!1:(e.update(t),r)}),function(){function t(t){var n,r;return r=t.clone(),n=void 0,aa(r)&&(n=e(r))&&(t.update(r),n)}function n(e){return parseInt(_(e).join(""),16)||-1}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(aa(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),oa=i(o("LowerU",function(e){return e.data.charCodeAt(e.index)===117?(e.index=Q(e.index)+1,117):(e.fail('"u"'),!1)})),hc=o("UnicodeEscapeSequence",function(){var e;return e=function(){var e;return e=function(){var e,t;return e=function(){function e(e){return parseInt(_(e).join(""),16)||-1}var t;return t=o(rt(null!=_o&&_o.parserName||"HexDigit")+"{4}",function(e){var t,n,r;for(t=e.clone(),r=[];r.length<4&&(n=_o(t));)r.push(n);return r.length<4?!1:(e.update(t),r)}),o(null!=t&&t.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=t(n),a?e(a,n,r,o):!1})}(),t=function(){var e;return e=o(rt(null!=_o&&_o.parserName||"HexDigit")+"{1,6}",function(e){var t,n,r;for(t=e.clone(),r=[];r.length<6&&(n=_o(t));)r.push(n);return r.length<1?!1:(e.update(t),r)}),function(){function t(t){var n,r;return r=t.clone(),n=void 0,_i(r)&&(n=e(r))&&hn(r)&&(t.update(r),n)}function n(e,t){var n,r;return n=_(e).join(""),r=parseInt(n,16)||-1,r>1114111?t.error("Unicode escape sequence too large: \\u{"+rt(n)+"}"):r}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(n){return e(n)||t(n)}}(),function(t){var n,r;return r=t.clone(),n=void 0,oa(r)&&(n=e(r))&&(t.update(r),n)
}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(oa(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),ds=o("SingleEscapeCharacter",function(){var e;return e={98:8,102:12,114:13,110:10,116:9,118:11,48:-1,49:1,50:2,51:3,52:4,53:5,54:6,55:7},function(){function t(t){return et.call(e,t)?e[t]:t}return o(null!=At&&At.parserName||"AnyChar",function(e){var n,r,o;return n=e.index,r=e.line,o=At(e),o?t(o,e,n,r):!1})}()}()),zt=o("BackslashEscapeSequence",function(){function e(e){return mo(e)||hc(e)||ds(e)}return function(t){var n,r;return r=t.clone(),n=void 0,Jt(r)&&(n=e(r))&&(t.update(r),n)}}()),Xa=o("Nothing",function(e){return e.nothing(e.index)}),Cs=o("StringInterpolation",function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){return Ur(e)||Xa(e)}return function(t){var n,r;return r=t.clone(),n=void 0,mi(r)&&(n=e(r))&&mn(r)&&(t.update(r),n)}}(),function(t){return go(t)||e(t)}}(),function(t){var n,r;return r=t.clone(),n=void 0,er(r)&&Ha(r)&&(n=e(r))&&(t.update(r),n)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(er(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),hs=o("SingleStringLiteral",function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){return ps(e)||Ua(e)}return o("!"+rt(null!=e&&e.parserName||"<unknown>"),function(t){return!e(t.clone())&&At(t)})}(),function(t){return zt(t)||e(t)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n=void 0,ps(r)&&(n=e(r))&&ps(r)&&(t.update(r),n)}function n(e,t,n){return t["const"](n,_(e).join(""))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(ps(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),ar=o("DoubleStringLiteralInner",function(){var e;return e=function(){var e;return e=function(){function e(e){return nr(e)||Ua(e)}return o("!"+rt(null!=e&&e.parserName||"<unknown>"),function(t){return!e(t.clone())&&At(t)})}(),function(t){return zt(t)||Cs(t)||e(t)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}()),or=o("DoubleStringLiteral",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,nr(n)&&(t=ar(n))&&nr(n)&&(e.update(n),t)}function t(e,t,n){var r,o,a,i,s,c;for(r=[],o=ot(v(e,t,n)),a=0,i=o.length;i>a;++a)s=o[a],s.isConst()&&s.constValue()===""||r.push(s);return c=r,c.length===0?t["const"](n,""):c.length===1&&c[0].isConst()&&typeof c[0].constValue()=="string"?c[0]:t.string(n,c)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(nr(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),Ti=i(o("PercentSignDoubleQuote",function(e){var t;return t=e.clone(),Bi(t)&&nr(t)&&(e.update(t),!0)})),rr=o("DoubleStringArrayLiteral",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Ti(n)&&(t=ar(n))&&nr(n)&&(e.update(n),t)}function t(e,t,n){var r;return r=v(e,t,n),t.array(n,r)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Ti(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),As=o("StringIndent",function(e){var t,n,r,o;for(n=e.clone(),r=1,o=n.indent.peek();r<Q(o)&&(t=bs(n));){if(!et.call(jo,t))throw Error("Unexpected indent char: "+nt(JSON.stringify(t)));r+=Q(jo[t])}return r>Q(o)?e.error("Mixed tabs and spaces in string literal"):r<Q(o)&&!Ua(n.clone())?!1:(e.update(n),r)}),Qs=o("TripleSingleStringLine",function(){var e;return e=function(){var e;return e=function(){function e(e){return Xs(e)||Ua(e)}return o("!"+rt(null!=e&&e.parserName||"<unknown>"),function(t){return!e(t.clone())&&At(t)})}(),function(t){return zt(t)||e(t)}}(),function(){function t(e){return[_(e).join("").replace(/[\t ]+$/,"")]}var n;return n=o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o}),o(null!=n&&n.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=n(e),a?t(a,e,r,o):!1})}()}()),$s=o("TripleDoubleStringLine",function(){var e;return e=function(){var e;return e=function(){function e(e){return Hs(e)||Ua(e)}return o("!"+rt(null!=e&&e.parserName||"<unknown>"),function(t){return!e(t.clone())&&At(t)})}(),function(t){return zt(t)||Cs(t)||e(t)}}(),function(){function t(e){var t,n,r,o,a,i;for(i=[],o=[],t=ot(e),n=0,r=t.length;r>n;++n)a=t[n],"number"==typeof a?o.push(a):a instanceof Za||(i.push(_(o).join("")),o=[],i.push(a));return o.length>0&&i.push(_(o).join("").replace(/[\t ]+$/,"")),i}var n;return n=o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o}),o(null!=n&&n.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=n(e),a?t(a,e,r,o):!1})}()}()),Zs=o("TripleSingleStringLiteral",x(Xs,Qs)),Ys=o("TripleDoubleStringLiteral",x(Hs,$s)),ki=i(o("PercentSignTripleDoubleQuote",function(e){var t;return t=e.clone(),Bi(t)&&Hs(t)&&(e.update(t),!0)})),Ks=o("TripleDoubleStringArrayLiteral",function(){var e;return e=function(){var e,t;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,bt(n)&&(t=Ua(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),t=function(){function e(){return[]}var t;return t=function(){var e,t;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Ua(n)&&As(n)&&(t=$s(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},As(r)&&(n.head=$s(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),t=o(rt(null!=Ua&&Ua.parserName||"Newline")+"?",function(e){return Ua(e)||!0}),function(n){var r,o;return o=n.clone(),r=void 0,Ia(o)&&(r=e(o))&&t(o)&&Oi(o)&&(n.update(o),r)}}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function n(n){var r,o;return o=n.clone(),r={},ki(o)&&(r.first=$s(o))&&(r.emptyLines=e(o))&&(r.rest=t(o))&&Hs(o)&&(n.update(o),r)}function r(e,t,n){var r;return r=w(e,t,n),t.array(n,r)}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(ki(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),ra=i(o("LowerR",function(e){return e.data.charCodeAt(e.index)===114?(e.index=Q(e.index)+1,114):(e.fail('"r"'),!1)})),Qi=i(o("RegexTripleSingleToken",function(e){var t;return t=e.clone(),ra(t)&&Xs(t)&&(e.update(t),!0)})),Xi=i(o("RegexTripleDoubleToken",function(e){var t;return t=e.clone(),ra(t)&&Hs(t)&&(e.update(t),!0)})),Yi=i(o("RegexSingleToken",function(e){var t;return t=e.clone(),ra(t)&&ps(t)&&(e.update(t),!0)})),zi=i(o("RegexDoubleToken",function(e){var t;return t=e.clone(),ra(t)&&nr(t)&&(e.update(t),!0)})),Hi=o("RegexFlags",function(){function e(){return[]}return o(rt(null!=La&&La.parserName||"NamePart")+"?",function(t){var n,r;return n=t.index,r=t.line,La(t)||e(void 0,t,n,r)})}()),Ji=o("RegexComment",function(){var e;return e=function(){var e;return e=o("!"+rt(null!=Ua&&Ua.parserName||"Newline"),function(e){return!Ua(e.clone())&&At(e)}),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n;return n=t.clone(),ho(n)&&e(n)&&(t.update(n),!0)}return o(null!=t&&t.parserName||"<unknown>",function(e){var n,r,o;return n=e.index,r=e.line,o=t(e),o?"function"==typeof Qa?Qa(o,e,n,r):void 0!==Qa?Qa:o:!1})}()}()),Ki=o("RegexLiteral",function(){var e;return e=function(){var e,t,n,r;return e=function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){var t;return t=e.clone(),Jt(t)&&er(t)&&(e.update(t),36)}var t,n,r;return r=o(null!=bs&&bs.parserName||"SpaceChar",function(e){var t,n,r;return t=e.index,n=e.line,r=bs(e),r?"function"==typeof Qa?Qa(r,e,t,n):void 0!==Qa?Qa:r:!1}),t=o(null!=Ua&&Ua.parserName||"Newline",function(e){var t,n,r;return t=e.index,n=e.line,r=Ua(e),r?"function"==typeof Qa?Qa(r,e,t,n):void 0!==Qa?Qa:r:!1}),n=o("!"+rt(null!=Hs&&Hs.parserName||"TripleDoubleQuote"),function(e){return!Hs(e.clone())&&At(e)}),function(o){return e(o)||r(o)||t(o)||Ji(o)||Cs(o)||n(o)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(t){var n,r;return r=t.clone(),n={},Xi(r)&&(n.text=e(r))&&Hs(r)&&(n.flags=Hi(r))&&(t.update(r),n)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Xi(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),t=function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){var e,t,n;return t=o(null!=bs&&bs.parserName||"SpaceChar",function(e){var t,n,r;return t=e.index,n=e.line,r=bs(e),r?"function"==typeof Qa?Qa(r,e,t,n):void 0!==Qa?Qa:r:!1}),n=o(null!=Ua&&Ua.parserName||"Newline",function(e){var t,n,r;return t=e.index,n=e.line,r=Ua(e),r?"function"==typeof Qa?Qa(r,e,t,n):void 0!==Qa?Qa:r:!1}),e=o("!"+rt(null!=Xs&&Xs.parserName||"TripleSingleQuote"),function(e){return!Xs(e.clone())&&At(e)}),function(r){return t(r)||n(r)||Ji(r)||e(r)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(t){var n,r;return r=t.clone(),n={},Qi(r)&&(n.text=e(r))&&Xs(r)&&(n.flags=Hi(r))&&(t.update(r),n)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Qi(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),n=function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){var t;return t=e.clone(),nr(t)&&nr(t)&&(e.update(t),34)}function t(e){var t;return t=e.clone(),Jt(t)&&er(t)&&(e.update(t),36)}var n;return n=function(){function e(e){return nr(e)||Ua(e)||er(e)}return o("!"+rt(null!=e&&e.parserName||"<unknown>"),function(t){return!e(t.clone())&&At(t)})}(),function(r){return e(r)||t(r)||n(r)||Cs(r)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(t){var n,r;return r=t.clone(),n={},zi(r)&&(n.text=e(r))&&nr(r)&&(n.flags=Hi(r))&&(t.update(r),n)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(zi(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),r=function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){var t;return t=e.clone(),ps(t)&&ps(t)&&(e.update(t),39)}var t;return t=function(){function e(e){return ps(e)||Ua(e)}return o("!"+rt(null!=e&&e.parserName||"<unknown>"),function(t){return!e(t.clone())&&At(t)})}(),function(n){return e(n)||t(n)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(t){var n,r;return r=t.clone(),n={},Yi(r)&&(n.text=e(r))&&ps(r)&&(n.flags=Hi(r))&&(t.update(r),n)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Yi(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),function(){function a(o){return e(o)||t(o)||n(o)||r(o)}function i(e,t,n){var r,o,a,i,s,c,l,u,f,d;for(f=[],i=[],r=ot(e.text),o=0,a=r.length;a>o;++o)l=r[o],"number"==typeof l?i.push(l):l===Qa||l instanceof Za||(i.length>0&&(f.push(t["const"](n,_(i).join(""))),i=[]),f.push(l));if(i.length>0&&f.push(t["const"](n,_(i).join(""))),c=_(e.flags).join(""),d=f.length===0?t["const"](n,""):f.length===1&&f[0].isConst()&&typeof f[0].constValue()=="string"?f[0]:t.string(n,f),d.isConst())try{RegExp(String(d.constValue()))}catch(p){t.error(p.message)}for(u=[],r=ot(c),o=0,a=r.length;a>o;++o)s=r[o],z(s,u)?t.error("Specified flag '"+rt(s)+"' in regular expression more than once"):"g"!==s&&"i"!==s&&"m"!==s&&"y"!==s&&t.error("Unknown regular expression flag '"+rt(s)+"'"),u.push(s);return t.regexp(n,d,c)}return o(null!=a&&a.parserName||"<unknown>",function(e){var t,n,r;return t=e.index,n=e.line,r=a(e),r?i(r,e,t,n):!1})}()}(),function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}()),Ht=o("BackslashStringLiteral",function(e){var t,n;return n=e.clone(),t=void 0,Jt(n)&&Ha(n)&&(t=bo(n))&&(e.update(n),t)}),Ns=i(o("StringLiteral",function(){function e(e){return Ht(e)||Zs(e)||Ys(e)||Ks(e)||hs(e)||or(e)||rr(e)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}())),Tn=i(o("ConstantLiteral",function(e){return fs(e)||ri(e)||Ns(e)||Ki(e)})),Bt=i(o("ArgumentsLiteral",l("arguments",function(e,t,n){return t.args(n)}))),ta=o("Literal",function(e){return Vs(e)||Bt(e)||Tn(e)}),bo=o("IdentifierNameConst",function(e){var t,n;return t=e.index,n=Oa(e),n?e["const"](t,n):!1}),vo=i(o("IdentifierNameConstOrNumberLiteral",function(e){return bo(e)||ri(e)})),lo=function(){var e,t;return e=["as","AST","arguments","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","import","Infinity","instanceof","in","let","macro","mutable","NaN","new","not","null","package","private","protected","public","return","static","super","switch","then","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],t=ot(e).concat(["end"]).sort(),function(n){return null==n&&(n={}),n.noindent?t:e}}(),go=i(o("Identifier",function(){function e(e){var t,n,r;return n=e.index,t=e.clone(),r=Oa(t),!r||z(r,lo(e.options))||e.macros.hasMacroOrOperator(r)?(e.fail("identifier"),!1):(e.update(t),e.ident(n,r))}var t;return t=function(){function e(){return ut.peek()}return function(){function t(t){var n,r;return r=t.clone(),n=void 0,e(r)&&gs(r)&&er(r)&&Ha(r)&&(n=Jo(r))&&(t.update(r),n)}function n(e,t,n){return t.call(n,t.ident(n,"$"),e)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(n){return t(n)||e(n)}}())),ka=i(o("MaybeNotToken",function(){var e;return e=l("not"),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}())),Ta=i(o("MaybeExistentialSymbolNoSpace",function(){var e;return e=function(){function e(e){return e.data.charCodeAt(e.index)===63?(e.index=Q(e.index)+1,63):(e.fail('"?"'),!1)}return function(t){var n;return n=t.clone(),Ha(n)&&e(n)&&(t.update(n),"?")}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}())),Ln=o("CustomOperatorCloseParenthesis",function(){function e(e,t,n,r){var o,a,i;return o=t.clone(t.cloneScope()),i=e.rule(o),i&&mn(o)?(t.update(o),a=o.ident(n,"x"),o.scope.add(a,!1,rc.any),I(t["function"](n,[o.param(n,a)],e.func({op:i,node:a},o,n,r),!0,!1),t,n,r)):void 0}return function(t){var n,r,o,a,i,s,c,l,u,f,d,p,h,_,m,y;for(l=t.index,d=t.line,n=ot(t.macros.binaryOperators),o=0,i=n.length;i>o;++o)if(_=n[o])for(r=ot(_),a=r.length;a--;)if(h=r[a],c=t.clone(t.cloneScope()),u=!1,(!h.invertible||(u=ka(c)))&&(p=h.rule(c),p&&mn(c)))return f=t.ident(l,"x"),y=t.ident(l,"y"),c.scope.add(f,!1,rc.any),c.scope.add(y,!1,rc.any),m=t["function"](l,[c.param(l,f),c.param(l,y)],h.func({left:f,inverted:"not"===u,op:p,right:y},c,l,d),!0,!1,!0),t.update(c),I(m,t,l,d);for(n=ot(t.macros.prefixUnaryOperators),o=n.length;o--;)if(h=n[o],(s=e(h,t,l,d))!=null)return s;for(n=ot(t.macros.postfixUnaryOperators),o=n.length;o--;)if(h=n[o],(s=e(h,t,l,d))!=null)return s;return!1}}()),jn=o("CustomBinaryOperator",function(e){var t,n,r,o,a,i,s,c,l,u,f;for(s=e.index,t=ot(e.macros.binaryOperators),r=0,a=t.length;a>r;++r)if(f=t[r])for(n=ot(f),o=n.length;o--;)if(u=n[o],i=e.clone(),c=!1,(!u.invertible||(c=ka(i)))&&(l=u.rule(i)))return e.update(i),{op:l,operator:u,inverted:"not"===c};return!1}),Ci=o("Parenthetical",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=Ft(n))&&mn(n)&&(e.update(n),t)}var t,n,r;return t=function(){var e;return e=o(rt(null!=jn&&jn.parserName||"CustomBinaryOperator")+"?",function(e){var t,n;return t=e.index,n=e.line,jn(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.left=Ur(r))&&(n.operator=e(r))&&mn(r)&&(t.update(r),n)}function n(e,t,n,r){var o,a,i,s;return a=e.left,i=e.operator,i===Qa?a:(o=t.clone(t.cloneScope()),s=t.tmp(n,fo(),"x"),o.scope.add(s,!1,rc.any),I(t["function"](n,[o.param(n,s)],i.operator.func({left:a.rescope(o.scope.id,o),inverted:i.inverted,op:i.op,right:s},o,n,r),!0,!1),t,n,r))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),n=function(){function e(e){var t,n;return n=e.clone(),t={},(t.operator=jn(n))&&(t.right=Ur(n))&&mn(n)&&(e.update(n),t)}function t(e,t,n,r){var o,a,i,s,c,l,u;return u=e.right,o=e.operator,c=o.op,l=o.operator,i=o.inverted,a=t.clone(t.cloneScope()),s=t.tmp(n,fo(),"x"),a.scope.add(s,!1,rc.any),I(t["function"](n,[a.param(n,s)],l.func({left:s,inverted:i,op:c,right:u.rescope(a.scope.id,a)},a,n,r),!0,!1),t,n,r)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),r=function(){var e;return e=o(rt("undefined"!=typeof Ho&&null!==Ho&&Ho.parserName||"InvocationOrAccessPart")+"+",function(e){var t,n,r;for(t=e.clone(),r=[];n=Ho(t);)r.push(n);return r.length<1?!1:(e.update(t),r)}),function(){function t(t){var n,r;return r=t.clone(),n=void 0,(n=e(r))&&mn(r)&&(t.update(r),n)}function n(e,t,n,r){var o,a;return o=t.clone(t.cloneScope()),a=t.tmp(n,fo(),"x"),o.scope.add(a,!1,rc.any),I(t["function"](n,[o.param(n,a)],Dn(!1,{type:"normal",existential:!1,node:a,generic:[]},e,t,n).rescope(o.scope.id,o),!0,!1),t,n,r)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(o){return e(o)||t(o)||Ln(o)||n(o)||r(o)}}(),function(t){var n,r;return r=t.clone(),n=void 0,mi(r)&&(n=e(r))&&(t.update(r),n)}}()),Ma=o("MaybeSpreadToken",function(){function e(e){var t;return t=e.clone(),gs(t)&&Mi(t)&&Mi(t)&&Mi(t)&&(e.update(t),"...")}return o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}()),ws=o("SpreadOrExpression",function(){function e(e){var t,n;return n=e.clone(),t={},(t.spread=Ma(n))&&(t.node=Ur(n))&&(e.update(n),t)}function t(e,t,n){return e.spread==="..."?t.spread(n,e.node.doWrap(t)):e.node}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}()),Tt=o("ArrayLiteral",ji(function(){var e,t;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=ws(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=ws(r))&&(n.tail=e(r))&&Aa(r)&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),t=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Cn(n)&&(t=ws(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},fn(r)&&(n.head=ws(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(t){var n,r;return r=t.clone(),n=void 0,ms(r)&&Ia(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&Oi(r)&&(t.update(r),n)}}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function n(n){var r,o;return o=n.clone(),r={},yi(o)&&gs(o)&&(r.first=e(o))&&(r.rest=t(o))&&yn(o)&&(n.update(o),r)}function r(e,t,n){return t.array(n,ot(e.first).concat(ot(e.rest)))}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}())),ss=i(o("SetLiteralToken",function(e){var t;return t=e.clone(),gs(t)&&Bi(t)&&gi(t)&&(e.update(t),!0)})),is=o("SetLiteral",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&Bi(n)&&(t=Tt(n))&&(e.update(n),t)}function t(e,t,n,r){var o;if(o=t.macros.getByLabel("constructSet"),!o)throw Error("Cannot use literal set until the construct-set macro has been defined");return o.func({op:"",node:e},t,n,r)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(ss(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),sn=o("BracketedObjectKey",function(e){var t,n;return n=e.clone(),t=void 0,yi(n)&&(t=qr(n))&&yn(n)&&(e.update(n),t)}),Mn=o("ConstObjectKey",function(){var e;return e=function(){function e(e,t,n){return t["const"](n,String(e.value))}return o(null!=ri&&ri.parserName||"NumberLiteral",function(t){var n,r,o;return n=t.index,r=t.line,o=ri(t),o?e(o,t,n,r):!1})}(),function(t){return Ns(t)||e(t)||bo(t)}}()),oi=i(o("ObjectKey",function(e){return sn(e)||Mn(e)})),gn=i(o("Colon",function(){var e;return e=o("!"+rt(null!=bn&&bn.parserName||"ColonChar"),function(e){return!bn(e.clone())}),function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=bn(r))&&e(r)&&(t.update(r),n)}}())),In=i(o("ColonNewline",function(e){var t,n;return n=e.clone(),t=void 0,gn(n)&&gs(n)&&(t=Ua(n))&&(e.update(n),t)})),$a=i(o("NotColon",function(e){return!gn(e.clone())})),Ya=i(o("NotColonUnlessNoIndentAndNewline",function(e){return e.options.noindent?In(e.clone())?!0:e.options.embedded?vn(e.clone())||wn(e.clone())||$a(e):$a(e):$a(e)})),ai=i(o("ObjectKeyColon",function(){var e;return e=function(){function e(e){var t;if(e.options.noindent){if(t=e.clone(),gs(t)&&Ua(t))return!1;if(e.options.embedded)return!hr(e.clone())&&!mr(e.clone())}return!0}var t;return t=o("!"+rt(null!=jr&&jr.parserName||"EqualChar"),function(e){return!jr(e.clone())}),function(n){var r,o;return o=n.clone(),r=void 0,(r=oi(o))&&gn(o)&&t(o)&&e(o)&&(n.update(o),r)}}(),function(t){var n,r;return n=t.clone(),n.preventFail(),r=e(n),n.unpreventFail(),r?(t.update(n),r):(t.fail('key ":"'),!1)}}())),ii=i(o("ObjectKeyNotColon",function(e){var t,n;return n=e.clone(),t=void 0,(t=oi(n))&&$a(n)&&(e.update(n),t)})),Ja=o("NoNewlineIfNoIndent",function(e){return e.options.noindent?Ka(e):!0}),ir=o("DualObjectKey",function(e){var t,n;return n=e.clone(),t={},(t.key=ai(n))&&Ja(n)&&(t.value=Ur(n))&&(e.update(n),t)}),uo=i(o("GetSetToken",function(){var e,t;return e=l("get"),t=l("set"),function(n){return e(n)||t(n)}}())),Pi=i(o("PropertyObjectKeyColon",function(){var e;return e=function(){var e;return e=l("property"),function(t){return e(t)||uo(t)}}(),function(t){var n,r;return r=t.clone(),n={},(n.property=e(r))&&gs(r)&&(n.key=ai(r))&&(t.update(r),n)}}())),Ri=o("PropertyDualObjectKey",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t={},(t.propertyKey=Pi(n))&&Ja(n)&&(t.value=Ur(n))&&(e.update(n),t)}function t(e){return{key:e.propertyKey.key,value:e.value,property:e.propertyKey.property}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Pi(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),Da=o("MethodDeclaration",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=uo(n))&&gs(n)&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.property=e(r))&&(n.key=ii(r))&&(n.value=Yr(r))&&(t.update(r),n)}function n(e){return{key:e.key,value:e.value,property:e.property!==Qa?e.property:void 0}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),Ui=o("PropertyOrDualObjectKey",function(e){return Ri(e)||ir(e)}),Vi=o("PropertyOrDualObjectKeyOrMethodDeclaration",function(e){return Ui(e)||Da(e)}),Co=o("IdentifierOrSimpleAccessStart",function(){var e,t,n;return e=function(){function e(e){var t,n;return n=e.clone(),t={},(t.parent=qs(n))&&(t.child=vo(n))&&(e.update(n),t)}function t(e,t,n){return t.access(n,e.parent,e.child)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),t=function(){function e(e){var t,n;return n=e.clone(),t={},(t.parent=Vs(n))&&tr(n)&&(t.child=vo(n))&&(e.update(n),t)}function t(e,t,n){return t.access(n,t.access(n,e.parent,t["const"](n,"prototype")),e.child)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),n=function(){var e;return e=o(rt(null!=tr&&tr.parserName||"DoubleColon")+"?",function(e){var t,n;return t=e.index,n=e.line,tr(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.parent=Vs(r))&&(n.isProto=e(r))&&gi(r)&&(n.child=Ur(r))&&yn(r)&&(t.update(r),n)}function n(e,t,n){var r;return r=e.parent,e.isProto!==Qa&&(r=t.access(n,r,t["const"](n,"prototype"))),t.access(n,r,e.child)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(r){return go(r)||e(r)||t(r)||n(r)}}()),Ao=o("IdentifierOrSimpleAccessPart",function(){var e,t;return e=function(){function e(e){return Mi(e)||tr(e)}return function(){function t(t){var n,r;return r=t.clone(),n={},(n.type=e(r))&&(n.child=vo(r))&&(t.update(r),n)}function n(e,t,n){var r,o;return o=e.type==="::",r=e.child,function(e){return t.access(n,o?t.access(n,e,t["const"](n,"prototype")):e,r)}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),t=function(){var e;return e=o(rt(null!=tr&&tr.parserName||"DoubleColon")+"?",function(e){var t,n;return t=e.index,n=e.line,tr(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.type=e(r))&&gi(r)&&(n.child=Ur(r))&&yn(r)&&(t.update(r),n)}function n(e,t,n){var r,o;return o=e.type!==Qa,r=e.child,function(e){return t.access(n,o?t.access(n,e,t["const"](n,"prototype")):e,r)}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(n){return e(n)||t(n)}}()),Eo=i(o("IdentifierOrSimpleAccess",function(){var e;return e=o(rt(null!=Ao&&Ao.parserName||"IdentifierOrSimpleAccessPart")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=Ao(t);)r.push(n);return e.update(t),r}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=Co(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){var t,n,r,o,a;for(a=e.head,t=ot(e.tail),n=0,r=t.length;r>n;++n)o=t[n],a=o(a);return a}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}())),_s=o("SingularObjectKey",function(){var e,t,n,r,a;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=Eo(n))&&$a(n)&&(e.update(n),t)}function t(e,t,n){var r;return r=e instanceof xt?e.child:e instanceof Bo?t["const"](n,e.name):t.error("Unknown ident type: "+at(e)),{key:r,value:e}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=Tn(n))&&$a(n)&&(e.update(n),t)}function t(e,t,n){var r;return r=e.isConst()&&typeof e.constValue()!="string"?t["const"](n,String(e.constValue())):e,{key:r,value:e}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),n=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=Ps(n))&&$a(n)&&(e.update(n),t)}function t(e,t,n){return{key:t["const"](n,"this"),value:e}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),r=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=Bt(n))&&$a(n)&&(e.update(n),t)}function t(e,t,n){return{key:t["const"](n,"arguments"),value:e}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),a=function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=sn(n))&&$a(n)&&(e.update(n),t)}function t(e){return{key:e,value:e}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),function(o){return e(o)||t(o)||n(o)||r(o)||a(o)}}()),Ko=i(o("KeyValuePair",function(){var e;return e=function(){var e;return e=o(rt(null!=Fi&&Fi.parserName||"PlusOrMinus")+"?",function(e){var t,n;return t=e.index,n=e.line,Fi(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},gs(r)&&(n.bool=e(r))&&(n.pair=_s(r))&&(t.update(r),n)}function n(e,t,n){return e.bool!==Qa?{key:e.pair.key,value:t["const"](n,e.bool===43),property:e.pair.property}:e.pair}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(t){return Vi(t)||e(t)}}())),si=o("ObjectLiteral",function(){var e,t,n;return e=function(){var e;return e=function(){var e,t,n;return e=l("extends"),t=ji(function(e){return na(e)}),n=function(){function e(e){return Ua(e.clone())}function t(e){return pn(e.clone())}return function(n){return En(n)||e(n)||t(n)}}(),function(r){var o,a;return a=r.clone(),o=void 0,e(a)&&(o=t(a))&&gs(a)&&n(a)&&(r.update(a),o)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),t=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=Ko(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=Ko(r))&&(n.tail=e(r))&&Aa(r)&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)
})}(),n=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Cn(n)&&(t=Ko(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},fn(r)&&(n.head=Ko(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(t){var n,r;return r=t.clone(),n=void 0,ms(r)&&Ia(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&Oi(r)&&(t.update(r),n)}}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function r(r){var o,a;return a=r.clone(),o={},hi(a)&&gs(a)&&(o.prototype=e(a))&&(o.first=t(a))&&(o.rest=n(a))&&pn(a)&&(r.update(a),o)}function a(e,t,n){return t.object(n,ot(e.first).concat(ot(e.rest)),e.prototype!==Qa?e.prototype:void 0)}return o(null!=r&&r.parserName||"<unknown>",function(e){var t,n,o;return t=e.index,n=e.line,o=r(e),o?a(o,e,t,n):!1})}()}()),va=ir,xa=i(o("MapLiteralToken",function(e){var t;return t=e.clone(),gs(t)&&Bi(t)&&_i(t)&&(e.update(t),!0)})),wa=o("MapLiteral",function(){var e;return e=function(){var e,t;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=va(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=va(r))&&(n.tail=e(r))&&Aa(r)&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),t=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Cn(n)&&(t=va(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},fn(r)&&(n.head=va(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(t){var n,r;return r=t.clone(),n=void 0,ms(r)&&Ia(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&Oi(r)&&(t.update(r),n)}}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function n(n){var r,o;return o=n.clone(),r={},xa(o)&&gs(o)&&(r.first=e(o))&&(r.rest=t(o))&&pn(o)&&(n.update(o),r)}function r(e,t,n,r){var o;if(o=t.macros.getByLabel("constructMap"),!o)throw Error("Cannot use literal map until the construct-map macro has been defined");return o.func({op:"",node:t.object(n,ot(e.first).concat(ot(e.rest)))},t,n,r)}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(xa(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),on=o("BodyWithIndent",function(e){var t,n;return n=e.clone(),t=void 0,gs(n)&&Ua(n)&&Mr(n)&&It(n)&&(t=Qt(n))&&Oi(n)&&(e.update(n),t)}),Fr=i(o("EndToken",l("end"))),Dr=o("EndNoIndent",function(){var e;return e=o(rt(null!=os&&os.parserName||"Semicolons")+"?",function(e){var t,n;return t=e.index,n=e.line,os(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(t){var n;return n=t.clone(),Mr(n)&&gs(n)&&e(n)&&Fr(n)&&(t.update(n),!0)}}()),rn=o("BodyNoIndentNoEnd",function(){function e(e){return In(e.clone())||e.options.embedded&&(vn(e.clone())||wn(e.clone()))}function t(e){e.indent.push(Q(e.indent.peek())+1);try{return Qt(e)}finally{e.indent.pop()}}return function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&gn(o)&&Mr(o)&&(r=t(o))&&(n.update(o),r)}}()),nn=o("BodyNoIndent",function(e){var t,n;return n=e.clone(),t=void 0,(t=rn(n))&&Dr(n)&&(e.update(n),t)}),Sr=o("End",function(e){return e.options.noindent?Dr(e):!0}),en=o("Body",function(e){return e.options.noindent?nn(e):on(e)}),tn=o("BodyNoEnd",function(e){return e.options.noindent?rn(e):on(e)}),Gn=o("DedentedBody",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Ua(n)&&Mr(n)&&(t=Qt(n))&&(e.update(n),t)}var t;return t=function(){function e(e){return e.options.embedded}function t(e){return hr(e.clone())}return function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&t(o)&&Mr(o)&&(r=Qt(o))&&(n.update(o),r)}}(),function(n){return e(n)||t(n)||Xa(n)}}(),function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}()),Wn=o("DeclareEqualSymbol",function(){function e(e){return e.data.charCodeAt(e.index)===61?(e.index=Q(e.index)+1,61):(e.fail('"="'),!1)}return function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}()),St=i(o("ArrayType",function(){var e;return e=o(rt("undefined"!=typeof sc&&null!==sc&&sc.parserName||"TypeReference")+"?",function(e){var t,n;return t=e.index,n=e.line,sc(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n=void 0,yi(r)&&(n=e(r))&&yn(r)&&(t.update(r),n)}function n(e,t,n){var r;return r=t.ident(n,"Array"),e===Qa?r:t.typeGeneric(n,r,[e])}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}())),fi=o("ObjectTypePair",function(e){var t,n;return n=e.clone(),t={},(t.key=Mn(n))&&gn(n)&&(t.value=sc(n))&&(e.update(n),t)}),ui=i(o("ObjectType",function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,An(n)&&(t=fi(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=fi(r))&&(n.tail=e(r))&&Aa(r)&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function t(t){var n,r;return r=t.clone(),n=void 0,hi(r)&&(n=e(r))&&pn(r)&&(t.update(r),n)}function n(e,t,n){var r,o,a,i,s,c;if(e.length===0)return t.ident(n,"Object");for(s=[],r=ot(e),o=0,a=r.length;a>o;++o)i=r[o].key,i instanceof kn?(c=String(i.value),z(c,s)&&t.error("Duplicate object key: "+c),s.push(c)):t.error("Expected a constant key, got "+at(i));return t.typeObject(n,e)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}())),dt=xs(!1),Vo=p(dt,!0),ei=p(dt,!1),to=o("FunctionType",function(){var e,t,n;return e=function(){var e,t;return e=function(){var e;return e=function(){function e(e){var t;return t=e.clone(),An(t)&&sc(t)&&(e.update(t),!0)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(t){var n;return n=t.clone(),mi(n)&&sc(n)&&e(n)&&mn(n)&&(t.update(n),!0)}}(),t=Vo(function(e){return sc(e)}),function(n){return e(n)||t(n)||Xa(n)}}(),t=function(){function e(e){return e.data.charCodeAt(e.index)===62?(e.index=Q(e.index)+1,62):(e.fail('">"'),!1)}return function(t){var n;return n=t.clone(),gs(n)&&Fa(n)&&e(n)&&(t.update(n),!0)}}(),n=o(rt("undefined"!=typeof sc&&null!==sc&&sc.parserName||"TypeReference")+"?",function(e){var t,n;return t=e.index,n=e.line,sc(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function r(r){var o,a;return a=r.clone(),o=void 0,e(a)&&t(a)&&(o=n(a))&&(r.update(a),o)}function a(e,t,n){var r;return r=t.ident(n,"Function"),e===Qa?r:t.typeGeneric(n,r,[e])}return o(null!=r&&r.parserName||"<unknown>",function(e){var t,n,o;return t=e.index,n=e.line,o=r(e),o?a(o,e,t,n):!1})}()}()),za=o("NonUnionType",function(){function e(e){return dt.peek()?void 0:to(e)}var t,n;return t=function(){var e;return e=ei(function(e){return sc(e)}),function(t){var n,r;return r=t.clone(),n=void 0,mi(r)&&(n=e(r))&&mn(r)&&(t.update(r),n)}}(),n=function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){return e.data.charCodeAt(e.index)===62?(e.index=Q(e.index)+1,62):(e.fail('">"'),!1)}var t;return t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=sc(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},Yo(o)&&(r.head=sc(o))&&(r.tail=t(o))&&gs(o)&&e(o)&&(n.update(o),r)}function r(e){return[e.head].concat(ot(e.tail))}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Yo(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.base=Eo(r))&&(n.args=e(r))&&(t.update(r),n)}function n(e,t,n){return e.args.length===0?e.base:t.typeGeneric(n,e.base,e.args)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(r){return e(r)||t(r)||St(r)||ui(r)||n(r)||gc(r)||ti(r)}}()),sc=i(o("TypeReference",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Si(n)&&(t=za(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=za(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e,t,n){var r,o,a;if(a=[e.head].concat(ot(e.tail)),a.length===1)return a[0];for(r=a.length;r--;)o=a[r],o instanceof cc&&a.splice.apply(a,[r,1].concat(ot(o.types)));return a.length===1?a[0]:t.typeUnion(n,a)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}())),Vt=i(o("AsToken",l("as"))),Ea=o("MaybeAsType",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Vt(n)&&(t=sc(n))&&(e.update(n),t)}return o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Vt(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}()),No=o("IdentifierParameter",function(){var e,t,n;return e=function(){var e;return e=l("mutable"),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}(),t=o(rt(null!=qs&&qs.parserName||"ThisOrShorthandLiteralPeriod")+"?",function(e){var t,n;return t=e.index,n=e.line,qs(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),n=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Wn(n)&&(t=Ur(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),function(){function r(r){var o,a;return a=r.clone(),o={},(o.isMutable=e(a))&&(o.spread=Ma(a))&&(o.parent=t(a))&&(o.ident=go(a))&&(o.asType=Ea(a))&&(o.defaultValue=n(a))&&(r.update(a),o)}function a(e,t,n){var r;return r=e.parent!==Qa?t.access(n,e.parent,t["const"](n,e.ident.name)):e.ident,e.spread==="..."&&e.defaultValue!==Qa&&t.error("Cannot specify a default value for a spread parameter"),t.param(n,r,e.defaultValue!==Qa?e.defaultValue:void 0,e.spread==="...",e.isMutable==="mutable",e.asType!==Qa?e.asType:void 0)}return o(null!=r&&r.parserName||"<unknown>",function(e){var t,n,o;return t=e.index,n=e.line,o=r(e),o?a(o,e,t,n):!1})}()}()),vi=o("Parameter",function(e){return No(e)||Mt(e)||li(e)}),wi=o("ParameterOrNothing",function(e){return vi(e)||Xa(e)}),Mt=o("ArrayParameter",function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,An(n)&&(t=wi(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=wi(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return A([e.head].concat(ot(e.tail)))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function t(t){var n,r;return r=t.clone(),n=void 0,yi(r)&&Mr(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&yn(r)&&(t.update(r),n)}function n(e,t,n){return t.arrayParam(n,E(e,t))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),bi=o("ParamDualObjectKey",function(e){var t,n;return n=e.clone(),t={},(t.key=ai(n))&&(t.value=vi(n))&&(e.update(n),t)}),Ai=o("ParamSingularObjectKey",function(){function e(e){var t,n;return n=e.clone(),t=void 0,(t=No(n))&&$a(n)&&(e.update(n),t)}function t(e,t,n){var r,o;if(r=e.ident,r instanceof Bo)o=t["const"](n,r.name);else{if(!(r instanceof xt))throw Error("Unknown object key type: "+at(r));o=r.child}return{key:o,value:e}}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}()),$o=o("KvpParameter",function(e){return bi(e)||Ai(e)}),li=o("ObjectParameter",function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,An(n)&&(t=$o(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=$o(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function t(t){var n,r;return r=t.clone(),n=void 0,hi(r)&&Mr(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&pn(r)&&(t.update(r),n)}function n(e,t,n){return t.objectParam(n,e)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),xi=o("Parameters",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,An(n)&&(t=wi(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=wi(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e,t){return E(A([e.head].concat(ot(e.tail))),t)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),Ii=o("ParameterSequence",function(){var e;return e=function(){function e(){return[]}return o(rt(null!=xi&&xi.parserName||"Parameters")+"?",function(t){var n,r;return n=t.index,r=t.line,xi(t)||e(void 0,t,n,r)})}(),function(){function t(t){var n,r;return r=t.clone(),n=void 0,mi(r)&&Mr(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&mn(r)&&(t.update(r),n)}var n;return n=function(){function e(t,n,r){var o,a,i,s,c;if(r instanceof Ei){if(r.ident instanceof Bo)s=r.ident.name;else{if(!(r.ident instanceof xt))throw Error("Unknown param ident: "+at(r.ident));if(!(r.ident.child instanceof kn)||typeof r.ident.child.value!="string")throw Error("Expected constant access: "+at(r.ident.child));s=r.ident.child.value}z(s,t)?z(s,n)||n.push(s):t.push(s)}else if(r instanceof kt)for(o=ot(r.elements),a=o.length;a--;)i=o[a],e(t,n,i);else if(r instanceof ci)for(o=ot(r.pairs),a=o.length;a--;)c=o[a],e(t,n,c.value);else if(!(r instanceof Za))throw Error("Unknown param node: "+at(r))}return function(t,n){var r,o,a,i,s;for(i=[],a=[],r=ot(t),o=r.length;o--;)s=r[o],e(i,a,s);return a.length&&n.error("Duplicate parameter name: "+rt(a.sort().join(", "))),t}}(),o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),Xr=o("FunctionFlag",function(){function e(e){return e.data.charCodeAt(e.index)===33?(e.index=Q(e.index)+1,33):(e.fail('"!"'),!1)}return function(t){return e(t)||Gt(t)||Lt(t)||un(t)}}()),Qr=o("FunctionFlags",function(){function e(e,t){var n,r,o,a,i,s;for(i={autoReturn:!0,bound:!1,generator:!1,curry:!1},s=[],n=ot(e),r=0,o=n.length;o>r;++r)if(a=n[r],z(a,s))t.error("Function flag "+rt(Kr(a))+" specified more than once");else switch(s.push(a),a){case 33:i.autoReturn=!1;break;case 64:i.bound=!0;break;case 42:i.generator=!0;break;case 94:i.curry=!0}return i}var t;return t=o(rt(null!=Xr&&Xr.parserName||"FunctionFlag")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=Xr(t);)r.push(n);return e.update(t),r}),o(null!=t&&t.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=t(n),a?e(a,n,r,o):!1})}()),pt=xs(!1),lt=o("_FunctionBody",function(){var e;return e=function(){var e,t;return e=u("->"),t=function(){function e(e,t,n){return t.nothing(n)}return o(rt("undefined"!=typeof Es&&null!==Es&&Es.parserName||"Statement")+"?",function(t){var n,r;return n=t.index,r=t.line,Es(t)||e(void 0,t,n,r)})}(),function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&(r=t(o))&&(n.update(o),r)}}(),function(t){return e(t)||en(t)}}()),ro=o("GeneratorBody",p(pt,!0)(en)),oo=o("GeneratorBodyNoEnd",p(pt,!0)(tn)),$r=o("FunctionBody",p(pt,!1)(lt)),ao=o("GeneratorFunctionBody",p(pt,!0)(lt)),Yr=o("FunctionDeclaration",function(){function e(e){return e?ao:$r}var t,n;return t=function(){function e(){return[]}return o(rt(null!=Ii&&Ii.parserName||"ParameterSequence")+"?",function(t){var n,r;return n=t.index,r=t.line,Ii(t)||e(void 0,t,n,r)})}(),n=function(){var e;return e=Vo(Ea),function(t){var n,r;return r=t.clone(),n={},(n.flags=Qr(r))&&(n.asType=e(r))&&(t.update(r),n)}}(),function(r){var o,a,i,s,c,l,u,f,d,p,h,_,m;if(d=r.index,p=r.line,c=r.clone(r.cloneScope()),f=io(c),!f)return!1;if(_=t(c),!_)return!1;for(o=ot(_),a=o.length;a--;)h=o[a],C(c,h);return(m=n(c))?(l=m.flags,i=m.asType,!l.autoReturn&&l.generator&&r.error("A function cannot be both non-returning (!) and a generator (*)"),(s=e(l.generator)(c))?(r.update(c),u=r["function"](d,_,s,l.autoReturn,l.bound,l.curry,i!==Qa?i:void 0,l.generator,f),I(u,r,d,p)):!1):!1}}()),Zr=o("FunctionLiteral",function(){function e(e){var t,n;return n=e.clone(),t=void 0,ho(n)&&(t=Yr(n))&&(e.update(n),t)}return o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(ho(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),Ft=i(o("AssignmentAsExpression",Po(function(e){return Dt(e)}))),qr=o("ExpressionOrAssignment",function(e){return Ft(e)||Ur(e)}),Ut=i(o("AstExpressionToken",l("ASTE"))),Pt=o("AstExpression",function(){var e;return e=function(){function e(e){return ht.peek()?ut.peek()?e.error("Cannot use AST inside an AST"):!0:e.error("Can only use AST inside a macro")}var t;return t=function(){var e,t;return t=ko(qr),e=Ro(t),function(n){return Ba(n)==="!"?e(n):t(n)}}(),function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&Ut(o)&&(r=t(o))&&(n.update(o),r)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Ut(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),Wt=i(o("AstToken",l("AST"))),qt=o("AstStatement",function(){var e;return e=function(){function e(e){return ht.peek()?ut.peek()?e.error("Cannot use AST inside an AST"):!0:e.error("Can only use AST inside a macro")}var t;return t=function(){var e,t;return t=ko(function(e){return en(e)||Es(e)||Xa(e)}),e=Ro(t),function(n){return Ba(n)==="!"?e(n):t(n)}}(),function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&Wt(o)&&(r=t(o))&&(n.update(o),r)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Wt(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),jt=o("Ast",function(){function e(e){return Pt(e)||qt(e)}function t(e,t,n){var r;return r=t.getPosition(n),la.constifyObject(e,r.line,r.column,t.scope.id)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}()),fa=i(o("MacroName",function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){return vt(e)||_t(e)}return function(){function t(e){return e.join("")}var n;return n=o(rt(null!=e&&e.parserName||"<unknown>")+"+",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return o.length<1?!1:(t.update(n),o)}),o(null!=n&&n.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=n(e),a?t(a,e,r,o):!1})}()}(),function(t){var n,r;return r=t.clone(),n=void 0,(n=e(r))&&Ya(r)&&(t.update(r),n)}}(),function(t){var n,r;return r=t.clone(),n=void 0,gs(r)&&(n=e(r))&&(t.update(r),n)}}(),function(t){var n,r;return n=t.clone(),n.preventFail(),r=e(n),n.unpreventFail(),r?(t.update(n),r):(t.fail("macro-name"),!1)}}())),da=o("MacroNames",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=fa(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=fa(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),_c=o("UseMacro",function(e){var t,n,r,o;return t=e.clone(),r=t.macros,o=fa(t),o&&(n=r.getByName(o))?n(e):!1}),ga=o("MacroSyntaxParameterType",function(){var e,t;return e=function(){var e,t;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,mi(n)&&Mr(n)&&(t=ya(n))&&Mr(n)&&Ca(n)&&mn(n)&&(e.update(n),t)}function t(e,t,n){return t.syntaxSequence(n,e)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,mi(n)&&Mr(n)&&(t=_a(n))&&Mr(n)&&mn(n)&&(e.update(n),t)}function t(e,t,n){return t.syntaxChoice(n,e)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),function(n){return go(n)||Ns(n)||e(n)||t(n)}}(),t=function(){var e;return e=function(){var e,t,n;return e=u("?"),t=u("*"),n=u("+"),function(r){return e(r)||t(r)||n(r)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),function(){function n(n){var r,o;return o=n.clone(),r={},(r.type=e(o))&&(r.multiplier=t(o))&&(n.update(o),r)}function r(e,t,n){return e.multiplier===Qa?e.type:t.syntaxMany(n,e.type,e.multiplier)}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}()),ma=o("MacroSyntaxParameter",function(){var e;return e=function(){function e(e){return Vs(e)||go(e)}var t;return t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Vt(n)&&(t=ga(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),function(){function n(n){var r,o;return o=n.clone(),r={},(r.ident=e(o))&&(r.type=t(o))&&(n.update(o),r)}function r(e,t,n){return t.syntaxParam(n,e.ident,e.type!==Qa?e.type:void 0)}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),function(t){return Ns(t)||e(t)}}()),ya=o("MacroSyntaxParameters",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=ma(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=ma(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),_a=o("MacroSyntaxChoiceParameters",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Si(n)&&(t=ga(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=ga(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),pa=o("MacroOptions",function(){function e(){return{}}var t;return t=function(){var e;return e=l("with"),function(){function t(t){var n,r;return r=t.clone(),n=void 0,e(r)&&(n=dc(r))&&(t.update(r),n)}function n(e,t){var n,r,o,a,i,s,c;for(s={},n=ot(e.pairs),r=0,o=n.length;o>r;++r)i=(a=n[r]).key,c=a.value,i.isConst()||t.error("Cannot have non-const keys in the options"),c.isConst()||t.error("Cannot have non-const value in the options"),s[i.constValue()]=c.constValue();return s}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}()),Rs=i(o("SyntaxToken",l("syntax"))),ha=o("MacroSyntax",function(){var e;return e=function(){var e;return e=function(){function e(e){var t,n,r,o,a;if(r=e.index,n=e.clone(e.cloneScope()),a=ya(n),!a)throw ls;if(o=pa(n),n.startMacroSyntax(r,a,o),N(a,n),n.scope.add(n.ident(r,"macroName"),!0,rc.string),t=$r(n),!t)throw ls;return n.macroSyntax(r,"syntax",a,o,t),e.update(n),!0}return function(t){var n,r;return r=t.clone(),n=void 0,Rs(r)&&(n=e(r))&&(t.update(r),n)}}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Rs(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}(),function(t){var n,r;return r=t.clone(),n=void 0,fn(r)&&(n=e(r))&&gs(r)&&dn(r)&&(t.update(r),n)}}()),sa=o("MacroBody",function(){function e(e){var t,n,r,o,a,i,s,c;if(a=e.index,o=e.clone(e.cloneScope()),c=Ii(o),!c)return!1;for(t=ot(c),n=t.length;n--;)s=t[n],C(o,s,!0);return i=pa(o),(r=$r(o))?(o.macroSyntax(a,"call",c,i,r),e.update(o),!0):!1}var t;return t=function(){function e(e){return e.options.noindent?gn(e):!0}var t;return t=function(){function e(e){return e.options.noindent?Ia(e):It(e)}var t;return t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Ua(n)&&Mr(n)&&(t=ha(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(n){var r,o;return o=n.clone(),r={},e(o)&&(r.head=ha(o))&&(r.tail=t(o))&&Oi(o)&&(n.update(o),r)}}(),function(){function n(n){var r,o;return o=n.clone(),r=void 0,e(o)&&gs(o)&&Ua(o)&&Mr(o)&&(r=t(o))&&Sr(o)&&(n.update(o),r)}function r(){return!0}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),function(n){return t(n)||e(n)}}()),ba=i(o("MacroToken",l("macro"))),Hn=o("DefineMacro",qo(function(){var e;return e=function(){var e;return e=o("(identifier MacroBody)",function(e){var t;return t=da(e),t?e.enterMacro(t,function(){return sa(e)}):!1}),function(){function t(t){var n;return n=t.clone(),ba(n)&&e(n)&&(t.update(n),!0)}function n(e,t,n){return t.nothing(n)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(ba(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}())),Xn=i(o("DefineSyntaxStart",function(){var e,t;return e=l("define"),t=l("syntax"),function(n){var r;return r=n.clone(),e(r)&&t(r)&&(n.update(r),!0)}}())),Yn=o("DefineSyntax",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t={},Xn(n)&&(t.name=go(n))&&Wn(n)&&(t.value=ya(n))&&(e.update(n),t)}function t(e,t,n){var r,o;return o=t.clone(t.cloneScope()),N(e.value,o),r=$r(o),t.update(o),t.defineSyntax(n,e.name.name,e.value,r||void 0)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Xn(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),zn=i(o("DefineHelperStart",function(){var e,t;return e=l("define"),t=l("helper"),function(n){var r;return r=n.clone(),e(r)&&t(r)&&(n.update(r),!0)}}())),Jn=o("DefineHelper",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t={},zn(n)&&(t.name=go(n))&&Wn(n)&&(t.value=Ur(n))&&(e.update(n),t)}function t(e,t,n){return t.defineHelper(n,e.name,e.value)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(zn(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),$n=i(o("DefineOperatorStart",function(){var e,t;return e=l("define"),t=l("operator"),function(n){var r;return r=n.clone(),e(r)&&t(r)&&(n.update(r),!0)}}())),Kn=o("DefineOperator",function(){var e;return e=qo(function(){var e,t;return e=function(){var e,t;return e=function(){var e,t,n;return e=f("binary"),t=f("assign"),n=f("unary"),function(r){return e(r)||t(r)||n(r)}}(),t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=m(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(n){var r,o;return o=n.clone(),r={},$n(o)&&(r.type=e(o))&&(r.head=m(o))&&(r.tail=t(o))&&(r.options=pa(o))&&(n.update(o),r)}}(),t=rc.object.union(rc.undefined),function(n){var r,o,a,i,s,c;if(a=n.index,c=e(n),!c)throw ls;switch(o=n.clone(n.cloneScope()),c.type){case"binary":case"assign":o.scope.add(o.ident(a,"left"),!0,t),o.scope.add(o.ident(a,"op"),!0,rc.string),o.scope.add(o.ident(a,"right"),!0,t);break;case"unary":o.scope.add(o.ident(a,"op"),!0,rc.string),o.scope.add(o.ident(a,"node"),!0,t)}if(r=$r(o),!r)throw ls;switch(i=[c.head].concat(ot(c.tail)),c.type){case"binary":s=o.defineBinaryOperator(a,i,c.options,r);break;case"assign":s=o.defineAssignOperator(a,i,c.options,r);break;case"unary":s=o.defineUnaryOperator(a,i,c.options,r);break;default:throw Error()}return n.update(o),s}}()),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if($n(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),Lo=i(o("Index",function(){var e;return e=o("ExpressionWithAsterixAsArrayLength",Rt(function(e){return Ur(e)})),function(){var t;return t=function(){function t(t){var n,r;
return r=t.clone(),n=void 0,An(r)&&(n=e(r))&&(t.update(r),n)}return o(rt(null!=t&&t.parserName||"<unknown>")+"*",function(e){var n,r,o;for(n=e.clone(),o=[];r=t(n);)o.push(r);return e.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},(r.head=e(o))&&(r.tail=t(o))&&(n.update(o),r)}function r(e){return Q(e.tail.length)>0?{type:"multi",elements:[e.head].concat(ot(e.tail))}:{type:"single",node:e.head}}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}()}())),Io=o("IdentifierOrAccessStart",function(){var e,t,n;return e=function(){function e(e){var t,n;return n=e.clone(),t={},(t.parent=qs(n))&&(t.child=vo(n))&&(e.update(n),t)}function t(e,t,n){return t.access(n,e.parent,e.child)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),t=function(){function e(e){var t,n;return n=e.clone(),t={},(t.parent=Vs(n))&&tr(n)&&(t.child=vo(n))&&(e.update(n),t)}function t(e,t,n){return t.access(n,t.access(n,e.parent,t["const"](n,"prototype")),e.child)}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),n=function(){var e;return e=o(rt(null!=tr&&tr.parserName||"DoubleColon")+"?",function(e){var t,n;return t=e.index,n=e.line,tr(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.parent=Vs(r))&&(n.isProto=e(r))&&gi(r)&&(n.child=Lo(r))&&yn(r)&&(t.update(r),n)}function n(e,t,n){var r;if(r=e.parent,e.isProto!==Qa&&(r=t.access(n,r,t["const"](n,"prototype"))),e.child.type==="single")return t.access(n,r,e.child.node);if(e.child.type==="multi")return t.accessMulti(n,r,e.child.elements);throw Error()}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(r){return go(r)||e(r)||t(r)||n(r)}}()),xo=o("IdentifierOrAccessPart",function(){var e,t;return e=function(){function e(e){return Mi(e)||tr(e)}return function(){function t(t){var n,r;return r=t.clone(),n={},(n.type=e(r))&&(n.child=vo(r))&&(t.update(r),n)}function n(e,t,n){return function(r){return e.type==="::"&&(r=t.access(n,r,t["const"](n,"prototype"))),t.access(n,r,e.child)}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),t=function(){var e;return e=o(rt(null!=tr&&tr.parserName||"DoubleColon")+"?",function(e){var t,n;return t=e.index,n=e.line,tr(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.type=e(r))&&gi(r)&&(n.child=Lo(r))&&yn(r)&&(t.update(r),n)}function n(e,t,n){return function(r){if(e.type!==Qa&&(r=t.access(n,r,t["const"](n,"prototype"))),e.child.type==="single")return t.access(n,r,e.child.node);if(e.child.type==="multi")return t.accessMulti(n,r,e.child.elements);throw Error()}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(n){return e(n)||t(n)}}()),wo=i(o("IdentifierOrAccess",function(){var e;return e=o(rt(null!=xo&&xo.parserName||"IdentifierOrAccessPart")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=xo(t);)r.push(n);return e.update(t),r}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=Io(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){var t,n,r,o,a;for(o=e.head,t=ot(e.tail),n=0,r=t.length;r>n;++n)a=t[n],o=a(o);return o}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}())),us=o("SimpleAssignable",wo),Bn=o("ComplexAssignable",us),Dt=i(o("Assignment",function(e){var t,n,r,o,a,i,s,c,l,u,f;if(u=e.index,a=e.line,r=e.clone(),o=us(r))for(t=ot(e.macros.assignOperators),n=t.length;n--;)if(s=t[n],f=r.clone(),l=s.rule,i=l(f),i&&(c=qr(f)))return e.update(f),s.func({left:o,op:i,right:c},e,u,a);return!1})),dc=o("UnclosedObjectLiteral",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=Ui(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=Ui(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e,t,n){return t.object(n,[e.head].concat(ot(e.tail)))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),Oo=o("IndentedUnclosedObjectLiteralInner",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Cn(n)&&(t=Ui(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=Ui(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e,t,n){return t.object(n,[e.head].concat(ot(e.tail)))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),Fo=o("IndentedUnclosedObjectLiteral",function(){function e(){return!gt.peek()}return function(t){var n,r;return r=t.clone(),n=void 0,e(r)&&Mo(r)&&gs(r)&&Ua(r)&&Mr(r)&&It(r)&&fn(r)&&(n=Oo(r))&&Oi(r)&&(t.update(r),n)}}()),fc=o("UnclosedArrayLiteralElement",function(){var e;return e=function(){var e;return e=function(){function e(e){return Oo(e)||Do(e)||ws(e)}var t;return t=qi(2),function(n){var r,o;return o=n.clone(),r=void 0,t(o)&&(r=e(o))&&Oi(o)&&(n.update(o),r)}}(),function(t){return e(t)||ws(t)}}(),function(t){var n,r;return r=t.clone(),n=void 0,Lt(r)&&gs(r)&&(n=e(r))&&(t.update(r),n)}}()),Do=o("IndentedUnclosedArrayLiteralInner",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Aa(n)&&ys(n)&&(t=fc(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=fc(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e,t,n){return t.array(n,[e.head].concat(ot(e.tail)))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}()),So=o("IndentedUnclosedArrayLiteral",function(){function e(){return!gt.peek()}return function(t){var n,r;return r=t.clone(),n=void 0,e(r)&&Mo(r)&&gs(r)&&Ua(r)&&Mr(r)&&It(r)&&fn(r)&&(n=Do(r))&&Oi(r)&&(t.update(r),n)}}()),On="__currentArrayLength",Li=i(o("PrimaryExpression",function(){function e(e){var t;return st.peek()&&(t=e.index,Lt(e))?e.ident(t,On):void 0}return function(t){return dc(t)||ta(t)||Tt(t)||si(t)||is(t)||wa(t)||jt(t)||Ci(t)||Zr(t)||_c(t)||go(t)||e(t)||Fo(t)||So(t)}}())),_n=o("ClosedArguments",function(){var e,t;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=ws(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=ws(r))&&(n.tail=e(r))&&Aa(r)&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),t=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(){return[]}var t;return t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Cn(n)&&(t=ws(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},fn(r)&&(n.head=ws(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(t){var n,r;return r=t.clone(),n=void 0,ms(r)&&Ia(r)&&(n=e(r))&&Mr(r)&&Ca(r)&&Oi(r)&&(t.update(r),n)}}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}(),function(){function n(n){var r,o;return o=n.clone(),r={},Ha(o)&&mi(o)&&gs(o)&&(r.first=e(o))&&(r.rest=t(o))&&mn(o)&&(n.update(o),r)}function r(e){return ot(e.first).concat(ot(e.rest))}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}()),uc=o("UnclosedArguments",function(){var e,t,n;return e=function(){var e;return e=function(){var e;return e=o(rt(null!=bs&&bs.parserName||"SpaceChar")+"+",function(e){if(bs(e)){for(;bs(e););return!0}return!1}),function(t){var n;return n=t.clone(),e(n)&&Na(n)&&(t.update(n),!0)}}(),function(t){return e(t)||dn(t)}}(),t=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=ws(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},(n.head=ws(r))&&(n.tail=e(r))&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),n=function(){var e,t;return e=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Cn(n)&&(t=ws(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function t(t){var n,r;return r=t.clone(),n={},Mo(r)&&En(r)&&ms(r)&&It(r)&&fn(r)&&(n.head=ws(r))&&(n.tail=e(r))&&Aa(r)&&Oi(r)&&(t.update(r),n)}function n(e){return[e.head].concat(ot(e.tail))}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),t=function(){function e(){return[]}return o(null!=Aa&&Aa.parserName||"MaybeComma",function(t){var n,r,o;return n=t.index,r=t.line,o=Aa(t),o?e(o,t,n,r):!1})}(),function(n){return e(n)||t(n)}}(),function(){function r(r){var o,a;return a=r.clone(),o={},e(a)&&(o.first=t(a))&&(o.rest=n(a))&&(r.update(a),o)}function a(e){return ot(e.first).concat(ot(e.rest))}return o(null!=r&&r.parserName||"<unknown>",function(e){var t,n,o;return t=e.index,n=e.line,o=r(e),o?a(o,e,t,n):!1})}()}()),Jo=i(o("InvocationArguments",function(e){return _n(e)||uc(e)})),so=i(o("GenericPart",function(){function e(){return[]}var t;return t=function(){function e(e){return e.data.charCodeAt(e.index)===62?(e.index=Q(e.index)+1,62):(e.fail('">"'),!1)}var t;return t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=Kt(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},Yo(o)&&(r.head=Kt(o))&&(r.tail=t(o))&&e(o)&&(n.update(o),r)}function r(e){return[e.head].concat(ot(e.tail))}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}())),io=i(o("GenericDefinitionPart",function(){function e(){return[]}var t;return t=function(){function e(e){return e.data.charCodeAt(e.index)===62?(e.index=Q(e.index)+1,62):(e.fail('">"'),!1)}var t;return t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,En(n)&&(t=go(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(n){var r,o;return o=n.clone(),r={},Yo(o)&&(r.head=go(o))&&(r.tail=t(o))&&e(o)&&(n.update(o),r)}function r(e){return[e.head].concat(ot(e.tail))}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),o(rt(null!=t&&t.parserName||"<unknown>")+"?",function(n){var r,o;return r=n.index,o=n.line,t(n)||e(void 0,n,r,o)})}())),Ba=i(o("MaybeExclamationPointNoSpace",function(){var e;return e=function(){function e(e){return e.data.charCodeAt(e.index)===33?(e.index=Q(e.index)+1,33):(e.fail('"!"'),!1)}return function(t){var n;return n=t.clone(),Ha(n)&&e(n)&&(t.update(n),"!")}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}())),Ho=o("InvocationOrAccessPart",function(){var e,t,n;return e=function(){function e(e){return Mi(e)||tr(e)}var t;return t=o(rt(null!=Gt&&Gt.parserName||"AtSign")+"?",function(e){var t,n;return t=e.index,n=e.line,Gt(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function n(n){var r,o;return o=n.clone(),r={},(r.existential=Ta(o))&&(r.owns=Ba(o))&&(r.bind=t(o))&&Mr(o)&&gs(o)&&(r.type=e(o))&&(r.child=vo(o))&&(r.generic=so(o))&&(n.update(o),r)}function r(e){return{type:e.type==="::"?"protoAccess":"access",child:e.child,existential:e.existential==="?",owns:e.owns==="!",bind:e.bind!==Qa,generic:e.generic}}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),t=function(){var e,t;return e=o(rt(null!=Gt&&Gt.parserName||"AtSign")+"?",function(e){var t,n;return t=e.index,n=e.line,Gt(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),t=o(rt(null!=tr&&tr.parserName||"DoubleColon")+"?",function(e){var t,n,r;return t=e.index,n=e.line,r=tr(e),r?"protoAccessIndex":"accessIndex"}),function(){function n(n){var r,o;return o=n.clone(),r={},(r.existential=Ta(o))&&(r.owns=Ba(o))&&(r.bind=e(o))&&(r.type=t(o))&&gi(o)&&(r.child=Lo(o))&&yn(o)&&(r.generic=so(o))&&(n.update(o),r)}function r(e,t){return e.child.type==="single"?{type:e.type==="accessIndex"?"access":"protoAccess",child:e.child.node,existential:e.existential==="?",owns:e.owns==="!",bind:e.bind!==Qa,generic:e.generic}:(e.owns==="!"&&t.error("Cannot use ! when using a multiple or slicing index"),e.bind!==Qa&&t.error("Cannot use @ when using a multiple or slicing index"),Q(e.generic.length)>0&&t.error("Cannot use <> when using a multiple or slicing index"),{type:e.type,child:e.child,existential:e.existential==="?"})}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),n=function(){var e;return e=o(rt(null!=Gt&&Gt.parserName||"AtSign")+"?",function(e){var t,n;return t=e.index,n=e.line,Gt(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.existential=Ta(r))&&(n.isApply=e(r))&&(n.args=Jo(r))&&(t.update(r),n)}function n(e){return{type:"call",args:e.args,existential:e.existential==="?",isNew:!1,isApply:e.isApply!==Qa}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),function(r){return e(r)||t(r)||n(r)}}()),Dn=function(){function e(e,n,r,o,a){var i;if($(o,a.length)){if(i=a[o],!et.call(t,i.type))throw Error("Unknown call-chain link: "+rt(i.type));return t[i.type](e,n,r,i,o,a)}return r}var t;return t={access:function(){var t;return t={multi:function(e,t,n){return function(r){var o,a,i,s;return a=r,s=[],r.cacheable&&(i=e.tmp(t,fo(),"ref",r.type(e)),s.push(i.id),a=e.assign(t,i,"=",r.doWrap(e)),r=i),o=e.array(t,function(){var o,i,s,c,l;for(o=[],i=ot(n.elements),l=0,s=i.length;s>l;++l)c=i[l],o.push(e.access(t,0===l?a:r,c));return o}()),s.length?e.tmpWrapper(t,o,s):o}}},function(n,r,o,a,i,s){var c,l,u,f,d,p,h,_,m;if(c=a.bind?function(e,t){return n.call(r,n.ident(r,"__bind"),[e,t])}:function(e,t){return n.access(r,e,t)},a.owns)return m=[],h=o,o.cacheable&&(_=n.tmp(r,fo(),"ref",o.type(n)),m.push(_.id),h=n.assign(r,_,"=",o.doWrap(n)),o=_),l=a.child,p=l,l.cacheable&&(_=n.tmp(r,fo(),"ref",l.type(n)),m.push(_.id),p=n.assign(r,_,"=",l.doWrap(n)),l=_),d=n["if"](r,function(){var e,t;if(t=n.macros.getByLabel("ownership"),!t)throw Error("Cannot use ownership access until the ownership operator has been defined");if(a.existential){if(e=n.macros.getByLabel("existential"),!e)throw Error("Cannot use existential access until the existential operator has been defined");return n.binary(r,e.func({op:"",node:h},n,r,n.line),"&&",t.func({left:o,op:"",right:p},n,r,n.line))}return t.func({left:h,op:"",right:p},n,r,n.line)}(),e(n,r,c(o,l),Q(i)+1,s)),m.length?n.tmpWrapper(r,d,m):d;switch(a.type){case"access":f=function(e){return c(e,a.child)};break;case"accessIndex":if(!et.call(t,a.child.type))throw Error("Unknown index type: "+rt(a.child.type));f=t[a.child.type](n,r,a.child);break;default:throw Error("Unknown link type: "+rt(a.type))}if(a.existential){if(m=[],h=o,o.cacheable&&(_=n.tmp(r,fo(),"ref",o.type(n)),m.push(_.id),h=n.assign(r,_,"=",o.doWrap(n)),o=_),u=n.macros.getByLabel("existential"),!u)throw Error("Cannot use existential access until the existential operator has been defined");return d=n["if"](r,u.func({op:"",node:h},n,r,n.line),e(n,r,f(o),Q(i)+1,s)),m.length?n.tmpWrapper(r,d,m):d}return e(n,r,f(o),Q(i)+1,s)}}(),call:function(){return function(t,n,r,o,a,i){var s,c,l,u,f,d,p,h;return o.existential?(h=[],f=r,r instanceof xt&&!o.isApply&&!o.isNew?(c=r.parent,s=r.child,d=c,u=s,c.cacheable&&(p=t.tmp(n,fo(),"ref",c.type(t)),h.push(p.id),d=t.assign(n,p,"=",c.doWrap(t)),c=p),s.cacheable&&(p=t.tmp(n,fo(),"ref",s.type(t)),h.push(p.id),u=t.assign(n,p,"=",s.doWrap(t)),s=p),(c!==d||s!==u)&&(f=t.access(n,d,u),r=t.access(n,c,s))):r.cacheable&&(p=t.tmp(n,fo(),"ref",r.type(t)),h.push(p.id),f=t.assign(n,p,"=",r.doWrap(t)),r=p),l=t["if"](n,t.binary(n,t.unary(n,"typeof",f),"===",t["const"](n,"function")),e(t,n,t.call(n,r,o.args,o.isNew,o.isApply),Q(a)+1,i)),h.length?t.tmpWrapper(n,l,h):l):e(t,n,t.call(n,r,o.args,o.isNew,o.isApply),Q(a)+1,i)}}()},t.accessIndex=t.access,function(t,n,r,o,a){var i,s,c,l,u,f;if(!(r.length!==0||t||n.type!=="normal"||n.generic&&n.generic.length!==0))return n.node;for(u=[],n.type==="thisAccess"&&u.push({type:"access",child:n.child,existential:n.existential}),n.generic&&n.generic.length!==0&&(u.push({type:"access",child:o["const"](a,"generic"),existential:!1}),u.push({type:"call",args:n.generic,existential:!1})),i=ot(r),s=0,c=i.length;c>s;++s)switch(f=i[s],f.type){case"protoAccess":case"protoAccessIndex":u.push({type:"access",child:o["const"](a,"prototype"),existential:f.existential}),u.push(((l=J({},f)).type=f.type==="protoAccess"?"access":"accessIndex",l)),f.generic&&f.generic.length!==0&&(u.push({type:"access",child:o["const"](a,"generic"),existential:!1}),u.push({type:"call",args:f.generic,existential:!1}));break;case"access":case"accessIndex":u.push(f),f.generic&&f.generic.length!==0&&(u.push({type:"access",child:o["const"](a,"generic"),existential:!1}),u.push({type:"call",args:f.generic,existential:!1}));break;case"call":t&&f.isApply&&o.error("Cannot call with both new and @ at the same time"),u.push(((l=J({},f)).isNew=t,l)),t=!1;break;default:o.error("Unknown link type: "+rt(f.type))}return t&&u.push({type:"call",args:[],existential:!1,isNew:!0,isApply:!1}),e(o,a,n.node,0,u)}}(),Kt=o("BasicInvocationOrAccess",function(){var e,t,n;return e=function(){var e;return e=l("new"),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),t=function(){var e,t;return e=function(){var e;return e=o(rt(null!=Gt&&Gt.parserName||"AtSign")+"?",function(e){var t,n;return t=e.index,n=e.line,Gt(e)||("function"==typeof Qa?Qa(void 0,e,t,n):Qa)}),function(){function t(t){var n,r;return r=t.clone(),n={},(n.node=Ws(r))&&(n.existential=Ta(r))&&(n.owns=Ba(r))&&(n.bind=e(r))&&(n.child=vo(r))&&(t.update(r),n)}function n(e){return{type:"thisAccess",node:e.node,child:e.child,existential:e.existential==="?",owns:e.owns==="!",bind:e.bind!==Qa}}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),t=function(){function e(e){return{type:"normal",node:e}}return o(null!=Li&&Li.parserName||"PrimaryExpression",function(t){var n,r,o;return n=t.index,r=t.line,o=Li(t),o?e(o,t,n,r):!1})}(),function(n){return e(n)||t(n)}}(),n=o(rt(null!=Ho&&Ho.parserName||"InvocationOrAccessPart")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=Ho(t);)r.push(n);return e.update(t),r}),function(){function r(r){var o,a;return a=r.clone(),o={},(o.isNew=e(a))&&(o.head=t(a))&&(o.generic=so(a))&&(o.tail=n(a))&&(r.update(a),o)}function a(e,t,n){var r,o,a,i,s;return i=e.isNew,a=e.head,o=e.generic,s=e.tail,Dn(i!==Qa,((r=J({},a)).generic=o,r),s,t,n)}return o(null!=r&&r.parserName||"<unknown>",function(e){var t,n,o;return t=e.index,n=e.line,o=r(e),o?a(o,e,t,n):!1})}()}()),ks=i(o("SuperToken",l("super"))),Bs=o("SuperInvocation",function(){var e;return e=function(){var e;return e=function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Mr(n)&&gs(n)&&Mi(n)&&(t=vo(n))&&(e.update(n),t)}function t(e){var t,n;return n=e.clone(),t=void 0,gi(n)&&(t=Ur(n))&&yn(n)&&(e.update(n),t)}return function(n){return e(n)||t(n)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){var n,r;return n=t.index,r=t.line,e(t)||("function"==typeof Qa?Qa(void 0,t,n,r):Qa)})}(),function(){function t(t){var n,r;return r=t.clone(),n={},ks(r)&&(n.child=e(r))&&(n.args=Jo(r))&&(t.update(r),n)}function n(e,t,n){return t["super"](n,e.child!==Qa?e.child:void 0,e.args)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(ks(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),Pr=i(o("EvalToken",l("eval"))),Lr=o("Eval",function(){var e;return e=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Pr(n)&&(t=Jo(n))&&(e.update(n),t)}function t(e,t,n){return e.length!==1&&t.error("Expected only one argument to eval"),t.eval(n,e[0])}return o(null!=e&&e.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=e(n),a?t(a,n,r,o):!1})}(),o(null!=e&&e.parserName||"<unknown>",function(t){var n;if(Pr(t.clone())){if(n=e(t),!n)throw ls;return n}return!1})}()),zo=o("InvocationOrAccess",function(){function e(e){var t,n,r;if(ut.peek()){if(r=e.index,n=e.clone(),gs(n),!er(n))return!1;ut.push(!1);try{return(t=Jo(n))?(e.update(n),e.call(r,e.ident(r,"$"),t)):!1}finally{ut.pop()}}}return function(t){return e(t)||Kt(t)||Bs(t)||Lr(t)}}()),Rn=o("CustomPostfixUnary",function(e){var t,n,r,o,a,i,s,c,l;if(l=e.index,o=e.line,a=zo(e)){for(t=ot(e.macros.postfixUnaryOperators),n=t.length;n--;)if(s=t[n],r=e.clone(),c=s.rule,i=c(r))return e.update(r),s.func({op:i,node:a},e,l,o);return a}return!1}),Pn=o("CustomPrefixUnary",function(e){var t,n,r,o,a,i,s,c,l;for(l=e.index,o=e.line,t=ot(e.macros.prefixUnaryOperators),n=t.length;n--;)if(s=t[n],r=e.clone(),c=s.rule,i=c(r),i&&(a=Pn(r)))return e.update(r),s.func({op:i,node:a},e,l,o);return Rn(e)}),po=function(){var e;return e=[],function(t){var n;return(n=e[t])==null?e[t]=i(function(e){var n,r,o,a,i,s,c,l,u,f,d,p,h,_,m,y,g,b,v,w,x;if(w=e.index,d=e.line,i=e.macros.binaryOperators,$(i.length,t))return Pn(e);if(p=po(Q(t)+1),c=p(e)){if(y=i[t])for(n=ot(y),r=n.length;r--;){for(m=n[r],v=m.rule,x=[];;){if(s=e.clone(),l=!1,m.invertible&&(l=ka(s),!l))break;if(_=v(s),!_)break;if(h=p(s),!h)break;if(e.update(s),x.push({inverted:"not"===l,op:_,node:h}),m.maximum&&x.length>=Q(m.maximum))break}if(x.length){if(m.rightToLeft){for(b=x[x.length-1].node,u=x.length;u--;)g=x[u],b=m.func({left:0===u?c:x[u-1].node,inverted:g.inverted,op:g.op,right:b},e,w,d);return b}for(f=c,o=0,a=x.length;a>o;++o)g=x[o],f=m.func({left:f,inverted:g.inverted,op:g.op,right:g.node},e,w,d);return f}}return c}return!1}):n}}(),na=o("Logic",po(0)),Vr=o("ExpressionAsStatement",function(e){return _c(e)||na(e)}),Ur=i(o("Expression",Po(Vr))),Es=o("Statement",function(){var e;return e=Go(function(e){return Qo(e)||Hn(e)||Jn(e)||Kn(e)||Yn(e)||Dt(e)||Vr(e)}),function(t){var n,r;return r=t.clone(),n=void 0,(n=e(r))&&gs(r)&&(t.update(r),n)}}()),ea=o("LinePart",function(e){return Es(e)||gr(e)}),Zo=i(o("Line",function(){function e(e){var t,n;return n=e.clone(),t=void 0,os(n)&&(t=Es(n))&&(e.update(n),t)}return function(t){var n,r,o,a;if(n=t.clone(),!fn(n))return!1;for(o=[],r=!1;;)if(a=gr(n))r=!1,o.push(a);else{if(a=r?e(n):Es(n),!a)break;r=!0,o.push(a)}return o.length>0?(os(n),t.update(n),o):!1}}())),ct=function(){function e(e,t,n){var r,o,a,i,s;for(s=[],r=ot(e),o=0,a=r.length;a>o;++o)i=r[o],i instanceof Zt&&i.label==null?s.push.apply(s,ot(i.nodes)):i instanceof Za||s.push(i);switch(s.length){case 0:return t.nothing(n);case 1:return s[0];default:return t.block(n,s)}}function t(t,n){function r(){var o,s,c;try{for(c=(new Date).getTime();;){if(Q((new Date).getTime())-Q(c)>5)return qa(r);if(o=t.clone(),!Ua(o)||!Mr(o))break;if(s=Zo(o),!s)break;t.update(o),i.push.apply(i,ot(s))}}catch(l){return n(l)}return n(null,e(i,t,a))}var o,a,i;a=t.index;try{o=Zo(t)}catch(s){return n(s)}return o?(i=tt.call(o),r()):n(null,o)}var n;return n=function(){var t;return t=function(){function e(e){var t,n;return n=e.clone(),t=void 0,Ua(n)&&Mr(n)&&(t=Zo(n))&&(e.update(n),t)}return o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),function(){function n(e){var n,r;return r=e.clone(),n={},(n.head=Zo(r))&&(n.tail=t(r))&&(e.update(r),n)}function r(t,n,r){var o,a,i,s,c;for(c=tt.call(t.head),o=ot(t.tail),a=0,i=o.length;i>a;++a)s=o[a],c.push.apply(c,ot(s));return e(c,n,r)}return o(null!=n&&n.parserName||"<unknown>",function(e){var t,o,a;return t=e.index,o=e.line,a=n(e),a?r(a,e,t,o):!1})}()}(),function(e,r){return null!=r?t(e,r):n(e)}}(),Qt=o("Block",function(){function e(e){var t,n;return n=e.clone(),t=void 0,fn(n)&&(t=Oo(n))&&(e.update(n),t)}function t(e){var t,n;return n=e.clone(),t=void 0,fn(n)&&(t=Do(n))&&(e.update(n),t)}return function(n){return e(n)||t(n)||ct(n)}}()),an=function(){function e(e){return e.data.charCodeAt(e.index)===65279?(e.index=Q(e.index)+1,65279):(e.fail('""'),!1)}return o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}(),cs=function(){var e;return e=function(){function e(e){return e.data.charCodeAt(e.index)===35?(e.index=Q(e.index)+1,35):(e.fail('"#"'),!1)}function t(e){return e.data.charCodeAt(e.index)===33?(e.index=Q(e.index)+1,33):(e.fail('"!"'),!1)}var n,r;return n=function(){var e;return e=o("!"+rt(null!=Ua&&Ua.parserName||"Newline"),function(e){return!Ua(e.clone())&&At(e)}),o(rt(null!=e&&e.parserName||"<unknown>")+"*",function(t){var n,r,o;for(n=t.clone(),o=[];r=e(n);)o.push(r);return t.update(n),o})}(),r=o(rt(null!=Ua&&Ua.parserName||"Newline")+"?",function(e){return Ua(e)||!0}),function(o){var a;return a=o.clone(),e(a)&&t(a)&&n(a)&&r(a)&&(o.update(a),!0)}}(),o(rt(null!=e&&e.parserName||"<unknown>")+"?",function(t){return e(t)||!0})}(),it=xs(!0),Zn=p(it,!1),Br=o("EmbeddedWriteExpression",Zn(function(){var e;return e=o("!"+rt("undefined"!=typeof Er&&null!==Er&&Er.parserName||"EmbeddedOpenComment"),function(e){return!Er(e.clone())}),function(){function t(t){var n,r;return r=t.clone(),n=void 0,e(r)&&Ar(r)&&(n=Ur(r))&&mr(r)&&(t.update(r),n)}function n(e,t,n){return t.embedWrite(n,e,!0)}return o(null!=t&&t.parserName||"<unknown>",function(e){var r,o,a;return r=e.index,o=e.line,a=t(e),a?n(a,e,r,o):!1})}()}())),pr=o("EmbeddedBlock",function(){var e,t;return e=o("!"+rt("undefined"!=typeof Ar&&null!==Ar&&Ar.parserName||"EmbeddedOpenWrite"),function(e){return!Ar(e.clone())}),t=o("!"+rt("undefined"!=typeof Er&&null!==Er&&Er.parserName||"EmbeddedOpenComment"),function(e){return!Er(e.clone())}),function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&t(o)&&Ir(o)&&(r=ct(o))&&hr(o)&&(n.update(o),r)}}()),vr=i(o("EmbeddedLiteralTextInnerPart",function(e){return yr(e)||Cr(e)||Br(e)})),br=i(o("EmbeddedLiteralTextInner",function(){function e(e,t,n){return t.block(n,e)}var t;return t=o(rt(null!=vr&&vr.parserName||"EmbeddedLiteralTextInnerPart")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=vr(t);)r.push(n);return e.update(t),r}),o(null!=t&&t.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=t(n),a?e(a,n,r,o):!1})}())),wr=i(o("EmbeddedLiteralTextInnerPartWithBlock",function(e){return vr(e)||pr(e)})),xr=i(o("EmbeddedLiteralTextInnerWithBlock",function(){function e(e,t,n){return t.block(n,e)}var t;return t=o(rt(null!=wr&&wr.parserName||"EmbeddedLiteralTextInnerPartWithBlock")+"*",function(e){var t,n,r;for(t=e.clone(),r=[];n=wr(t);)r.push(n);return e.update(t),r}),o(null!=t&&t.parserName||"<unknown>",function(n){var r,o,a;return r=n.index,o=n.line,a=t(n),a?e(a,n,r,o):!1})}())),gr=i(o("EmbeddedLiteralText",function(){function e(e){return e.options.embedded&&it.peek()&&$(e.index,e.data.length)}var t;return t=function(){var e;return e=function(){var e,t;return e=o("!"+rt("undefined"!=typeof Er&&null!==Er&&Er.parserName||"EmbeddedOpenComment"),function(e){return!Er(e.clone())}),t=o("!"+rt("undefined"!=typeof Ar&&null!==Ar&&Ar.parserName||"EmbeddedOpenWrite"),function(e){return!Ar(e.clone())}),function(n){var r;return r=n.clone(),e(r)&&t(r)&&Ir(r)&&(n.update(r),!0)}}(),function(t){return Or(t)||e(t)}}(),function(n){var r,o;return o=n.clone(),r=void 0,e(o)&&hr(o)&&(r=br(o))&&t(o)&&(n.update(o),r)}}())),co=function(){function e(e){var t,n,r,o;if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+at(e));for(o=e.length,t=[],r=0;o>r;++r)t.push(e.charCodeAt(r));return n=t,function(t){var r,a,i;for(a=t.index,r=t.data,i=0;o>i;++i)if(r.charCodeAt(Q(a)+i)!==n[i])return!1;return t.index=Q(a)+o,e}}var t;return t={},function(n){if("string"!=typeof n)throw TypeError("Expected text to be a String, got "+at(n));return et.call(t,n)?t[n]:t[n]=e(n)}}(),Er=i(o("EmbeddedOpenComment",T("embeddedOpenComment",ur))),_r=i(o("EmbeddedCloseComment",T("embeddedCloseComment",sr))),yr=i(o("EmbeddedComment",function(e){var t,n;if(n=e.index,Er(e)){for(t=e.data.length;e.index<t&&!_r(e)&&At(e););return e.nothing(n)}return!1})),Ir=i(o("EmbeddedOpen",T("embeddedOpen",fr))),hr=i(o("EmbeddedClose",function(){var e;return e=function(){var e;return e=T("embeddedClose",cr),function(t){return Or(t)||e(t)}}(),function(t){var n,r;return r=t.clone(),n=void 0,Mr(r)&&gs(r)&&(n=e(r))&&(t.update(r),n)}}())),Ar=i(o("EmbeddedOpenWrite",T("embeddedOpenWrite",dr))),mr=i(o("EmbeddedCloseWrite",function(){var e;return e=function(){var e;return e=T("embeddedCloseWrite",lr),function(t){return Or(t)||e(t)}}(),function(t){var n,r;return r=t.clone(),n=void 0,Mr(r)&&gs(r)&&(n=e(r))&&(t.update(r),n)}}())),vn=i(o("ColonEmbeddedClose",function(e){var t,n;return n=e.clone(),t=void 0,gn(n)&&(t=hr(n))&&(e.update(n),t)})),wn=i(o("ColonEmbeddedCloseWrite",function(e){var t,n;return n=e.clone(),t=void 0,gn(n)&&(t=mr(n))&&(e.update(n),t)})),Cr=i(o("EmbeddedReadLiteralText",function(e){var t,n,r,o,a,i;for(n=e.data,r=e.index,a=r,o=n.length;o>r&&(e.index=r,!(Ir(e.clone())||Ar(e.clone())||Er(e.clone())));++r)t=n.charCodeAt(r),(13===t||10===t||8232===t||8233===t)&&(13===t&&n.charCodeAt(+r+1)===10&&++r,++e.line);return e.index=r,r===a?!1:(i=n.substring(a,r),e.options.embeddedUnpretty&&(i=k(i)),e.embedWrite(a,e["const"](r,i),!1))})),Nr=o("EmbeddedRoot",function(e,t){var n,r,o;return e.clearCache(),o=e.index,an(e),cs(e),n=xr(e),r=e.root(o,e.options.filename,n,!0),e.clearCache(),null!=t?t(null,r):r}),Ni=function(e){function t(n,o,a){var i,s;if(i=this instanceof t?this:W(r),"string"!=typeof n)throw TypeError("Expected message to be a String, got "+at(n));if("string"!=typeof o)throw TypeError("Expected text to be a String, got "+at(o));
if("number"!=typeof a)throw TypeError("Expected line to be a Number, got "+at(a));return s=e.call(i,n+" at line #"+a),i.message=s.message,typeof e.captureStackTrace=="function"?e.captureStackTrace(i,t):"stack"in s&&(i.stack=s.stack),i.text=o,i.line=a,i}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="ParserError",typeof e.extended=="function"&&e.extended(t),r.name=t.name,t}(Error),ca=function(e){function t(n,o,a){var i,s,c;if(i=this instanceof t?this:W(r),!(n instanceof e))throw TypeError("Expected inner to be a "+X(e)+", got "+at(n));if("string"!=typeof o)throw TypeError("Expected text to be a String, got "+at(o));if("number"!=typeof a)throw TypeError("Expected line to be a Number, got "+at(a));return c=at(n),s=e.call(i,("Error"===c?"":c+": ")+String(null!=n?n.message:void 0)+" at line #"+a),i.message=s.message,"stack"in n&&typeof n.stack=="string"?(i.innerStack=n.stack,i.stack="MacroError at #"+a+": "+rt(n.stack)):typeof e.captureStackTrace=="function"?e.captureStackTrace(i,t):"stack"in s&&(i.stack=s.stack),i.inner=n,i.text=o,i.line=a,i}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="MacroError",typeof e.extended=="function"&&e.extended(t),r.name=t.name,r.setLine=function(e){this.line=e,this.innerStack!=null&&(this.stack="MacroError at #"+rt(e)+": "+rt(this.innerStack))},t}(Error),Wr=function(){function e(){var n;return n=this instanceof e?this:W(t),n.messages=[],n.index=0,n.line=0,n}var t;return t=e.prototype,e.displayName="FailureManager",t.add=function(e,t,n){Y(t,this.index)||(this.messages=[],this.index=t),$(this.line,n)&&(this.line=n),$(t,this.index)||this.messages.push(e)},e}(),Ga=function(){var e;return e={Boolean:rc.boolean,String:rc.string,Number:rc.number,Array:rc.array,Object:rc.object,Function:rc["function"],RegExp:rc.regexp,Date:rc.date,Error:rc.error,RangeError:rc.error,ReferenceError:rc.error,SyntaxError:rc.error,TypeError:rc.error,URIError:rc.error},function(t){var n,r,o,a,i,s,c,l,u,f,d,p,h;if(!(t instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(t));if(t instanceof Bo)return(et.call(e,i=t.name)?e[i]:void 0)||rc.any;if(t instanceof kn)return t.value===null?rc["null"]:t.value===void 0?rc.undefined:rc.any;if(t instanceof ac){for(l=Ga(t.basetype),n=[],r=ot(t.args),o=0,a=r.length;a>o;++o)s=r[o],n.push(Ga(s));return c=n,l===rc.array||l===rc["function"]?rc.generic.apply(rc,[l.base].concat(ot(c))):l!==rc.any?rc.generic.apply(rc,[l].concat(ot(c))):rc.any}if(t instanceof cc){for(u=rc.none,n=ot(t.types),o=n.length;o--;)p=n[o],u=u.union(Ga(p));return u}if(t instanceof ic){for(f={},n=ot(t.pairs),o=0,a=n.length;a>o;++o)d=(i=n[o]).key,h=i.value,d instanceof kn&&(f[d.value]=Ga(h));return rc.makeObject(f)}return rc.any}}(),la=function(){function e(t,n,r,a,i){var s;if(s=this instanceof e?this:W(o),!(t instanceof Is))throw TypeError("Expected state to be a "+X(Is)+", got "+at(t));return s.state=t,s.index=n,s.position=r,s.inGenerator=a,s.inEvilAst=i,s.unsavedTmps=[],s.savedTmps=[],s}function n(e,t,r,o){if("object"!=typeof e||null===e||e instanceof RegExp)return kn(t,r,o,e);if(H(e))return kt(t,r,o,function(){var a,i,s,c,l;for(a=[],i=ot(e),s=0,c=i.length;c>s;++s)l=i[s],a.push(n(l,t,r,o));return a}());if(e instanceof Bo&&Q(e.name.length)>1&&e.name.charCodeAt(0)===36)return ln(e.line,e.column,e.scopeId,Bo(e.line,e.column,e.scopeId,"__wrap"),[Bo(e.line,e.column,e.scopeId,e.name.substring(1)),kn(e.line,e.column,e.scopeId,e.scopeId)]);if(e instanceof ln&&!e.isNew&&!e.isApply&&e.func instanceof Bo&&e.func.name==="$"){if(e.args.length!==1||e.args[0]instanceof vs)throw Error("Can only use $() in an AST if it has one argument.");return ln(e.line,e.column,e.scopeId,Bo(e.line,e.column,e.scopeId,"__wrap"),[e.args[0],kn(e.line,e.column,e.scopeId,e.scopeId)])}if(e instanceof Wa){if(e.constructor===Wa)throw Error("Cannot constify a raw node");return ln(e.line,e.column,e.scopeId,Bo(e.line,e.column,e.scopeId,"__node"),[kn(e.line,e.column,e.scopeId,e.constructor.cappedName),kn(e.line,e.column,e.scopeId,e.line),kn(e.line,e.column,e.scopeId,e.column)].concat(function(){var t,r,o,a,i;for(t=[],r=ot(e.constructor.argNames),o=0,a=r.length;a>o;++o)i=r[o],t.push(n(e[i],e.line,e.column,e.scopeId));return t}()))}return ci(t,r,o,function(){var a,i,s;a=[];for(i in e)et.call(e,i)&&(s=e[i],a.push({key:kn(t,r,o,i),value:n(s,t,r,o)}));return a}())}function r(e,t){var n;if("object"!=typeof e||null===e||e instanceof RegExp)return e;if(!(e instanceof Wa))throw Error("Unexpected type to walk through: "+at(e));return e instanceof Zt||(n=t(e))==null?e.walk(function(e){return r(e,t)}):n}var o,i;return o=e.prototype,e.displayName="MacroHelper",o.doWrap=function(e){return e instanceof Wa?e.doWrap(this.state):e},o.let=function(e,t,n){if(!(e instanceof Js||e instanceof Bo))throw TypeError("Expected ident to be one of "+(X(Js)+" or "+X(Bo))+", got "+at(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isMutable to be a Boolean, got "+at(t));if(null==n)n=rc.any;else if(!(n instanceof rc))throw TypeError("Expected type to be a "+X(rc)+", got "+at(n));return e instanceof Bo&&t&&n.isSubsetOf(rc.undefinedOrNull)&&(n=rc.any),this.state.scope.add(e,t,n)},o.hasVariable=function(e){if(!(e instanceof Js||e instanceof Bo))throw TypeError("Expected ident to be one of "+(X(Js)+" or "+X(Bo))+", got "+at(e));return this.state.scope.has(e)},o.isVariableMutable=function(e){if(!(e instanceof Js||e instanceof Bo))throw TypeError("Expected ident to be one of "+(X(Js)+" or "+X(Bo))+", got "+at(e));return this.state.scope.isMutable(e)},o["var"]=function(e,t){if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isMutable to be a Boolean, got "+at(t));return this.state["var"](this.index,e,t)},o.def=function(e,t){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected key to be a "+X(Wa)+", got "+at(e));if(null==t)t=void 0;else if(!(t instanceof Wa))throw TypeError("Expected value to be one of "+(X(Wa)+" or undefined")+", got "+at(t));return this.state.def(this.index,e,this.doWrap(t))},o.noop=function(){return this.state.nothing(this.index)},o.block=function(e,t){var n;if(!H(e))throw TypeError("Expected nodes to be an Array, got "+at(e));for(n=e.length;n--;)if(!(e[n]instanceof Wa))throw TypeError("Expected "+("nodes["+n+"]")+" to be a "+X(Wa)+", got "+at(e[n]));if(null==t)t=null;else if(!(t instanceof Bo||t instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(t));return this.state.block(this.index,e,t).reduce(this.state)},o["if"]=function(e,t,n,r){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected test to be a "+X(Wa)+", got "+at(e));if(null==t)t=Za(0,0,this.state.scope.id);else if(!(t instanceof Wa))throw TypeError("Expected whenTrue to be a "+X(Wa)+", got "+at(t));if(null==n)n=null;else if(!(n instanceof Wa))throw TypeError("Expected whenFalse to be one of "+(X(Wa)+" or null")+", got "+at(n));if(null==r)r=null;else if(!(r instanceof Bo||r instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(r));return this.state["if"](this.index,this.doWrap(e),t,n,r).reduce(this.state)},o["switch"]=function(e,t,n,r){var o;if(o=this,null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));if(!H(t))throw TypeError("Expected cases to be an Array, got "+at(t));if(null==n)n=null;else if(!(n instanceof Wa))throw TypeError("Expected defaultCase to be one of "+(X(Wa)+" or null")+", got "+at(n));if(null==r)r=null;else if(!(r instanceof Bo||r instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(r));return this.state["switch"](this.index,this.doWrap(e),function(){var e,n,r,a;for(e=[],n=0,r=t.length;r>n;++n)a=t[n],e.push({node:o.doWrap(a.node),body:a.body,fallthrough:a.fallthrough});return e}(),n,r).reduce(this.state)},o["for"]=function(e,t,n,r,o){if(null==e)e=null;else if(!(e instanceof Wa))throw TypeError("Expected init to be one of "+(X(Wa)+" or null")+", got "+at(e));if(null==t)t=null;else if(!(t instanceof Wa))throw TypeError("Expected test to be one of "+(X(Wa)+" or null")+", got "+at(t));if(null==n)n=null;else if(!(n instanceof Wa))throw TypeError("Expected step to be one of "+(X(Wa)+" or null")+", got "+at(n));if(null==r)r=Za(0,0,this.state.scope.id);else if(!(r instanceof Wa))throw TypeError("Expected body to be a "+X(Wa)+", got "+at(r));if(null==o)o=null;else if(!(o instanceof Bo||o instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(o));return this.state["for"](this.index,this.doWrap(e),this.doWrap(t),this.doWrap(n),r,o).reduce(this.state)},o.forIn=function(e,t,n,r){if(!(e instanceof Bo))throw TypeError("Expected key to be a "+X(Bo)+", got "+at(e));if(null==t)t=Za(0,0);else if(!(t instanceof Wa))throw TypeError("Expected object to be a "+X(Wa)+", got "+at(t));if(null==n)n=Za(0,0,this.state.scope.id);else if(!(n instanceof Wa))throw TypeError("Expected body to be a "+X(Wa)+", got "+at(n));if(null==r)r=null;else if(!(r instanceof Bo||r instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(r));return this.state.forIn(this.index,e,this.doWrap(t),n,r).reduce(this.state)},o.tryCatch=function(e,t,n,r){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected tryBody to be a "+X(Wa)+", got "+at(e));if(null==t)t=Za(0,0,this.state.scope.id);else if(!(t instanceof Wa))throw TypeError("Expected catchIdent to be a "+X(Wa)+", got "+at(t));if(null==n)n=Za(0,0,this.state.scope.id);else if(!(n instanceof Wa))throw TypeError("Expected catchBody to be a "+X(Wa)+", got "+at(n));if(null==r)r=null;else if(!(r instanceof Bo||r instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(r));return this.state.tryCatch(this.index,e,t,n,r).reduce(this.state)},o.tryFinally=function(e,t,n){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected tryBody to be a "+X(Wa)+", got "+at(e));if(null==t)t=Za(0,0,this.state.scope.id);else if(!(t instanceof Wa))throw TypeError("Expected finallyBody to be a "+X(Wa)+", got "+at(t));if(null==n)n=null;else if(!(n instanceof Bo||n instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(n));return this.state.tryFinally(this.index,e,t,n).reduce(this.state)},o.assign=function(e,t,n){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected left to be a "+X(Wa)+", got "+at(e));if("string"!=typeof t)throw TypeError("Expected op to be a String, got "+at(t));if(null==n)n=Za(0,0,this.state.scope.id);else if(!(n instanceof Wa))throw TypeError("Expected right to be a "+X(Wa)+", got "+at(n));return this.state.assign(this.index,e,t,this.doWrap(n)).reduce(this.state)},o.binary=function(e,t,n){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected left to be a "+X(Wa)+", got "+at(e));if("string"!=typeof t)throw TypeError("Expected op to be a String, got "+at(t));if(null==n)n=Za(0,0,this.state.scope.id);else if(!(n instanceof Wa))throw TypeError("Expected right to be a "+X(Wa)+", got "+at(n));return this.state.binary(this.index,this.doWrap(e),t,this.doWrap(n)).reduce(this.state)},o.binaryChain=function(e,t){var n,r,o,a,i,s;if("string"!=typeof e)throw TypeError("Expected op to be a String, got "+at(e));if(!H(t))throw TypeError("Expected nodes to be an Array, got "+at(t));for(n=t.length;n--;)if(!(t[n]instanceof Wa))throw TypeError("Expected "+("nodes["+n+"]")+" to be a "+X(Wa)+", got "+at(t[n]));if(t.length===0)throw Error("Expected nodes to at least have a length of 1");for(a=this.doWrap(t[0]),r=1,o=t.length;o>r;++r)s=t[r],a=this.state.binary(this.index,a,e,this.doWrap(s));return i=a,i.reduce(this.state)},o.unary=function(e,t){if("string"!=typeof e)throw TypeError("Expected op to be a String, got "+at(e));if(null==t)t=Za(0,0,this.state.scope.id);else if(!(t instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(t));return this.state.unary(this.index,e,this.doWrap(t)).reduce(this.state)},o["throw"]=function(e){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));return this.state["throw"](this.index,this.doWrap(e)).reduce(this.state)},o["return"]=function(e){if(null==e)e=void 0;else if(!(e instanceof Wa))throw TypeError("Expected node to be one of "+(X(Wa)+" or undefined")+", got "+at(e));return this.state["return"](this.index,this.doWrap(e)).reduce(this.state)},o.yield=function(e){if(null==e)e=Za(0,0,this.state.scope.id);else if(!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));return this.state.yield(this.index,this.doWrap(e)).reduce(this.state)},o["debugger"]=function(){return this.state["debugger"](this.index)},o["break"]=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return this.state["break"](this.index,e)},o["continue"]=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return this.state["continue"](this.index,e)},o.spread=function(e){if(!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));return this.state.spread(this.index,e)},o.real=function(e){return e=this.macroExpand1(e),e instanceof zs?e.node:e},o.rewrap=function(e,t){return t=this.macroExpand1(t),t instanceof zs?e instanceof zs?zs(e.line,e.column,e.scopeId,e,t.tmps.concat(e.tmps)):zs(e.line,e.column,e.scopeId,e,t.tmps.slice()):e},o.eq=function(e,t){return e=this.real(e),t=this.real(t),e instanceof kn?t instanceof kn&&e.value===t.value:e instanceof Bo?t instanceof Bo&&e.name===t.name:!1},o.isLabeledBlock=function(e){return e=this.real(e),e instanceof Zt||e instanceof To||e instanceof Ms||e instanceof zr||e instanceof Jr||e instanceof tc||e instanceof TryCatchFinallyNode?e.label!=null:!1},o.isBreak=function(e){return this.real(e)instanceof cn},o.isContinue=function(e){return this.real(e)instanceof Sn},o.label=function(e){return e=this.real(e),e instanceof cn||e instanceof Sn||e instanceof Zt||e instanceof To||e instanceof Ms||e instanceof zr||e instanceof Jr||e instanceof tc||e instanceof TryCatchFinallyNode?e.label:null},o.withLabel=function(e,t){if(null==t)t=null;else if(!(t instanceof Bo||t instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(t));return e.withLabel(t,this.state)},o.macroExpand1=function(e){var t;return e instanceof Wa?(t=this.state.macroExpand1(e),t instanceof Wa?t.reduce(this.state):t):e},o.macroExpandAll=function(e){var t;return e instanceof Wa?(t=this.state.macroExpandAll(e),t instanceof Wa?t.reduce(this.state):t):e},o.tmp=function(e,t,n){var r;if(null==e)e="ref";else if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected save to be a Boolean, got "+at(t));if(r=fo(),(t?this.savedTmps:this.unsavedTmps).push(r),null==n)n=rc.any;else if("string"==typeof n){if(!((et.call(rc,n)?rc[n]:void 0)instanceof rc))throw Error(rt(n)+" is not a known type name");n=et.call(rc,n)?rc[n]:void 0}else if(!(n instanceof rc))throw Error("Must provide a Type or a string for type, got "+at(n));return this.state.tmp(this.index,r,e,n)},o.getTmps=function(){return{unsaved:this.unsavedTmps.slice(),saved:this.savedTmps.slice()}},o.isConst=function(e){return void 0===e||e instanceof Wa&&this.real(e).isConst()},o.value=function(e){var t;if(void 0!==e)return e instanceof Wa&&(t=this.real(e),t.isConst())?t.constValue():void 0},o["const"]=function(e){return this.state["const"](this.index,e)},o.isSpread=function(e){return this.real(e)instanceof vs},o.spreadSubnode=function(e){return e=this.real(e),e instanceof vs?e.node:void 0},o.isNode=function(e){return e instanceof Wa},o.isIdent=function(e){return this.real(e)instanceof Bo},o.isTmp=function(e){return this.real(e)instanceof Js},o.isIdentOrTmp=function(e){var t;return(t=this.real(e))instanceof Bo||t instanceof Js},o.name=function(e){return e=this.real(e),this.isIdent(e)?e.name:void 0},o.ident=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));return t("./jsutils").isAcceptableIdent(e,!0)?this.state.ident(this.index,e):void 0},o.isCall=function(e){return this.real(e)instanceof ln},o.callFunc=function(e){return e=this.real(e),e instanceof ln?e.func:void 0},o.callArgs=function(e){return e=this.real(e),e instanceof ln?e.args:void 0},o.isSuper=function(e){return this.real(e)instanceof Ts},o.superChild=function(e){return e=this.real(e),this.isSuper(e)?e.child:void 0},o.superArgs=function(e){return e=this.real(e),this.isSuper(e)?e.args:void 0},o.callIsNew=function(e){return e=this.real(e),e instanceof ln?!!e.isNew:!1},o.callIsApply=function(e){return e=this.real(e),e instanceof ln?!!e.isApply:!1},o.call=function(e,t,n,r){var o,a;if(a=this,!(e instanceof Wa))throw TypeError("Expected func to be a "+X(Wa)+", got "+at(e));if(null==t)t=[];else{if(!H(t))throw TypeError("Expected args to be an Array, got "+at(t));for(o=t.length;o--;)if(!(t[o]instanceof Wa))throw TypeError("Expected "+("args["+o+"]")+" to be a "+X(Wa)+", got "+at(t[o]))}if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected isNew to be a Boolean, got "+at(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected isApply to be a Boolean, got "+at(r));if(n&&r)throw Error("Cannot specify both is-new and is-apply");return ln(e.line,e.column,this.state.scope.id,this.doWrap(e),function(){var e,n,r,o;for(e=[],n=0,r=t.length;r>n;++n)o=t[n],e.push(a.doWrap(o));return e}(),n,r).reduce(this.state)},o.func=function(e,t,n,r,o,a,i,s){var c,l,u;if(l=this,!(t instanceof Wa))throw TypeError("Expected body to be a "+X(Wa)+", got "+at(t));if(null==n)n=!0;else if("boolean"!=typeof n)throw TypeError("Expected autoReturn to be a Boolean, got "+at(n));if(null==r)r=!1;else if(!(r instanceof Wa)&&"boolean"!=typeof r)throw TypeError("Expected bound to be one of "+(X(Wa)+" or Boolean")+", got "+at(r));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected curry to be a Boolean, got "+at(o));if(null==a)a=void 0;else if(!(a instanceof Wa))throw TypeError("Expected asType to be one of "+(X(Wa)+" or undefined")+", got "+at(a));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected generator to be a Boolean, got "+at(i));if(null==s)s=[];else{if(!H(s))throw TypeError("Expected generic to be an Array, got "+at(s));for(c=s.length;c--;)if(!(s[c]instanceof Bo))throw TypeError("Expected "+("generic["+c+"]")+" to be a "+X(Bo)+", got "+at(s[c]))}return u=this.state.clone(this.state.cloneScope()),e=function(){var t,n,r,o,a,i;for(t=[],n=ot(e),r=0,o=n.length;o>r;++r)i=n[r],a=i.rescope(u.scope.id,u),C(u,a),t.push(a);return t}(),eo(t.line,t.column,this.state.scope.id,e,t.rescope(u.scope.id,u),n,r,o,a,i,s).reduce(this.state)},o.isFunc=function(e){return this.real(e)instanceof eo},o.funcBody=function(e){return e=this.real(e),this.isFunc(e)?e.body:void 0},o.funcParams=function(e){return e=this.real(e),this.isFunc(e)?e.params:void 0},o.funcIsAutoReturn=function(e){return e=this.real(e),this.isFunc(e)?!!e.autoReturn:void 0},o.funcIsBound=function(e){return e=this.real(e),this.isFunc(e)?!(!e.bound||e.bound instanceof Wa):void 0},o.funcIsCurried=function(e){return e=this.real(e),this.isFunc(e)?!!e.curry:void 0},o.funcAsType=function(e){return e=this.real(e),this.isFunc(e)?e.asType:void 0},o.funcIsGenerator=function(e){return e=this.real(e),this.isFunc(e)?!!e.generator:void 0},o.funcGeneric=function(e){return e=this.real(e),this.isFunc(e)?e.generic.slice():[]},o.param=function(e,t,n,r,o){if(!(e instanceof Wa))throw TypeError("Expected ident to be a "+X(Wa)+", got "+at(e));return Ei(e.line,e.column,e.scopeId,e,t,n,r,o).reduce(this.state)},o.isParam=function(e){return this.real(e)instanceof Ei},o.paramIdent=function(e){return e=this.real(e),this.isParam(e)?e.ident:void 0},o.paramDefaultValue=function(e){return e=this.real(e),this.isParam(e)?e.defaultValue:void 0},o.paramIsSpread=function(e){return e=this.real(e),this.isParam(e)?!!e.spread:void 0},o.paramIsMutable=function(e){return e=this.real(e),this.isParam(e)?!!e.isMutable:void 0},o.paramType=function(e){return e=this.real(e),this.isParam(e)?e.asType:void 0},o.isArray=function(e){return this.real(e)instanceof kt},o.elements=function(e){return e=this.real(e),this.isArray(e)?e.elements:void 0},o.arrayHasSpread=function(e){var t;return t=this,e=this.real(e),e instanceof kt?function(){var n,r,o,a;for(n=ot(e.elements),r=0,o=n.length;o>r;++r)if(a=n[r],t.real(a)instanceof vs)return!0;return!1}():!1},o.isObject=function(e){return this.real(e)instanceof ci},o.pairs=function(e){return e=this.real(e),this.isObject(e)||this.isTypeObject(e)?e.pairs:void 0},o.isBlock=function(e){return this.real(e)instanceof Zt},o.nodes=function(e){return e=this.real(e),this.isBlock(e)?e.nodes:void 0},o.array=function(e){var t,n;if(n=this,!H(e))throw TypeError("Expected elements to be an Array, got "+at(e));for(t=e.length;t--;)if(!(e[t]instanceof Wa))throw TypeError("Expected "+("elements["+t+"]")+" to be a "+X(Wa)+", got "+at(e[t]));return this.state.array(0,function(){var t,r,o,a;for(t=[],r=0,o=e.length;o>r;++r)a=e[r],t.push(n.doWrap(a));return t}()).reduce(this.state)},o.object=function(e){var t,n;if(n=this,!H(e))throw TypeError("Expected pairs to be an Array, got "+at(e));for(t=e.length;t--;){if(typeof e[t]!="object"||e[t]===null)throw TypeError("Expected "+("pairs["+t+"]")+" to be an Object, got "+at(e[t]));if(!(e[t].key instanceof Wa))throw TypeError("Expected "+("pairs["+t+"].key")+" to be a "+X(Wa)+", got "+at(e[t].key));if(!(e[t].value instanceof Wa))throw TypeError("Expected "+("pairs["+t+"].value")+" to be a "+X(Wa)+", got "+at(e[t].value))}return this.state.object(0,function(){var t,r,o,a,i,s,c;for(t=[],r=0,o=e.length;o>r;++r)i=(a=e[r]).key,c=a.value,s=a.property,t.push({key:n.doWrap(i),value:n.doWrap(c)(s)});return t}()).reduce(this.state)},o.type=function(e){var t;if(t=this,"string"==typeof e)return et.call(rc,e)&&rc[e]||function(){throw Error("Unknown type "+rt(e))}();if(e instanceof Wa)return e.type(this.state);throw Error("Can only retrieve type from a String or Node, got "+at(e))},o.toType=Ga,o.isComplex=function(e){return e=this.real(e),!(null==e||e instanceof kn||e instanceof Bo||e instanceof Js||e instanceof Us||e instanceof Nt||e instanceof Zt&&e.nodes.length===0)},o.isNoop=function(e){return e=this.real(e),e.isNoop(this.state)},o.isNothing=function(e){return this.real(e)instanceof Za},o.isTypeArray=function(e){return e=this.real(e),e instanceof ac&&e.basetype instanceof Bo&&e.basetype.name==="Array"},o.subtype=function(e){return e=this.real(e),e instanceof ac&&e.basetype instanceof Bo&&e.basetype.name==="Array"?e.args[0]:void 0},o.isTypeGeneric=function(e){return this.real(e)instanceof ac},o.basetype=function(e){return e=this.real(e),e instanceof ac&&e.basetype},o.typeArguments=function(e){return e=this.real(e),e instanceof ac&&e.args},o.isTypeObject=function(e){return this.real(e)instanceof ic},o.isTypeFunction=function(e){return e=this.real(e),e instanceof ac&&e.basetype instanceof Bo&&e.basetype.name==="Function"},o.returnType=function(e){return e=this.real(e),e instanceof ac&&e.basetype instanceof Bo&&e.basetype.name==="Function"?e.args[0]:void 0},o.isTypeUnion=function(e){return this.real(e)instanceof cc},o.types=function(e){return e=this.real(e),this.isTypeUnion(e)&&e.types},o.isThis=function(e){return this.real(e)instanceof Us},o.isArguments=function(e){return e=this.real(e),e instanceof Nt},o.isDef=function(e){return this.real(e)instanceof Qn},o.isAssign=function(e){return this.real(e)instanceof Ot},o.isBinary=function(e){return this.real(e)instanceof Yt},o.isUnary=function(e){return this.real(e)instanceof lc},o.op=function(e){return e=this.real(e),this.isAssign(e)||this.isBinary(e)||this.isUnary(e)?e.op:void 0},o.left=function(e){return e=this.real(e),this.isDef(e)||this.isBinary(e)?e.left:void 0},o.right=function(e){return e=this.real(e),this.isDef(e)||this.isBinary(e)?e.right:void 0},o.unaryNode=function(e){return e=this.real(e),this.isUnary(e)?e.node:void 0},o.isAccess=function(e){return this.real(e)instanceof xt},o.parent=function(e){return e=this.real(e),e instanceof xt?e.parent:void 0},o.child=function(e){return e=this.real(e),e instanceof xt?e.child:void 0},o.isIf=function(e){return this.real(e)instanceof To},o.test=function(e){return e=this.real(e),e instanceof To?e.test:void 0},o.whenTrue=function(e){return e=this.real(e),e instanceof To?e.whenTrue:void 0},o.whenFalse=function(e){return e=this.real(e),e instanceof To?e.whenFalse:void 0},o.cache=function(e,t,n,r){if(!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected name to be a String, got "+at(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected save to be a Boolean, got "+at(r));return this.maybeCache(e,function(e,n,r){return r&&t.push(e),n},n,r)},o.maybeCache=function(e,t,n,r){var o,a;if(!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected name to be a String, got "+at(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected save to be a Boolean, got "+at(r));return e=this.macroExpand1(e),this.isComplex(e)?(a=e.type(this.state),o=this.tmp(n,r,a),this.state.scope.add(o,!1,a),t(this.state.block(this.index,[this.state["var"](this.index,o,!1),this.state.assign(this.index,o,"=",this.doWrap(e))]),o,!0)):t(e,e,!1)},o.maybeCacheAccess=function(e,t,n,r,o){var a;if(a=this,!(e instanceof Wa))throw TypeError("Expected node to be a "+X(Wa)+", got "+at(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected parentName to be a String, got "+at(n));if(null==r)r="ref";else if("string"!=typeof r)throw TypeError("Expected childName to be a String, got "+at(r));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected save to be a Boolean, got "+at(o));return e=this.macroExpand1(e),this.isAccess(e)?this.maybeCache(this.parent(e),function(n,i,s){return a.maybeCache(a.child(e),function(r,o,c){return s||c?t(a.state.access(a.index,n,r),a.state.access(a.index,i,o),!0):t(e,e,!1)},r,o)},n,o):t(e,e,!1)},o.empty=function(e){var t;return t=this,null==e?!0:e instanceof Wa?e instanceof Zt?function(){var n,r,o;for(n=ot(e.nodes),r=n.length;r--;)if(o=n[r],!t.empty(o))return!1;return!0}():e instanceof Za:!1},e.constifyObject=n,o.wrap=function(e){var t;return H(e)?Zt(0,0,this.state.scope.id,e).reduce(this.state):e instanceof Wa?e:null==e?Za(0,0,this.state.scope.id):e instanceof RegExp||(t=typeof e)=="string"||"boolean"===t||"number"===t?kn(0,0,this.state.scope.id,e):e},o.node=function(e,t,n){var r;return r=tt.call(arguments,3),Wa[e].apply(Wa,[t,n,this.state.scope.id].concat(ot(r))).reduce(this.state)},o.walk=function(e,t){if(null!=e&&!(e instanceof Wa))throw TypeError("Expected node to be one of "+(X(Wa)+" or undefined or null")+", got "+at(e));if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+at(t));return null!=e?r(e,t):e},o.hasFunc=function(e){var t,n;if(this._hasFunc!=null)return this._hasFunc;t={},n=function(e){if(e instanceof eo)throw t;return e.walk(n)};try{r(this.macroExpandAll(e),n)}catch(o){if(o!==t)throw o;return this._hasFunc=!0}return this._hasFunc=!1},o.isStatement=function(e){return e=this.macroExpand1(e),e instanceof Wa&&e.isStatement()},o.isType=function(e,t){var n;if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+at(t));if(et.call(rc,t)&&(n=rc[t]),null==n||!(n instanceof rc))throw Error(t+" is not a known type name");return e.type(this.state).isSubsetOf(n)},o.hasType=function(e,t){var n;if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+at(t));if(et.call(rc,t)&&(n=rc[t]),null==n||!(n instanceof rc))throw Error(t+" is not a known type name");return e.type(this.state).overlaps(n)},i={Block:function(e,t){var n,r,o;return o=e.nodes,r=o.length,0!==r&&(n=this.mutateLast(o[Q(r)-1],t),n!==o[Q(r)-1])?Zt(e.line,e.column,e.scopeId,ot(tt.call(o,0,-1)).concat([n]),e.label):e},If:function(e,t){var n,r;return r=this.mutateLast(e.whenTrue,t),n=this.mutateLast(e.whenFalse,t),r!==e.whenTrue||n!==e.whenFalse?To(e.line,e.column,e.scopeId,e.test,r,n,e.label):e},Switch:function(e,t){var n,r,o;return n=this,r=M(e.cases,function(e){var r;return e.fallthrough?e:(r=n.mutateLast(e.body,t),r!==e.body?{node:e.node,body:r,fallthrough:e.fallthrough}:e)}),o=this.mutateLast(e.defaultCase||this.noop(),t),r!==e.cases||o!==e.defaultCase?Ms(e.line,e.column,e.scopeId,e.node,r,o,e.label):e},TmpWrapper:function(e,t){var n;return n=this.mutateLast(e.node,t),n!==e.node?zs(e.line,e.column,e.scopeId,n,e.tmps):e},MacroAccess:function(e,t){return this.mutateLast(this.macroExpand1(e),t)},Break:a,Continue:a,Nothing:a,Return:a,Debugger:a,Throw:a},o.mutateLast=function(e,t,n){var r;if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+at(t));if("object"!=typeof e||null===e||e instanceof RegExp)return e;if(!(e instanceof Wa))throw Error("Unexpected type to mutate-last through: "+at(e));return!et.call(i,e.constructor.cappedName)||n&&e instanceof Za?(r=t(e))!=null?r:e:i[e.constructor.cappedName].call(this,e,t)},o.canMutateLast=function(e){return e instanceof Wa&&et.call(i,e.constructor.cappedName)},e}(),Ct=o("AnyObjectLiteral",function(e){return dc(e)||si(e)||Fo(e)}),Et=o("AnyArrayLiteral",function(e){return Tt(e)||So(e)}),ua=function(){function e(){var t;return t=this instanceof e?this:W(n),t.byName={},t.byId=[],t.byLabel={},t.typeById=[],t.operatorNames={},t.binaryOperators=[],t.assignOperators=[],t.prefixUnaryOperators=[],t.postfixUnaryOperators=[],t.serialization={},t.helpers={},t.syntaxes={Logic:ji(na),Expression:Ur,Assignment:Dt,ExpressionOrAssignment:qr,FunctionDeclaration:Yr,Statement:Es,Body:en,BodyNoEnd:tn,GeneratorBody:ro,GeneratorBodyNoEnd:oo,End:Sr,Identifier:go,SimpleAssignable:us,Parameter:vi,InvocationArguments:Jo,ObjectLiteral:Ct,ArrayLiteral:Et,DedentedBody:Gn,ObjectKey:oi,Type:sc,NoSpace:Ha},t}var n;return n=e.prototype,e.displayName="MacroHolder",n.clone=function(){var t;return t=e(),t.byName=J({},this.byName),t.byId=this.byId.slice(),t.byLabel=J({},this.byLabel),t.typeById=this.typeById.slice(),t.operatorNames=J({},this.operatorNames),t.binaryOperators=this.binaryOperators.slice(),t.assignOperators=this.assignOperators.slice(),t.prefixUnaryOperators=this.prefixUnaryOperators.slice(),t.postfixUnaryOperators=this.postfixUnaryOperators.slice(),t.serialization=J({},this.serialization),t.helpers=J({},this.helpers),t.syntaxes=J({},this.syntaxes),t},n.getByName=function(e){var t;return et.call(t=this.byName,e)?t[e]:void 0},n.getOrAddByName=function(e){var t,n,r,a;return t=this,n=this.byName,et.call(n,e)?n[e]:(a=d(e),r=function(){var t;return t=o("<"+rt(e)+" macro>",function(e){var t,n,o,a,i;for(t=ot(r.data),n=0,o=t.length;o>n;++n)if(a=t[n],i=a(e))return i;return!1}),o(null!=t&&t.parserName||"<unknown>",function(e){var n;if(a(e.clone())){if(n=t(e),!n)throw ls;return n}return!1})}(),r.token=a,r.data=[],n[e]=r)},n.getOrAddByNames=function(e){var t,n,r,o,a;if(!H(e))throw TypeError("Expected names to be an Array, got "+at(e));for(n=e.length;n--;)if(typeof e[n]!="string")throw TypeError("Expected "+("names["+n+"]")+" to be a String, got "+at(e[n]));
for(t=[],r=0,o=e.length;o>r;++r)a=e[r],t.push(this.getOrAddByName(a));return t},n.setTypeById=function(e,t){if("number"!=typeof e)throw TypeError("Expected id to be a Number, got "+at(e));if(!(t instanceof rc))throw TypeError("Expected type to be a "+X(rc)+", got "+at(t));this.typeById[e]=t},n.getTypeById=function(e){return this.typeById[e]},n.getById=function(e){var t;return t=this.byId,Q(e)>=0&&$(e,t.length)?t[e]:void 0},n.addMacro=function(e,t,n){var r;if(null==t)t=void 0;else if("number"!=typeof t)throw TypeError("Expected macroId to be one of Number or undefined, got "+at(t));if(null==n)n=void 0;else if(!(n instanceof rc)&&"string"!=typeof n)throw TypeError("Expected type to be one of "+(X(rc)+" or String or undefined")+", got "+at(n));if(r=this.byId,null!=t){if(et.call(r,t))throw Error("Cannot add macro #"+rt(t)+", as it already exists");r[t]=e}else r.push(e),t=Q(r.length)-1;return null!=n&&(this.typeById[t]=n),t},n.replaceMacro=function(e,t,n){var r;if(null==n)n=void 0;else if(!(n instanceof rc))throw TypeError("Expected type to be one of "+(X(rc)+" or undefined")+", got "+at(n));r=this.byId,r[e]=t,null!=n&&(this.typeById[e]=n)},n.hasMacroOrOperator=function(e){return et.call(this.byName,e)||et.call(this.operatorNames,e)},n.getMacroAndOperatorNames=function(){var e,t,n;n=[],e=this.byName;for(t in e)et.call(e,t)&&n.push(t);e=this.operatorNames;for(t in e)et.call(e,t)&&n.push(t);return n},n.addBinaryOperator=function(e,t,n,r){var o,a,i,s,c,l,u,d,p;for(c=this,o=ot(e),a=o.length;a--;)d=o[a],this.operatorNames[d]=!0;return p=Number(n.precedence)||0,l=(i=(s=this.binaryOperators)[p])!=null?i:s[p]=[],u={rule:D(function(){var t,n,r,o,a;for(t=[],n=ot(e),r=0,o=n.length;o>r;++r)a=n[r],t.push(f(a));return t}()),func:t,rightToLeft:!!n.rightToLeft,maximum:n.maximum||0,minimum:n.minimum||0,invertible:!!n.invertible},l.push(u),n.label&&this.addByLabel(n.label,u),this.addMacro(t,r,(i=n.type)==="left"||"right"===i?n.type:n.type!=null&&et.call(rc,i=n.type)?rc[i]:void 0)},n.getByLabel=function(e){var t;return et.call(t=this.byLabel,e)?t[e]:void 0},n.addByLabel=function(e,t){if("string"!=typeof e)throw TypeError("Expected label to be a String, got "+at(e));return this.byLabel[e]=t},n.addAssignOperator=function(e,t,n,r){var o,a,i,s,c,l;for(s=this,o=ot(e),a=o.length;a--;)l=o[a],this.operatorNames[l]=!0;return c={rule:D(function(){var t,n,r,o,a;for(t=[],n=ot(e),r=0,o=n.length;o>r;++r)a=n[r],":="===a?t.push(xn):t.push(f(a));return t}()),func:t},this.assignOperators.push(c),n.label&&this.addByLabel(n.label,c),this.addMacro(t,r,(i=n.type)==="left"||"right"===i?n.type:n.type!=null&&et.call(rc,i=n.type)?rc[i]:void 0)},n.addUnaryOperator=function(e,t,n,r){var o,a,i,c,l,u,d;for(c=this,o=ot(e),a=o.length;a--;)u=o[a],this.operatorNames[u]=!0;return d=n.postfix?this.postfixUnaryOperators:this.prefixUnaryOperators,l={rule:D(function(){var t,r,o,a,i,c;for(t=[],r=ot(e),o=0,a=r.length;a>o;++o)i=r[o],c=f(i),/[a-zA-Z]/.test(i)?t.push(c):n.postfix?t.push(s([Ha,["this",c]])):t.push(s([["this",c],Ha]));return t}()),func:t,standalone:et.call(!n,"standalone")||!!n.standalone},d.push(l),n.label&&this.addByLabel(n.label,l),this.addMacro(t,r,n.type==="node"?n.type:n.type!=null&&et.call(rc,i=n.type)?rc[i]:void 0)},n.addSerializedHelper=function(e,t,n,r){var o,a,i;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));i=(o=(a=this.serialization).helpers)!=null?o:a.helpers={},i[e]={helper:t,type:n,dependencies:r}},n.addMacroSerialization=function(e){var t,n,r,o,a;if("object"!=typeof e||null===e)throw TypeError("Expected serialization to be an Object, got "+at(e));if(typeof e.type!="string")throw TypeError("Expected serialization.type to be a String, got "+at(e.type));a=J({},e),delete a.type,o=(t=(n=this.serialization)[r=e.type])!=null?t:n[r]=[],o.push(a)},n.addSyntax=function(e,t){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if("function"!=typeof t)throw TypeError("Expected value to be a Function, got "+at(t));if(et.call(this.syntaxes,e))throw Error("Cannot override already-defined syntax: "+e);this.syntaxes[e]=t},n.hasSyntax=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));return et.call(this.syntaxes,e)},n.getSyntax=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if(et.call(this.syntaxes,e))return this.syntaxes[e];throw Error("Unknown syntax: "+e)},n.serialize=function(e){var n,r,o,a,i,s,c;if(null==e)e=!1;else if("boolean"!=typeof e)throw TypeError("Expected allowJS to be a Boolean, got "+at(e));if(c=J({},this.serialization),et.call(c,"helpers")&&(a=c.helpers),a)for(s in a)if(et.call(a,s))for(o=a[s],n=ot(o.dependencies),i=n.length;i--;)r=n[i],et.call(a,r)||o.dependencies.splice(i,1);return e?t("./jsutils").toJSSource(c):JSON.stringify(c)},n.deserialize=function(e){var n,r,o,a,i,s,c;o=t("./jsast"),n=(r=et.call(e,"helpers")?e.helpers:void 0)!=null?r:{};for(s in n)et.call(n,s)&&(i=(r=n[s]).helper,c=r.type,a=r.dependencies,this.addHelper(s,o.fromJSON(i),rc.fromJSON(c),a));Is("",this).deserializeMacros(e)},n.addHelper=function(e,t,n,r){var o;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if(!(n instanceof rc))throw TypeError("Expected type to be a "+X(rc)+", got "+at(n));if(!H(r))throw TypeError("Expected dependencies to be an Array, got "+at(r));for(o=r.length;o--;)if(typeof r[o]!="string")throw TypeError("Expected "+("dependencies["+o+"]")+" to be a String, got "+at(r[o]));if(et.call(this.helpers,e))throw Error("Trying to overwrite helper "+e);return this.helpers[e]={value:t,type:n,dependencies:r}},n.hasHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));return et.call(this.helpers,e)},n.getHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if(et.call(this.helpers,e))return this.helpers[e].value;throw Error("No such helper: "+e)},n.helperType=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if(et.call(this.helpers,e))return this.helpers[e].type;throw Error("No such helper: "+e)},n.helperDependencies=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+at(e));if(et.call(this.helpers,e))return this.helpers[e].dependencies;throw Error("No such helper: "+e)},e}(),Wa=function(){function e(){var n;throw n=this instanceof e?this:W(t),Error("Node should not be instantiated directly")}var t;return t=e.prototype,e.displayName="Node",t.type=function(){return rc.any},t.walk=function(){return this},t.walkAsync=function(e,t){return t(null,this)},t.cacheable=!0,t.scope=function(e){return e.getScope(this.scopeId)},t.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return Zt(this.line,this.column,this.scopeId,[this],e)},t._reduce=function(e){return this.walk(function(t){return t.reduce(e)})},t.reduce=function(e){var t;if(!(e instanceof Is))throw TypeError("Expected o to be a "+X(Is)+", got "+at(e));return this._reduced!=null?this._reduced:(t=this._reduce(e),this._reduced=t===this?this:t.reduce(e))},t.isConst=function(){return!1},t.constValue=function(){throw Error("Not a const: "+("undefined"==typeof node?"Undefined":at(node)))},t.isNoop=function(e){return this.reduce(e)._isNoop(e)},t._isNoop=function(){return!1},t.isStatement=function(){return!1},t.rescope=function(e,t){var n;return n=this.scopeId,n===e?this:(this.scopeId=e,this.walk(function(r){var o,a;return r.scopeId===n?r.rescope(e,t):r.scopeId!==e?(o=r.scope(t),o.parent!=null&&(a=o.parent.id,a===n&&o.reparent(t.getScope(e))),r):r}))},t.doWrap=function(e){var t;return this.isStatement()?(t=e.cloneScope(e.getScope(this.scopeId)),ln(this.line,this.column,this.scopeId,eo(this.line,this.column,this.scopeId,[],this.rescope(t.id,e),!0,!0),[])):this},e}(),ts=function(){function e(t,r){var o;if(o=this instanceof e?this:W(n),null==r)r=null;else if(!(r instanceof e))throw TypeError("Expected parent to be one of "+(X(e)+" or null")+", got "+at(r));return o.id=t,o.parent=r,o.variables={},o.tmps=[],o}function t(e){if(e instanceof Js){if(et.call(this.tmps,e.id))return this.tmps[e.id];if(this.parent!=null)return t.call(this.parent,e)}else{if(et.call(this.variables,e.name))return this.variables[e.name];if(this.parent!=null)return t.call(this.parent,e)}}var n;return n=e.prototype,e.displayName="Scope",n.clone=function(t){return e(t,this)},n.reparent=function(t){if(!(t instanceof e))throw TypeError("Expected parent to be a "+X(e)+", got "+at(t));if(t===this)throw Error("Trying to reparent to own scope");this.parent=t},n.add=function(e,t,n){if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isMutable to be a Boolean, got "+at(t));if(!(n instanceof rc))throw TypeError("Expected type to be a "+X(rc)+", got "+at(n));e instanceof Js?this.tmps[e.id]={isMutable:t,type:n}:this.variables[e.name]={isMutable:t,type:n}},n.owns=function(e){if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(e));return e instanceof Js?et.call(this.tmps,e.id):et.call(this.variables,e.name)},n.has=function(e){if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(e));return this.owns(e)?!0:this.parent!=null?this.parent.has(e):!1},n.isMutable=function(e){var n;if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(e));return n=t.call(this,e),n?n.isMutable:!1},n.type=function(e){var n;if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(e));return n=t.call(this,e),n?n.type:rc.any},e}(),Is=function(){function e(t,n,r,o,a,i,s,c,l,u,f,d,p){var h;if(h=this instanceof e?this:W(b),h.data=t,null==n)n=ua();else if(!(n instanceof ua))throw TypeError("Expected macros to be a "+X(ua)+", got "+at(n));if(h.macros=n,null==r&&(r={}),h.options=r,null==o&&(o=0),h.index=o,null==a&&(a=1),h.line=a,h.lineInfo=i,null==s)s=Wr();else if(!(s instanceof Wr))throw TypeError("Expected failures to be a "+X(Wr)+", got "+at(s));return h.failures=s,null==c&&(c=[]),h.cache=c,null==l&&(l=xs(1)),h.indent=l,null==u&&(u=null),h.currentMacro=u,null==f&&(f=0),h.preventFailures=f,null==d&&(d=[]),h.knownScopes=d,p?h.scope=p:(h.scope=ts(d.length),d.push(h.scope)),h.expandingMacros=!1,i||h.calculateLineInfo(),h}function n(e,t){var r,o,a,i,s,c,l,u;if(H(t)){for(r=[],o=ot(t),a=0,i=o.length;i>a;++a)s=o[a],r.push(n(e,s));return r}if(t instanceof Wa)return t.reduce(e);if("object"==typeof t&&null!==t){l={};for(c in t)et.call(t,c)&&(u=t[c],l[c]=n(e,u));return l}return t}function a(e,t,n){return this.root(e,void 0,this["return"](e,this["function"](e,[t,this.param(e,this.ident(e,"__wrap"),void 0,!1,!0,void 0),this.param(e,this.ident(e,"__node"),void 0,!1,!0,void 0)],n,!0,!1),!1))}function c(e){if(e instanceof Bo)return["ident",e.name];if(e instanceof Ls)return["sequence"].concat(ot(m(l(e.params))));if(e instanceof Fs)return["choice"].concat(function(){var t,n,r,o,a;for(t=[],n=ot(e.choices),r=0,o=n.length;o>r;++r)a=n[r],t.push(c(a));return t}());if(e.isConst())return["const",e.constValue()];if(e instanceof Os)return["many",e.multiplier].concat(ot(c(e.inner)));throw Error("Unknown param type: "+at(e))}function l(e){return p(function(){var t,n,r,o,a,i,s;for(t=[],n=ot(e),r=0,o=n.length;o>r;++r)if(i=n[r],i.isConst())t.push(["const",i.constValue()]);else{if(!(i instanceof js))throw Error();if(a=i.ident,a instanceof Bo)s=["ident",a.name];else{if(!(a instanceof Us))throw Error();s=["this"]}i.asType&&s.push.apply(s,ot(c(i.asType))),t.push(s)}return t}())}function u(e){var t,n,r,a,s,c;if(t=this,e instanceof Bo)return s=e.name,r=this.macros,r.hasSyntax(s)?r.getSyntax(s):o(s,function(e){return r.getSyntax(s).call(this,e)});if(e instanceof Ls)return d.call(this,e.params);if(e instanceof Fs)return i(D(function(){var n,r,o,a,i;for(n=[],r=ot(e.choices),o=0,a=r.length;a>o;++o)i=r[o],n.push(u.call(t,i));return n}()));if(e.isConst())return c=e.constValue(),"string"!=typeof c&&this.error("Expected a constant string parameter, got "+at(c)),et.call(C,c)&&C[c]||f(c);if(!(e instanceof Os))return this.error("Unexpected type: "+at(e));switch(a=e.multiplier,n=u.call(this,e.inner),a){case"*":return o(rt(null!=n&&n.parserName||"calced")+"*",function(e){var t,r,o;for(t=e.clone(),o=[];r=n(t);)o.push(r);return e.update(t),o});case"+":return o(rt(null!=n&&n.parserName||"calced")+"+",function(e){var t,r,o;for(t=e.clone(),o=[];r=n(t);)o.push(r);return o.length<1?!1:(e.update(t),o)});case"?":return function(){function e(e,t,n){return t.nothing(n)}return o(rt(null!=n&&n.parserName||"calced")+"?",function(t){var r,o;return r=t.index,o=t.line,n(t)||e(void 0,t,r,o)})}();default:throw Error("Unknown syntax multiplier: "+rt(a))}}function d(e){var t,n,r,o,a,i,c,l,d,p;for(l=[],t=ot(e),n=0,r=t.length;r>n;++n)if(c=t[n],c.isConst())d=c.constValue(),"string"!=typeof d&&this.error("Expected a constant string parameter, got "+at(d)),l.push(et.call(C,d)&&C[d]||f(d));else if(c instanceof js){if(a=c.ident,a instanceof Bo)i=a.name;else{if(!(a instanceof Us))throw Error("Don't know how to handle ident type: "+at(a));i="this"}p=(o=c.asType)!=null?o:Bo(0,0,-1,"Expression"),l.push([i,u.call(this,p)])}else this.error("Unexpected parameter type: "+at(c));return s(l)}function p(e){if(!H(e))throw TypeError("Expected operators to be an Array, got "+at(e));return e.length===0?void 0:e.length!==1||H(e[0])?e:e[0]}function h(e){var t,n;if("object"!=typeof e||null===e)throw TypeError("Expected options to be an Object, got "+at(e));for(t in e)if(et.call(e,t))return n=e[t],e}function _(e){if("object"!=typeof e||null===e)throw TypeError("Expected stateOptions to be an Object, got "+at(e));return e.serializeMacros?{minify:!0}:{}}function m(e){return null==e?[]:H(e)?e:[e]}function y(e){var t,n,r,o,a,i,s,c;if(H(e)){for(t=[],n=ot(e),r=0,o=n.length;o>r;++r)a=n[r],a instanceof Za?t.push(void 0):t.push(y(a));return t}if(e instanceof Wa)return e;if("object"!=typeof e||null===e||e instanceof RegExp)return e;s={};for(i in e)et.call(e,i)&&(c=e[i],c instanceof Za||(s[i]=y(c)));return s}function g(e,t,n,a,i,s,c){function l(e,r,o,a,i){var s,l,f,d,p;if(ut.peek()||!r.expandingMacros)return r.macroAccess(o,c,a,y(e),yt.peek(),pt.peek(),ft.peek());if(s=r.clone(r.getScope(i)),l=la(s,o,yt.peek(),pt.peek(),ft.peek()),"assignOperator"===t&&l.isIdent(e.left)){if(!l.hasVariable(e.left))throw ca(Error("Trying to assign with "+rt(e.op)+" to unknown variable: "+rt(l.name(e.left))),r.data,a);if(!l.isVariableMutable(e.left)&&!ft.peek())throw ca(Error("Trying to assign with "+rt(e.op)+" to immutable variable: "+rt(l.name(e.left))),r.data,a)}return f=function(){try{return n.call(l,y(e),V(l,"wrap"),V(l,"node"))}catch(t){throw t instanceof ca?(t.setLine(a),t):ca(t,r.data,a)}}(),r.update(s),f instanceof Wa?(p=function(e){return e instanceof ia&&(e.callLine=a),e.walk(p)},f=p(f.reduce(u)),d=l.getTmps(),d.unsaved.length?r.tmpWrapper(o,f,d.unsaved):f):f}var u,f;if(u=this,"function"!=typeof n)throw TypeError("Expected handler to be a Function, got "+at(n));return f=this.macros,c=function(){var e,t,n,d,p,h;switch(u.currentMacro){case w:return f.addBinaryOperator(i,l,s,c);case v:return f.addAssignOperator(i,l,s,c);case B:return f.addUnaryOperator(i,l,s,c);case x:return r(a),f.addSyntax(s.name,o(null!=a&&a.parserName||"rule",function(e){var t,n,r;return t=e.index,n=e.line,r=a(e),r?l(r,e,t,n):!1})),f.addMacro(l,c,s.type!=null&&et.call(rc,p=s.type)?rc[p]:void 0);default:for(r(a),e=ot(f.getOrAddByNames(u.currentMacro)),n=0,d=e.length,t=function(e){var t;return t=this,this.pendingMacroId!=null&&e.data.pop(),e.data.push(function(){var t;return t=e.token,function(){function e(e){var n,r;return r=e.clone(),n={},(n.macroName=t(r))&&(n.macroData=a(r))&&(e.update(r),n)}return o(null!=e&&e.parserName||"<unknown>",function(t){var n,r,o;return n=t.index,r=t.line,o=e(t),o?l(o,t,n,r):!1})}()}())};d>n;++n)t.call(u,e[n]);if(u.pendingMacroId!=null){if(null!=c)throw Error("Cannot provide the macro id if there is a pending macro id");return h=u.pendingMacroId,u.pendingMacroId=null,f.replaceMacro(h,l,s.type!=null&&et.call(rc,p=s.type)?rc[p]:void 0),h}return f.addMacro(l,c,s.type!=null&&et.call(rc,p=s.type)?rc[p]:void 0)}}()}var b,v,w,x,I,E,A,C,N,B;return b=e.prototype,e.displayName="State",b.clone=function(t){if(null==t)t=void 0;else if(!(t instanceof ts))throw TypeError("Expected scope to be one of "+(X(ts)+" or undefined")+", got "+at(t));return e(this.data,this.macros,this.options,this.index,this.line,this.lineInfo,this.failures,this.cache,this.indent.clone(),this.currentMacro,this.preventFailures,this.knownScopes,t||this.scope)},b.clearCache=function(){this.cache.length=0},b.calculateLineInfo=function(){var e,t,n,r,o;for(o=/(?:\r\n?|[\n\u2028\u2029])/g,e=this.data,n=this.lineInfo=[],t=0,n.push(0);;){if(r=o.exec(e),!r)break;t=Q(r.index)+Q(r[0].length),n.push(t)}},b.getPosition=function(e){var t,n,r,o,a;if(null==e)e=this.index;else if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+at(e));for(o=this.lineInfo,r=0,a=o.length;r!==a;)if(n=Math.floor((r+a)/2),t=o[n],t>e)a=n;else{if(!(e>t)){r=n;break}if(r===n)break;r=n}return{line:r+1,column:e-Q(o[r])+1}},b.getLine=function(e){if(null==e)e=this.index;else if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+at(e));return this.getPosition(e).line},b.cloneScope=function(e){var t;return t=(e||this.scope).clone(this.knownScopes.length),this.knownScopes.push(t),t},b.getScope=function(e){var t;if(t=this,"number"!=typeof e)throw TypeError("Expected id to be a Number, got "+at(e));return this.knownScopes[e]||function(){throw Error("Unknown scope: "+e)}()},b.update=function(e){this.index=e.index,this.line=e.line,this.indent=e.indent.clone(),this.macros=e.macros},b.fail=function(e){this.preventFailures||this.failures.add(e,this.index,this.getLine())},b.preventFail=function(){++this.preventFailures},b.unpreventFail=function(){--this.preventFailures},b.error=function(e){throw Ni(e,this.data,this.getLine())},b.enterMacro=function(e,t){if(!e)throw Error("Must provide a macro name");this.currentMacro&&this.error("Attempting to define a macro "+String(e)+" inside a macro "+String(this.currentMacro));try{this.currentMacro=e,t()}finally{this.currentMacro=null}return this.nothing(this.index)},b.defineHelper=function(e,n,r){var o,a,i,s,c,l;if(!(n instanceof Bo))throw TypeError("Expected name to be a "+X(Bo)+", got "+at(n));if(!(r instanceof Wa))throw TypeError("Expected value to be a "+X(Wa)+", got "+at(r));return c=t("./jstranslator"),s=this.macroExpandAll(r).reduce(this),l=s.type(this),i=(o=c.defineHelper(this.macros,n,s,l)).helper,a=o.dependencies,this.options.serializeMacros&&this.macros.addSerializedHelper(n.name,i,l,a),this.nothing(e)},C={",":En,";":ns,":":gn,":=":xn,"":Xa,"\n":Va,"(":mi,")":mn,"[":yi,"]":yn,"{":hi,"}":pn,end:Sr},E=function(){var e;return e={ident:function(e,t){return Bo(0,0,e,t)},sequence:function(e){var t;return t=tt.call(arguments,1),Ls(0,0,e,I(t,e))},choice:function(e){var t;return t=tt.call(arguments,1),Fs(0,0,e,function(){var n,r,o,a;for(n=[],r=0,o=t.length;o>r;++r)a=t[r],n.push(E(a,e));return n}())},"const":function(e,t){return kn(0,0,e,t)},many:function(e,t){var n;return n=tt.call(arguments,2),Os(0,0,e,E(n,e),t)}},function(t,n){var r;if(null==t)t=[];else if(!H(t))throw TypeError("Expected asType to be an Array, got "+at(t));if(t.length!==0){if(r=t[0],et.call(e,r))return e[r].apply(e,[n].concat(ot(tt.call(t,1))));throw Error("Unknown as-type: "+String(r))}}}(),I=function(){var e;return e={"const":function(e,t){return kn(0,0,e,t)},ident:function(e,t){var n;return n=tt.call(arguments,2),js(0,0,e,Bo(0,0,e,t),E(n,e))},"this":function(e){var t;return t=tt.call(arguments,1),js(0,0,e,Us(0,0,e),E(t,e))}},function(t,n){var r,o,a,i,s,c;for(r=[],o=ot(m(t)),a=0,i=o.length;i>a;++a){if(s=o[a],c=s[0],!et.call(e,c))throw Error("Unknown param type: "+String(c));r.push(e[c].apply(e,[n].concat(ot(tt.call(s,1)))))}return r}}(),N={syntax:function(e,t,r,o,i,s){var c,u,f,m,y,g,b,v,w,x,I;if(c=this,g=this.ident(e,"macroFullData"),f=this.param(e,g,void 0,!1,!1,void 0),b=this.ident(e,"macroName"),this.scope.add(b,!1,rc.string),y=this.ident(e,"macroData"),this.scope.add(y,!1,rc.object),r=this.block(e,[this["var"](e,b,!1),this.assign(e,b,"=",this.access(e,g,this["const"](e,"macroName"))),this["var"](e,y,!1),this.assign(e,y,"=",this.access(e,g,this["const"](e,"macroData")))].concat(function(){var n,r,o,a,i;for(n=[],r=ot(t),o=0,a=r.length;a>o;++o)i=r[o],i instanceof js&&(c.scope.add(i.ident,!0,rc.any),n.push(c.block(e,[c["var"](e,i.ident,!0),c.assign(e,i.ident,"=",c.access(e,y,c["const"](e,i.ident.name)))])));return n}(),[r])),v=a.call(this,e,f,r),I=s(this.macroExpandAll(v).reduce(this),this.macros,{"return":!0}),u=I.node.toString(_(i)),i.serializeMacros&&(w=u),m=Function(u)(),"function"!=typeof m)throw Error("Error creating function for macro: "+String(this.currentMacro));return x=this,{handler:function(e){var t;return t=tt.call(arguments,1),m.apply(this,[n(x,e)].concat(ot(t))).reduce(x)},rule:d.call(this,t),serialization:null!=w?{type:"syntax",code:w,options:h(o),params:l(t),names:p(this.currentMacro)}:void 0}},defineSyntax:function(e,t,r,o,i,s){var c,u,f,p;return c=this,p=this,u=null!=r?function(){var l,u,d,h,m,y;if(h=c.ident(e,"macroData"),u=c.param(e,h,void 0,!1,!1,void 0),r=c.block(e,function(){var n,r,o,a,i;for(n=[],r=ot(t),o=0,a=r.length;a>o;++o)i=r[o],i instanceof js&&(c.scope.add(i.ident,!0,rc.any),n.push(c.block(e,[c["var"](e,i.ident,!0),c.assign(e,i.ident,"=",c.access(e,h,c["const"](e,i.ident.name)))])));return n}().concat([r])),m=a.call(c,e,u,r),y=s(c.macroExpandAll(m).reduce(p),c.macros,{"return":!0}),l=y.node.toString(_(i)),i.serializeMacros&&(f=l),d=Function(l)(),"function"!=typeof d)throw Error("Error creating function for syntax: "+rt(o.name));return function(e){var t;return t=tt.call(arguments,1),n(p,d.apply(this,[n(p,e)].concat(ot(t))))}}():function(e){var t;return t=tt.call(arguments,1),n(p,e)},{handler:u,rule:d.call(this,t),serialization:i.serializeMacros?{type:"defineSyntax",code:f,options:h(o),params:l(t)}:void 0}},call:function(e,t,r,o,i,s){var c,l,u,f,d,m,y,g,b,v,w;if(c=this,m=this.ident(e,"macroFullData"),u=this.param(e,m,void 0,!1,!1,void 0),y=this.ident(e,"macroName"),this.scope.add(y,!1,rc.string),d=this.ident(e,"macroData"),this.scope.add(d,!1,rc.object),r=this.block(e,[this["var"](e,y,!1),this.assign(e,y,"=",this.access(e,m,this["const"](e,"macroName"))),this["var"](e,d,!1),this.assign(e,d,"=",this.access(e,m,this["const"](e,"macroData")))].concat(function(){var n,r,o,a,i;for(n=[],r=ot(t),a=0,o=r.length;o>a;++a)i=r[a],i instanceof Ei&&(c.scope.add(i.ident,!0,rc.any),n.push(c.block(e,[c["var"](e,i.ident,!0),c.assign(e,i.ident,"=",c.access(e,d,c["const"](e,a)))])));return n}(),[r])),g=a.call(this,e,u,r),w=s(this.macroExpandAll(g).reduce(this),this.macros,{"return":!0}),l=w.node.toString(_(i)),i.serializeMacros&&(b=l),f=Function(l)(),"function"!=typeof f)throw Error("Error creating function for macro: "+rt(this.currentMacro));return v=this,f=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(v,t)].concat(ot(r))).reduce(v)}}(f),{handler:f,rule:Jo,serialization:null!=b?{type:"call",code:b,options:h(o),names:p(this.currentMacro)}:void 0}},binaryOperator:function(e,t,r,o,i,s){var c,l,u,f,d,m,y,g,b;if(c=this,d=this.ident(e,"macroData"),u=this.param(e,d,void 0,!1,!1,void 0),r=this.block(e,function(){var t,n,r,o,a,i;for(t=[],n=["left","op","right"],r=0,o=n.length;o>r;++r)i=n[r],a=c.ident(e,i),c.scope.add(a,!0,rc.any),t.push(c.block(e,[c["var"](e,a,!0),c.assign(e,a,"=",c.access(e,d,c["const"](e,i)))]));return t}().concat([r])),m=a.call(this,e,u,r),b=s(this.macroExpandAll(m).reduce(this),this.macros,{"return":!0}),l=b.node.toString(_(i)),i.serializeMacros&&(y=l),f=Function(l)(),"function"!=typeof f)throw Error("Error creating function for binary operator "+rt(t.join(", ")));return g=this,f=o.invertible?function(e){return function(t){var r,o;return r=tt.call(arguments,1),o=e.apply(this,[n(g,t)].concat(ot(r))),t.inverted?lc(o.line,o.column,o.scopeId,"!",o).reduce(g):o.reduce(g)}}(f):function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(g,t)].concat(ot(r))).reduce(g)}}(f),{handler:f,rule:void 0,serialization:null!=y?{type:"binaryOperator",code:y,operators:p(t),options:h(o)}:void 0}},assignOperator:function(e,t,r,o,i,s){var c,l,u,f,d,m,y,g,b;if(c=this,d=this.ident(e,"macroData"),u=this.param(e,d,void 0,!1,!1,void 0),r=this.block(e,function(){var t,n,r,o,a,i;for(t=[],n=["left","op","right"],r=0,o=n.length;o>r;++r)i=n[r],a=c.ident(e,i),c.scope.add(a,!0,rc.any),t.push(c.block(e,[c["var"](e,a,!0),c.assign(e,a,"=",c.access(e,d,c["const"](e,i)))]));return t}().concat([r])),m=a.call(this,e,u,r),b=s(this.macroExpandAll(m).reduce(this),this.macros,{"return":!0}),l=b.node.toString(_(i)),i.serializeMacros&&(y=l),f=Function(l)(),"function"!=typeof f)throw Error("Error creating function for assign operator "+rt(t.join(", ")));return g=this,f=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(g,t)].concat(ot(r))).reduce(g)}}(f),{handler:f,rule:void 0,serialization:null!=y?{type:"assignOperator",code:y,operators:p(t),options:h(o)}:void 0}},unaryOperator:function(e,t,r,o,i,s){var c,l,u,f,d,m,y,g,b;if(c=this,d=this.ident(e,"macroData"),u=this.param(e,d,void 0,!1,!1,void 0),r=this.block(e,function(){var t,n,r,o,a,i;for(t=[],n=["op","node"],r=0,o=n.length;o>r;++r)i=n[r],a=c.ident(e,i),c.scope.add(a,!0,rc.any),t.push(c.block(e,[c["var"](e,a,!0),c.assign(e,a,"=",c.access(e,d,c["const"](e,i)))]));return t}().concat([r])),m=a.call(this,e,u,r),b=s(this.macroExpandAll(m).reduce(this),this.macros,{"return":!0}),l=b.node.toString(_(i)),i.serializeMacros&&(y=l),f=Function(l)(),"function"!=typeof f)throw Error("Error creating function for unary operator "+rt(t.join(", ")));return g=this,f=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(g,t)].concat(ot(r))).reduce(g)}}(f),{handler:f,rule:void 0,serialization:null!=y?{type:"unaryOperator",code:y,operators:p(t),options:h(o)}:void 0}}},A={syntax:function(e){var t,r,o,a,i,s,c,l;if(t=this,r=e.code,c=e.params,i=e.names,s=e.options,null==s&&(s={}),a=e.id,i=m(i),o=Function(r)(),"function"!=typeof o)throw Error("Error deserializing function for macro "+rt(name));return l=this,o=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(l,t)].concat(ot(r))).reduce(l)}}(o),this.enterMacro(i,function(){return g.call(t,0,"syntax",o,d.call(t,I(c,t.scope.id)),null,s,a)})},call:function(e){var t,r,o,a,i,s,c;if(t=this,r=e.code,i=e.names,s=e.options,null==s&&(s={}),a=e.id,i=m(i),o=Function(r)(),"function"!=typeof o)throw Error("Error deserializing function for macro "+rt(name));return c=this,o=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(c,t)].concat(ot(r))).reduce(c)}}(o),this.enterMacro(i,function(){return g.call(t,0,"call",o,Jo,null,s,a)})},defineSyntax:function(e){var t,r,o,a,i,s,c;if(t=this,r=e.code,s=e.params,i=e.options,null==i&&(i={}),a=e.id,this.macros.hasSyntax(i.name))throw Error("Cannot override already-defined syntax: "+rt(i.name));if(c=this,null!=r){if(o=Function(r)(),"function"!=typeof o)throw Error("Error deserializing function for macro syntax "+rt(i.name));o=function(e){return function(t){var r;return r=tt.call(arguments,1),n(c,e.apply(this,[n(c,t)].concat(ot(r))))}}(o)}else o=function(e){return n(c,e)};return this.enterMacro(x,function(){return g.call(t,0,"defineSyntax",o,d.call(t,I(s,t.scope.id)),null,i,a)})},binaryOperator:function(e){var t,r,o,a,i,s,c;if(t=this,r=e.code,i=e.operators,s=e.options,null==s&&(s={}),a=e.id,i=m(i),o=Function(r)(),"function"!=typeof o)throw Error("Error deserializing function for binary operator "+rt(i.join(", ")));return c=this,o=s.invertible?function(e){return function(t){var r,o;return r=tt.call(arguments,1),o=e.apply(this,[n(c,t)].concat(ot(r))),t.inverted?lc(o.line,o.column,o.scopeId,"!",o).reduce(c):o.reduce(c)}}(o):function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(c,t)].concat(ot(r))).reduce(c)}}(o),this.enterMacro(w,function(){return g.call(t,0,"binaryOperator",o,void 0,i,s,a)})},assignOperator:function(e){var t,r,o,a,i,s,c;if(t=this,r=e.code,i=e.operators,s=e.options,null==s&&(s={}),a=e.id,i=m(i),o=Function(r)(),"function"!=typeof o)throw Error("Error deserializing function for assign operator "+rt(i.join(", ")));return c=this,o=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(c,t)].concat(ot(r))).reduce(c)}}(o),this.enterMacro(v,function(){return g.call(t,0,"assignOperator",o,void 0,i,s,a)})},unaryOperator:function(e){var t,r,o,a,i,s,c;if(t=this,r=e.code,i=e.operators,s=e.options,null==s&&(s={}),a=e.id,i=m(i),o=Function(r)(),"function"!=typeof o)throw Error("Error deserializing function for unary operator "+rt(i.join(", ")));c=this,o=function(e){return function(t){var r;return r=tt.call(arguments,1),e.apply(this,[n(c,t)].concat(ot(r))).reduce(c)}}(o),this.enterMacro(B,function(){return g.call(t,0,"unaryOperator",o,void 0,i,s,a)})}},b.startMacroSyntax=function(e,t,n){function r(e,t,n,r){if(ut.peek()||!t.expandingMacros)return t.macroAccess(n,u,r,y(e),yt.peek(),pt.peek(),ft.peek());throw Error("Cannot use macro until fully defined")}var a,i,s,c,l,u,f,p;if(!H(t))throw TypeError("Expected params to be an Array, got "+at(t));for(this.currentMacro||this.error("Attempting to specify a macro syntax when not in a macro"),p=d.call(this,t),f=this.macros,a=ot(f.getOrAddByNames(this.currentMacro)),s=0,c=a.length,i=function(e){return e.data.push(function(){var t;return t=e.token,function(){function e(e){var n,r;return r=e.clone(),n={},(n.macroName=t(r))&&(n.macroData=p(r))&&(e.update(r),n)}return o(null!=e&&e.parserName||"<unknown>",function(t){var n,o,a;return n=t.index,o=t.line,a=e(t),a?r(a,t,n,o):!1})}()}())};c>s;++s)i.call(this,a[s]);return u=f.addMacro(r,void 0,n.type!=null&&et.call(rc,l=n.type)?rc[l]:void 0),this.pendingMacroId=u,t},b.macroSyntax=function(e,n,r,o,a){var i,s,c,l,u;if(!H(r))throw TypeError("Expected params to be an Array, got "+at(r));if(!et.call(N,n))throw Error("Unknown macro-syntax type: "+rt(n));this.currentMacro||this.error("Attempting to specify a macro syntax when not in a macro"),s=(i=N[n].call(this,e,r,a,o,this.options,t("./jstranslator"))).handler,l=i.rule,u=i.serialization,c=g.call(this,e,n,s,l,r,o),null!=u&&(u.id=c,this.macros.addMacroSerialization(u))},w=Hr({}),b.defineBinaryOperator=function(e,t,n,r){var o,a;if(a=this,"number"!=typeof e)throw TypeError("Expected index to be a Number, got "+at(e));if(!H(t))throw TypeError("Expected operators to be an Array, got "+at(t));for(o=t.length;o--;)if(typeof t[o]!="string")throw TypeError("Expected "+("operators["+o+"]")+" to be a String, got "+at(t[o]));if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+at(n));if(!(r instanceof Wa))throw TypeError("Expected body to be a "+X(Wa)+", got "+at(r));return this.enterMacro(w,function(){return a.macroSyntax(e,"binaryOperator",t,n,r)})},v=Hr({}),b.defineAssignOperator=function(e,t,n,r){var o,a;if(a=this,"number"!=typeof e)throw TypeError("Expected index to be a Number, got "+at(e));if(!H(t))throw TypeError("Expected operators to be an Array, got "+at(t));for(o=t.length;o--;)if(typeof t[o]!="string")throw TypeError("Expected "+("operators["+o+"]")+" to be a String, got "+at(t[o]));if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+at(n));if(!(r instanceof Wa))throw TypeError("Expected body to be a "+X(Wa)+", got "+at(r));
return this.enterMacro(v,function(){return a.macroSyntax(e,"assignOperator",t,n,r)})},B=Hr({}),b.defineUnaryOperator=function(e,t,n,r){var o,a;if(a=this,"number"!=typeof e)throw TypeError("Expected index to be a Number, got "+at(e));if(!H(t))throw TypeError("Expected operators to be an Array, got "+at(t));for(o=t.length;o--;)if(typeof t[o]!="string")throw TypeError("Expected "+("operators["+o+"]")+" to be a String, got "+at(t[o]));if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+at(n));if(!(r instanceof Wa))throw TypeError("Expected body to be a "+X(Wa)+", got "+at(r));return this.enterMacro(B,function(){return a.macroSyntax(e,"unaryOperator",t,n,r)})},x=Hr({}),b.defineSyntax=function(e,t,n,r){var o;return o=this,this.enterMacro(x,function(){return o.macroSyntax(e,"defineSyntax",n,{name:t},r)})},b.deserializeMacros=function(e){var t,n,r,o,a,i,s;for(s in A)if(et.call(A,s))for(a=A[s],t=ot((o=et.call(e,s)?e[s]:void 0)!=null?o:[]),n=0,r=t.length;r>n;++n)i=t[n],a.call(this,i)},b.macroExpand1=function(e){var t,n,r;return t=this,e._macroExpanded!=null?e._macroExpanded:e instanceof ia?(yt.push(e.position),pt.push(e.inGenerator),ft.push(e.inEvilAst),n=this.expandingMacros,this.expandingMacros=!0,r=function(){try{return t.macros.getById(e.id)(e.data,t,e.startIndex||0,e.callLine,e.scopeId)}catch(r){throw r instanceof ca&&r.setLine(e.callLine),r}finally{yt.pop(),pt.pop(),ft.pop(),t.expandingMacros=n}}(),e._macroExpanded=r instanceof ia?this.macroExpand1(r):r instanceof Wa?r._macroExpanded=r:r):e._macroExpanded=e},b.macroExpandAllAsync=function(e,t){function n(e,t){var a,i,s;if(Q((new Date).getTime())-Q(o)>5)return qa(function(){return o=(new Date).getTime(),n(e,t)});if(e._macroExpandAlled!=null)return t(null,e._macroExpandAlled);if(e instanceof ia){try{s=r.macroExpand1(e)}catch(c){return t(c)}return s instanceof Wa?n(s,(i=!1,function(n,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=n?t(n):t(null,s._macroExpandAlled=s._macroExpanded=r._macroExpandAlled=r._macroExpanded=e._macroExpandAlled=e._macroExpanded=r)})):t(null,e._macroExpandAlled=e._macroExpanded=s)}return e.walkAsync(n,(a=!1,function(n,r){if(a)throw Error("Attempted to call function more than once");return a=!0,null!=n?t(n):t(null,r._macroExpandAlled=r._macroExpanded=e._macroExpandAlled=e._macroExpanded=r)}))}var r,o;return r=this,o=(new Date).getTime(),n(e,t)},b.macroExpandAll=function(e){function t(e){var r,o;return e._macroExpandAlled!=null?e._macroExpandAlled:e instanceof ia?(r=n.macroExpand1(e),r instanceof Wa?(o=t(r),r._macroExpandAlled=r._macroExpanded=o._macroExpandAlled=o._macroExpanded=e._macroExpandAlled=e._macroExpanded=o):e._macroExpandAlled=e._macroExpanded=r):(o=e.walk(t),o._macroExpandAlled=o._macroExpanded=e._macroExpandAlled=e._macroExpanded=o)}var n;return n=this,t(e)},e.addNodeFactory=function(t,n){e.prototype[t]=function(e){var t,r;return t=tt.call(arguments,1),r=this.getPosition(e),n.apply(void 0,[r.line,r.column,this.scope.id].concat(ot(t)))}},e}(),Wa.Access=xt=function(e){function t(r,o,a,i,s){var c;if(c=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected parent to be a "+X(e)+", got "+at(i));if(!(s instanceof e))throw TypeError("Expected child to be a "+X(e)+", got "+at(s));return c.line=r,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.parent=i,c.child=s,c}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="AccessNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Access",t.argNames=["parent","child"],Is.addNodeFactory("access",t),n.type=function(e){var t,n;return n=this,(t=this._type)==null?this._type=function(){var t,r,o,a,i;if(i=n.parent.type(e),a=i.isSubsetOf(rc.string),a||i.isSubsetOf(rc.arrayLike)){if(t=e.macroExpand1(n.child).reduce(e),t.isConst()){if(o=t.constValue(),"length"===o)return rc.number;if("number"==typeof o)return Q(o)>=0&&Q(o)%1===0?a?rc.string.union(rc.undefined):i.subtype?i.subtype.union(rc.undefined):rc.any:rc.undefined}else if(r=t.type(e),r.isSubsetOf(rc.number))return a?rc.string.union(rc.undefined):i.subtype?i.subtype.union(rc.undefined):rc.any}else if(i.isSubsetOf(rc.object)&&typeof i.value=="function"&&(t=e.macroExpand1(n.child).reduce(e),t.isConst()))return i.value(String(t.constValue()));return rc.any}():t},n._reduce=function(e){function n(r){var o;return r instanceof Bo&&r.name===On?(d.cacheable&&null==a&&(a=Js(r.line,r.column,r.scopeId,fo(),"ref",d.type(e))),t(r.line,r.column,r.scopeId,null!=a?a:d,kn(r.line,r.column,r.scopeId,"length"))):r instanceof t?(o=n(r.parent),o!==r.parent?t(r.line,r.column,r.scopeId,o,r.child).walk(n):r.walk(n)):r.walk(n)}var r,o,a,i,s,c,l,u,f,d,p,h,_,m;return d=this.parent.reduce(e).doWrap(e),a=null,i=n(this.child.reduce(e).doWrap(e)),null!=a?zs(this.line,this.column,this.scopeId,t(this.line,this.column,this.scopeId,Ot(this.line,this.column,this.scopeId,a,"=",d),i),[a.id]):d.isConst()&&i.isConst()&&(p=d.constValue(),s=i.constValue(),s in Object(p)&&(m=p[s],null===m||m instanceof RegExp||(r=typeof m)=="string"||"number"===r||"boolean"===r||"undefined"===r))?kn(this.line,this.column,this.scopeId,m):i instanceof ln&&i.func instanceof Bo&&i.func.name==="__range"?(h=(r=i.args)[0],c=r[1],_=r[2],f=r[3],u=!_.isConst()||_.constValue()!==1,u||(f.isConst()?f.constValue()&&(c=c.isConst()&&typeof c.constValue()=="number"?kn(c.line,c.column,c.scopeId,Q(c.constValue())+1||1/0):Yt(c.line,c.column,c.scopeId,Yt(c.line,c.column,c.scopeId,c,"+",kn(f.line,f.column,f.scopeId,1)),"||",kn(c.line,c.column,c.scopeId,1/0))):c=To(c.line,c.column,c.scopeId,f,Yt(c.line,c.column,c.scopeId,Yt(c.line,c.column,c.scopeId,c,"+",kn(f.line,f.column,f.scopeId,1)),"||",kn(c.line,c.column,c.scopeId,1/0)),c)),o=[d],l=!c.isConst()||(r=c.constValue())!==void 0&&r!==1/0,(!h.isConst()||h.constValue()!==0||l||u)&&o.push(h),(l||u)&&o.push(c),u&&(o.push(_),(!f.isConst()||f.constValue())&&o.push(f)),ln(this.line,this.column,this.scopeId,Bo(this.line,this.column,this.scopeId,u?"__sliceStep":"__slice"),o,!1,!u).reduce(e)):d!==this.parent||i!==this.child?t(this.line,this.column,this.scopeId,d,i):this},n._isNoop=function(e){var t;return(t=this.__isNoop)==null?this.__isNoop=this.parent.isNoop(e)&&this.child.isNoop(e):t},n.inspect=function(e){return F(e,"AccessNode",this.line,this.column,this.parent,this.child)},n.walk=function(e){var n,r;return r=e(this.parent),n=e(this.child),r!==this.parent||n!==this.child?t(this.line,this.column,this.scopeId,r,n):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.parent,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):e(o.child,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,i!==o.parent||r!==o.child?t(o.line,o.column,o.scopeId,i,r):o)}))}))},t}(Wa),Wa.AccessMulti=wt=function(e){function t(r,o,a,i,s){var c,l;if(l=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected parent to be a "+X(e)+", got "+at(i));if(!H(s))throw TypeError("Expected elements to be an Array, got "+at(s));for(c=s.length;c--;)if(!(s[c]instanceof e))throw TypeError("Expected "+("elements["+c+"]")+" to be a "+X(e)+", got "+at(s[c]));return l.line=r,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.parent=i,l.elements=s,l}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="AccessMultiNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="AccessMulti",t.argNames=["parent","elements"],Is.addNodeFactory("accessMulti",t),n.type=function(){return rc.array},n._reduce=function(e){var t,n,r,o,a,i;return t=this,n=this.parent.reduce(e),o=n,i=[],n.cacheable&&(a=Js(this.line,this.column,this.scopeId,fo(),"ref",n.type(e)),i.push(a.id),o=Ot(this.line,this.column,this.scopeId,a,"=",n.doWrap(e)),n=a),r=kt(this.line,this.column,this.scopeId,function(){var r,a,i,s,c;for(r=[],a=ot(t.elements),c=0,i=a.length;i>c;++c)s=a[c],r.push(xt(t.line,t.column,t.scopeId,0===c?o:n,s.reduce(e)));return r}()),i.length?zs(this.line,this.column,this.scopeId,r,i):r},n.inspect=function(e){return F(e,"AccessMultiNode",this.line,this.column,this.parent,this.elements)},n.walk=function(e){var n,r;return r=e(this.parent),n=M(this.elements,e),r!==this.parent||n!==this.elements?t(this.line,this.column,this.scopeId,r,n):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.parent,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):S(o.elements,e,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,i!==o.parent||r!==o.elements?t(o.line,o.column,o.scopeId,i,r):o)}))}))},t}(Wa),Wa.Args=Nt=function(e){function t(e,r,o){var a;if(a=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));return a.line=e,a.column=r,a.scopeId=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="ArgsNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Args",t.argNames=[],Is.addNodeFactory("args",t),n.type=function(){return rc.args},n.cacheable=!1,n._isNoop=function(){return!0},n.inspect=function(e){return F(e,"ArgsNode",this.line,this.column)},t}(Wa),Wa.Array=kt=function(e){function t(r,o,a,i){var s,c;if(c=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected elements to be an Array, got "+at(i));for(s=i.length;s--;)if(!(i[s]instanceof e))throw TypeError("Expected "+("elements["+s+"]")+" to be a "+X(e)+", got "+at(i[s]));return c.line=r,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.elements=i,c}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="ArrayNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Array",t.argNames=["elements"],Is.addNodeFactory("array",t),n.type=function(){return rc.array},n._reduce=function(e){var n;return n=M(this.elements,function(t){return t.reduce(e).doWrap(e)}),n!==this.elements?t(this.line,this.column,this.scopeId,n):this},n._isNoop=function(e){var t,n;return n=this,(t=this.__isNoop)==null?this.__isNoop=function(){var t,r,o,a;for(t=ot(n.elements),r=0,o=t.length;o>r;++r)if(a=t[r],!a.isNoop(e))return!1;return!0}():t},n.inspect=function(e){return F(e,"ArrayNode",this.line,this.column,this.elements)},n.walk=function(e){var n;return n=M(this.elements,e),n!==this.elements?t(this.line,this.column,this.scopeId,n):this},n.walkAsync=function(e,n){var r,o;return o=this,S(this.elements,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.elements?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Is.prototype.arrayParam=Is.prototype.array,Wa.Assign=Ot=function(e){function t(r,o,a,i,s,c){var l;if(l=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected left to be a "+X(e)+", got "+at(i));if("string"!=typeof s)throw TypeError("Expected op to be a String, got "+at(s));if(!(c instanceof e))throw TypeError("Expected right to be a "+X(e)+", got "+at(c));return l.line=r,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.left=i,l.op=s,l.right=c,l}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="AssignNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Assign",t.argNames=["left","op","right"],Is.addNodeFactory("assign",t),n.type=function(){var e;return e={"=":function(e,t){return t},"+=":function(e,t){return e.isSubsetOf(rc.numeric)&&t.isSubsetOf(rc.numeric)?rc.number:e.overlaps(rc.numeric)&&t.overlaps(rc.numeric)?rc.stringOrNumber:rc.string},"-=":rc.number,"*=":rc.number,"/=":rc.number,"%=":rc.number,"<<=":rc.number,">>=":rc.number,">>>=":rc.number,"&=":rc.number,"^=":rc.number,"|=":rc.number},function(t){var n,r;return r=this,(n=this._type)==null?this._type=function(){var n,o;return et.call(e,n=r.op)&&(o=e[n]),o?"function"==typeof o?o(r.left.type(t),r.right.type(t)):o:rc.any}():n}}(),n._reduce=function(e){var n,r;return n=this.left.reduce(e),r=this.right.reduce(e).doWrap(e),n!==this.left||r!==this.right?t(this.line,this.column,this.scopeId,n,this.op,r):this},n.inspect=function(e){return F(e,"AssignNode",this.line,this.column,this.left,this.op,this.right)},n.walk=function(e){var n,r;return n=e(this.left),r=e(this.right),n!==this.left||r!==this.right?t(this.line,this.column,this.scopeId,n,this.op,r):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.left,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):e(o.right,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,i!==o.left||r!==o.right?t(o.line,o.column,o.scopeId,i,o.op,r):o)}))}))},t}(Wa),Wa.Binary=Yt=function(e){function t(r,o,a,i,s,c){var l;if(l=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected left to be a "+X(e)+", got "+at(i));if("string"!=typeof s)throw TypeError("Expected op to be a String, got "+at(s));if(!(c instanceof e))throw TypeError("Expected right to be a "+X(e)+", got "+at(c));return l.line=r,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.left=i,l.op=s,l.right=c,l}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="BinaryNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Binary",t.argNames=["left","op","right"],Is.addNodeFactory("binary",t),n.type=function(){var e;return e={"*":rc.number,"/":rc.number,"%":rc.number,"+":function(e,t){return e.isSubsetOf(rc.numeric)&&t.isSubsetOf(rc.numeric)?rc.number:e.overlaps(rc.numeric)&&t.overlaps(rc.numeric)?rc.stringOrNumber:rc.string},"-":rc.number,"<<":rc.number,">>":rc.number,">>>":rc.number,"<":rc.boolean,"<=":rc.boolean,">":rc.boolean,">=":rc.boolean,"in":rc.boolean,"instanceof":rc.boolean,"==":rc.boolean,"!=":rc.boolean,"===":rc.boolean,"!==":rc.boolean,"&":rc.number,"^":rc.number,"|":rc.number,"&&":function(e,t){return e.intersect(rc.potentiallyFalsy).union(t)},"||":function(e,t){return e.intersect(rc.potentiallyTruthy).union(t)}},function(t){var n,r;return r=this,(n=this._type)==null?this._type=function(){var n,o;return et.call(e,n=r.op)&&(o=e[n]),o?"function"==typeof o?o(r.left.type(t),r.right.type(t)):o:rc.any}():n}}(),n._reduce=function(){function e(e,t){var n;return(n=e.constValue())!==n?Zt(this.line,this.column,this.scopeId,[t,e]):void 0}function n(e,t){var n;return(n=t.constValue())!==n?Zt(this.line,this.column,this.scopeId,[e,t]):void 0}var r,o,a,i;return r={"*":G(2,function(e,t){return e*t}),"/":G(2,function(e,t){return e/t}),"%":G(2,function(e,t){return e%t}),"+":function(){function e(e){var t;return null===e||(t=typeof e)=="number"||"boolean"===t||"undefined"===t}return function(t,n){return e(t)&&e(n)?t- -n:""+t+n}}(),"-":G(2,function(e,t){return e-t}),"<<":G(2,function(e,t){return e<<t}),">>":G(2,function(e,t){return e>>t}),">>>":G(2,function(e,t){return e>>>t}),"<":G(2,function(e,t){return t>e}),"<=":G(2,function(e,t){return t>=e}),">":G(2,function(e,t){return e>t}),">=":G(2,function(e,t){return e>=t}),"==":G(2,function(e,t){return e==t}),"!=":G(2,function(e,t){return e!=t}),"===":G(2,function(e,t){return e===t}),"!==":G(2,function(e,t){return e!==t}),"&":G(2,function(e,t){return e&t}),"^":G(2,function(e,t){return e^t}),"|":G(2,function(e,t){return e|t}),"&&":G(2,function(e,t){return e&&t}),"||":G(2,function(e,t){return e||t})},o={"*":function(e,t){var n;return e.constValue()===1?lc(this.line,this.column,this.scopeId,"+",t):e.constValue()===-1?lc(this.line,this.column,this.scopeId,"-",t):(n=e.constValue())!==n?Zt(this.line,this.column,this.scopeId,[t,e]):void 0},"/":e,"%":e,"+":function(e,n,r){var o;return e.constValue()===0&&n.type(r).isSubsetOf(rc.number)?lc(this.line,this.column,this.scopeId,"+",n):e.constValue()===""&&n.type(r).isSubsetOf(rc.string)?n:typeof e.constValue()=="string"&&n instanceof t&&n.op==="+"&&n.left.isConst()&&typeof n.left.constValue()=="string"?t(this.line,this.column,this.scopeId,kn(e.line,e.column,this.scopeId,rt(e.constValue())+rt(n.left.constValue())),"+",n.right):(o=e.constValue())!==o?Zt(this.line,this.column,this.scopeId,[n,e]):void 0},"-":function(e,t){var n;return e.constValue()===0?lc(this.line,this.column,this.scopeId,"-",t):(n=e.constValue())!==n?Zt(this.line,this.column,this.scopeId,[t,e]):void 0},"<<":e,">>":e,">>>":e,"&":e,"|":e,"^":e,"&&":function(e,t){return e.constValue()?t:e},"||":function(e,t){return e.constValue()?e:t}},i={"*":function(e,t){var n;return t.constValue()===1?lc(this.line,this.column,this.scopeId,"+",e):t.constValue()===-1?lc(this.line,this.column,this.scopeId,"-",e):(n=t.constValue())!==n?Zt(this.line,this.column,this.scopeId,[e,t]):void 0},"/":function(e,t){var n;return t.constValue()===1?lc(this.line,this.column,this.scopeId,"+",e):t.constValue()===-1?lc(this.line,this.column,this.scopeId,"-",e):(n=t.constValue())!==n?Zt(this.line,this.column,this.scopeId,[e,t]):void 0},"%":n,"+":function(e,n,r){var o;return n.constValue()===0&&e.type(r).isSubsetOf(rc.number)?lc(this.line,this.column,this.scopeId,"+",e):typeof n.constValue()=="number"&&Q(n.constValue())<0&&e.type(r).isSubsetOf(rc.number)?t(this.line,this.column,this.scopeId,e,"-",kn(n.line,n.column,this.scopeId,-Q(n.constValue()))):n.constValue()===""&&e.type(r).isSubsetOf(rc.string)?e:typeof n.constValue()=="string"&&e instanceof t&&e.op==="+"&&e.right.isConst()&&typeof e.right.constValue()=="string"?t(this.line,this.column,this.scopeId,e.left,"+",kn(e.right.line,e.right.column,this.scopeId,rt(e.right.constValue())+rt(n.constValue()))):(o=n.constValue())!==o?Zt(this.line,this.column,this.scopeId,[e,n]):void 0},"-":function(e,n,r){var o;return n.constValue()===0?lc(this.line,this.column,this.scopeId,"+",e):typeof n.constValue()=="number"&&Q(n.constValue())<0&&e.type(r).isSubsetOf(rc.number)?t(this.line,this.column,this.scopeId,e,"+",kn(n.line,n.column,this.scopeId,-Q(n.constValue()))):(o=n.constValue())!==o?Zt(this.line,this.column,this.scopeId,[e,n]):void 0},"<<":n,">>":n,">>>":n,"&":n,"|":n,"^":n},a={"&&":function(e,n,r){var o,a,i;if(i=e.type(r),i.isSubsetOf(rc.alwaysTruthy))return Zt(this.line,this.column,this.scopeId,[e,n]);if(i.isSubsetOf(rc.alwaysFalsy))return e;if(e instanceof t&&e.op==="&&"){if(e.right.isConst()?o=!!e.right.constValue():(a=e.right.type(r),o=a.isSubsetOf(rc.alwaysTruthy)?!0:a.isSubsetOf(rc.alwaysFalsy)?!1:null),o===!0)return t(this.line,this.column,this.scopeId,e.left,"&&",Zt(e.right.line,e.right.column,this.scopeId,[e.right,n]));if(o===!1)return e}},"||":function(e,n,r){var o,a,i,s,c;if(c=e.type(r),c.isSubsetOf(rc.alwaysTruthy))return e;if(c.isSubsetOf(rc.alwaysFalsy))return Zt(this.line,this.column,this.scopeId,[e,n]);if(e instanceof t&&e.op==="||"){if(e.right.isConst()?a=!!e.right.constValue():(s=e.right.type(r),a=s.isSubsetOf(rc.alwaysTruthy)?!0:s.isSubsetOf(rc.alwaysFalsy)?!1:null),a===!0)return e;if(a===!1)return t(this.line,this.column,this.scopeId,e.left,"||",Zt(e.right.line,e.right.column,this.scopeId,[e.right,n]))}else if(e instanceof To&&e.whenFalse.isConst()&&!e.whenFalse.constValue()){for(o=e.test,i=e.whenTrue;i instanceof To&&i.whenFalse.isConst()&&!i.whenFalse.constValue();)o=t(e.line,e.column,e.scopeId,o,"&&",i.test),i=i.whenTrue;return t(this.line,this.column,this.scopeId,t(e.line,e.column,e.scopeId,o,"&&",i),"||",n)}}},function(e){var n,s,c,l;if(s=this.left.reduce(e).doWrap(e),l=this.right.reduce(e).doWrap(e),c=this.op,s.isConst()){if(l.isConst()&&et.call(r,c))return kn(this.line,this.column,this.scopeId,r[c](s.constValue(),l.constValue()));if(et.call(o,c)&&(n=o[c].call(this,s,l,e))!=null)return n}return l.isConst()&&et.call(i,c)&&(n=i[c].call(this,s,l,e))!=null?n:et.call(a,c)&&(n=a[c].call(this,s,l,e))!=null?n:s!==this.left||l!==this.right?t(this.line,this.column,this.scopeId,s,c,l):this}}(),n._isNoop=function(e){var t;return(t=this.__isNoop)==null?this.__isNoop=this.left.isNoop(e)&&this.right.isNoop(e):t},n.inspect=function(e){return F(e,"BinaryNode",this.line,this.column,this.left,this.op,this.right)},n.walk=function(e){var n,r;return n=e(this.left),r=e(this.right),n!==this.left||r!==this.right?t(this.line,this.column,this.scopeId,n,this.op,r):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.left,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):e(o.right,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,i!==o.left||r!==o.right?t(o.line,o.column,o.scopeId,i,o.op,r):o)}))}))},t}(Wa),Wa.Block=Zt=function(e){function t(r,o,a,i,s){var c,l;if(l=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected nodes to be an Array, got "+at(i));for(c=i.length;c--;)if(!(i[c]instanceof e))throw TypeError("Expected "+("nodes["+c+"]")+" to be a "+X(e)+", got "+at(i[c]));if(null==s)s=null;else if(!(s instanceof Bo||s instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(s));return l.line=r,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.nodes=i,l.label=s,l}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="BlockNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Block",t.argNames=["nodes","label"],Is.addNodeFactory("block",t),n.type=function(e){var t;return t=this.nodes,t.length===0?rc.undefined:t[Q(t.length)-1].type(e)},n.withLabel=function(e,n){var r,o;if(o=this,null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));if(this.label==null){if(this.nodes.length===1)return this.nodes[0].withLabel(e,n);if(Q(this.nodes.length)>1&&(r=this.nodes)[Q(r.length)-1]instanceof Jr&&function(){var e,t,n,r,a;for(e=ot(o.nodes),n=0,r=e.length,t=-1,t+=r,t>r&&(t=r);t>n;++n)if(a=e[n],!(a instanceof Ot||a instanceof yc))return!1;return!0}())return t(this.line,this.column,this.scopeId,tt.call(this.nodes,0,-1).concat([(r=this.nodes)[Q(r.length)-1].withLabel(e,n)]))}return t(this.line,this.column,this.scopeId,this.nodes,e)},n._reduce=function(e){var n,r,o,a,i,s,c,l;for(o=!1,r=[],n=ot(this.nodes),a=0,s=n.length;s>a;++a)if(c=n[a],l=c.reduce(e),l instanceof t&&l.label==null)r.push.apply(r,ot(l.nodes)),o=!0;else if(l instanceof Za)o=!0;else{if(l instanceof cn||l instanceof Sn||l instanceof Gs||l instanceof Zi){r.push(l),(l!==c||s-1>a)&&(o=!0);break}r.push(l),l!==c&&(o=!0)}return i=this.label!=null?this.label.reduce(e):this.label,r.length===0?Za(this.line,this.column,this.scopeId):null==i&&r.length===1?r[0]:o||i!==this.label?t(this.line,this.column,this.scopeId,r,i):this},n.isStatement=function(){var e;return e=this,function(){var t,n,r;for(t=ot(e.nodes),n=t.length;n--;)if(r=t[n],r.isStatement())return!0;return!1}()},n._isNoop=function(e){var t,n;return n=this,(t=this.__isNoop)==null?this.__isNoop=function(){var t,r,o;for(t=ot(n.nodes),r=t.length;r--;)if(o=t[r],!o.isNoop(e))return!1;return!0}():t},n.inspect=function(e){return F(e,"BlockNode",this.line,this.column,this.nodes,this.label)},n.walk=function(n){var r,o;return o=M(this.nodes,n),r=this.label instanceof e?n(this.label):this.label,o!==this.nodes||r!==this.label?t(this.line,this.column,this.scopeId,o,r):this},n.walkAsync=function(n,r){var o,a;return a=this,S(this.nodes,n,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):(c=a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},c(function(e){return r(null,s!==a.nodes||e!==a.label?t(a.line,a.column,a.scopeId,s,e):a)}))}))},t}(Wa),Wa.Break=cn=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if(null==a)a=null;else if(!(a instanceof Bo||a instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(a));return i.line=e,i.column=r,i.scopeId=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.label=a,i}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="BreakNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Break",t.argNames=["label"],Is.addNodeFactory("break",t),n.type=function(){return rc.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,e)},n.inspect=function(e){return F(e,"BreakNode",this.line,this.column,this.label)},n.walk=function(n){var r;return r=this.label instanceof e?n(this.label):this.label,r!==this.label?t(this.line,this.column,this.scopeId,r):this},n.walkAsync=function(n,r){var o,a;return a=this,o=this.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},o(function(e){return r(null,e!==a.label?t(a.line,a.column,a.scopeId,e):a)})},t}(Wa),Wa.Call=ln=function(e){function t(n,o,a,i,s,c,l){var u,f;if(f=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected func to be a "+X(e)+", got "+at(i));if(!H(s))throw TypeError("Expected args to be an Array, got "+at(s));for(u=s.length;u--;)if(!(s[u]instanceof e))throw TypeError("Expected "+("args["+u+"]")+" to be a "+X(e)+", got "+at(s[u]));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected isNew to be a Boolean, got "+at(c));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected isApply to be a Boolean, got "+at(l));return f.line=n,f.column=o,f.scopeId=a,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.func=i,f.args=s,f.isNew=c,f.isApply=l,f}var r,o;return o=e.prototype,r=t.prototype=W(o),r.constructor=t,t.displayName="CallNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Call",t.argNames=["func","args","isNew","isApply"],Is.addNodeFactory("call",t),r.type=function(){var e,t,n;return e={Object:rc.object,String:rc.string,Number:rc.number,Boolean:rc.boolean,Function:rc["function"],Array:rc.array,Date:rc.string,RegExp:rc.regexp,Error:rc.error,RangeError:rc.error,ReferenceError:rc.error,SyntaxError:rc.error,TypeError:rc.error,URIError:rc.error,escape:rc.string,unescape:rc.string,parseInt:rc.number,parseFloat:rc.number,isNaN:rc.boolean,isFinite:rc.boolean,decodeURI:rc.string,decodeURIComponent:rc.string,encodeURI:rc.string,encodeURIComponent:rc.string},n={Object:{getPrototypeOf:rc.object,getOwnPropertyDescriptor:rc.object,getOwnPropertyNames:rc.string.array(),create:rc.object,defineProperty:rc.object,defineProperties:rc.object,seal:rc.object,freeze:rc.object,preventExtensions:rc.object,isSealed:rc.boolean,isFrozen:rc.boolean,isExtensible:rc.boolean,keys:rc.string.array()},String:{fromCharCode:rc.string},Number:{isFinite:rc.boolean,isNaN:rc.boolean},Array:{isArray:rc.boolean},Math:{abs:rc.number,acos:rc.number,asin:rc.number,atan:rc.number,atan2:rc.number,ceil:rc.number,cos:rc.number,exp:rc.number,floor:rc.number,log:rc.number,max:rc.number,min:rc.number,pow:rc.number,random:rc.number,round:rc.number,sin:rc.number,sqrt:rc.number,tan:rc.number},JSON:{stringify:rc.string.union(rc.undefined),parse:rc.string.union(rc.number).union(rc.boolean).union(rc["null"]).union(rc.array).union(rc.object)},Date:{UTC:rc.number,now:rc.number}},t={String:{toString:rc.string,valueOf:rc.string,charAt:rc.string,charCodeAt:rc.number,concat:rc.string,indexOf:rc.number,lastIndexOf:rc.number,localeCompare:rc.number,match:rc.array.union(rc["null"]),replace:rc.string,search:rc.number,slice:rc.string,split:rc.string.array(),substring:rc.string,toLowerCase:rc.string,toLocaleLowerCase:rc.string,toUpperCase:rc.string,toLocaleUpperCase:rc.string,trim:rc.string},Boolean:{toString:rc.string,valueOf:rc.boolean},Number:{toString:rc.string,valueOf:rc.number,toLocaleString:rc.string,toFixed:rc.string,toExponential:rc.string,toPrecision:rc.string},Date:{toString:rc.string,toDateString:rc.string,toTimeString:rc.string,toLocaleString:rc.string,toLocaleDateString:rc.string,toLocaleTimeString:rc.string,valueOf:rc.number,getTime:rc.number,getFullYear:rc.number,getUTCFullYear:rc.number,getMonth:rc.number,getUTCMonth:rc.number,getDate:rc.number,getUTCDate:rc.number,getDay:rc.number,getUTCDay:rc.number,getHours:rc.number,getUTCHours:rc.number,getMinutes:rc.number,getUTCMinutes:rc.number,getSeconds:rc.number,getUTCSeconds:rc.number,getMilliseconds:rc.number,getUTCMilliseconds:rc.number,getTimezoneOffset:rc.number,setTime:rc.number,setMilliseconds:rc.number,setUTCMilliseconds:rc.number,setSeconds:rc.number,setUTCSeconds:rc.number,setMinutes:rc.number,setUTCMinutes:rc.number,setHours:rc.number,setUTCHours:rc.number,setDate:rc.number,setUTCDate:rc.number,setMonth:rc.number,setUTCMonth:rc.number,setFullYear:rc.number,setUTCFullYear:rc.number,toUTCString:rc.string,toISOString:rc.string,toJSON:rc.string},RegExp:{exec:rc.array.union(rc["null"]),test:rc.boolean,toString:rc.string},Error:{toString:rc.string}},function(t){var r,o;return o=this,(r=this._type)==null?this._type=function(){var r,a,i,s,c,l,u,f,d,p;if(l=o.func,u=l.type(t),u.isSubsetOf(rc["function"]))return u.args[0];if(l instanceof Bo){if(f=l.name,et.call(e,f))return e[f];if((null!=t?t.macros.hasHelper(f):void 0)&&(u=t.macros.helperType(f),u.isSubsetOf(rc["function"])))return u.args[0]}else if(l instanceof xt&&(d=l.parent,c=l.child,c instanceof kn))if((r=c.value)==="call"||"apply"===r){if(p=d.type(t),p.isSubsetOf(rc["function"]))return p.args[0]
}else if(d instanceof Bo&&et.call(n,r=d.name)&&et.call(a=n[r],i=c.value)&&(s=a[i])!=null)return s;return rc.any}():r}}(),r._reduce=function(){var e,r;return e={escape:!0,unescape:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0,String:!0,Boolean:!0,Number:!0,RegExp:!0},r={String:{fromCharCode:!0},Number:{isFinite:!0,isNaN:!0},Math:{abs:!0,acos:!0,asin:!0,atan:!0,atan2:!0,ceil:!0,cos:!0,exp:!0,floor:!0,log:!0,max:!0,min:!0,pow:!0,round:!0,sin:!0,sqrt:!0,tan:!0},JSON:{parse:!0,stringify:!0}},function(o){var a,i,s,c,l,u,f,d,p,h,_,m,y,g,b,v;if(y=this.func.reduce(o).doWrap(o),p=M(this.args,function(e){return e.reduce(o).doWrap(o)}),!this.isNew&&!this.isApply){for(_=[],f=!0,a=ot(p),i=0,s=a.length;s>i;++i){if(d=a[i],!d.isConst()){f=!1;break}_.push(d.constValue())}if(f)if(y instanceof Bo){if(et.call(e,y.name))try{return v=n[y.name].apply(void 0,ot(_)),kn(this.line,this.column,this.scopeId,v)}catch(w){}}else if(y instanceof xt&&y.child.isConst())if(g=y.parent,h=y.child,m=h.constValue(),g.isConst()){if(b=g.constValue(),typeof b[m]=="function")try{return v=b[m].apply(b,ot(_)),kn(this.line,this.column,this.scopeId,v)}catch(w){}}else if(g instanceof Bo&&(et.call(r,c=g.name)&&et.call(l=r[c],u=h.value)?l[u]:void 0))try{return v=(c=n[g.name])[m].apply(c,ot(_)),kn(this.line,this.column,this.scopeId,v)}catch(w){}}return y!==this.func||p!==this.args?t(this.line,this.column,this.scopeId,y,p,this.isNew,this.isApply):this}}(),r.inspect=function(e){return F(e,"CallNode",this.line,this.column,this.func,this.args,this.isNew,this.isApply)},r.walk=function(e){var n,r;return r=e(this.func),n=M(this.args,e),r!==this.func||n!==this.args?t(this.line,this.column,this.scopeId,r,n,this.isNew,this.isApply):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.func,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):S(o.args,e,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,i!==o.func||r!==o.args?t(o.line,o.column,o.scopeId,i,r,o.isNew,o.isApply):o)}))}))},t}(Wa),Wa.Comment=Nn=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+at(a));return i.line=e,i.column=r,i.scopeId=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.text=a,i}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="CommentNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Comment",t.argNames=["text"],Is.addNodeFactory("comment",t),n.type=function(){return rc.undefined},n.cacheable=!1,n.isCount=function(){return!0},n.constValue=function(){},n._isNoop=function(){return!0},n.inspect=function(e){return F(e,"CommentNode",this.line,this.column,this.text)},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(Wa),Wa.Const=kn=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if(null!=a&&"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a)throw TypeError("Expected value to be one of Number or String or Boolean or undefined or null, got "+at(a));return i.line=e,i.column=r,i.scopeId=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.value=a,i}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="ConstNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Const",t.argNames=["value"],Is.addNodeFactory("const",t),n.type=function(){var e;if(e=this.value,null===e)return rc["null"];switch(typeof e){case"number":return rc.number;case"string":return rc.string;case"boolean":return rc.boolean;case"undefined":return rc.undefined;default:throw Error("Unknown type for "+String(e))}},n.cacheable=!1,n.isConst=function(){return!0},n.constValue=function(){return this.value},n._isNoop=function(){return!0},n.inspect=function(e){return"ConstNode("+rt(Wo(this.value,null,null!=e?Q(e)-1:null))+")"},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(Wa),Wa.Continue=Sn=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if(null==a)a=null;else if(!(a instanceof Bo||a instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(a));return i.line=e,i.column=r,i.scopeId=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.label=a,i}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="ContinueNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Continue",t.argNames=["label"],Is.addNodeFactory("continue",t),n.type=function(){return rc.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,e)},n.inspect=function(e){return F(e,"ContinueNode",this.line,this.column,this.label)},n.walk=function(n){var r;return r=this.label instanceof e?n(this.label):this.label,r!==this.label?t(this.line,this.column,this.scopeId,r):this},n.walkAsync=function(n,r){var o,a;return a=this,o=this.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},o(function(e){return r(null,e!==a.label?t(a.line,a.column,a.scopeId,e):a)})},t}(Wa),Wa.Debugger=Un=function(e){function t(e,r,o){var a;if(a=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));return a.line=e,a.column=r,a.scopeId=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="DebuggerNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Debugger",t.argNames=[],Is.addNodeFactory("debugger",t),n.type=function(){return rc.undefined},n.isStatement=function(){return!0},n.inspect=function(e){return F(e,"DebuggerNode",this.line,this.column)},t}(Wa),Wa.Def=Qn=function(e){function t(r,o,a,i,s){var c;if(c=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected left to be a "+X(e)+", got "+at(i));if(null==s)s=void 0;else if(!(s instanceof e))throw TypeError("Expected right to be one of "+(X(e)+" or undefined")+", got "+at(s));return c.line=r,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.left=i,c.right=s,c}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="DefNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Def",t.argNames=["left","right"],Is.addNodeFactory("def",t),n.type=function(e){return this.right!=null?this.right.type(e):rc.any},n.inspect=function(e){return F(e,"DefNode",this.line,this.column,this.left,this.right)},n.walk=function(n){var r,o;return r=n(this.left),o=this.right instanceof e?n(this.right):this.right,r!==this.left||o!==this.right?t(this.line,this.column,this.scopeId,r,o):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.left,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):(c=a.right instanceof e?function(e){var t;return n(a.right,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.right)},c(function(e){return r(null,s!==a.left||e!==a.right?t(a.line,a.column,a.scopeId,s,e):a)}))}))},t}(Wa),Wa.EmbedWrite=Tr=function(e){function t(r,o,a,i,s){var c;if(c=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected text to be a "+X(e)+", got "+at(i));if(null==s)s=!1;else if("boolean"!=typeof s)throw TypeError("Expected escape to be a Boolean, got "+at(s));return c.line=r,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.text=i,c.escape=s,c}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="EmbedWriteNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="EmbedWrite",t.argNames=["text","escape"],Is.addNodeFactory("embedWrite",t),n.inspect=function(e){return F(e,"EmbedWriteNode",this.line,this.column,this.text,this.escape)},n.walk=function(e){var n;return n=e(this.text),n!==this.text?t(this.line,this.column,this.scopeId,n,this.escape):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.text,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.text?t(o.line,o.column,o.scopeId,a,o.escape):o)}))},t}(Wa),Wa.Eval=Rr=function(e){function t(r,o,a,i){var s;if(s=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected code to be a "+X(e)+", got "+at(i));return s.line=r,s.column=o,s.scopeId=a,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.code=i,s}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="EvalNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Eval",t.argNames=["code"],Is.addNodeFactory("eval",t),n.inspect=function(e){return F(e,"EvalNode",this.line,this.column,this.code)},n.walk=function(e){var n;return n=e(this.code),n!==this.code?t(this.line,this.column,this.scopeId,n):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.code,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.code?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.For=zr=function(e){function t(r,o,a,i,s,c,l,u){var f;if(f=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(null==i)i=Za(0,0,a);else if(!(i instanceof e))throw TypeError("Expected init to be a "+X(e)+", got "+at(i));if(null==s)s=kn(0,0,a,!0);else if(!(s instanceof e))throw TypeError("Expected test to be a "+X(e)+", got "+at(s));if(null==c)c=Za(0,0,a);else if(!(c instanceof e))throw TypeError("Expected step to be a "+X(e)+", got "+at(c));if(!(l instanceof e))throw TypeError("Expected body to be a "+X(e)+", got "+at(l));if(null==u)u=null;else if(!(u instanceof Bo||u instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(u));return f.line=r,f.column=o,f.scopeId=a,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.init=i,f.test=s,f.step=c,f.body=l,f.label=u,f}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="ForNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="For",t.argNames=["init","test","step","body","label"],Is.addNodeFactory("for",t),n.type=function(){return rc.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.init,this.test,this.step,this.body,e)},n.inspect=function(e){return F(e,"ForNode",this.line,this.column,this.init,this.test,this.step,this.body,this.label)},n.walk=function(n){var r,o,a,i,s;return o=n(this.init),s=n(this.test),i=n(this.step),r=n(this.body),a=this.label instanceof e?n(this.label):this.label,o!==this.init||s!==this.test||i!==this.step||r!==this.body||a!==this.label?t(this.line,this.column,this.scopeId,o,s,i,r,a):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.init,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):n(a.test,(c=!1,function(o,i){var l;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):n(a.step,(l=!1,function(o,c){var u;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):n(a.body,(u=!1,function(o,l){var f;if(u)throw Error("Attempted to call function more than once");return u=!0,null!=o?r(o):(f=a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},f(function(e){return r(null,s!==a.init||i!==a.test||c!==a.step||l!==a.body||e!==a.label?t(a.line,a.column,a.scopeId,s,i,c,l,e):a)}))}))}))}))}))},t}(Wa),Wa.ForIn=Jr=function(e){function t(r,o,a,i,s,c,l){var u;if(u=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected key to be a "+X(e)+", got "+at(i));if(!(s instanceof e))throw TypeError("Expected object to be a "+X(e)+", got "+at(s));if(!(c instanceof e))throw TypeError("Expected body to be a "+X(e)+", got "+at(c));if(null==l)l=null;else if(!(l instanceof Bo||l instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(l));return u.line=r,u.column=o,u.scopeId=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.key=i,u.object=s,u.body=c,u.label=l,u}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="ForInNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="ForIn",t.argNames=["key","object","body","label"],Is.addNodeFactory("forIn",t),n.type=function(){return rc.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.key,this.object,this.body,e)},n.inspect=function(e){return F(e,"ForInNode",this.line,this.column,this.key,this.object,this.body,this.label)},n.walk=function(n){var r,o,a,i;return o=n(this.key),i=n(this.object),r=n(this.body),a=this.label instanceof e?n(this.label):this.label,o!==this.key||i!==this.object||r!==this.body||a!==this.label?t(this.line,this.column,this.scopeId,o,i,r,a):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.key,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):n(a.object,(c=!1,function(o,i){var l;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):n(a.body,(l=!1,function(o,c){var u;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):(u=a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},u(function(e){return r(null,s!==a.key||i!==a.object||c!==a.body||e!==a.label?t(a.line,a.column,a.scopeId,s,i,c,e):a)}))}))}))}))},t}(Wa),Wa.Function=eo=function(e){function t(r,o,a,i,s,c,l,u,f,d,p){var h,_,m;if(m=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected params to be an Array, got "+at(i));for(h=i.length;h--;)if(!(i[h]instanceof e))throw TypeError("Expected "+("params["+h+"]")+" to be a "+X(e)+", got "+at(i[h]));if(!(s instanceof e))throw TypeError("Expected body to be a "+X(e)+", got "+at(s));if(null==c)c=!0;else if("boolean"!=typeof c)throw TypeError("Expected autoReturn to be a Boolean, got "+at(c));if(null==l)l=!1;else if(!(l instanceof e)&&"boolean"!=typeof l)throw TypeError("Expected bound to be one of "+(X(e)+" or Boolean")+", got "+at(l));if(null==u)u=!1;else if("boolean"!=typeof u)throw TypeError("Expected curry to be a Boolean, got "+at(u));if(null==f)f=void 0;else if(!(f instanceof e))throw TypeError("Expected asType to be one of "+(X(e)+" or undefined")+", got "+at(f));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected generator to be a Boolean, got "+at(d));if(null==p)p=[];else{if(!H(p))throw TypeError("Expected generic to be an Array, got "+at(p));for(_=p.length;_--;)if(!(p[_]instanceof Bo))throw TypeError("Expected "+("generic["+_+"]")+" to be a "+X(Bo)+", got "+at(p[_]))}return m.line=r,m.column=o,m.scopeId=a,m._reduced=void 0,m._macroExpanded=void 0,m._macroExpandAlled=void 0,m.params=i,m.body=s,m.autoReturn=c,m.bound=l,m.curry=u,m.asType=f,m.generator=d,m.generic=p,m}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="FunctionNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Function",t.argNames=["params","body","autoReturn","bound","curry","asType","generator","generic"],Is.addNodeFactory("function",t),n.type=function(e){var n,r;return r=this,(n=this._type)==null?this._type=function(){var n,o;return r.asType!=null?Ga(r.asType)["function"]():(n=r.autoReturn?r.body.type(e):rc.undefined,o=function(r){var a;return r instanceof Zi?(n=n.union(r.type(e)),r):r instanceof t?r:r instanceof ia?(((a=r.data.macroName)==="return"||"return?"===a)&&(n=r.data.macroData.node?n.union(r.data.macroData.node.type(e)):n.union(rc.undefined)),r.walk(o)):r.walk(o)},o(r.body),n["function"]())}():n},n._isNoop=function(){return!0},n.inspect=function(e){return F(e,"FunctionNode",this.line,this.column,this.params,this.body,this.autoReturn,this.bound,this.curry,this.asType,this.generator,this.generic)},n.walk=function(n){var r,o,a,i;return i=M(this.params,n),o=n(this.body),a=this.bound instanceof e?n(this.bound):this.bound,r=this.asType instanceof e?n(this.asType):this.asType,i!==this.params||o!==this.body||a!==this.bound||r!==this.asType?t(this.line,this.column,this.scopeId,i,o,this.autoReturn,a,this.curry,r,this.generator,this.generic):this},n.walkAsync=function(n,r){var o,a;return a=this,S(this.params,n,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):n(a.body,(c=!1,function(o,i){var l;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):(l=a.bound instanceof e?function(e){var t;return n(a.bound,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.bound)},l(function(o){var c;return c=a.asType instanceof e?function(e){var t;return n(a.asType,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.asType)},c(function(e){return r(null,s!==a.params||i!==a.body||o!==a.bound||e!==a.asType?t(a.line,a.column,a.scopeId,s,i,a.autoReturn,o,a.curry,e,a.generator,a.generic):a)})}))}))}))},t}(Wa),Wa.Ident=Bo=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+at(a));return i.line=e,i.column=r,i.scopeId=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.name=a,i}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="IdentNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Ident",t.argNames=["name"],Is.addNodeFactory("ident",t),n.cacheable=!1,n.type=function(e){return this.name===On?rc.number:e?e.scope.type(this):rc.any},n._isNoop=function(){return!0},n.inspect=function(e){return F(e,"IdentNode",this.line,this.column,this.name)},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(Wa),Wa.If=To=function(e){function t(r,o,a,i,s,c,l){var u;if(u=this instanceof t?this:W(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected test to be a "+X(e)+", got "+at(i));if(!(s instanceof e))throw TypeError("Expected whenTrue to be a "+X(e)+", got "+at(s));if(null==c)c=Za(0,0,a);else if(!(c instanceof e))throw TypeError("Expected whenFalse to be a "+X(e)+", got "+at(c));if(null==l)l=null;else if(!(l instanceof Bo||l instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(l));return u.line=r,u.column=o,u.scopeId=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.test=i,u.whenTrue=s,u.whenFalse=c,u.label=l,u}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="IfNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="If",t.argNames=["test","whenTrue","whenFalse","label"],Is.addNodeFactory("if",t),n.type=function(e){var t;return(t=this._type)==null?this._type=this.whenTrue.type(e).union(this.whenFalse.type(e)):t},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.test,this.whenTrue,this.whenFalse,e)},n._reduce=function(e){var n,r,o,a,i;return r=this.test.reduce(e),i=this.whenTrue.reduce(e),a=this.whenFalse.reduce(e),n=this.label!=null?this.label.reduce(e):this.label,r.isConst()?Zt(this.line,this.column,this.scopeId,[r.constValue()?i:a],n).reduce(e):(o=r.type(e),o.isSubsetOf(rc.alwaysTruthy)?Zt(this.line,this.column,this.scopeId,[r,i],n).reduce(e):o.isSubsetOf(rc.alwaysFalsy)?Zt(this.line,this.column,this.scopeId,[r,a],n).reduce(e):r!==this.test||i!==this.whenTrue||a!==this.whenFalse||n!==this.label?t(this.line,this.column,this.scopeId,r,i,a,n):this)},n.isStatement=function(){var e;return(e=this._isStatement)==null?this._isStatement=this.whenTrue.isStatement()||this.whenFalse.isStatement():e},n.doWrap=function(e){var n,r;return r=this.whenTrue.doWrap(e),n=this.whenFalse.doWrap(e),r!==this.whenTrue||n!==this.whenFalse?t(this.line,this.column,this.scopeId,this.test,r,n,this.label):this},n._isNoop=function(e){var t;return(t=this.__isNoop)==null?this.__isNoop=this.test.isNoop(e)&&this.whenTrue.isNoop(e)&&this.whenFalse.isNoop(e):t},n.inspect=function(e){return F(e,"IfNode",this.line,this.column,this.test,this.whenTrue,this.whenFalse,this.label)},n.walk=function(n){var r,o,a,i;return o=n(this.test),i=n(this.whenTrue),a=n(this.whenFalse),r=this.label instanceof e?n(this.label):this.label,o!==this.test||i!==this.whenTrue||a!==this.whenFalse||r!==this.label?t(this.line,this.column,this.scopeId,o,i,a,r):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.test,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):n(a.whenTrue,(c=!1,function(o,i){var l;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):n(a.whenFalse,(l=!1,function(o,c){var u;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):(u=a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},u(function(e){return r(null,s!==a.test||i!==a.whenTrue||c!==a.whenFalse||e!==a.label?t(a.line,a.column,a.scopeId,s,i,c,e):a)}))}))}))}))},t}(Wa),Wa.MacroAccess=ia=function(e){function t(e,r,o,a,i,s,c,l,u){var f;if(f=this instanceof t?this:W(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+at(r));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected id to be a Number, got "+at(a));if("number"!=typeof i)throw TypeError("Expected callLine to be a Number, got "+at(i));if("object"!=typeof s||null===s)throw TypeError("Expected data to be an Object, got "+at(s));if("string"!=typeof c)throw TypeError("Expected position to be a String, got "+at(c));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected inGenerator to be a Boolean, got "+at(l));if(null==u)u=!1;else if("boolean"!=typeof u)throw TypeError("Expected inEvilAst to be a Boolean, got "+at(u));return f.line=e,f.column=r,f.scopeId=o,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.id=a,f.callLine=i,f.data=s,f.position=c,f.inGenerator=l,f.inEvilAst=u,f}var n,r;return r=e.prototype,n=t.prototype=W(r),n.constructor=t,t.displayName="MacroAccessNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="MacroAccess",t.argNames=["id","callLine","data","position","inGenerator","inEvilAst"],Is.addNodeFactory("macroAccess",t),n.type=function(e){var t,n;if(n=this,!(e instanceof Is))throw TypeError("Expected o to be a "+X(Is)+", got "+at(e));return(t=this._type)==null?this._type=function(){var t;return t=e.macros.getTypeById(n.id),null!=t?"string"==typeof t?n.data[t].type(e):t:e.macroExpand1(n).type(e)}():t},n.withLabel=function(e,t){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t.macroExpand1(this).withLabel(e,t)},n.walk=function(){function n(e,t){var n,o,a,i,s;i={},n=!1;for(o in e)et.call(e,o)&&(s=e[o],a=r(s,t),a!==s&&(n=!0),i[o]=a);return n?i:e}function r(t,o){return t instanceof e?o(t):H(t)?M(t,function(e){return r(e,o)}):"object"==typeof t&&null!==t?n(t,o):t}return function(e){var n;return n=r(this.data,e),n!==this.data?t(this.line,this.column,this.scopeId,this.id,this.callLine,n,this.position,this.inGenerator,this.inEvilAst):this}}(),n.walkAsync=function(){function n(e,t,n){var o,a,i;return a=!1,i={},o=K(e),U(1,o.length,!1,function(n,s){var c,l,u;return l=o[n],u=e[l],r(item,t,(c=!1,function(e,t){if(c)throw Error("Attempted to call function more than once");return c=!0,null!=e?s(e):(item!==t&&(a=!0),i[l]=t,s(null))}))},function(t){return"undefined"!=typeof t&&null!==t?n(t):n(null,a?i:e)})}function r(t,o,a){return t instanceof e?o(t,a):H(t)?S(t,function(e,t){return r(e,o,t)},a):"object"==typeof t&&null!==t?n(t,o,a):a(null,t)}return function(e,n){var o,a;return a=this,r(this.data,e,(o=!1,function(e,r){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=e?n(e):n(null,r!==a.data?t(a.line,a.column,a.scopeId,a.id,a.callLine,r,a.position,a.inGenerator,a.inEvilAst):a)}))}}(),n._isNoop=function(e){return e.macroExpand1(this).isNoop(e)},n.inspect=function(e){return F(e,"MacroAccessNode",this.line,this.column,this.id,this.callLine,this.data,this.position,this.inGenerator,this.inEvilAst)},t}(Wa),Wa.Nothing=Za=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:W(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));return a.line=e,a.column=n,a.scopeId=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="NothingNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Nothing",t.argNames=[],Is.addNodeFactory("nothing",t),r.type=function(){return rc.undefined},r.cacheable=!1,r.isConst=function(){return!0},r.constValue=function(){},r._isNoop=function(){return!0},r.inspect=function(e){return F(e,"NothingNode",this.line,this.column)},t}(Wa),Wa.Object=ci=function(e){function t(n,o,a,i,s){var c,l;if(l=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected pairs to be an Array, got "+at(i));for(c=i.length;c--;){if(typeof i[c]!="object"||i[c]===null)throw TypeError("Expected "+("pairs["+c+"]")+" to be an Object, got "+at(i[c]));if(!(i[c].key instanceof e))throw TypeError("Expected "+("pairs["+c+"].key")+" to be a "+X(e)+", got "+at(i[c].key));if(!(i[c].value instanceof e))throw TypeError("Expected "+("pairs["+c+"].value")+" to be a "+X(e)+", got "+at(i[c].value));if(i[c].property==null)i[c].property=void 0;else if(typeof i[c].property!="string")throw TypeError("Expected "+("pairs["+c+"].property")+" to be one of String or undefined, got "+at(i[c].property))}if(null==s)s=void 0;else if(!(s instanceof e))throw TypeError("Expected prototype to be one of "+(X(e)+" or undefined")+", got "+at(s));return l.line=n,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.pairs=i,l.prototype=s,l}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="ObjectNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Object",t.argNames=["pairs","prototype"],Is.addNodeFactory("object",t),r.type=function(e){var t,n;return n=this,(t=this._type)==null?this._type=function(){var t,r,o,a,i,s,c;for(i={},t=ot(n.pairs),r=0,o=t.length;o>r;++r)s=(a=t[r]).key,c=a.value,s.isConst()&&(i[s.constValue()]=c.type(e));return rc.makeObject(i)}():t},r.walk=function(){function e(e,t){var n,r;return n=t(e.key),r=t(e.value),n!==e.key||r!==e.value?{key:n,value:r,property:e.property}:e}return function(n){var r,o;return r=M(this.pairs,e,n),o=this.prototype!=null?n(this.prototype):this.prototype,r!==this.pairs||o!==this.prototype?t(this.line,this.column,this.scopeId,r,o):this}}(),r.walkAsync=function(){function e(e,t,n){var r;return t(e.key,(r=!1,function(o,a){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=o?n(o):t(e.value,(i=!1,function(t,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=t?n(t):n(null,a!==e.key||r!==e.value?{key:a,value:r,property:e.property}:e)
}))}))}return function(n,r){var o,a;return a=this,S(this.pairs,e,n,(o=!1,function(e,i){var s;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=e?r(e):(s=a.prototype!=null?function(e){var t;return n(a.prototype,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.prototype)},s(function(e){return r(null,i!==a.pairs||e!==a.prototype?t(a.line,a.column,a.scopeId,i,e):a)}))}))}}(),r._reduce=function(){function e(e,t){var n,r;return n=e.key.reduce(t),r=e.value.reduce(t).doWrap(t),n!==e.key||r!==e.value?{key:n,value:r,property:e.property}:e}return function(n){var r,o;return r=M(this.pairs,e,n),o=this.prototype!=null?this.prototype.reduce(n):this.prototype,r!==this.pairs||o!==this.prototype?t(this.line,this.column,this.scopeId,r,o):this}}(),r._isNoop=function(e){var t,n;return n=this,(t=this.__isNoop)==null?this.__isNoop=function(){var t,r,o,a,i,s;for(t=ot(n.pairs),r=0,o=t.length;o>r;++r)if(i=(a=t[r]).key,s=a.value,!i.isNoop(e)||!s.isNoop(e))return!1;return!0}():t},r.inspect=function(e){return F(e,"ObjectNode",this.line,this.column,this.pairs,this.prototype)},t}(Wa),Is.prototype.object=function(e,t,n){var r,o,a,i,s,c,l,u,f;for(l=[],u=null,r=ot(t),o=0,a=r.length;a>o;++o)if(s=(i=r[o]).key,f=i.property,s instanceof kn){if(c=String(s.value),("get"===f||"set"===f)&&u&&u.property!==f&&u.key===c){u=null;continue}z(c,l)&&this.error("Duplicate key in object: "+c),l.push(c),u="get"===f||"set"===f?{key:c,property:f}:null}else u=null;return ci(e,this.index,this.scope.id,t,n)},Is.prototype.objectParam=Is.prototype.object,Wa.Param=Ei=function(e){function t(n,o,a,i,s,c,l,u){var f;if(f=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected ident to be a "+X(e)+", got "+at(i));if(null==s)s=void 0;else if(!(s instanceof e))throw TypeError("Expected defaultValue to be one of "+(X(e)+" or undefined")+", got "+at(s));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected spread to be a Boolean, got "+at(c));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected isMutable to be a Boolean, got "+at(l));if(null==u)u=void 0;else if(!(u instanceof e))throw TypeError("Expected asType to be one of "+(X(e)+" or undefined")+", got "+at(u));return f.line=n,f.column=o,f.scopeId=a,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.ident=i,f.defaultValue=s,f.spread=c,f.isMutable=l,f.asType=u,f}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="ParamNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Param",t.argNames=["ident","defaultValue","spread","isMutable","asType"],Is.addNodeFactory("param",t),r.inspect=function(e){return F(e,"ParamNode",this.line,this.column,this.ident,this.defaultValue,this.spread,this.isMutable,this.asType)},r.walk=function(n){var r,o,a;return a=n(this.ident),o=this.defaultValue instanceof e?n(this.defaultValue):this.defaultValue,r=this.asType instanceof e?n(this.asType):this.asType,a!==this.ident||o!==this.defaultValue||r!==this.asType?t(this.line,this.column,this.scopeId,a,o,this.spread,this.isMutable,r):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.ident,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):(c=a.defaultValue instanceof e?function(e){var t;return n(a.defaultValue,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.defaultValue)},c(function(o){var i;return i=a.asType instanceof e?function(e){var t;return n(a.asType,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.asType)},i(function(e){return r(null,s!==a.ident||o!==a.defaultValue||e!==a.asType?t(a.line,a.column,a.scopeId,s,o,a.spread,a.isMutable,e):a)})}))}))},t}(Wa),Wa.Regexp=$i=function(e){function t(n,o,a,i,s){var c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected source to be a "+X(e)+", got "+at(i));if("string"!=typeof s)throw TypeError("Expected flags to be a String, got "+at(s));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.source=i,c.flags=s,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="RegexpNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Regexp",t.argNames=["source","flags"],Is.addNodeFactory("regexp",t),r.type=function(){return rc.regexp},r._isNoop=function(e){return this.text.isNoop(e)},r._reduce=function(e){var n;return n=this.source.reduce(e).doWrap(e),n.isConst()?n!==this.source?t(this.line,this.column,this.scopeId,n,this.flags):this:ln(this.line,this.column,this.scopeId,Bo(this.line,this.column,this.scopeId,"RegExp"),[n,kn(this.line,this.column,this.scopeId,this.flags)])},r.inspect=function(e){return F(e,"RegexpNode",this.line,this.column,this.source,this.flags)},r.walk=function(e){var n;return n=e(this.source),n!==this.source?t(this.line,this.column,this.scopeId,n,this.flags):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.source,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.source?t(o.line,o.column,o.scopeId,a,o.flags):o)}))},t}(Wa),Wa.Return=Zi=function(e){function t(n,o,a,i){var s;if(s=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(null==i)i=kn(n,o,a,void 0);else if(!(i instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(i));return s.line=n,s.column=o,s.scopeId=a,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.node=i,s}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="ReturnNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Return",t.argNames=["node"],Is.addNodeFactory("return",t),r.type=function(e){return this.node.type(e)},r.isStatement=function(){return!0},r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.inspect=function(e){return F(e,"ReturnNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.Root=es=function(e){function t(n,o,a,i,s,c){var l;if(l=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(null==i)i=void 0;else if("string"!=typeof i)throw TypeError("Expected file to be one of String or undefined, got "+at(i));if(!(s instanceof e))throw TypeError("Expected body to be a "+X(e)+", got "+at(s));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected isEmbedded to be a Boolean, got "+at(c));return l.line=n,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.file=i,l.body=s,l.isEmbedded=c,l}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="RootNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Root",t.argNames=["file","body","isEmbedded"],Is.addNodeFactory("root",t),r.isStatement=function(){return!0},r.inspect=function(e){return F(e,"RootNode",this.line,this.column,this.file,this.body,this.isEmbedded)},r.walk=function(e){var n;return n=e(this.body),n!==this.body?t(this.line,this.column,this.scopeId,this.file,n,this.isEmbedded):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.body,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.body?t(o.line,o.column,o.scopeId,o.file,a,o.isEmbedded):o)}))},t}(Wa),Wa.Spread=vs=function(e){function t(n,o,a,i){var s;if(s=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(i));return s.line=n,s.column=o,s.scopeId=a,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.node=i,s}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SpreadNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Spread",t.argNames=["node"],Is.addNodeFactory("spread",t),r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.inspect=function(e){return F(e,"SpreadNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Is.prototype.string=function(e,t){var n,r,o,a,i,s;if(!H(t))throw TypeError("Expected parts to be an Array, got "+at(t));for(n=t.length;n--;)if(!(t[n]instanceof Wa))throw TypeError("Expected "+("parts["+n+"]")+" to be a "+X(Wa)+", got "+at(t[n]));if(a=this.macros.getByLabel("stringConcat"),!a)throw Error("Cannot use string interpolation until the string-concat operator has been defined");if(t.length===0)return kn(e,e,this.scope.id,"");if(t.length===1)return a.func({left:kn(e,e,this.scope.id,""),op:"",right:t[0]},this,e,this.getLine(e));for(i=t[0],r=1,o=t.length;o>r;++r)s=t[r],i=a.func({left:i,op:"",right:s},this,e,this.getLine(e));return i},Wa.Super=Ts=function(e){function t(n,o,a,i,s){var c,l;if(l=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(null==i)i=void 0;else if(!(i instanceof e))throw TypeError("Expected child to be one of "+(X(e)+" or undefined")+", got "+at(i));if(!H(s))throw TypeError("Expected args to be an Array, got "+at(s));for(c=s.length;c--;)if(!(s[c]instanceof e))throw TypeError("Expected "+("args["+c+"]")+" to be a "+X(e)+", got "+at(s[c]));return l.line=n,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.child=i,l.args=s,l}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SuperNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Super",t.argNames=["child","args"],Is.addNodeFactory("super",t),r._reduce=function(e){var n,r;return r=this.child!=null?this.child.reduce(e).doWrap(e):this.child,n=M(this.args,function(e,t){return e.reduce(t).doWrap(t)},e),r!==this.child||n!==this.args?t(this.line,this.column,this.scopeId,r,n):this},r.inspect=function(e){return F(e,"SuperNode",this.line,this.column,this.child,this.args)},r.walk=function(n){var r,o;return o=this.child instanceof e?n(this.child):this.child,r=M(this.args,n),o!==this.child||r!==this.args?t(this.line,this.column,this.scopeId,o,r):this},r.walkAsync=function(n,r){var o,a;return a=this,o=this.child instanceof e?function(e){var t;return n(a.child,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.child)},o(function(e){var o;return S(a.args,n,(o=!1,function(n,i){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=n?r(n):r(null,e!==a.child||i!==a.args?t(a.line,a.column,a.scopeId,e,i):a)}))})},t}(Wa),Wa.Switch=Ms=function(e){function t(n,o,a,i,s,c,l){var u;if(u=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(i));if(!H(s))throw TypeError("Expected cases to be an Array, got "+at(s));if(null==c)c=void 0;else if(!(c instanceof e))throw TypeError("Expected defaultCase to be one of "+(X(e)+" or undefined")+", got "+at(c));if(null==l)l=null;else if(!(l instanceof Bo||l instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(l));return u.line=n,u.column=o,u.scopeId=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.node=i,u.cases=s,u.defaultCase=c,u.label=l,u}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SwitchNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Switch",t.argNames=["node","cases","defaultCase","label"],Is.addNodeFactory("switch",t),r.type=function(e){var t,n;return n=this,(t=this._type)==null?this._type=function(){var t,r,o,a,i;for(i=n.defaultCase!=null?n.defaultCase.type(e):rc.undefined,t=ot(n.cases),r=0,o=t.length;o>r;++r)a=t[r],i=a.fallthrough?i:i.union(a.body.type(e));return i}():t},r.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.node,this.cases,this.defaultCase,e)},r.walk=function(e){var n,r,o,a;return a=e(this.node),n=M(this.cases,function(t){var n,r;return r=e(t.node),n=e(t.body),r!==t.node||n!==t.body?{node:r,body:n,fallthrough:t.fallthrough}:t}),r=this.defaultCase?e(this.defaultCase):this.defaultCase,o=this.label!=null?e(this.label):this.label,a!==this.node||n!==this.cases||r!==this.defaultCase||o!==this.label?t(this.line,this.column,this.scopeId,a,n,r,o):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):S(o.cases,function(t,n){var r;return e(t.node,(r=!1,function(o,a){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=o?n(o):e(t.body,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,a!==t.node||r!==t.body?{node:a,body:r,fallthrough:t.fallthrough}:t)}))}))},(s=!1,function(r,a){var c;if(s)throw Error("Attempted to call function more than once");return s=!0,null!=r?n(r):(c=o.defaultCase!=null?function(t){var r;return e(o.defaultCase,(r=!1,function(e,o){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):t(o)}))}:function(e){return e(o.defaultCase)},c(function(r){var s;return s=o.label!=null?function(t){var r;return e(o.label,(r=!1,function(e,o){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):t(o)}))}:function(e){return e(o.label)},s(function(e){return n(null,i!==o.node||a!==o.cases||r!==o.defaultCase||e!==o.label?t(o.line,o.column,o.scopeId,i,a,r,e):o)})}))}))}))},r.isStatement=function(){return!0},r.inspect=function(e){return F(e,"SwitchNode",this.line,this.column,this.node,this.cases,this.defaultCase,this.label)},t}(Wa),Wa.SyntaxChoice=Fs=function(e){function t(n,o,a,i){var s,c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected choices to be an Array, got "+at(i));for(s=i.length;s--;)if(!(i[s]instanceof e))throw TypeError("Expected "+("choices["+s+"]")+" to be a "+X(e)+", got "+at(i[s]));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.choices=i,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SyntaxChoiceNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="SyntaxChoice",t.argNames=["choices"],Is.addNodeFactory("syntaxChoice",t),r.inspect=function(e){return F(e,"SyntaxChoiceNode",this.line,this.column,this.choices)},r.walk=function(e){var n;return n=M(this.choices,e),n!==this.choices?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,S(this.choices,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.choices?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.SyntaxMany=Os=function(e){function t(n,o,a,i,s){var c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected inner to be a "+X(e)+", got "+at(i));if("string"!=typeof s)throw TypeError("Expected multiplier to be a String, got "+at(s));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.inner=i,c.multiplier=s,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SyntaxManyNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="SyntaxMany",t.argNames=["inner","multiplier"],Is.addNodeFactory("syntaxMany",t),r.inspect=function(e){return F(e,"SyntaxManyNode",this.line,this.column,this.inner,this.multiplier)},r.walk=function(e){var n;return n=e(this.inner),n!==this.inner?t(this.line,this.column,this.scopeId,n,this.multiplier):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.inner,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.inner?t(o.line,o.column,o.scopeId,a,o.multiplier):o)}))},t}(Wa),Wa.SyntaxParam=js=function(e){function t(n,o,a,i,s){var c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected ident to be a "+X(e)+", got "+at(i));if(null==s)s=void 0;else if(!(s instanceof e))throw TypeError("Expected asType to be one of "+(X(e)+" or undefined")+", got "+at(s));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.ident=i,c.asType=s,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SyntaxParamNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="SyntaxParam",t.argNames=["ident","asType"],Is.addNodeFactory("syntaxParam",t),r.inspect=function(e){return F(e,"SyntaxParamNode",this.line,this.column,this.ident,this.asType)},r.walk=function(n){var r,o;return o=n(this.ident),r=this.asType instanceof e?n(this.asType):this.asType,o!==this.ident||r!==this.asType?t(this.line,this.column,this.scopeId,o,r):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.ident,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):(c=a.asType instanceof e?function(e){var t;return n(a.asType,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.asType)},c(function(e){return r(null,s!==a.ident||e!==a.asType?t(a.line,a.column,a.scopeId,s,e):a)}))}))},t}(Wa),Wa.SyntaxSequence=Ls=function(e){function t(n,o,a,i){var s,c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected params to be an Array, got "+at(i));for(s=i.length;s--;)if(!(i[s]instanceof e))throw TypeError("Expected "+("params["+s+"]")+" to be a "+X(e)+", got "+at(i[s]));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.params=i,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="SyntaxSequenceNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="SyntaxSequence",t.argNames=["params"],Is.addNodeFactory("syntaxSequence",t),r.inspect=function(e){return F(e,"SyntaxSequenceNode",this.line,this.column,this.params)},r.walk=function(e){var n;return n=M(this.params,e),n!==this.params?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,S(this.params,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.params?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.This=Us=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:W(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));return a.line=e,a.column=n,a.scopeId=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="ThisNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="This",t.argNames=[],Is.addNodeFactory("this",t),r.cacheable=!1,r._isNoop=function(){return!0},r.inspect=function(e){return F(e,"ThisNode",this.line,this.column)},t}(Wa),Wa.Throw=Gs=function(e){function t(n,o,a,i){var s;if(s=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(i));return s.line=n,s.column=o,s.scopeId=a,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.node=i,s}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="ThrowNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Throw",t.argNames=["node"],Is.addNodeFactory("throw",t),r.type=function(){return rc.none},r.isStatement=function(){return!0},r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.inspect=function(e){return F(e,"ThrowNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.Tmp=Js=function(e){function t(e,n,o,a,i,s){var c;if(c=this instanceof t?this:W(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected id to be a Number, got "+at(a));if("string"!=typeof i)throw TypeError("Expected name to be a String, got "+at(i));if(null==s)s=rc.any;else if(!(s instanceof rc))throw TypeError("Expected _type to be a "+X(rc)+", got "+at(s));return c.line=e,c.column=n,c.scopeId=o,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.id=a,c.name=i,c._type=s,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TmpNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Tmp",t.argNames=["id","name","_type"],Is.addNodeFactory("tmp",t),r.cacheable=!1,r.type=function(){return this._type},r._isNoop=function(){return!0},r.inspect=function(e){return F(e,"TmpNode",this.line,this.column,this.id,this.name,this._type)},r.walk=function(){return this},r.walkAsync=function(e,t){return t(null,this)},t}(Wa),Wa.TmpWrapper=zs=function(e){function t(n,o,a,i,s){var c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(i));if(!H(s))throw TypeError("Expected tmps to be an Array, got "+at(s));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.node=i,c.tmps=s,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TmpWrapperNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TmpWrapper",t.argNames=["node","tmps"],Is.addNodeFactory("tmpWrapper",t),r.type=function(e){return this.node.type(e)},r.withLabel=function(e,n){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.node.withLabel(e,n),this.tmps)},r._reduce=function(e){var n;return n=this.node.reduce(e),this.tmps.length===0?n:this.node!==n?t(this.line,this.column,this.scopeId,n,this.tmps):this},r.isStatement=function(){return this.node.isStatement()},r._isNoop=function(e){return this.node.isNoop(e)},r.inspect=function(e){return F(e,"TmpWrapperNode",this.line,this.column,this.node,this.tmps)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scopeId,n,this.tmps):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scopeId,a,o.tmps):o)}))},t}(Wa),Wa.TryCatch=tc=function(e){function t(n,o,a,i,s,c,l){var u;if(u=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected tryBody to be a "+X(e)+", got "+at(i));if(!(s instanceof e))throw TypeError("Expected catchIdent to be a "+X(e)+", got "+at(s));if(!(c instanceof e))throw TypeError("Expected catchBody to be a "+X(e)+", got "+at(c));if(null==l)l=null;else if(!(l instanceof Bo||l instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(l));return u.line=n,u.column=o,u.scopeId=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.tryBody=i,u.catchIdent=s,u.catchBody=c,u.label=l,u}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TryCatchNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TryCatch",t.argNames=["tryBody","catchIdent","catchBody","label"],Is.addNodeFactory("tryCatch",t),r.type=function(e){var t;return(t=this._type)==null?this._type=this.tryBody.type(e).union(this.catchBody.type(e)):t},r.isStatement=function(){return!0},r._isNoop=function(e){return this.tryBody.isNoop(e)},r.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.tryBody,this.catchIdent,this.catchBody,e)},r.inspect=function(e){return F(e,"TryCatchNode",this.line,this.column,this.tryBody,this.catchIdent,this.catchBody,this.label)},r.walk=function(n){var r,o,a,i;return i=n(this.tryBody),o=n(this.catchIdent),r=n(this.catchBody),a=this.label instanceof e?n(this.label):this.label,i!==this.tryBody||o!==this.catchIdent||r!==this.catchBody||a!==this.label?t(this.line,this.column,this.scopeId,i,o,r,a):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.tryBody,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):n(a.catchIdent,(c=!1,function(o,i){var l;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):n(a.catchBody,(l=!1,function(o,c){var u;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):(u=a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},u(function(e){return r(null,s!==a.tryBody||i!==a.catchIdent||c!==a.catchBody||e!==a.label?t(a.line,a.column,a.scopeId,s,i,c,e):a)}))}))}))}))},t}(Wa),Wa.TryFinally=nc=function(e){function t(n,o,a,i,s,c){var l;if(l=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected tryBody to be a "+X(e)+", got "+at(i));if(!(s instanceof e))throw TypeError("Expected finallyBody to be a "+X(e)+", got "+at(s));if(null==c)c=null;else if(!(c instanceof Bo||c instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(c));return l.line=n,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.tryBody=i,l.finallyBody=s,l.label=c,l}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TryFinallyNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TryFinally",t.argNames=["tryBody","finallyBody","label"],Is.addNodeFactory("tryFinally",t),r.type=function(e){return this.tryBody.type(e)},r._reduce=function(e){var n,r,o;return o=this.tryBody.reduce(e),n=this.finallyBody.reduce(e),r=this.label!=null?this.label.reduce(e):this.label,n instanceof Za?Zt(this.line,this.column,this.scopeIf([o],r)).reduce(e):o instanceof Za?Zt(this.line,this.column,this.scopeIf([n],r)).reduce(e):o!==this.tryBody||n!==this.finallyBody||r!==this.label?t(this.line,this.column,this.scopeId,o,n,r):this},r.isStatement=function(){return!0},r._isNoop=function(e){var t;return(t=this.__isNoop)==null?this.__isNoop=this.tryBody.isNoop(e)&&this.finallyBody.isNoop():t},r.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof Bo||e instanceof Js))throw TypeError("Expected label to be one of "+(X(Bo)+" or "+X(Js)+" or null")+", got "+at(e));return t(this.line,this.column,this.scopeId,this.tryBody,this.finallyBody,e)},r.inspect=function(e){return F(e,"TryFinallyNode",this.line,this.column,this.tryBody,this.finallyBody,this.label)
},r.walk=function(n){var r,o,a;return a=n(this.tryBody),r=n(this.finallyBody),o=this.label instanceof e?n(this.label):this.label,a!==this.tryBody||r!==this.finallyBody||o!==this.label?t(this.line,this.column,this.scopeId,a,r,o):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.tryBody,(o=!1,function(i,s){var c;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=i?r(i):n(a.finallyBody,(c=!1,function(o,i){var l;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):(l=a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)},l(function(e){return r(null,s!==a.tryBody||i!==a.finallyBody||e!==a.label?t(a.line,a.column,a.scopeId,s,i,e):a)}))}))}))},t}(Wa),Wa.TypeFunction=oc=function(e){function t(n,o,a,i){var s;if(s=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected returnType to be a "+X(e)+", got "+at(i));return s.line=n,s.column=o,s.scopeId=a,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.returnType=i,s}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TypeFunctionNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TypeFunction",t.argNames=["returnType"],Is.addNodeFactory("typeFunction",t),r.inspect=function(e){return F(e,"TypeFunctionNode",this.line,this.column,this.returnType)},r.walk=function(e){var n;return n=e(this.returnType),n!==this.returnType?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.returnType,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.returnType?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.TypeGeneric=ac=function(e){function t(n,o,a,i,s){var c,l;if(l=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected basetype to be a "+X(e)+", got "+at(i));if(!H(s))throw TypeError("Expected args to be an Array, got "+at(s));for(c=s.length;c--;)if(!(s[c]instanceof e))throw TypeError("Expected "+("args["+c+"]")+" to be a "+X(e)+", got "+at(s[c]));return l.line=n,l.column=o,l.scopeId=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.basetype=i,l.args=s,l}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TypeGenericNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TypeGeneric",t.argNames=["basetype","args"],Is.addNodeFactory("typeGeneric",t),r.inspect=function(e){return F(e,"TypeGenericNode",this.line,this.column,this.basetype,this.args)},r.walk=function(e){var n,r;return r=e(this.basetype),n=M(this.args,e),r!==this.basetype||n!==this.args?t(this.line,this.column,this.scopeId,r,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.basetype,(r=!1,function(a,i){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):S(o.args,e,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,i!==o.basetype||r!==o.args?t(o.line,o.column,o.scopeId,i,r):o)}))}))},t}(Wa),Wa.TypeObject=ic=function(e){function t(e,n,r,a){var i;if(i=this instanceof t?this:W(o),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+at(n));if("number"!=typeof r)throw TypeError("Expected scopeId to be a Number, got "+at(r));if(!H(a))throw TypeError("Expected pairs to be an Array, got "+at(a));return i.line=e,i.column=n,i.scopeId=r,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.pairs=a,i}function n(e,t){var n,r;return n=e.key.reduce(t),r=e.value.reduce(t),n!==e.key||r!==e.value?{key:n,value:r}:e}var r,o;return r=e.prototype,o=t.prototype=W(r),o.constructor=t,t.displayName="TypeObjectNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TypeObject",t.argNames=["pairs"],Is.addNodeFactory("typeObject",t),o._reduce=function(e){var r;return r=M(this.pairs,n,e),r!==this.pairs?t(this.line,this.column,this.scopeId,r):this},o.inspect=function(e){return F(e,"TypeObjectNode",this.line,this.column,this.pairs)},o.walk=function(){return this},o.walkAsync=function(e,t){return t(null,this)},t}(Wa),Wa.TypeUnion=cc=function(e){function t(n,o,a,i){var s,c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!H(i))throw TypeError("Expected types to be an Array, got "+at(i));for(s=i.length;s--;)if(!(i[s]instanceof e))throw TypeError("Expected "+("types["+s+"]")+" to be a "+X(e)+", got "+at(i[s]));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.types=i,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="TypeUnionNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="TypeUnion",t.argNames=["types"],Is.addNodeFactory("typeUnion",t),r.inspect=function(e){return F(e,"TypeUnionNode",this.line,this.column,this.types)},r.walk=function(e){var n;return n=M(this.types,e),n!==this.types?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,S(this.types,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.types?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),Wa.Unary=lc=function(e){function t(n,o,a,i,s){var c;if(c=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if("string"!=typeof i)throw TypeError("Expected op to be a String, got "+at(i));if(!(s instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(s));return c.line=n,c.column=o,c.scopeId=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.op=i,c.node=s,c}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="UnaryNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Unary",t.argNames=["op","node"],Is.addNodeFactory("unary",t),r.type=function(){var e;return e={"-":rc.number,"+":rc.number,"--":rc.number,"++":rc.number,"--post":rc.number,"++post":rc.number,"!":rc.boolean,"~":rc.number,"typeof":rc.string,"delete":rc.boolean},function(){var t;return(et.call(e,t=this.op)?e[t]:void 0)||rc.any}}(),r._reduce=function(){var e,n;return e={"-":function(e){return-e},"+":function(e){return+e},"!":function(e){return!e},"~":function(e){return~e},"typeof":function(e){return typeof e}},n={"+":function(e,t){return e.type(t).isSubsetOf(rc.number)?e:void 0},"-":function(e){var n;if(e instanceof t){if((n=e.op)==="-"||"+"===n)return t(this.line,this.column,this.scopeId,e.op==="-"?"+":"-",e.node)}else if(e instanceof Yt){if((n=e.op)==="-"||"+"===n)return Yt(this.line,this.column,this.scopeId,e.left,e.op==="-"?"+":"-",e.right);if((n=e.op)==="*"||"/"===n)return Yt(this.line,this.column,this.scopeId,t(e.left.line,e.left.column,e.left.scopeId,"-",e.left),e.op,e.right)}},"!":function(){var e;return e={"<":">=","<=":">",">":"<=",">=":"<","==":"!=","!=":"==","===":"!==","!==":"===","&&":function(e,n){return Yt(this.line,this.column,this.scopeId,t(e.line,e.column,e.scopeId,"!",e),"||",t(n.line,n.column,n.scopeId,"!",n))},"||":function(e,n){return Yt(this.line,this.column,this.scopeId,t(e.line,e.column,e.scopeId,"!",e),"&&",t(n.line,n.column,n.scopeId,"!",n))}},function(n,r){var o;if(n instanceof t){if(n.op==="!"&&n.node.type(r).isSubsetOf(rc.boolean))return n.node}else if(n instanceof Yt&&et.call(e,n.op))return o=e[n.op],"function"==typeof o?o.call(this,n.left,n.right):Yt(this.line,this.column,this.scopeId,n.left,o,n.right)}}(),"typeof":function(){var e;return e=rc["null"].union(rc.object).union(rc.arrayLike).union(rc.regexp).union(rc.date).union(rc.error),function(t,n){var r;if(t.isNoop(n)){if(r=t.type(n),r.isSubsetOf(rc.number))return kn(this.line,this.column,this.scopeId,"number");if(r.isSubsetOf(rc.string))return kn(this.line,this.column,this.scopeId,"string");if(r.isSubsetOf(rc.boolean))return kn(this.line,this.column,this.scopeId,"boolean");if(r.isSubsetOf(rc.undefined))return kn(this.line,this.column,this.scopeId,"undefined");if(r.isSubsetOf(rc["function"]))return kn(this.line,this.column,this.scopeId,"function");if(r.isSubsetOf(e))return kn(this.line,this.column,this.scopeId,"object")}}}()},function(r){var o,a,i;return o=this.node.reduce(r).doWrap(r),a=this.op,o.isConst()&&et.call(e,a)?kn(this.line,this.column,this.scopeId,e[a](o.constValue())):(et.call(n,a)&&(i=n[a].call(this,o,r)),null!=i?i.reduce(r):o!==this.node?t(this.line,this.column,this.scopeId,a,o):this)}}(),r._isNoop=function(e){var t,n;return(t=this.__isNoop)==null?this.__isNoop=(n=this.op)!=="++"&&"--"!==n&&"++post"!==n&&"--post"!==n&&"delete"!==n&&this.node.isNoop(e):t},r.inspect=function(e){return F(e,"UnaryNode",this.line,this.column,this.op,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scopeId,this.op,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scopeId,o.op,a):o)}))},t}(Wa),Wa.Var=yc=function(e){function t(e,n,o,a,i){var s;if(s=this instanceof t?this:W(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+at(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected scopeId to be a Number, got "+at(o));if(!(a instanceof Bo||a instanceof Js))throw TypeError("Expected ident to be one of "+(X(Bo)+" or "+X(Js))+", got "+at(a));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected isMutable to be a Boolean, got "+at(i));return s.line=e,s.column=n,s.scopeId=o,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.ident=a,s.isMutable=i,s}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="VarNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Var",t.argNames=["ident","isMutable"],Is.addNodeFactory("var",t),r.type=function(){return rc.undefined},r._reduce=function(e){var n;return n=this.ident.reduce(e),n!==this.ident?t(this.line,this.column,this.scopeId,n,this.isMutable):this},r.inspect=function(e){return F(e,"VarNode",this.line,this.column,this.ident,this.isMutable)},r.walk=function(e){var n;return n=e(this.ident),n!==this.ident?t(this.line,this.column,this.scopeId,n,this.isMutable):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.ident,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.ident?t(o.line,o.column,o.scopeId,a,o.isMutable):o)}))},t}(Wa),Wa.Yield=bc=function(e){function t(n,o,a,i){var s;if(s=this instanceof t?this:W(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+at(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+at(o));if("number"!=typeof a)throw TypeError("Expected scopeId to be a Number, got "+at(a));if(!(i instanceof e))throw TypeError("Expected node to be a "+X(e)+", got "+at(i));return s.line=n,s.column=o,s.scopeId=a,s._reduced=void 0,s._macroExpanded=void 0,s._macroExpandAlled=void 0,s.node=i,s}var n,r;return n=e.prototype,r=t.prototype=W(n),r.constructor=t,t.displayName="YieldNode",typeof e.extended=="function"&&e.extended(t),t.cappedName="Yield",t.argNames=["node"],Is.addNodeFactory("yield",t),r.type=function(){return rc.any},r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.inspect=function(e){return F(e,"YieldNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scopeId,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scopeId,a):o)}))},t}(Wa),e.exports=R,R.ParserError=Ni,R.MacroError=ca,R.Node=Wa,R.MacroHolder=ua,R.deserializePrelude=function(e){var t,n;return n="string"==typeof e?JSON.parse(e):e,t=ua(),t.deserialize(n),{result:Za(0,0,-1),macros:t}},R.getReservedWords=function(e,t){return null==t&&(t={}),P(ot(lo(t)).concat(ot(null!=e&&typeof e.getMacroAndOperatorNames=="function"&&e.getMacroAndOperatorNames()||[])))}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./jstranslator"]=function(){var e={exports:this};return function(n){"use strict";function r(e){return!(e instanceof M.Ident||e instanceof M.Const||e instanceof M.This||e instanceof M.Arguments)}function o(e){return e.mutateLast(function(e){return M.Return(e.pos,e)})}function a(e){return e}function i(e){return e?o:a}function s(){function e(t){var n;return r.getOrAdd(t,(n=!1,function(t){var r,o;if(n)throw Error("Attempted to call function more than once");if(n=!0,o=!1,t instanceof P.Yield||t instanceof P.Return)return!0;if(!(t instanceof P.Function)){r={};try{t.walk(function(t){if(e(t))throw r;return t})}catch(a){if(a===r)return!0;throw a}}return!1}))}function t(n){var a;return o.getOrAdd(n,(a=!1,function(n){var o,i;if(a)throw Error("Attempted to call function more than once");if(a=!0,o=r.get(n))return o;if(n instanceof P.Yield||n instanceof P.Return||n instanceof P.Continue)return!0;if(!(n instanceof P.Function)){i={};try{n.walk(function(n){if(n instanceof P.For||n instanceof P.ForIn){if(e(n))throw i}else if(t(n))throw i;return n})}catch(s){if(s===i)return!0;throw s}}return!1}))}function n(i){var s;if(!(i instanceof P))throw TypeError("Expected node to be a "+I(P)+", got "+T(i));return a.getOrAdd(i,(s=!1,function(a){var i,c;if(s)throw Error("Attempted to call function more than once");if(s=!0,i=r.get(a))return i;if(i=o.get(a))return i;if(a instanceof P.Yield||a instanceof P.Return||a instanceof P.Continue||a instanceof P.Break)return!0;if(!(a instanceof P.Function)){c={};try{a.walk(function(r){if(r instanceof P.For||r instanceof P.ForIn){if(e(r))throw c}else if(r instanceof P.Switch){if(t(r))throw c}else if(n(r))throw c;return r})}catch(l){if(l===c)return!0;throw l}}return!1}))}var r,o,a;return r=D.generic(P,Boolean)(),o=D.generic(P,Boolean)(),a=D.generic(P,Boolean)(),n}function c(e){var t,n,r,o,a,i;for(i=[],o=!1,t=B(e),n=0,r=t.length;r>n;++n)a=t[n],a instanceof P.Spread&&a.node instanceof P.Array?(i.push.apply(i,B(a.node.elements)),o=!0):i.push(a);return o?c(i):e}function l(e,t,n){var r;if("number"!=typeof e)throw TypeError("Expected line to be a Number, got "+T(e));if("number"!=typeof t)throw TypeError("Expected column to be a Number, got "+T(t));if(null==n)n=void 0;else if("string"!=typeof n)throw TypeError("Expected file to be one of String or undefined, got "+T(n));return r={line:e,column:t},null!=n&&(r.file=n),r}function u(e){if(!(e instanceof P))throw TypeError("Expected node to be a "+I(P)+", got "+T(e));return l(e.line,e.column,e.file)}function f(){}function d(e,t,n,r,o,a){var i,s,l,u,f,d,h,_;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));for(_=[],f=[],_.push(f),i=B(c(t)),l=0,u=i.length;u>l;++l)d=i[l],d instanceof P.Spread?(_.push({tNode:p(d.node,n,"expression",null,a),type:d.node.type()}),f=[],_.push(f)):f.push(p(d,n,"expression",null,a));if(_.length===1)return function(){return M.Arr(e,function(){var e,t,n,r,o;for(e=[],t=B(_[0]),n=0,r=t.length;r>n;++n)o=t[n],e.push(o());return e}())};for(h=_.length,s=function(e,t){return 0===t%2?E(e.length)>0?_[t]=function(){var t,n,r,o,a,i;for(t=[],n=B(e),r=0,o=n.length;o>r;++r)i=n[r],t.push(i());return a=t,M.Arr(a[0].pos,a)}:_.splice(t,1):_[t]=function(){var t;return t=e.tNode(),e.type.isSubsetOf(q.array)?t:(n.addHelper("__toArray"),M.Call(t.pos,M.Ident(t.pos,"__toArray"),[t]))}};h--;)s.call(this,_[h],h);return _.length===1?function(){var t;return t=_[0](),r&&t instanceof M.Call&&t.func instanceof M.Ident&&t.func.name==="__toArray"?M.Call(e,M.Access(e,M.Ident(e,"__slice"),"call"),t.args):o&&t instanceof M.Call&&t.func instanceof M.Ident&&t.func.name==="__toArray"&&t.args[0]instanceof M.Arguments?t.args[0]:t}:function(){var t,n,r,o,a,i;for(o=_[0](),t=[],n=1,r=_.length;r>n;++n)a=_[n],t.push(a());return i=t,M.Call(e,M.Access(e,o,"concat"),i)}}function p(e,t,n,r,o){var a;if("object"!=typeof e||null===e)throw TypeError("Expected node to be an Object, got "+T(e));if(!(t instanceof U))throw TypeError("Expected scope to be a "+I(U)+", got "+T(t));if("string"!=typeof n)throw TypeError("Expected location to be a String, got "+T(n));if("function"!=typeof r&&(r=i(r)),!A.call(V,e.constructor.cappedName))throw Error("Unable to translate unknown node type: "+String(e.constructor.cappedName));if(a=V[e.constructor.cappedName](e,t,n,r,o),"function"!=typeof a)throw Error("Translated non-function: "+T(a));return a}function h(e,t,n,r,o){var a,i,s,c;if(!w(e))throw TypeError("Expected nodes to be an Array, got "+T(e));if(!(t instanceof U))throw TypeError("Expected scope to be a "+I(U)+", got "+T(t));if("string"!=typeof n)throw TypeError("Expected location to be a String, got "+T(n));for(a=[],i=0,s=e.length;s>i;++i)c=e[i],a.push(p(e[i],t,n,i===s-1&&r,o));return a}function _(e,t){function n(e){var t;for(t=[];;)if(e instanceof M.Comment)t.push(e),e=M.Noop(e.pos);else{if(!(e instanceof M.Block&&e.body[0]instanceof M.Comment))break;t.push(e.body[0]),e=M.Block(e.pos,C.call(e.body,1))}return{comments:t,body:e}}var r,o,a,i,s,c,f,d,h,_,m,y,g,b,v,x;if("object"!=typeof e||null===e)throw TypeError("Expected roots to be an Object, got "+T(e));if(!(t instanceof U))throw TypeError("Expected scope to be a "+I(U)+", got "+T(t));if(w(e)||(e=[e]),e.length===0&&e.push({type:"Root",line:0,column:0,body:{type:"Nothing",line:0,column:0}}),b=l(0,0),t.options.embedded)for(r=["write","context"],o=0,a=r.length;a>o;++o)g=r[o],m=M.Ident({line:0,column:0},g),t.addVariable(m),t.markAsParam(m);if(e.length===1){if(!(e[0]instanceof P.Root))throw Error("Cannot translate non-Root object");c=M.Block(u(e[0]),[p(e[0].body,t,"topStatement",t.options["return"]||t.options.eval,[])()])}else c=M.Block(b,function(){var r,o,a,i,s,c,l,f,d,h;for(r=[],o=B(e),a=0,i=o.length;i>a;++a){if(f=o[a],!(f instanceof P.Root))throw Error("Cannot translate non-Root object");l=t.clone(!0),c=(s=n(p(f.body,l,"topStatement",t.options["return"]||t.options.eval,[])())).comments,d=s.body,h=u(f),r.push(M.Block(h,B(c).concat([M.Call(h,M.Func(h,null,[],l.getVariables(),d))])))}return r}());for(y=[],t.hasBound&&t.usedThis&&(h=M.Ident(c.pos,"_this"),t.addVariable(h),y.push(M.Assign(c.pos,h,M.This(c.pos)))),t.fillHelperDependencies(),r=B(t.getHelpers()),o=0,a=r.length;a>o;++o)_=r[o],"GLOBAL"!==_&&t.macros.hasHelper(_)&&(m=M.Ident(c.pos,_),t.addVariable(m),y.push(M.Assign(c.pos,m,t.macros.getHelper(_))));return s=[],t.options.eval&&(x=function(e){return e instanceof M.Func?(t.addHelper("GLOBAL"),e.name!=null?M.Block(e.pos,[e,M.Assign(e.pos,M.Access(e.pos,M.Ident(e.pos,"GLOBAL"),e.name.name),e.name)]):e):e instanceof M.Binary&&e.op==="="&&e.left instanceof M.Ident?(t.addHelper("GLOBAL"),M.Assign(e.pos,M.Access(e.pos,M.Ident(e.pos,"GLOBAL"),e.left.name),e.walk(x))):void 0},c=c.walk(x),c=c.mutateLast(function(e){return t.addHelper("GLOBAL"),M.Assign(e.pos,M.Access(e.pos,M.Ident(e.pos,"GLOBAL"),M.Const(e.pos,"_")),e)},{"return":!0})),d=(i=n(c)).comments,v=i.body,t.options.embedded&&(v=M.Block(c.pos,[M.Return(c.pos,M.Func(c.pos,null,[M.Ident(c.pos,"write"),M.Ident(c.pos,"context")],[],M.Block(c.pos,[M.If(c.pos,M.Binary(c.pos,M.Ident(c.pos,"context"),"==",M.Const(c.pos,null)),M.Assign(c.pos,M.Ident(c.pos,"context"),M.Obj(c.pos))),v])))])),t.options.bare?(t.hasHelper("GLOBAL")&&(t.addVariable(M.Ident(c.pos,"GLOBAL")),s.unshift(M.Assign(c.pos,M.Ident(c.pos,"GLOBAL"),t.macros.getHelper("GLOBAL")))),t.options.undefinedName!=null&&t.addVariable(t.options.undefinedName),M.Root(c.pos,M.Block(c.pos,B(d).concat(B(s),B(y),[v])),t.getVariables(),["use strict"])):(f=M.Call(c.pos,M.Access(c.pos,M.Func(c.pos,null,(t.hasHelper("GLOBAL")?[M.Ident(c.pos,"GLOBAL")]:[]).concat(t.options.undefinedName!=null?[M.Ident(c.pos,t.options.undefinedName,!0)]:[]),t.getVariables(),M.Block(c.pos,B(y).concat([v])),["use strict"]),"call"),[M.This(c.pos)].concat(t.hasHelper("GLOBAL")?[t.macros.getHelper("GLOBAL")]:[])),t.options["return"]&&(f=M.Return(c.pos,f)),M.Root(c.pos,M.Block(c.pos,B(d).concat(B(s),[f])),[],[]))}var m,y,g,b,v,w,x,I,E,A,C,N,B,T,k,M,S,D,F,O,j,L,R,P,U,V,q;m=function(){var e;return e={iterator:function(){return this},next:function(){var e,t;return t=E(this.index)+1,e=this.array,t>=E(e.length)?{done:!0,value:void 0}:(this.index=t,{done:!1,value:e[t]})}},function(t){var n;if(!w(t))throw TypeError("Expected array to be an Array, got "+T(t));return n=g(e),n.array=t,n.index=-1,n}}(),y=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},g=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},b=function(e,t){var n;for(n in t)A.call(t,n)&&(e[n]=t[n]);return e},v=function(e,t){var n,r,o,a;if("number"==typeof t){if(t!==t){for(n=B(e),o=n.length;o--;)if(r=n[o],r!==r)return o;return-1}if(0===t){for(a=1/t,n=B(e),o=n.length;o--;)if(r=n[o],0===r&&1/r===a)return o;return-1}}return e.indexOf(t)},w=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),x=function(e){if(null==e)throw TypeError("Expected iterable to be an Object, got "+T(e));if(w(e))return m(e);if(typeof e.iterator=="function")return e.iterator();if(typeof e.next=="function")return e;throw Error("Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "+T(e))},I=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+T(e));return e.displayName||e.name||""},E=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+T(e));return e},A=Object.prototype.hasOwnProperty,C=Array.prototype.slice,N=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+T(e))},B=function(e){if(null==e)throw TypeError("Expected an object, got "+T(e));return w(e)?e:"string"==typeof e?e.split(""):C.call(e)},T=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),R=typeof n.Map=="function"?n.Map:R=function(){function e(n){var r,o,a,i;if(a=this instanceof e?this:g(t),a._keys=[],a._values=[],null!=n)try{for(o=x(n);r=o.next(),!r.done;)i=r.value,a.set(i[0],i[1])}finally{try{o.close()}catch(s){}}return a}var t;return t=e.prototype,e.displayName="Map",t.get=function(e){var t;return t=v(this._keys,e),-1===t?void 0:this._values[t]},t.has=function(e){return v(this._keys,e)!==-1},t.set=function(e,t){var n,r;r=this._keys,n=v(r,e),-1===n&&(n=r.length,r[n]=e),this._values[n]=t},t["delete"]=function(e){var t,n;return n=this._keys,t=v(n,e),-1===t?!1:(n.splice(t,1),this._values.splice(t,1))},t.keys=function(){function e(){a=3}function t(){for(;;)switch(a){case 0:r=B(i._keys),o=r.length,++a;case 1:a=o--?2:3;break;case 2:return s=r[o],a=1,{done:!1,value:s};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function n(n){try{return t(n)}catch(r){throw e(),r}}var r,o,n,a,t,i,s;return i=this,a=0,{close:e,iterator:function(){return this},next:function(){return n(void 0)},send:n,"throw":function(e){throw e}}},t.values=function(){function e(){a=3}function t(){for(;;)switch(a){case 0:r=B(i._values),o=r.length,++a;case 1:a=o--?2:3;break;case 2:return s=r[o],a=1,{done:!1,value:s};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function n(n){try{return t(n)}catch(r){throw e(),r}}var r,o,n,a,t,i,s;return i=this,a=0,{close:e,iterator:function(){return this},next:function(){return n(void 0)},send:n,"throw":function(e){throw e}}},t.items=function(){function e(){o=3}function t(){for(;;)switch(o){case 0:c=a._values,r=B(a._keys),i=r.length,++o;case 1:o=i--?2:3;break;case 2:return s=r[i],o=1,{done:!1,value:[s,c[i]]};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+o)}}function n(n){try{return t(n)}catch(r){throw e(),r}}var r,n,o,t,a,i,s,c;return a=this,o=0,{close:e,iterator:function(){return this},next:function(){return n(void 0)},send:n,"throw":function(e){throw e}}},t.iterator=e.prototype.items,e}(),M=t("./jsast"),S=M.Node,q=t("./types"),P=(k=t("./parser")).Node,L=k.MacroHolder,D=t("./utils").Cache,U=function(){function e(t,r,a,i,s,c,l){var u;if(u=this instanceof e?this:g(n),null==t&&(t={}),u.options=t,!(r instanceof L))throw TypeError("Expected macros to be a "+I(L)+", got "+T(r));return u.macros=r,null==a&&(a=!1),u.bound=a,null==i&&(i={}),u.usedTmps=i,null==s&&(s={}),u.helperNames=s,null==l&&(l={}),u.tmps=l,u.variables=c?g(c):{},u.hasBound=!1,u.usedThis=!1,u.id=o(),u}function t(e,t){return y(e.toLowerCase(),t.toLowerCase())}var n,o;return n=e.prototype,e.displayName="Scope",o=function(){var e;return e=-1,function(){return++e}}(),n.maybeCache=function(e,t,n){var o,a;if(!(e instanceof M.Expression))throw TypeError("Expected item to be an Expression, got "+T(e));if(null==t)t=q.any;else if(!(t instanceof q))throw TypeError("Expected type to be a "+I(q)+", got "+T(t));if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+T(n));return r(e)?(o=this.reserveIdent(e.pos,"ref",t),a=n(M.Assign(e.pos,o,e),o,!0),this.releaseIdent(o),a):n(e,e,!1)},n.maybeCacheAccess=function(e,t,n,r,o){var a;if(a=this,!(e instanceof M.Expression))throw TypeError("Expected item to be an Expression, got "+T(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected parentName to be a String, got "+T(n));if(null==r)r="ref";else if("string"!=typeof r)throw TypeError("Expected childName to be a String, got "+T(r));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected save to be a Boolean, got "+T(o));return e instanceof M.Binary&&e.op==="."?this.maybeCache(e.left,q.any,function(n,r,o){return a.maybeCache(e.right,q.any,function(a,i,s){return o||s?t(M.Access(e.pos,n,a),M.Access(e.pos,r,i),!0):t(e,e,!1)})}):t(e,e,!1)},n.reserveIdent=function(e,t,n){var r;if(r=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if(null==t&&(t="ref"),null==n)n=q.any;else if(!(n instanceof q))throw TypeError("Expected type to be a "+I(q)+", got "+T(n));return function(){var o,a,i;for(o=1;;++o)if(i=1===o?"_"+N(t):"_"+N(t)+o,!(i in r.usedTmps))return r.usedTmps[i]=!0,a=M.Ident(e,i),r.addVariable(a,n),a}()},n.reserveParam=function(e){var t;if(t=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));return function(){var n,r;for(n=1;;++n)if(r=1===n?"_p":"_p"+n,!(r in t.usedTmps))return t.usedTmps[r]=!0,M.Ident(e,r)}()},n.getTmp=function(e,t,n,r){var o,a;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if(null==r)r=q.any;else if(!(r instanceof q))throw TypeError("Expected type to be a "+I(q)+", got "+T(r));return a=this.tmps,t in a&&(o=a[t],o instanceof M.Ident)?o:a[t]=this.reserveIdent(e,n||"tmp",r)},n.releaseTmp=function(e){var t,n;A.call(this.tmps,e)&&this.releaseIdent((t=(n=this.tmps)[e],delete n[e],t))},n.releaseTmps=function(){var e,t;e=this.tmps;for(t in e)A.call(e,t)&&this.releaseTmp(t);this.tmps={}},n.releaseIdent=function(e){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));if(!A.call(this.usedTmps,e.name))throw Error("Trying to release a non-reserved ident: "+N(e.name));delete this.usedTmps[e.name]},n.markAsParam=function(e){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));this.variables[e.name].isParam=!0},n.markAsFunction=function(e){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));this.variables[e.name].isFunction=!0},n.addHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+T(e));this.helperNames[e]=!0},n.fillHelperDependencies=function(){var e,t,n,r,o,a,i;for(o=this.helperNames,i={};;){for(a in o)if(A.call(o,a)&&this.macros.hasHelper(a))for(e=B(this.macros.helperDependencies(a)),n=e.length;n--;)r=e[n],A.call(o,r)||(i[r]=!0);t=!0;for(a in i)A.call(i,a)&&(t=!1,this.addHelper(a));if(t)break;o=i,i={}}},n.getHelpers=function(){var e,n,r,o;e=[],n=this.helperNames;for(r in n)A.call(n,r)&&e.push(r);return o=e,o.sort(t)},n.hasHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+T(e));return A.call(this.helperNames,e)},n.addVariable=function(e,t,n){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));if(null==t)t=q.any;else if(!(t instanceof q))throw TypeError("Expected type to be a "+I(q)+", got "+T(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected isMutable to be a Boolean, got "+T(n));this.variables[e.name]={type:t,isMutable:n}},n.hasVariable=function(e){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));return e.name in this.variables&&typeof this.variables[e.name]=="object"&&this.variables[e.name]!==null},n.hasOwnVariable=function(e){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));return A.call(this.variables,e.name)},n.isVariableMutable=function(e){var t;if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));return(t=this.variables[e.name])!=null?t.isMutable:void 0},n.removeVariable=function(e){if(!(e instanceof M.Ident))throw TypeError("Expected ident to be an Ident, got "+T(e));delete this.variables[e.name]},n.getVariables=function(){var e,n,r,o,a;e=[],n=this.variables;for(r in n)A.call(n,r)&&(o=n[r],o.isParam||o.isFunction||e.push(r));return a=e,a.sort(t)},n.clone=function(t){return t&&(this.hasBound=!0),e(this.options,this.macros,t,g(this.usedTmps),this.helperNames,this.variables,g(this.tmps))},e}(),O=function(){function e(t){var r;if(r=this instanceof e?this:g(n),!(t instanceof F))throw TypeError("Expected builder to be a "+I(F)+", got "+T(t));return r.builder=t,r.nodes=[],r}function t(t,n){if("object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+T(t));if(n instanceof e)return M.Const(t,n.caseId());if(n instanceof M.Node)return n;throw TypeError("Expected a GeneratorState or Node, got "+T(n))}var n;return n=e.prototype,e.displayName="GeneratorState",n.hasGeneratorNode=function(e){return this.builder.hasGeneratorNode(e)},n.add=function(e){if("function"!=typeof e)throw TypeError("Expected tNode to be a Function, got "+T(e));return this.nodes.push(e),this
},n.branch=function(){var t,n;return n=e(this.builder),this.builder.currentCatch.length&&(t=this.builder.currentCatch)[E(t.length)-1].push(n),this.builder.statesOrder.push(n),n},n.caseId=function(){return this.builder.caseId(this.getRedirect())},n.makeGoto=function(t,n,r){var o;if(o=this,"object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+T(t));if("function"!=typeof n)throw TypeError("Expected tState to be a Function, got "+T(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected includeBreak to be a Boolean, got "+T(r));return function(){var a,i,s;if(s=n(),s instanceof e)i=M.Const(t,s.caseId());else{if(!(s instanceof M.Node))throw Error("Expected a GeneratorState or Node, got "+T(s));i=s}return i instanceof M.Const&&typeof i.value=="number"&&i.value===E(o.caseId())+1?M.Unary(t,"++",o.builder.stateIdent):(a=M.Assign(t,o.builder.stateIdent,i),r?M.Block(t,[a,M.Break(t)]):a)}},n.yield=function(e,t){var n;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if("function"!=typeof t)throw TypeError("Expected tNode to be a Function, got "+T(t));return n=this.branch(),this.nodes.push(this.makeGoto(e,function(){return n},!1),function(){return M.Return(e,M.Obj(e,[M.Obj.Pair(e,"done",M.Const(e,!1)),M.Obj.Pair(e,"value",t())]))}),n},n["return"]=function(e,t){var n;if(n=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if(null==t)t=null;else if("function"!=typeof t)throw TypeError("Expected tNode to be one of Function or null, got "+T(t));null==t?this.goto(e,function(){return n.builder.stop}):(this.add(this.makeGoto(e,function(){return n.builder.stop},!1)),this.add(function(){return M.Return(e,M.Obj(e,[M.Obj.Pair(e,"done",M.Const(e,!0)),M.Obj.Pair(e,"value",t())]))}))},n.getRedirect=function(){return this.builder.getRedirect(this)},n.goto=function(e,n,r){var o;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if("function"!=typeof n)throw TypeError("Expected tState to be a Function, got "+T(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected preventRedirect to be a Boolean, got "+T(r));o=this.nodes,o.length!==0||r||this.builder.addRedirect(this,n),o.push(this.makeGoto(e,function(){return t(e,n())},!0))},n.noop=function(e){var t;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));return this.nodes.length===0?this:(t=this.branch(),this.goto(e,function(){return t}),t)},n.gotoIf=function(e,n,r,o){var a;if(a=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if("function"!=typeof n)throw TypeError("Expected tTest to be a Function, got "+T(n));if("function"!=typeof r)throw TypeError("Expected tWhenTrue to be a Function, got "+T(r));if("function"!=typeof o)throw TypeError("Expected tWhenFalse to be a Function, got "+T(o));this.goto(e,function(){return M.IfExpression(e,n(),t(e,r()),t(e,o()))},!0)},n.pendingFinally=function(e,t){var n,r,o;if(n=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if("function"!=typeof t)throw TypeError("Expected tFinallyBody to be a Function, got "+T(t));return o=this.builder.scope,r=o.reserveIdent(e,"finally",q.undefined["function"]()),o.markAsFunction(r),this.builder.finallies.push(function(){return M.Func(e,r,[],[],t())}),this.nodes.push(function(){return M.Call(e,M.Access(e,n.builder.pendingFinalliesIdent,"push"),[r])}),this},n.runPendingFinally=function(e){var t;if(t=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));return this.nodes.push(function(){return M.Call(e,M.Call(e,M.Access(e,t.builder.pendingFinalliesIdent,"pop")))}),this},n.enterTryCatch=function(e){var t;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));return t=this.noop(e),this.builder.enterTryCatch(t),t},n.exitTryCatch=function(e,t,n){var r;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+T(e));if("function"!=typeof t)throw TypeError("Expected tIdent to be a Function, got "+T(t));if("function"!=typeof n)throw TypeError("Expected tPostState to be a Function, got "+T(n));return this.goto(e,n),r=this.noop(e),this.builder.exitTryCatch(r,t),r},e}(),F=function(){function e(n,r){var o,a;if(o=this instanceof e?this:g(t),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+T(n));if(o.pos=n,!(r instanceof U))throw TypeError("Expected scope to be a "+I(U)+", got "+T(r));return o.scope=r,o.currentCatch=[],o.redirects=R(),o.start=O(o),o.stop=O(o).add(function(){return M.Return(n,M.Obj(n,[M.Obj.Pair(n,"done",M.Const(n,!0)),M.Obj.Pair(n,"value",M.Const(n,void 0))]))}),o.statesOrder=[o.start],o.stateIdent="undefined"!=typeof stateIdent&&null!==stateIdent?stateIdent:r.reserveIdent(n,"state",q.number),o.pendingFinalliesIdent=r.reserveIdent(n,"finallies",q.undefined["function"]().array()),a=r.clone(!1),o.receivedIdent=a.reserveIdent(n,"received",q.any),a.markAsParam(o.receivedIdent),o.finallies=[],o.catches=[],o.hasGeneratorNode=s(),o}var t;return t=e.prototype,e.displayName="GeneratorBuilder",t.addRedirect=function(e,t){if(!(e instanceof O))throw TypeError("Expected fromState to be a "+I(O)+", got "+T(e));if("function"!=typeof t)throw TypeError("Expected toState to be a Function, got "+T(t));this.redirects.set(e,t)},t.getRedirect=function(e){var t,n;if(!(e instanceof O))throw TypeError("Expected fromState to be a "+I(O)+", got "+T(e));if(n=this.redirects.get(e),null==n)return e;if(n instanceof O)return n;if("function"==typeof n){if(t=n(),!(t instanceof O))throw Error("Expected a GeneratorState, got "+T(n));return t=this.getRedirect(t),this.redirects.set(e,t),t}throw Error("Unknown value in redirects: "+T(n))},t._calculateCaseIds=function(){var e,t,n,r,o,a;for(o=-1,r=this.caseIds=R(),e=B(this.statesOrder),t=0,n=e.length;n>t;++t)a=e[t],this.redirects.has(a)||r.set(a,++o)},t.caseId=function(e){var t;if(!(e instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(e));if(t=this.caseIds,null==t)throw Error("_calculate-case-ids must be called first");if(!t.has(e))throw Error("case-ids does not contain state");return t.get(e)},t.enterTryCatch=function(e){if(!(e instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(e));this.currentCatch.push([e])},t.exitTryCatch=function(e,t){var n,r;if(!(e instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(e));if("function"!=typeof t)throw TypeError("Expected tIdent to be a Function, got "+T(t));if(this.currentCatch.length===0)throw Error("Unable to exit-try-catch without first using enter-try-catch");n=this.currentCatch.pop(),r=n.indexOf(e),-1!==r&&n.splice(r,1),this.catches.push({tryStates:n,tIdent:t,catchState:e})},t.create=function(){var e,t,n,r,o,a,i,s,c,l,u;if(e=this,this.currentCatch.length)throw Error("Cannot create a generator if there are stray catches");return this.statesOrder.push(this.stop),this._calculateCaseIds(),t=[M.Assign(this.pos,this.stateIdent,M.Const(this.pos,this.start.caseId()))],r=this.scope.reserveIdent(this.pos,"close",q.undefined["function"]()),this.scope.markAsFunction(r),this.finallies.length===0?(this.scope.removeVariable(this.pendingFinalliesIdent),t.push(M.Func(this.pos,r,[],[],M.Block(this.pos,[M.Assign(this.pos,this.stateIdent,this.stop.caseId())])))):(t.push(M.Assign(this.pos,this.pendingFinalliesIdent,M.Arr(this.pos))),t.push.apply(t,function(){var t,n,r,o,a;for(t=[],n=B(e.finallies),r=0,o=n.length;o>r;++r)a=n[r],t.push(a());return t}()),i=this.scope.clone(!1),a=i.reserveIdent(this.pos,"f",q.undefined["function"]().union(q.undefined)),t.push(M.Func(this.pos,r,[],i.getVariables(),M.Block(this.pos,[M.Assign(this.pos,this.stateIdent,this.stop.caseId()),M.Assign(this.pos,a,M.Call(this.pos,M.Access(this.pos,this.pendingFinalliesIdent,"pop"))),M.If(this.pos,a,M.TryFinally(this.pos,M.Call(this.pos,a),M.Call(this.pos,r)))])))),o=this.scope.reserveIdent(this.pos,"e",q.any),n=this.catches,l=this.stateIdent,u=this.scope.reserveIdent(this.pos,"step",q["function"]),s=this.scope.reserveIdent(this.pos,"send",q["function"]),t.push(M.Func(this.pos,u,[this.receivedIdent],[],M.While(this.pos,!0,M.Switch(this.pos,l,function(){var t,n,r,o,a,i,s,c,l,u,f;for(t=[],n=B(e.statesOrder),a=0,s=n.length;s>a;++a)if(u=n[a],!e.redirects.has(u)){for(r=[],o=B(u.nodes),i=0,c=o.length;c>i;++i)f=o[i],r.push(f());if(l=r,l.length===0)throw Error("Found state with no nodes in it");t.push(M.Switch.Case(l[0].pos,M.Const(l[0].pos,u.caseId()),M.Block(l[0].pos,l)))}return t}(),M.Throw(this.pos,M.Call(this.pos,M.Ident(this.pos,"Error"),[M.Binary(this.pos,"Unknown state: ","+",l)])))))),c=M.TryCatch(this.pos,M.Return(this.pos,M.Call(this.pos,u,[this.receivedIdent])),o,function(){var t,a,i,s;for(s=M.Block(e.pos,[M.Call(e.pos,r,[]),M.Throw(e.pos,o)]),t=B(n),i=t.length,a=function(e){var t,n;return t=this,n=e.tIdent(),this.scope.addVariable(n),s=M.If(this.pos,M.Or.apply(M,[this.pos].concat(function(){var n,r,o,a,i;for(n=[],r=B(e.tryStates),o=0,a=r.length;a>o;++o)i=r[o],t.redirects.has(i)||n.push(M.Binary(t.pos,l,"===",M.Const(t.pos,i.caseId())));return n}())),M.Block(this.pos,[M.Assign(this.pos,n,o),M.Assign(this.pos,l,M.Const(this.pos,e.catchState.caseId()))]),s)};i--;)a.call(e,t[i]);return s}()),t.push(M.Func(this.pos,s,[this.receivedIdent],[],n.length?M.While(this.pos,!0,c):c)),t.push(M.Return(this.pos,M.Obj(this.pos,[M.Obj.Pair(this.pos,"close",r),M.Obj.Pair(this.pos,"iterator",M.Func(this.pos,null,[],[],M.Return(this.pos,M.This(this.pos)))),M.Obj.Pair(this.pos,"next",M.Func(this.pos,null,[],[],M.Return(this.pos,M.Call(this.pos,s,[M.Const(this.pos,void 0)])))),M.Obj.Pair(this.pos,"send",s),M.Obj.Pair(this.pos,"throw",M.Func(this.pos,null,[M.Ident(this.pos,"e")],[],M.Throw(this.pos,M.Ident(this.pos,"e"))))]))),M.Block(this.pos,t)},e}(),j=function(){function e(e){var t,n;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+T(e));return e.memoized?e:((t=function(){return e&&(n=e(),e=null),n}).memoized=!0,t)}function t(e){var t;return(t=function(){return e}).memoized=!0,t}function n(t,n,o,a,i){var s,c,l;if(!(o instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(o));if("function"!=typeof a)throw TypeError("Expected tNode to be a Function, got "+T(a));if(null==i)i=f;else if("function"!=typeof i)throw TypeError("Expected cleanup to be a Function, got "+T(i));return"function"==typeof t?(c=e(t),{state:o.add(function(){var e;return e=a(),M.Assign(e.pos,c(),e)}),tNode:c,cleanup:i}):t?(a=e(a),l=e(function(){return n.reserveIdent(a().pos,"tmp",q.any)}),s=e(function(){return a()===o.builder.receivedIdent||r(a())}),{state:o.add(function(){var e;return e=a(),s()?M.Assign(e.pos,l(),e):e}),tNode:function(){return s()?l():a()},cleanup:function(){return i(),s()?n.releaseIdent(l()):void 0}}):{state:o,tNode:a,cleanup:i}}function o(n,r,o,a,i){return null==a&&(a="tmp"),null==i&&(i=q.any),"function"==typeof n?e(n):t(r.reserveIdent(o,a,i))}function a(e,t,n){if("function"!=typeof n)throw TypeError("Expected tTmp to be a Function, got "+T(n));return"function"==typeof e?function(){var r,o;return o=e(),r=n(),o===r?t.releaseIdent(r):void 0}:function(){return t.releaseIdent(n())}}function i(e,t,n,r,i){var c,l,p,h,_,m;if(!(r instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(r));for(m=o(i,n,e,"arr",q.array),_=null,c=B(t),h=0,p=c.length,l=function(o,a){var i;return _||r.hasGeneratorNode(o)?(null==_&&(_=d(e,C.call(t,0,a),n,!0,!1),r=r.add(function(){return M.Assign(e,m(),_())})),o instanceof P.Spread?(i=s(o.node,n,r,!1),r=i.state.add(function(){var e,t;return t=m(),n.addHelper("__toArray"),M.Call(u(o),M.Access(u(o),t,M.Const(u(o),"push"),M.Const(u(o),"apply")),[t,M.Call(u(o),M.Ident(u(o),"__toArray"),[(e=i.tNode(),i.cleanup(),e)])])})):(i=s(o,n,r,!1),r=i.state.add(function(){var e;return M.Call(u(o),M.Access(u(o),m(),M.Const(u(o),"push")),[(e=i.tNode(),i.cleanup(),e)])}))):void 0};p>h;++h)l.call(this,c[h],h);return null==_?{state:r,tNode:d(e,t,n,!0,!1),cleanup:f}:{state:r,tNode:m,cleanup:a(i,n,m)}}function s(e,t,r,o){var a;if(!(e instanceof P))throw TypeError("Expected node to be a "+I(P)+", got "+T(e));if(!(t instanceof U))throw TypeError("Expected scope to be a "+I(U)+", got "+T(t));if(!(r instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(r));if(null==o)o=!1;else if("boolean"!=typeof o&&"function"!=typeof o)throw TypeError("Expected assignTo to be one of Boolean or Function, got "+T(o));if(a=e.constructor.cappedName,r.hasGeneratorNode(e)){if(A.call(c,a))return c[a](e,t,r,o);throw Error("Unknown expression type: "+T(e))}return n(o,t,r,p(e,t,"expression"))}var c,l;return c={Access:function(e,t,r,o){var a,i;return i=s(e.parent,t,r,!0),a=s(e.child,t,i.state,!1),n(o,t,a.state,function(){var t;return t=M.Access(u(e),i.tNode(),a.tNode()),i.cleanup(),a.cleanup(),t})},Array:function(e,t,n,r){return i(u(e),e.elements,t,n,r)},Assign:function(e,t,r,o){var a,i,c,l,d;return d=e.left,d instanceof P.Access?(c=s(d.parent,t,r,!0),a=s(d.child,t,c.state,!0),i={state:a.state,tNode:function(){return M.Access(u(d),c.tNode(),a.tNode())},cleanup:function(){return c.cleanup(),a.cleanup()}}):i={state:r,tNode:p(e.left,t,"leftExpression"),cleanup:f},l=s(e.right,t,i.state,i.tNode),n(o,t,l.state,l.tNode,function(){return i.cleanup(),l.cleanup()})},Binary:function(){var t;return t={"&&":function(t,n,r,o){var a,i,c,l,f;return a=s(t.left,n,r,o||!0),l=e(a.tNode),a.state.gotoIf(u(t),l,function(){return f},function(){return c}),f=a.state.branch(),i=s(t.right,n,f,l),i.state.goto(u(t),function(){return c}),c=a.state.branch(),{tNode:l,state:c,cleanup:function(){return a.cleanup(),i.cleanup()}}},"||":function(t,n,r,o){var a,i,c,l,f;return a=s(t.left,n,r,o||!0),l=e(a.tNode),a.state.gotoIf(u(t),l,function(){return c},function(){return f}),f=a.state.branch(),i=s(t.right,n,f,l),i.state.goto(u(t),function(){return c}),c=a.state.branch(),{tNode:l,state:c,cleanup:function(){return a.cleanup(),i.cleanup()}}}},function(e,r,o,a){var i,c;return A.call(t,e.op)?t[e.op](e,r,o,a):(i=s(e.left,r,o,!0),c=s(e.right,r,i.state,!1),n(a,r,c.state,function(){var t;return M.Binary(u(e),i.tNode(),(i.cleanup(),e.op),(t=c.tNode(),c.cleanup(),t))}))}}(),Block:function(e,t,n,r){var o,a,i,c,l;for(o=B(e.nodes),a=0,i=o.length;i>a;++a)if(l=o[a],c=s(l,t,n,a===i-1&&r),n=c.state,a===i-1)return c;throw Error("Unreachable state")},Call:function(e,t,r,o){var a,c,l,d,p,h;return l=s(e.func,t,r,!0),p=e.isApply,h=e.isNew,a=e.args,!p||a.length!==0&&a[0]instanceof P.Spread?(c=i(u(e),a,t,l.state),n(o,t,c.state,function(){var n,r;return r=l.tNode(),n=c.tNode(),l.cleanup(),c.cleanup(),p?M.Call(u(e),M.Access(u(e),r,"apply"),[M.Access(u(e),n,M.Const(u(e),0)),M.Call(u(e),M.Access(u(e),n,M.Const(u(e),"slice")),[M.Const(u(e),1)])]):h?(t.addHelper("__new"),M.Call(u(e),M.Access(u(e),M.Ident(u(e),"__new"),M.Const(u(e),"apply")),[r,n])):n instanceof M.Arr?M.Call(u(e),M.Access(u(e),r,"call"),[r instanceof M.Binary&&r.op==="."?r.left:M.Const(u(e),void 0)].concat(B(n.elements))):M.Call(u(e),M.Access(u(e),r,"apply"),[r instanceof M.Binary&&r.op==="."?r.left:M.Const(u(e),void 0),n])})):(d=a.length===0?{state:l.state,tNode:function(){return M.Const(u(e),void 0)},cleanup:f}:s(a[0],t,l.state,!0),c=i(u(e),C.call(a,1),t,d.state),n(o,t,c.state,function(){var t,n,r;return n=l.tNode(),r=d.tNode(),t=c.tNode(),l.cleanup(),d.cleanup(),c.cleanup(),t instanceof M.Arr?M.Call(u(e),M.Access(u(e),n,"call"),[r].concat(B(t.elements))):M.Call(u(e),M.Access(u(e),n,"apply"),[r,t])}))},EmbedWrite:function(e,t,r,o){var a;return a=s(e.text,t,r,!1),n(o,t,a.state,function(){return M.Call(u(e),M.Ident(u(e),"write"),[a.tNode()].concat(e.escape?[M.Const(u(e),!0)]:[]))},a.cleanup)},Eval:function(e,t,r,o){var a;return a=s(e.code,t,r,!1),n(o,t,a.state,function(){return M.Eval(u(e),a.tNode(),a.cleanup)})},If:function(e,t,r,i){var c,l,f,d,h,_,m,y,g,b;return h=s(e.test,t,r,r.hasGeneratorNode(e.test)),r=h.state,r.hasGeneratorNode(e.whenTrue)||r.hasGeneratorNode(e.whenFalse)?(r.gotoIf(u(e),function(){var e;return e=h.tNode(),h.cleanup(),e},function(){return b},function(){return g}),_=o(i,t,u(e)),b=r.branch(),f=s(e.whenTrue,t,b,_),f.state.goto(u(e.whenTrue),function(){return d}),g=r.branch(),l=s(e.whenFalse,t,g,_),l.state.goto(u(e.whenFalse),function(){return d}),d=r.branch(),c=a(i,t,_),{state:d,tNode:_,cleanup:function(){return f.cleanup(),l.cleanup(),c()}}):(y=p(e.whenTrue,t,"expression"),m=p(e.whenFalse,t,"expression"),n(i,t,r,function(){return M.If(u(e),h.tNode(),(h.cleanup(),y()),m())}))},Regexp:function(e,t,r,o){var a;return a=s(e.source,t,r,!1),n(o,t,r,function(){var t;return t=a.tNode(),t.isConst()?M.Regex(u(e),String(t.constValue()),e.flags):M.Call(u(e),M.Ident(u(e),"RegExp"),[t,M.Const(u(e),flags)])},a.cleanup)},TmpWrapper:function(e,t,r,o){var a;return a=s(e.node,t,r,!1),n(o,t,a.state,a.tNode,function(){var n,r,o;for(a.cleanup(),n=B(e.tmps),r=n.length;r--;)o=n[r],t.releaseTmp(o)})},Unary:function(e,t,r,o){var a;return a=s(e.node,t,r,!1),n(o,t,a.state,function(){var t;return M.Unary(u(e),e.op,(t=a.tNode(),a.cleanup(),t))})},Yield:function(e,t,r,o){var a;return a=s(e.node,t,r,!1),r=r.yield(u(e),a.tNode),n(o,t,r,function(){return r.builder.receivedIdent},a.cleanup)}},l={Block:function(e,t,n,r,o){var a,i,s,c,l;if(e.label!=null)throw Error("Not implemented: block with label in generator");for(c=n,a=B(e.nodes),i=0,s=a.length;s>i;++i)l=a[i],c=j(l,t,c,r,o);return c},Break:function(e,t,n,r){if(e.label!=null)throw Error("Not implemented: break with label in a generator");if(null==r)throw Error("break found outside of a loop or switch");return n.goto(u(e),r),n},Continue:function(e,t,n,r,o){if(e.label!=null)throw Error("Not implemented: break with label in a generator");if(null==o)throw Error("continue found outside of a loop");return n.goto(u(e),o),n},For:function(e,t,n){var r,o,a,i,c;if(e.label!=null)throw Error("Not implemented: for with label in generator");return e.init==null||e.init instanceof P.Nothing||(n=j(e.init,t,n)),n.goto(u(e),function(){return c}),c=n.branch(),o=s(e.test,t,c,n.hasGeneratorNode(e.test)),c.gotoIf(u(e.test),function(){var e;return e=o.tNode(),o.cleanup(),e},function(){return r},function(){return a}),r=n.branch(),j(e.body,t,r,function(){return a},function(){return i}).goto(u(e.body),function(){return i||c}),i=null,e.step==null||e.step instanceof P.Nothing||(i=n.branch(),j(e.step,t,i).goto(u(e.step),function(){return c})),a=n.branch()},ForIn:function(t,n,r){var o,a,i,c,l,f,d,h,_,m;if(t.label!=null)throw Error("Not implemented: for-in with label in generator");return m=p(t.key,n,"leftExpression"),i=s(t.object,n,r,!1),r=i.state,l=n.reserveIdent(u(t),"keys",q.string.array()),a=e(function(){var e;if(e=m(),!(e instanceof M.Ident))throw Error("Expected an Ident for a for-in key");return n.addVariable(e,q.string),e}),c=n.reserveIdent(u(t),"i",q.number),f=n.reserveIdent(u(t),"len",q.number),n.addHelper("__allkeys"),r=r.add(function(){var e;return M.Block(u(t),[M.Assign(u(t),l,M.Call(u(t),M.Ident(u(t),"__allkeys"),[(e=i.tNode(),i.cleanup(),e)])),M.Assign(u(t),c,0),M.Assign(u(t),f,M.Access(u(t),l,"length"))])}),r.goto(u(t),function(){return _}),_=r.branch(),_.gotoIf(u(t),function(){return M.Binary(u(t),c,"<",f)},function(){return o},function(){return d}),o=_.branch(),r=o.add(function(){return M.Assign(u(t),a(),M.Access(u(t),l,c))}),j(t.body,n,r,function(){return d},function(){return h}).goto(u(t.body),function(){return h}),h=o.branch(),h.add(function(){return M.Unary(u(t),"++",c)}).goto(u(t),function(){return _}),d=h.branch()},If:function(e,t,n,r,o){var a,i,c,l,f,d;return i=s(e.test,t,n,n.hasGeneratorNode(e.test)),n=i.state,n.hasGeneratorNode(e.whenTrue)||n.hasGeneratorNode(e.whenFalse)?(n.gotoIf(u(e),function(){var e;return e=i.tNode(),i.cleanup(),e},function(){return d||a},function(){return f||a}),!e.whenTrue||e.whenTrue instanceof P.Nothing||(d=n.branch()),d&&j(e.whenTrue,t,d,r,o).goto(u(e.whenTrue),function(){return a}),!e.whenFalse||e.whenFalse instanceof P.Nothing||(f=n.branch()),f&&j(e.whenFalse,t,f,r,o).goto(u(e.whenFalse),function(){return a}),a=n.branch()):(l=p(e.whenTrue,t,"statement"),c=p(e.whenFalse,t,"statement"),n.add(function(){return M.If(u(e),i.tNode(),(i.cleanup(),l()),c())}))},Return:function(e,t,n){var r,o;return o=u(e),e.node.isConst()&&e.node.constValue()===void 0?(n["return"](u(e)),n):(r=s(e.node,t,n,!1),n=r.state,n["return"](u(e),function(){var e;return e=r.tNode(),r.cleanup(),e}),n)},Switch:function(e,t,n,r,o){var a,i,c,l,f,d,h,_,m,y,g;if(e.label!=null)throw Error("Not implemented: switch with label in generator");for(_=s(e.node,t,n,!1),l=[],g=[],_.state.add(function(){return M.Switch(u(e),_.tNode(),function(){var e,t,n,r;for(e=[],t=0,n=g.length;n>t;++t)r=g[t],e.push(r());return e}(),d())}),_.state.add(function(){return M.Break(u(e))}),a=B(e.cases),m=0,c=a.length,i=function(e,r){var a,i,s,c;if(n.hasGeneratorNode(e.node))throw Error("Cannot use yield in the check of a switch's case");return s=p(e.node,t,"expression"),a=_.state.branch(),l[r]=a,i=j(e.body,t,a,function(){return y},o),i.goto(u(e.node),e.fallthrough?function(){return l[r+1]||y}:function(){return y}),c=a.makeGoto(u(e.node),function(){return a}),g.push(function(){return M.Switch.Case(u(e.node),s(),M.Block(u(e.node),[c(),M.Break(u(e.node))]))})};c>m;++m)i.call(this,a[m],m);return e.defaultCase!=null?(f=_.state.branch(),h=j(e.defaultCase,t,f,function(){return y},o),h.goto(u(e.defaultCase),function(){return y}),d=f.makeGoto(u(e.defaultCase),function(){return f})):d=_.state.makeGoto(u(e),function(){return y}),y=n.branch()},Throw:function(e,t,n){var r;return r=s(e.node,t,n,!1),r.state.add(function(){var t;return M.Throw(u(e),(t=r.tNode(),r.cleanup(),t))})},TmpWrapper:function(e,t,n,r,o){var a,i,s,c;for(s=j(e.node,t,n,r,o),a=B(e.tmps),i=a.length;i--;)c=a[i],t.releaseTmp(c);return s},TryCatch:function(e,t,n,r,o){var a;if(e.label!=null)throw Error("Not implemented: try-catch with label in generator");return n=n.enterTryCatch(u(e)),n=j(e.tryBody,t,n,r,o),n=n.exitTryCatch(u(e.tryBody),p(e.catchIdent,t,"leftExpression",!1),function(){return a}),n=j(e.catchBody,t,n,r,o),n.goto(u(e),function(){return a}),a=n.branch()},TryFinally:function(e,t,n,r,o){if(e.label!=null)throw Error("Not implemented: try-finally with label in generator");if(n.hasGeneratorNode(e.finallyBody))throw Error("Cannot use yield in a finally");return n=n.pendingFinally(u(e),p(e.finallyBody,t,"statement")),n=j(e.tryBody,t,n,r,o),n.runPendingFinally(u(e))},Yield:function(e,t,n){var r;return r=s(e.node,t,n,!1),n.yield(u(e),function(){var e;return e=r.tNode(),r.cleanup(),e})}},function(e,t,n,r,o){var a,i;if(!(e instanceof P))throw TypeError("Expected node to be a "+I(P)+", got "+T(e));if(!(t instanceof U))throw TypeError("Expected scope to be a "+I(U)+", got "+T(t));if(!(n instanceof O))throw TypeError("Expected state to be a "+I(O)+", got "+T(n));if(n.hasGeneratorNode(e)){if(a=e.constructor.cappedName,A.call(l,a)){if(i=l[a](e,t,n,r,o),!(i instanceof O))throw Error("Translated non-GeneratorState from "+T(e)+": "+T(i));return i}return i=s(e,t,n),i.state.add(function(){var e;return e=i.tNode(),i.cleanup(),e})}return n.add(p(e,t,"statement",!1))}}(),V={Access:function(e,t,n,r,o){var a,i;return i=p(e.parent,t,"expression",null,o),a=p(e.child,t,"expression",null,o),function(){return r(M.Access(u(e),i(),a()))}},Args:function(e,t,n,r){return function(){return r(M.Arguments(u(e)))}},Array:function(e,t,n,r,o){var a;return a=d(u(e),e.elements,t,!0,!1,o),function(){return r(a())}},Assign:function(e,t,n,r,o){var i,s,c;if(i=e.op,s=p(e.left,t,"leftExpression"),c=p(e.right,t,"expression",null,o),o&&e.left instanceof P.Ident){if("="===i&&o[e.left.name]&&e.right.isConst()&&e.right.constValue()===void 0)return function(){return M.Noop(u(e))};o[e.left.name]=!1}return function(){var o,l,f;return l=s(),f=c(),"="===i&&"topStatement"===n&&l instanceof M.Ident&&f instanceof M.Func&&f.name==null&&t.hasOwnVariable(l)&&!t.isVariableMutable(l)?(t.markAsFunction(l),o=M.Func(u(e),l,f.params,f.variables,f.body,f.declarations),r!==a?M.Block(u(e),[o,r(l)]):o):r(M.Binary(u(e),l,i,f))}},Binary:function(e,t,n,r,o){var a,i;return a=p(e.left,t,"expression",null,o),i=p(e.right,t,"expression",null,o),function(){return r(M.Binary(u(e),a(),e.op,i()))}},Block:function(e,t,n,r,o){var a,i;return a=e.label&&p(e.label,t,"label"),i=h(e.nodes,t,n,r,o),function(){return M.Block(u(e),function(){var e,t,n,r,o;for(e=[],t=B(i),n=0,r=t.length;r>n;++n)o=t[n],e.push(o());return e}(),"function"==typeof a?a():void 0)}},Break:function(e,t){var n;return n=e.label&&p(e.label,t,"label"),function(){return M.Break(u(e),"function"==typeof n?n():void 0)}},Call:function(e,t,n,r,o){var a,i,s,c,l,f;return l=p(e.func,t,"expression",null,o),i=e.isApply,s=e.isNew,a=e.args,!i||a.length!==0&&a[0]instanceof P.Spread?(c=d(u(e),a,t,!1,!0,o),function(){var n,o,a,f;return f=l(),a=c(),i?t.maybeCache(a,q.array,(n=!1,function(o,a){if(n)throw Error("Attempted to call function more than once");return n=!0,t.addHelper("__slice"),r(M.Call(u(e),M.Access(u(e),f,"apply"),[M.Access(u(e),o,0),M.Call(u(e),M.Access(u(e),M.Ident(u(e),"__slice"),"call"),[a,M.Const(u(e),1)])]))})):a instanceof M.Arr?r(M.Call(u(e),f,a.elements,s)):s?(t.addHelper("__new"),r(M.Call(u(e),M.Access(u(e),M.Ident(u(e),"__new"),M.Const(u(e),"apply")),[f,a]))):f instanceof M.Binary&&f.op==="."?t.maybeCache(f.left,q["function"],(o=!1,function(t,n){if(o)throw Error("Attempted to call function more than once");return o=!0,r(M.Call(u(e),M.Access(u(e),t,f.right,"apply"),[n,a]))})):r(M.Call(u(e),M.Access(u(e),f,"apply"),[M.Const(u(e),void 0),a]))}):(f=a.length===0?function(){return M.Const(u(e),void 0)}:p(a[0],t,"expression",null,o),c=d(u(e),C.call(a,1),t,!1,!0,o),function(){var t,n,o;return n=l(),o=f(),t=c(),t instanceof M.Arr?r(M.Call(u(e),M.Access(u(e),n,"call"),[o].concat(B(t.elements)))):r(M.Call(u(e),M.Access(u(e),n,"apply"),[o,t]))})},Comment:function(e){return function(){return M.Comment(u(e),e.text)}},Const:function(e,t,n,r){return function(){return r(M.Const(u(e),e.value))}},Continue:function(e,t){var n;return n=e.label&&p(e.label,t,"label"),function(){return M.Continue(u(e),"function"==typeof n?n():void 0)}},Debugger:function(e){return function(){return M.Debugger(u(e))}},Def:function(){throw Error("Cannot have a stray def")},EmbedWrite:function(e,t,n,r,o){var a;return a=p(e.text,t,"expression",null,o),function(){return M.Call(u(e),M.Ident(u(e),"write"),[a()].concat(e.escape?[M.Const(u(e),!0)]:[]))}},Eval:function(e,t,n,r,o){var a;return a=p(e.code,t,"expression",null,o),function(){return r(M.Eval(u(e),a()))}},For:function(e,t,n,r,o){var a,i,s,c,l;return s=e.label&&p(e.label,t,"label"),e.init!=null&&(i=p(e.init,t,"expression",null,o)),e.test!=null&&(l=p(e.test,t,"expression")),e.step!=null&&(c=p(e.step,t,"expression")),a=p(e.body,t,"statement"),function(){return M.For(u(e),"function"==typeof i?i():void 0,"function"==typeof l?l():void 0,"function"==typeof c?c():void 0,a(),"function"==typeof s?s():void 0)}},ForIn:function(e,t,n,r,o){var a,i,s,c;return s=e.label&&p(e.label,t,"label"),i=p(e.key,t,"leftExpression"),c=p(e.object,t,"expression",null,o),a=p(e.body,t,"statement"),function(){var n;if(n=i(),!(n instanceof M.Ident))throw Error("Expected an Ident for a for-in key");return t.addVariable(n,q.string),M.ForIn(u(e),n,c(),a(),"function"==typeof s?s():void 0)}},Function:function(){function e(e){if(!A.call(a,e.constructor.cappedName))throw Error("Unknown type: "+String(e.constructor.cappedName));return a[e.constructor.cappedName](e)}function t(e,t,n){var o;if(o=e.constructor.cappedName,!A.call(r,o))throw Error("Unknown parameter type: "+N(o));return r[o](e,t,n)}var n,r,o,a;return n={Boolean:"boolean",String:"string",Number:"number",Function:"function"},a={Ident:function(e){return A.call(n,e.name)?q[n[e.name]]:q.any},Access:function(){return q.any},TypeUnion:function(e){var t,r,o,a,i;for(a=q.none,t=B(e.types),r=0,o=t.length;o>r;++r)if(i=t[r],i instanceof P.Const)if(i.value===null)a=a.union(q["null"]);else{if(i.value!==void 0)throw Error("Unknown const value for typechecking: "+String(i.value));a=a.union(q.undefined)}else{if(!(i instanceof P.Ident))throw Error("Not implemented: typechecking for non-idents/consts within a type-union");a=a.union(A.call(n,i.name)?q[n[i.name]]:q.any)}return a},TypeFunction:function(){return q["function"]},TypeGeneric:function(t){return t.basetype.name==="Array"?e(t.args[0]).array():t.basetype.name==="Function"?q["function"]:q.any},TypeObject:function(t){var n,r,o,a,i,s,c;for(s={},n=B(t.pairs),r=0,o=n.length;o>r;++r)i=(a=n[r]).key,c=a.value,i instanceof P.Const&&(s[i.value]=e(c));return q.makeObject(s)}},r={Param:function(t,n){var r,o,a,i;if(r=p(t.ident,n,"param")(),o=[],r instanceof M.Binary&&r.op==="."&&r.right instanceof M.Const&&typeof r.right.value=="string"&&(a=M.Ident(r.pos,r.right.value),o.push(M.Binary(r.pos,r,"=",a)),r=a),!(r instanceof M.Ident))throw Error("Expecting param to be an Ident, got "+T(r));return t.asType&&(i=e(t.asType)),n.addVariable(r,i,t.isMutable),n.markAsParam(r),{init:o,ident:r,spread:!!t.spread}}},o=function(){var e;return e={Ident:function(){var e;return e={String:q.string,Number:q.number,Boolean:q.boolean,Function:q["function"],Array:q.array},function(t){if(!A.call(e,t.name))throw Error("Not implemented: custom type "+N(t.name));return e[t.name]}}(),Const:function(e){switch(e.value){case null:return q["null"];case void 0:return q.undefined;default:throw Error("Unexpected const type: "+String(e.value))}},TypeGeneric:function(e,t){var n,r,a,i,s,c,l;for(l=o(e.basetype,t),n=[],r=B(e.args),a=0,i=r.length;i>a;++a)s=r[a],n.push(o(s,t));return c=n,q.generic.apply(q,[l].concat(B(c)))},TypeUnion:function(e){var t,n,r,a,i;for(a=q.none,t=B(e.types),n=0,r=t.length;r>n;++n)i=t[n],a=a.union(o(i));return a}},function(t,n){if(!A.call(e,t.constructor.cappedName))throw Error("Unknown type to translate: "+String(t.constructor.cappedName));return e[t.constructor.cappedName](t,n)}}(),function(e,n,r,o){return function(){var r,a,i,s,c,l,f,d,h,_,m,y,g;for(f=n.clone(!!e.bound),y=f,e.generator&&!f.bound&&(f=f.clone(!0)),m=[],l=[],r=B(e.params),c=0,d=r.length;d>c;++c){if(h=r[c],_=t(h,f,!1),_.spread)throw Error("Encountered a spread parameter");m.push(_.ident),l.push.apply(l,B(_.init))}if(g={},e.generator?(i=F(u(e),f),j(e.body,f,i.start).goto(u(e),function(){return i.stop}),a=i.create()):a=p(e.body,f,"topStatement",e.autoReturn,g)(),f.releaseTmps(),a=M.Block(u(e.body),B(l).concat([a])),(f.usedThis||e.bound instanceof P)&&(e.bound instanceof P?(s=M.Ident(u(e.body),"_this"),f.addVariable(s),a=M.Block(u(e.body),[M.Assign(u(e.body),s,p(e.bound,n,"expression",null,g)()),a,M.Return(u(e.body),s)])):(f.bound&&(n.usedThis=!0),!f.hasBound&&!e.generator||y.bound||(s=M.Ident(u(e.body),"_this"),f.addVariable(s),a=M.Block(u(e.body),[M.Assign(u(e.body),s,M.This(u(e.body))),a])))),e.curry)throw Error("Expected node to already be curried");return o(M.Func(u(e),null,m,f.getVariables(),a,[]))}}}(),Ident:function(){var e;return e={Object:!0,String:!0,Number:!0,Boolean:!0,Function:!0,Array:!0,Math:!0,JSON:!0,Date:!0,RegExp:!0,Error:!0,RangeError:!0,ReferenceError:!0,SyntaxError:!0,TypeError:!0,URIError:!0,escape:!0,unescape:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0},function(t,n,r,o){var a;return a=t.name,n.addHelper(a),function(){var i;return i=M.Ident(u(t),a),!n.options.embedded||A.call(e,a)||"expression"!==r||n.hasVariable(i)||n.macros.hasHelper(a)?o(i):M.Access(u(t),M.Ident(u(t),"context"),M.Const(u(t),a))}}}(),If:function(e,t,n,r,o){var a,i,s,c,l;return a="statement"===n||"topStatement"===n?"statement":n,i=e.label&&p(e.label,t,"label"),s=p(e.test,t,"expression",null,o),l=p(e.whenTrue,t,a,r,o),e.whenFalse!=null&&(c=p(e.whenFalse,t,a,r,o)),function(){return M.If(u(e),s(),l(),"function"==typeof c?c():void 0,"function"==typeof i?i():void 0)}},Nothing:function(e){return function(){return M.Noop(u(e))
}},Object:function(e,t,n,r,o){var a,i,s,c,l,f,d,h;for(f=[],h=[],l=[],a=B(e.pairs),i=0,s=a.length;s>i;++i)c=a[i],f.push(p(c.key,t,"expression",null,o)),h.push(p(c.value,t,"expression",null,o)),l.push(c.property);return e.prototype!=null&&(d=p(e.prototype,t,"expression",null,o)),function(){var n,o,a,i,s,c,p,_,m,y,g,b,v,w,x,I,E;for(o=this,a=[],g=[],"function"==typeof d&&(v=d()),s=null!=v?g:a,m=null,c=0,n=f.length;n>c;++c)x=f[c],I=h[c],_=x(),E=I(),b=l[c],_ instanceof M.Const&&!b||(s=g),i=s[s.length-1],("get"===b||"set"===b)&&m&&b!==m&&_ instanceof M.Const&&i.key instanceof M.Const&&_.value===i.key.value?(i[m]=i.value,i.property=N(m)+N(b),delete i.value,i[b]=E,m=null):(s.push({key:_,value:E,property:b}),("get"===b||"set"===b)&&(m=b));return null!=v?(t.addHelper("__create"),y=M.Call(u(e),M.Ident(u(e),"__create"),[v])):y=M.Obj(u(e),function(){var e,t,n,r,o,i;for(e=[],t=0,n=a.length;n>t;++t)o=(r=a[t]).key,i=r.value,e.push(M.Obj.Pair(o.pos,String(o.value),i));return e}()),g.length===0?r(y):(p=t.reserveIdent(u(e),"o",q.object),w=M.BlockExpression(u(e),[M.Assign(u(e),p,y)].concat(function(){var e,n,r,a;for(e=[],r=0,a=g.length,n=function(e){var n,r;return n=e.key,r=e.property,r?(t.addHelper("__defProp"),M.Call(n.pos,M.Ident(n.pos,"__defProp"),[p,n,"property"===r?e.value:"getset"===r?M.Obj(e.get.pos,[M.Obj.Pair(e.get.pos,"get",e.get),M.Obj.Pair(e.set.pos,"set",e.set),M.Obj.Pair(e.set.pos,"configurable",M.Const(e.set.pos,!0)),M.Obj.Pair(e.set.pos,"enumerable",M.Const(e.set.pos,!0))]):"setget"===r?M.Obj(e.set.pos,[M.Obj.Pair(e.set.pos,"set",e.set),M.Obj.Pair(e.get.pos,"get",e.get),M.Obj.Pair(e.get.pos,"configurable",M.Const(e.get.pos,!0)),M.Obj.Pair(e.get.pos,"enumerable",M.Const(e.get.pos,!0))]):"get"===r?M.Obj(e.value.pos,[M.Obj.Pair(e.value.pos,"get",e.value),M.Obj.Pair(e.value.pos,"configurable",M.Const(e.value.pos,!0)),M.Obj.Pair(e.value.pos,"enumerable",M.Const(e.value.pos,!0))]):"set"===r?M.Obj(e.value.pos,[M.Obj.Pair(e.value.pos,"set",e.value),M.Obj.Pair(e.value.pos,"configurable",M.Const(e.value.pos,!0)),M.Obj.Pair(e.value.pos,"enumerable",M.Const(e.value.pos,!0))]):function(){throw Error("Unknown property type: "+String(r))}()])):M.Assign(n.pos,M.Access(n.pos,p,n),e.value)};a>r;++r)e.push(n.call(o,g[r]));return e}(),[p])),t.releaseIdent(p),r(w))}},Regexp:function(e,t,n,r,o){var a;return a=p(e.source,t,"expression",null,o),function(){var t,n;return n=a(),t=e.flags,n.isConst()?r(M.Regex(u(e),String(n.constValue()),t)):r(M.Call(u(e),M.Ident(u(e),"RegExp"),[n,M.Const(u(e),t)]))}},Return:function(e,t,n,r,o){var a;if("statement"!==n&&"topStatement"!==n)throw Error("Expected Return in statement position");return a=p(e.node,t,"expression",null,o),function(){return M.Return(u(e),a())}},Switch:function(e,t,n,r,o){var a,i,s,c,l,f,d,h,_;for(h=e.label&&p(e.label,t,"label"),_=p(e.node,t,"expression",null,o),a=[],i=B(e.cases),s=0,c=i.length;c>s;++s)l=i[s],a.push({pos:u(l.node),tNode:p(l.node,t,"expression",null,o),tBody:p(l.body,t,"statement",null,o),fallthrough:l.fallthrough});return f=a,e.defaultCase!=null&&(d=p(e.defaultCase,t,"statement",null,o)),function(){return M.Switch(u(e),_(),function(){var e,t,n,o,a,i;for(e=[],a=0,i=f.length;i>a;++a)t=f[a],o=t.tNode(),n=t.tBody(),(!t.fallthrough||a===i-1&&defaultCase.isNoop())&&(n=M.Block(t.pos,[r(n),M.Break(n.pos)])),e.push(M.Switch.Case(t.pos,o,n));return e}(),null!=d?r(d()):M.Noop(u(e)),"function"==typeof h?h():void 0)}},Super:function(){throw Error("Cannot have a stray super call")},Tmp:function(e,t,n,r){var o;return o=t.getTmp(u(e),e.id,e.name,e.type()),function(){return r(o)}},TmpWrapper:function(e,t,n,r,o){var a,i,s,c;for(c=p(e.node,t,n,r,o),a=B(e.tmps),i=a.length;i--;)s=a[i],t.releaseTmp(s);return c},This:function(e,t,n,r){return function(){return t.usedThis=!0,r(t.bound?M.Ident(u(e),"_this"):M.This(u(e)))}},Throw:function(e,t,n,r,o){var a;return a=p(e.node,t,"expression",null,o),function(){return M.Throw(u(e),a())}},TryCatch:function(e,t,n,r,o){var a,i,s,c,l;return c=e.label&&p(e.label,t,"label"),l=p(e.tryBody,t,"statement",r,o),a=t.clone(!1),s=p(e.catchIdent,a,"leftExpression"),i=p(e.catchBody,a,"statement",r,o),function(){var n,r;return n=s(),n instanceof M.Ident&&(a.addVariable(n),a.markAsParam(n)),r=M.TryCatch(u(e),l(),n,i(),"function"==typeof c?c():void 0),b(t.variables,a.variables),r}},TryFinally:function(e,t,n,r,o){var a,i,s;return i=e.label&&p(e.label,t,"label"),s=p(e.tryBody,t,"statement",r,o),a=p(e.finallyBody,t,"statement",null,o),function(){return M.TryFinally(u(e),s(),a(),"function"==typeof i?i():void 0)}},Unary:function(e,t,n,r,o){var a,i;return o&&((a=e.op)==="++"||"--"===a||"++post"===a||"--post"===a)&&e.node instanceof P.Ident&&(o[e.node.name]=!1),i=p(e.node,t,"expression",null,o),function(){return r(M.Unary(u(e),e.op,i()))}},Var:function(e,t,n,r,o){var a;return o&&e.ident instanceof P.Ident&&!A.call(o,e.ident.name)&&(o[e.ident.name]=!0),a=p(e.ident,t,"leftExpression",r),function(){var n;return n=a(),t.addVariable(n,q.any,e.isMutable),M.Noop(u(e))}}},e.exports=function(t,n,r,o){var a,i,s,c,l;if(!(n instanceof L))throw TypeError("Expected macros to be a "+I(L)+", got "+T(n));if(null==r&&(r={}),"function"==typeof r)return e.exports(t,n,null,r);l=(new Date).getTime();try{c=U(r,n,!1),i=_(t,c),c.releaseTmps()}catch(u){if(null!=o)return o(u);throw u}return a=(new Date).getTime(),typeof r.progress=="function"&&r.progress("translate",E(a)-E(l)),s={node:i,time:E(a)-E(l)},null!=o?o(null,s):s},e.exports.defineHelper=function(e,t,n,r,o){var a,i,s;if(!(e instanceof L))throw TypeError("Expected macros to be a "+I(L)+", got "+T(e));if(!(r instanceof q))throw TypeError("Expected type to be a "+I(q)+", got "+T(r));if(s=U({},e,!1),"string"==typeof t)i=M.Ident(l(0,0),t);else{if(!(t instanceof P.Ident))throw TypeError("Expecting name to be a String or Ident, got "+T(t));i=p(t,s,"leftExpression")()}if(!(i instanceof M.Ident))throw Error("Expected name to be an Ident, got "+T(i));if(n instanceof S)a=n;else{if(!(n instanceof P))throw TypeError("Expected value to be a parser or ast Node, got "+T(n));a=p(n,s,"expression")()}return null==o&&(o=s.getHelpers()),e.addHelper(i.name,a,r,o),{helper:a,dependencies:o}}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./gorilla"]=function(){var e={exports:this},n=this;return function(e){"use strict";function r(e){var t,n,r,o,a;for(o={parseTime:0,macroExpandTime:0,reduceTime:0,result:[]},t=h(e),n=0,r=t.length;r>n;++n)a=t[n],o.parseTime+=l(a.parseTime),o.macroExpandTime+=l(a.macroExpandTime),o.reduceTime+=l(a.reduceTime),o.result.push(a.result);return o}function o(n,r){var o,a,i,s,c,l,u,d,h,_,m,y,g;if("function"==typeof t&&(c=t("vm"))!=null&&(y=c.Script),y){if(m=y.createContext(),m.global=m.root=m.GLOBAL=m,r.sandbox!=null)if(r.sandbox instanceof m.constructor)m=r.sandbox;else{s=r.sandbox;for(d in s)f.call(s,d)&&(g=s[d],m[d]=g)}if(m.__filename=r.filename||"eval",m.__dirname=E.dirname(m.__filename),!m.module&&!m.require)for(h=t("module"),i=m.module=new h(r.modulename||"eval"),l=m.require=function(e){return h._load(e,i)},i.filename=m.__filename,o=Object.getOwnPropertyNames(t),a=o.length;a--;){_=o[a];try{l[_]=t[_]}catch(b){}}if(r.includeGlobals)for(d in e)!f.call(e,d)||d in m||(m[d]=e[d]);return y.runInContext(n,m)}return u=Function("return "+p(n)),u()}var a,s,c,l,u,f,d,p,h,_,m,y,g,b,v,w,x,I,E,A;a=function(e,t,n,r,o){function a(e,t){c||(--d,null!=e&&null==s&&(s=e),n&&null==s&&arguments.length>1&&f.push(t),p||i())}function i(){for(;!c&&null==s&&e>d&&++l<t;)++d,p=!0,r(l,u(a)),p=!1;c||null==s&&0!==d||(c=!0,null!=s?o(s):o(null,f))}var s,c,l,f,d,p;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+_(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+_(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+_(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+_(r));if("function"!=typeof o)throw TypeError("Expected onComplete to be a Function, got "+_(o));return f=n?[]:null,0>=t?o(null,f):((1>e||e!==e)&&(e=1/0),s=null,d=0,p=!1,c=!1,l=-1,i(),void 0)},s=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),c=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},l=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+_(e));return e},u=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+_(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+_(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),f=Object.prototype.hasOwnProperty,d=Array.prototype.slice,p=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+_(e))},h=function(e){if(null==e)throw TypeError("Expected an object, got "+_(e));return s(e)?e:"string"==typeof e?e.split(""):d.call(e)},_=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),I=t("./parser"),w=t("os"),b=t("fs"),E=t("path"),y="./jstranslator",n.version="0.6.2",t.extensions?t.extensions[".gs"]=function(e,t){var n;return n=m(b.readFileSync(t,"utf8"),{filename:t}),e._compile(n.code,t)}:t.registerExtension&&t.registerExtension(".gs",function(e){return compiler(e)}),g=function(){function e(e,t){for(;r.length>0;)r.shift()(e,t)}function t(t,n){var s,l;if("string"!=typeof t)throw TypeError("Expected lang to be a String, got "+_(t));if("function"!=typeof n)throw TypeError("Expected cb to be a Function, got "+_(n));return f.call(i,t)&&(l=i[t]),null!=l?n(null,l):(r.push(n),r.length>1?void 0:b.stat(a(t),(s=!1,function(n,r){var u;if(s)throw Error("Attempted to call function more than once");return s=!0,null!=n?e(n):b.stat(o(t),(u=!1,function(n,s){var f;if(u)throw Error("Attempted to call function more than once");return u=!0,null!=n&&n.code!=="ENOENT"?e(n,null):(f=s&&c(r.mtime.getTime(),s.mtime.getTime())?function(n){var r;return b.readFile(o(t),"utf8",(r=!1,function(a,s){var c,u;if(r)throw Error("Attempted to call function more than once");if(r=!0,null!=a)return e(a);c=!0;try{return i[t]=l=I.deserializePrelude(s)}catch(f){if(c=!1,f instanceof ReferenceError)throw f;return console.error("Error deserializing prelude, reloading. "+String(f)),b.unlink(o(t),(u=!1,function(t){if(u)throw Error("Attempted to call function more than once");return u=!0,null!=t?e(t):n()}))}finally{c&&e(null,l)}}))}:function(e){return e()},f(function(){var n;return b.readFile(a(t),"utf8",(n=!1,function(r,a){if(n)throw Error("Attempted to call function more than once");return n=!0,null!=r?e(r):(null==l&&(i[t]=l=I(a,null,{serializeMacros:!0}),b.writeFile(o(t),l.macros.serialize(),"utf8",function(e){if(null!=e)throw e})),e(null,l))}))}))}))})))}var r,o,a,i,s;return i={},r=[],"undefined"!=typeof __filename&&null!==__filename&&(s=b.realpathSync(__filename)),null!=s&&(a=function(e){return E.join(E.dirname(s),"../src/"+p(e)+"prelude.gs")}),null!=w&&(o=function(e){return E.join(w.tmpDir(),"gs-"+p(e)+"prelude.cache")}),t.serialized=function(e,n){var r;if("string"!=typeof e)throw TypeError("Expected lang to be a String, got "+_(e));if("function"!=typeof n)throw TypeError("Expected cb to be a Function, got "+_(n));return t(e,(r=!1,function(t){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=t?n(t):b.readFile(o(e),"utf8",n)}))},t.sync=function(e){var t,n,r,s,l;if("string"!=typeof e)throw TypeError("Expected lang to be a String, got "+_(e));if(f.call(i,e)&&(n=i[e]),null!=n)return n;if(l=b.statSync(a(e)),s=function(){try{return b.statSync(o(e))}catch(t){if(t.code!=="ENOENT")throw t}}(),s&&c(l.mtime.getTime(),s.mtime.getTime())){t=b.readFileSync(o(e),"utf8");try{n=i[e]=I.deserializePrelude(t)}catch(u){if(u instanceof ReferenceError)throw u;console.error("Error deserializing prelude, reloading. "+String(u)),b.unlinkSync(o(e))}}return null==n&&(r=b.readFileSync(a(e),"utf8"),n=i[e]=I(r,null,{serializeMacros:!0}),b.writeFile(o(e),n.macros.serialize(),"utf8",function(e){if(null!=e)throw e})),n},n.withPrelude=function(e,t){if("string"!=typeof e)throw TypeError("Expected lang to be a String, got "+_(e));if("object"!=typeof t||null===t)throw TypeError("Expected serializedPrelude to be an Object, got "+_(t));return i[e]=I.deserializePrelude(t),this},t}(),n.getSerializedPrelude=g.serialized,x=n.parse=function(e,t,n){var r,o;return null==t&&(t={}),"function"==typeof t?x(e,null,t):t.macros?I(e,t.macros,t,n):t.noPrelude?I(e,null,t,n):null!=n?g(t.lang||"js",(r=!1,function(o,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=o?n(o):I(e,a.macros,t,n)})):(o=g.sync(t.lang||"js"),I(e,o.macros,t,n))},n.getReservedWords=function(e){return null==e&&(e={}),e.noPrelude?I.getReservedWords(null,e):I.getReservedWords(g.sync(e.lang||"js").macros,e)},A=n.ast=function(e,n,o){var c,u,f;return null==n&&(n={}),"function"==typeof n?A(e,null,n):(u=(new Date).getTime(),f=typeof n.translator=="function"?n.translator:t(typeof n.translator=="string"?n.translator:y),c=null!=o?function(t){var i;return i=s(e)?function(t){return a(1,l(e.length),!0,function(t,r){var o;return o=e[t],s(n.filenames)&&(n.filename=n.filenames[t]),x(o,n,r)},function(e,n){return"undefined"!=typeof e&&null!==e?o(e):t(r(n))})}:function(t){var r;return x(e,n,(r=!1,function(e,n){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?o(e):t(n)}))},i(function(e){var r;return f(e.result,e.macros,n,(r=!1,function(n,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=n?o(n):t(e,a)}))})}:function(t){var o;return o=s(e)?r(function(){var t,r,o,a,c;for(t=[],r=h(e),o=0,a=r.length;a>o;++o)c=r[o],s(n.filenames)&&(n.filename=n.filenames[i]),t.push(x(c,n));return t}()):x(e,n),t(o,f(o.result,o.macros,n))},c(function(e,t){var n;return n={node:t.node,parseTime:e.parseTime,macroExpandTime:e.macroExpandTime,reduceTime:e.reduceTime,translateTime:t.time,time:l((new Date).getTime())-l(u)},null!=o?o(null,n):n}))},m=n.compile=function(e,t,n){var r,o;return null==t&&(t={}),"function"==typeof t?m(e,null,t):(o=(new Date).getTime(),r=null!=n?function(r){var o;return A(e,t,(o=!1,function(e,t){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=e?n(e):r(t)}))}:function(n){return n(A(e,t))},r(function(e){var r,a;return r=e.node.compile(t),a={parseTime:e.parseTime,macroExpandTime:e.macroExpandTime,reduceTime:e.reduceTime,translateTime:e.translateTime,compileTime:r.compileTime,uglifyTime:r.uglifyTime,time:l((new Date).getTime())-l(o),code:r.code},null!=n?n(null,a):a}))},n.eval=function(e,t,r){var a;return null==t&&(t={}),"function"==typeof t?n.eval(e,null,t):(t.eval=!0,t["return"]=!1,a=null!=r?function(n){var o;return m(e,t,(o=!1,function(e,t){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=e?r(e):n(t)}))}:function(n){return n(m(e,t))},a(function(e){var n,a;a=(new Date).getTime(),n=null;try{n=o(e.code,t)}catch(i){if(null!=r)return r(i);throw i}return typeof t.progress=="function"&&t.progress("eval",l((new Date).getTime())-l(a)),null!=r?r(null,n):n}))},n.run=function(e,r,o){var a,i,s;return null==r&&(r={}),"function"==typeof r?n.run(e,null,r):"undefined"==typeof process?(n.eval(e,r,null!=o?function(e){return o(e)}:void 0),void 0):(i=t.main,i.filename=process.argv[1]=r.filename?b.realpathSync(r.filename):".",i.moduleCache&&(i.moduleCache={}),process.binding("natives").module&&(s=t("module").Module,i.paths=s._nodeModulePaths(E.dirname(r.filename))),E.extname(i.filename)!==".gs"||t.extensions?(a=null!=o?function(t){var n;return m(e,r,(n=!1,function(e,r){if(n)throw Error("Attempted to call function more than once");return n=!0,null!=e?o(e):t(r)}))}:function(t){return t(m(e,r))},a(function(e){return i._compile(e.code,i.filename),"function"==typeof o?o():void 0})):(i._compile(e,i.filename),"function"==typeof o&&o()),void 0)},v=n.init=function(e,t){return null==e&&(e={}),"function"==typeof e?v(void 0,e):(null!=t?g(e.lang||"js",t):g.sync(e.lang||"js"),void 0)}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./browser"]=function(){var e={exports:this};return function(){"use strict";var e,n,r,o,a,i,s,c,l;e=function(e,t,n,r,a){function i(e,t){u||(--p,null!=e&&null==l&&(l=e),n&&null==l&&arguments.length>1&&d.push(t),h||c())}function c(){for(;!u&&null==l&&e>p&&++f<t;)++p,h=!0,r(f,o(i)),h=!1;u||null==l&&0!==p||(u=!0,null!=l?a(l):a(null,d))}var l,u,f,d,p,h;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+s(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+s(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+s(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+s(r));if("function"!=typeof a)throw TypeError("Expected onComplete to be a Function, got "+s(a));return d=n?[]:null,0>=t?a(null,d):((1>e||e!==e)&&(e=1/0),l=null,p=0,h=!1,u=!1,f=-1,c(),void 0)},n=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),r=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+s(e));return e},o=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+s(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+s(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),a=Array.prototype.slice,i=function(e){if(null==e)throw TypeError("Expected an object, got "+s(e));return n(e)?e:"string"==typeof e?e.split(""):a.call(e)},s=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),c=t("./gorilla"),c.require=t,"undefined"!=typeof window&&null!==window&&(c.load=function(e,t){var n;if("string"!=typeof e)throw TypeError("Expected url to be a String, got "+s(e));if("function"!=typeof t)throw TypeError("Expected callback to be a Function, got "+s(t));if(window.ActiveXObject)n=new window.ActiveXObject("Microsoft.XMLHTTP");else{if(!XMLHttpRequest)throw Error("Unable to create XMLHttpRequest");n=new XMLHttpRequest}return n.open("GET",e,!0),typeof n.overrideMimeType=="function"&&n.overrideMimeType("text/plain"),n.onreadystatechange=function(){var r;return n.readyState===4?(r=n.status)===0||200===r?c.run(n.responseText,t):t(Error("Could not load "+e)):void 0},n.send(null)},l=function(){var t;return t=document.getElementsByTagName("script"),e(1,r(t.length),!1,function(e,n){var r;return r=t[e],r.type==="text/gorillascript"?r.src?c.load(r.src,n):(c.run(r.innerHTML),n()):n()},function(){})},window.addEventListener?addEventListener("DOMContentLoaded",l,!1):attachEvent("onload",l))}.call(this),e.exports},t("./browser"),t("./gorilla").withPrelude("js",{syntax:[{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;body=macroData.body;return __node("Call",3,9,__node("Function",3,12,[],__wrap(body,2),true,true,false,void 0,false,[]),[],false,false);};}.call(this));',params:[["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"do",id:0},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["debugger"]();};}.call(this));',params:[["const",""]],names:"debugger",id:14},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var func,ident,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;ident=macroData.ident;func=macroData.func;this["let"](ident,false,this.type(func));return this.block([this["var"](ident,false),this.assign(ident,"=",func)]);};}.call(this));',params:[["ident","ident","ident","Identifier"],["ident","func","ident","FunctionDeclaration"]],names:"let",id:15},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,body,elseBody,elseIfs,macroData,macroName,test;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;function dec(x){return x - 1;};function f(i,current){return i>=0&&f(dec(i),_this["if"](elseIfs[i].test,elseIfs[i].body,current))||current;};return this["if"](macroName==="unless"&&__node("MacroAccess",80,40,3,80,{op:"not",node:__wrap(test,21)},"expression",false,false)||test,body,f(dec(elseIfs.length),elseBody));};}.call(this));',params:[["ident","test","ident","Logic"],["const","then"],["ident","body"],["ident","elseIfs","many","*","sequence",["const","else"],["const","if"],["ident","test","ident","Logic"],["const","then"],["ident","body"]],["ident","elseBody","many","?","sequence",["const","else"],["this"]]],names:["if","unless"],id:16},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,body,elseBody,elseIfs,macroData,macroName,test;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;function dec(x){return x - 1;};function f(i,current){if(i>=0){return f(dec(i),_this["if"](elseIfs[i].type==="unless"?__node("MacroAccess",85,80,3,85,{op:"not",node:__wrap(elseIfs[i].test,26)},"expression",false,false):elseIfs[i].test,elseIfs[i].body,current));}else{return current;}};return this["if"](macroName==="unless"?__node("MacroAccess",86,43,3,86,{op:"not",node:__wrap(test,24)},"expression",false,false):test,body,f(dec(elseIfs.length),elseBody));};}.call(this));',params:[["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseIfs","many","*","sequence",["const","\n"],["const","else"],["ident","type","choice",["const","if"],["const","unless"]],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:["if","unless"],id:17},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var label,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;if(this.position==="expression"){throw Error("continue can only be used in a statement position");}return this["continue"](label);};}.call(this));',params:[["ident","label","choice",["ident","Identifier"],["const",""]]],names:"continue",id:18},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var label,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;if(this.position==="expression"){throw Error("break can only be used in a statement position");}return this["break"](label);};}.call(this));',params:[["ident","label","choice",["ident","Identifier"],["const",""]]],names:"break",id:19},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,_this,declarable,handle,macroData,macroName,numRealElements,value;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;declarable=macroData.declarable;value=macroData.value;function inc(x){return x + 1;};declarable=this.macroExpand1(declarable);if(!declarable){throw Error("Unknown declarable: "+String(declarable));}if(declarable.type==="ident"){this["let"](declarable.ident,declarable.isMutable,declarable.asType?this.toType(declarable.asType):this.type(value));return this.block([this["var"](declarable.ident,declarable.isMutable),this.mutateLast(value||this.noop(),function(n){return _this.assign(declarable.ident,"=",n);},true)]);}else if(declarable.type==="array"){numRealElements=function(i,acc){if(i<declarable.elements.length){return numRealElements(inc(i),declarable.elements[i]?inc(acc):acc);}else{return acc;}};if(numRealElements(0,0)<=1){handle=function(i){if(i<declarable.elements.length){if(declarable.elements[i]){return _this.macroExpand1(__node("MacroAccess",205,34,38,205,{macroName:"let",macroData:{declarable:__node("MacroAccess",205,38,37,205,__node("MacroAccess",205,38,31,205,{ident:__wrap(declarable.elements[i],55)},"statement",false,false),"statement",false,false),value:__node("Access",205,66,__wrap(value,55),__wrap(i,55))}},"statement",false,false));}else{return handle(inc(i));}}else{return value;}};return handle(0);}else{return this.maybeCache(value,function(setValue,value){function handle(i,currentValue,block){if(i<declarable.elements.length){if(declarable.elements[i]){block.push(_this.macroExpand1(__node("MacroAccess",216,47,38,216,{macroName:"let",macroData:{declarable:__node("MacroAccess",216,51,37,216,__node("MacroAccess",216,51,31,216,{ident:__wrap(declarable.elements[i],58)},"statement",false,false),"statement",false,false),value:__node("Access",216,79,__wrap(currentValue,58),__wrap(i,58))}},"statement",false,false)));return handle(inc(i),value,block);}else{return handle(inc(i),currentValue,block);}}else{return _this.block(block);}};return handle(0,setValue,[]);});}}else if(declarable.type==="object"){if(declarable.pairs.length===1){handle=function(pair){return _this.macroExpand1(__node("MacroAccess",226,30,38,226,{macroName:"let",macroData:{declarable:__node("MacroAccess",226,34,37,226,__node("MacroAccess",226,34,31,226,{ident:__wrap(pair.value,60)},"statement",false,false),"statement",false,false),value:__node("Access",226,50,__wrap(value,60),__wrap(pair.key,60))}},"statement",false,false));};return handle(this.macroExpand1(declarable.pairs[0]));}else{return this.maybeCache(value,function(setValue,value){function handlePair(i,currentValue,pair,block){block.push(_this.macroExpand1(__node("MacroAccess",231,43,38,231,{macroName:"let",macroData:{declarable:__node("MacroAccess",231,47,37,231,__node("MacroAccess",231,47,31,231,{ident:__wrap(pair.value,63)},"statement",false,false),"statement",false,false),value:__node("Access",231,63,__wrap(currentValue,63),__wrap(pair.key,63))}},"statement",false,false)));return handle(inc(i),value,block);};function handle(i,currentValue,block){if(i<declarable.pairs.length){return handlePair(i,currentValue,_this.macroExpand1(declarable.pairs[i]),block);}else{return _this.block(block);}};return handle(0,setValue,[]);});}}else{throw Error("Unknown declarable "+String(declarable)+" "+String(declarable!=null&&(_ref=declarable.constructor)!=null?_ref.name:void 0));}};}.call(this));',params:[["ident","declarable","ident","Declarable"],["const","="],["ident","value","ident","ExpressionOrAssignment"]],names:"let",id:38},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(node){return this.mutateLast(node||this.noop(),function(n){return _this["return"](n);},true);}else{return this["return"]();}};}.call(this));',params:[["ident","node","many","?","ident","Expression"]],names:"return",id:39},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",254,11,17,254,{macroName:"if",macroData:{test:__node("MacroAccess",254,13,20,254,{op:"?",node:__wrap(setN,70)},"statement",false,false),body:__node("MacroAccess",255,13,39,255,{macroName:"return",macroData:{node:__wrap(n,70)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"return?",id:40},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"boolean")){return __node("MacroAccess",262,11,17,262,{macroName:"if",macroData:{test:__wrap(n,72),body:__node("MacroAccess",263,13,39,263,{macroName:"return",macroData:{node:__node("Const",263,19,true)}},"statement",false,false),elseIfs:[]}},"statement",false,false);}else{return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",267,13,17,267,{macroName:"if",macroData:{test:__wrap(setN,73),body:__node("MacroAccess",268,15,39,268,{macroName:"return",macroData:{node:__wrap(n,73)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});}},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"returnif",id:41},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"boolean")){return __node("MacroAccess",275,11,17,275,{macroName:"unless",macroData:{test:__wrap(n,75),body:__node("MacroAccess",276,13,39,276,{macroName:"return",macroData:{node:__node("Const",276,19,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false);}else{return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",280,13,17,280,{macroName:"unless",macroData:{test:__wrap(setN,76),body:__node("MacroAccess",281,15,39,281,{macroName:"return",macroData:{node:__wrap(n,76)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});}},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"returnunless",id:42},{code:'return (function(){"use strict";var __lt,__num,__typeof;__lt=function(x,y){var type;type=typeof x;if(type!=="number"&&type!=="string"){throw TypeError("Cannot compare a non-number/string: "+type);}else if(type!==typeof y){throw TypeError("Cannot compare elements of different types: "+type+" vs "+typeof y);}else{return x<y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _this,body,f,locals,macroData,macroName,params,values;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;locals=macroData.locals;body=macroData.body;params=[];values=[];if(locals){if(locals.ident){params.push(this.param(locals.ident));values.push(locals.value);}f=function(i){if(__lt(i,locals.rest.length)){if(locals.rest[i].ident){params.push(_this.param(locals.rest[i].ident));values.push(locals.rest[i].value);}return f(__num(i)+1);}};f(0);}return this.call(this.func(params,body,true,true),values);};}.call(this));',params:[["ident","locals","many","?","sequence",["ident","ident","ident","Identifier"],["const","="],["ident","value"],["ident","rest","many","*","sequence",["const",","],["ident","ident","ident","Identifier"],["const","="],["ident","value"]]],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"do",id:102},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,func,macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;body=macroData.body;func=__node("Function",925,22,[],__wrap(body,212),true,false,false,void 0,false,[]);return __node("Call",926,9,__wrap(func,210),[__wrap(node,210)],false,true);};}.call(this));',params:[["ident","node","ident","Expression"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"with",id:103},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var arr,body,elseBody,init,loop,macroData,macroName,reducer,runElse,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;init=macroData.init;test=macroData.test;step=macroData.step;body=macroData.body;elseBody=macroData.elseBody;if(init==null){init=this.noop();}if(test==null){test=__node("Const",975,17,true);}if(step==null){step=this.noop();}if(reducer){if(reducer==="first"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",979,62,39,979,{macroName:"return",macroData:{node:__wrap(node,222)}},"statement",false,false);});loop=this["for"](init,test,step,body);return __node("MacroAccess",981,13,0,981,{macroName:"do",macroData:{body:__node("Block",982,1,[__wrap(loop,221),__wrap(elseBody,221)],null)}},"expression",false,false);}else{if(elseBody){throw Error("Cannot use a for loop with an else with "+__strnum(reducer));}if(reducer==="some"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",989,13,17,989,{macroName:"if",macroData:{test:__wrap(node,224),body:__node("MacroAccess",990,15,39,990,{macroName:"return",macroData:{node:__node("Const",990,21,true)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});loop=[this["for"](init,test,step,body),__node("MacroAccess",991,57,39,991,{macroName:"return",macroData:{node:__node("Const",991,64,false)}},"statement",false,false)];return __node("MacroAccess",992,15,0,992,{macroName:"do",macroData:{body:__wrap(loop,221)}},"expression",false,false);}else if(reducer==="every"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",996,13,17,996,{macroName:"if",macroData:{test:__node("MacroAccess",996,15,3,996,{op:"not",node:__wrap(node,226)},"statement",false,false),body:__node("MacroAccess",997,15,39,997,{macroName:"return",macroData:{node:__node("Const",997,21,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});loop=[this["for"](init,test,step,body),__node("MacroAccess",998,57,39,998,{macroName:"return",macroData:{node:__node("Const",998,64,true)}},"statement",false,false)];return __node("MacroAccess",999,15,0,999,{macroName:"do",macroData:{body:__wrap(loop,221)}},"expression",false,false);}else{throw Error("Unknown reducer: "+__strnum(reducer));}}}else if(elseBody){if(this.position==="expression"){throw Error("Cannot use a for loop with an else as an expression");}runElse=this.tmp("else",false,"boolean");body=__node("Block",1008,1,[__node("MacroAccess",1008,9,30,1008,{left:__wrap(runElse,221),op:":=",right:__node("Const",1008,21,false)},"statement",false,false),__wrap(body,221)],null);init=__node("Block",1011,1,[__node("MacroAccess",1011,9,30,1011,{left:__wrap(runElse,221),op:":=",right:__node("Const",1011,21,true)},"statement",false,false),__wrap(init,221)],null);loop=this["for"](init,test,step,body);return __node("Block",1015,1,[__wrap(loop,221),__node("MacroAccess",1016,9,17,1016,{macroName:"if",macroData:{test:__wrap(runElse,221),body:__wrap(elseBody,221),elseIfs:[]}},"statement",false,false)],null);}else if(this.position==="expression"){arr=this.tmp("arr",false,this.type(body).array());body=this.mutateLast(body||this.noop(),function(node){return __node("Call",1020,61,__node("Access",1020,61,__wrap(arr,231),__node("Const",1020,67,"push")),[__wrap(node,231)],false,false);});init=__node("Block",1022,1,[__node("MacroAccess",1022,9,30,1022,{left:__wrap(arr,221),op:":=",right:__node("Array",1022,16,[])},"statement",false,false),__wrap(init,221)],null);loop=this["for"](init,test,step,body);return __node("Block",1026,1,[__wrap(loop,221),__wrap(arr,221)],null);}else{return this["for"](init,test,step,body);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","init","choice",["ident","ExpressionOrAssignment"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","ExpressionOrAssignment"],["const",""]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:104},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,current,currentStart,init,macroData,macroName,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;init=macroData.init;test=macroData.test;step=macroData.step;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;if(init==null){init=this.noop();}if(test==null){test=__node("Const",1033,17,true);}if(step==null){step=this.noop();}body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1036,59,30,1036,{left:__wrap(current,234),op:":=",right:__wrap(node,234)},"expression",false,false);});return __node("Block",1038,1,[__node("MacroAccess",1038,7,38,1038,{macroName:"let",macroData:{declarable:__node("MacroAccess",1038,10,37,1038,__node("MacroAccess",1038,10,31,1038,{isMutable:"mutable",ident:__wrap(current,233)},"statement",false,false),"statement",false,false),value:__wrap(currentStart,233)}},"statement",false,false),__node("MacroAccess",1039,7,104,1039,{macroName:"for",macroData:{init:__wrap(init,233),test:__wrap(test,233),step:__wrap(step,233),body:__wrap(body,233)}},"statement",false,false),__wrap(current,233)],null);};}.call(this));',params:[["const","reduce"],["ident","init","choice",["ident","Expression"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","Statement"],["const",""]],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:105},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,elseBody,macroData,macroName,reducer,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;test=macroData.test;step=macroData.step;body=macroData.body;elseBody=macroData.elseBody;if(macroName==="until"){test=__node("MacroAccess",1046,19,3,1046,{op:"not",node:__wrap(test,235)},"expression",false,false);}if(reducer==="every"){return __node("MacroAccess",1049,11,104,1049,{macroName:"for",macroData:{reducer:"every",test:__wrap(test,235),step:__wrap(step,235),body:__wrap(body,235),elseBody:__wrap(elseBody,235)}},"expression",false,false);}else if(reducer==="some"){return __node("MacroAccess",1054,11,104,1054,{macroName:"for",macroData:{reducer:"some",test:__wrap(test,235),step:__wrap(step,235),body:__wrap(body,235),elseBody:__wrap(elseBody,235)}},"expression",false,false);}else if(reducer==="first"){return __node("MacroAccess",1059,11,104,1059,{macroName:"for",macroData:{reducer:"first",test:__wrap(test,235),step:__wrap(step,235),body:__wrap(body,235),elseBody:__wrap(elseBody,235)}},"expression",false,false);}else if(this.position==="expression"){return __node("MacroAccess",1064,11,104,1064,{macroName:"for",macroData:{test:__wrap(test,235),step:__wrap(step,235),body:__wrap(body,235),elseBody:__wrap(elseBody,235)}},"expression",false,false);}else{return __node("MacroAccess",1070,9,104,1070,{macroName:"for",macroData:{test:__wrap(test,235),step:__wrap(step,235),body:__wrap(body,235),elseBody:__wrap(elseBody,235)}},"statement",false,false);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","ExpressionOrAssignment"]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:["while","until"],id:106},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,current,currentStart,macroData,macroName,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;step=macroData.step;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;if(macroName==="until"){test=__node("MacroAccess",1077,19,3,1077,{op:"not",node:__wrap(test,236)},"expression",false,false);}return __node("MacroAccess",1080,7,105,1080,{macroName:"for",macroData:{test:__wrap(test,236),step:__wrap(step,236),current:__wrap(current,236),currentStart:__wrap(currentStart,236),body:__wrap(body,236)}},"statement",false,false);};}.call(this));',params:[["const","reduce"],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","ExpressionOrAssignment"]],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:["while","until"],id:107},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _ref,_ref2,args,array,body,elseBody,end,func,hasIndex,hasLength,inclusive,increment,index,init,isString,length,letIndex,letLength,letValue,macroData,macroName,reducer,start,step,test,tmp,value,valueExpr,valueIdent;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;elseBody=macroData.elseBody;value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__toArray"&&!this.callIsApply(array)){array=this.callArgs(array)[0];}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){throw Error("Cannot assign a number to a complex declarable");}value=value.ident;start=(_ref=this.callArgs(array))[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];init=[];if(this.isConst(start)){if(typeof this.value(start)!=="number"){throw Error("Cannot start with a non-number: #(@value start)");}}else{start=__node("MacroAccess",1139,22,58,1139,{op:"+",node:__wrap(start,245)},"expression",false,false);}init.push(this.macroExpandAll(__node("MacroAccess",1140,38,38,1140,{macroName:"let",macroData:{declarable:__node("MacroAccess",1140,42,37,1140,__node("MacroAccess",1140,42,31,1140,{isMutable:"mutable",ident:__wrap(value,245)},"statement",false,false),"statement",false,false),value:__wrap(start,245)}},"statement",false,false)));if(this.isConst(end)){if(typeof this.value(end)!=="number"){throw Error("Cannot end with a non-number: #(@value start)");}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",1146,28,58,1146,{op:"+",node:__wrap(end,245)},"expression",false,false),init,"end",false);}else{init.push(__node("MacroAccess",1148,23,58,1148,{op:"+",node:__wrap(end,245)},"expression",false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){throw Error("Cannot step with a non-number: #(@value step)");}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",1154,29,58,1154,{op:"+",node:__wrap(step,245)},"expression",false,false),init,"step",false);}else{init.push(__node("MacroAccess",1156,23,58,1156,{op:"+",node:__wrap(step,245)},"expression",false,false));}if(this.isComplex(inclusive)){inclusive=this.cache(__wrap(inclusive,245),init,"incl",false);}if(this.isConst(step)){if(__num(this.value(step))>0){if(this.isConst(end)&&this.value(end)===1/0){test=__node("Const",1164,17,true);}else{test=__node("MacroAccess",1166,17,16,1166,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1166,36,9,1166,{left:__wrap(value,245),inverted:false,op:"~<=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1166,57,9,1166,{left:__wrap(value,245),inverted:false,op:"~<",right:__wrap(end,245)},"expression",false,false)}},"expression",false,false);}}else if(this.isConst(end)&&this.value(end)===-1/0){test=__node("Const",1169,17,true);}else{test=__node("MacroAccess",1171,17,16,1171,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1171,36,10,1171,{left:__wrap(value,245),inverted:false,op:"~>=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1171,57,10,1171,{left:__wrap(value,245),inverted:false,op:"~>",right:__wrap(end,245)},"expression",false,false)}},"expression",false,false);}}else{test=__node("MacroAccess",1173,13,17,1173,{macroName:"if",macroData:{test:__node("MacroAccess",1173,16,10,1173,{left:__wrap(step,245),inverted:false,op:"~>",right:__node("Const",1173,26,0)},"expression",false,false),body:__node("MacroAccess",1174,11,16,1174,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1174,29,9,1174,{left:__wrap(value,245),inverted:false,op:"~<=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1174,50,9,1174,{left:__wrap(value,245),inverted:false,op:"~<",right:__wrap(end,245)},"expression",false,false)}},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",1176,11,16,1176,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1176,29,10,1176,{left:__wrap(value,245),inverted:false,op:"~>=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1176,50,10,1176,{left:__wrap(value,245),inverted:false,op:"~>",right:__wrap(end,245)},"expression",false,false)}},"statement",false,false)}},"expression",false,false);}increment=__node("MacroAccess",1178,35,52,1178,{left:__wrap(value,245),op:"~+=",right:__wrap(step,245)},"expression",false,false);if(length){init.push(this.macroExpandAll(__node("MacroAccess",1181,40,38,1181,{macroName:"let",macroData:{declarable:__node("MacroAccess",1181,44,37,1181,__node("MacroAccess",1181,44,31,1181,{ident:__wrap(length,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1181,54,17,1181,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1182,11,45,1182,{left:__node("MacroAccess",1182,12,49,1182,{left:__node("MacroAccess",1182,12,49,1182,{left:__wrap(end,245),inverted:false,op:"~-",right:__wrap(start,245)},"expression",false,false),inverted:false,op:"~+",right:__wrap(step,245)},"expression",false,false),inverted:false,op:"~\\\\",right:__wrap(step,245)},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",1184,11,45,1184,{left:__node("MacroAccess",1184,12,49,1184,{left:__wrap(end,245),inverted:false,op:"~-",right:__wrap(start,245)},"expression",false,false),inverted:false,op:"~\\\\",right:__wrap(step,245)},"statement",false,false)}},"expression",false,false)}},"statement",false,false)));}if(index){init.push(this.macroExpandAll(__node("MacroAccess",1187,40,38,1187,{macroName:"let",macroData:{declarable:__node("MacroAccess",1187,44,37,1187,__node("MacroAccess",1187,44,31,1187,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("Const",1187,62,0)}},"statement",false,false)));increment=__node("Block",1189,1,[__wrap(increment,245),__node("MacroAccess",1190,11,101,1190,{left:__wrap(index,245),op:"+=",right:__node("Const",1190,21,1)},"statement",false,false)],null);if(this.hasFunc(body)){func=this.tmp("f",false,"function");init.push(__node("MacroAccess",1193,25,38,1193,{macroName:"let",macroData:{declarable:__node("MacroAccess",1193,29,37,1193,__node("MacroAccess",1193,29,31,1193,{ident:__wrap(func,245)},"statement",false,false),"statement",false,false),value:__node("Function",1193,39,[__node("Param",1193,40,__wrap(value,251),void 0,false,false,void 0),__node("Param",1193,47,__wrap(index,251),void 0,false,false,void 0)],__wrap(body,251),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1194,24,__wrap(func,245),[__node("This",1194,32),__wrap(value,245),__wrap(index,245)],false,true);}}else if(this.hasFunc(body)){func=this.tmp("f",false,"function");init.push(__node("MacroAccess",1197,23,38,1197,{macroName:"let",macroData:{declarable:__node("MacroAccess",1197,27,37,1197,__node("MacroAccess",1197,27,31,1197,{ident:__wrap(func,245)},"statement",false,false),"statement",false,false),value:__node("Function",1197,37,[__node("Param",1197,38,__wrap(value,254),void 0,false,false,void 0)],__wrap(body,254),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1198,22,__wrap(func,245),[__node("This",1198,30),__wrap(value,245)],false,true);}if(reducer==="every"){return __node("MacroAccess",1201,13,104,1201,{macroName:"for",macroData:{reducer:"every",init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(reducer==="some"){return __node("MacroAccess",1206,13,104,1206,{macroName:"for",macroData:{reducer:"some",init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(reducer==="first"){return __node("MacroAccess",1211,13,104,1211,{macroName:"for",macroData:{reducer:"first",init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",1217,14,17,1217,{macroName:"if",macroData:{test:__wrap(node,255),body:__wrap(value,255),elseIfs:[]}},"statement",false,false);});return __node("MacroAccess",1219,13,104,1219,{macroName:"for",macroData:{init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(this.position==="expression"){return __node("MacroAccess",1224,13,104,1224,{macroName:"for",macroData:{init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else{return __node("MacroAccess",1230,11,104,1230,{macroName:"for",macroData:{init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"statement",false,false);}}else{init=[];isString=this.isType(array,"string");hasIndex=index!=null;if(index==null){index=this.tmp("i",false,"number");}hasLength=length!=null;if(length==null){length=this.tmp("len",false,"number");}this.macroExpandAll(__node("MacroAccess",1243,28,38,1243,{macroName:"let",macroData:{declarable:__node("MacroAccess",1243,32,37,1243,__node("MacroAccess",1243,32,31,1243,{ident:__wrap(length,245)},"statement",false,false),"statement",false,false),value:__node("Const",1243,43,0)}},"statement",false,false));array=this.macroExpandAll(array);step=__node("Const",1247,31,1);start=__node("Const",1248,32,0);end=__node("Const",1249,29,1/0);inclusive=__node("Const",1250,35,false);if(this.isCall(array)&&this.isIdent(this.callFunc(array))){if(this.name(this.callFunc(array))==="__step"&&!this.callIsApply(array)){args=this.callArgs(array);array=args[0];step=args[1];if(this.isConst(step)){if(__num(this.value(step))>=0){start=__node("Const",1258,29,0);end=__node("Const",1259,26,1/0);}else{start=__node("Const",1261,28,1/0);end=__node("Const",1262,27,0);}}else{start=void 0;end=void 0;}inclusive=__node("Const",1266,28,true);}else if(this.name(this.callFunc(array))==="__slice"&&this.callIsApply(array)){args=this.callArgs(array);array=args[0];start=args[1];end=args[2];if(this.isConst(end)&&this.value(end)===void 0){end=__node("Const",1273,24,1/0);}}else if(this.name(this.callFunc(array))==="__sliceStep"&&!this.callIsApply(array)){args=this.callArgs(array);array=args[0];start=args[1];end=args[2];step=args[3];inclusive=args[4];}}if(this.isConst(step)){if(typeof this.value(step)!=="number"||__num(this.value(step))%1!==0){throw Error("Expected step to be an integer, got "+__typeof(this.value(step))+" ("+String(this.value(step))+")");}else if(this.value(step)===0){throw Error("Step must be non-zero");}}if(start&&this.isConst(start)&&this.value(start)!==1/0&&(typeof this.value(start)!=="number"||__num(this.value(start))%1!==0)){throw Error("Expected start to be an integer, got "+__typeof(this.value(start))+" ("+String(this.value(start))+")");}if(end&&this.isConst(end)&&this.value(end)!==1/0&&(typeof this.value(end)!=="number"||__num(this.value(end))%1!==0)){throw Error("Expected end to be an integer or Infinity, got "+__typeof(this.value(end))+" ("+String(this.value(end))+")");}if(!isString&&!this.isType(array,"arrayLike")){array=__node("Call",1292,22,__node("Ident",1292,22,"__toArray"),[__wrap(array,245)],false,false);}array=this.cache(array,init,isString?"str":"arr",false);valueExpr=__node("MacroAccess",1295,28,16,1295,{macroName:"if",macroData:{test:__wrap(isString,245),body:__node("Call",1295,47,__node("Access",1295,47,__wrap(array,245),__node("Const",1295,55,"charAt")),[__wrap(index,245)],false,false),elseIfs:[],elseBody:__node("Access",1295,75,__wrap(array,245),__wrap(index,245))}},"expression",false,false);letIndex=this.macroExpandAll(__node("MacroAccess",1296,44,38,1296,{macroName:"let",macroData:{declarable:__node("MacroAccess",1296,48,37,1296,__node("MacroAccess",1296,48,31,1296,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("Const",1296,66,0)}},"statement",false,false));if(value&&value.type==="ident"&&!value.isMutable){valueIdent=value.ident;}else{valueIdent=this.tmp("v",false);}letValue=this.macroExpandAll(__node("MacroAccess",1298,44,38,1298,{macroName:"let",macroData:{declarable:__node("MacroAccess",1298,48,37,1298,__node("MacroAccess",1298,48,31,1298,{ident:__wrap(value,245)},"statement",false,false),"statement",false,false),value:__wrap(valueExpr,245)}},"statement",false,false));letLength=this.macroExpandAll(__node("MacroAccess",1299,45,38,1299,{macroName:"let",macroData:{declarable:__node("MacroAccess",1299,49,37,1299,__node("MacroAccess",1299,49,31,1299,{ident:__wrap(length,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1299,59,58,1299,{op:"+",node:__node("Access",1299,61,__wrap(array,245),__node("Const",1299,68,"length"))},"expression",false,false)}},"statement",false,false));test=(_ref=this.isConst(step)?__num(this.value(step))>0?(this.isConst(start)?__num(this.value(start))>=0?(init.push(__node("MacroAccess",1305,28,38,1305,{macroName:"let",macroData:{declarable:__node("MacroAccess",1305,32,37,1305,__node("MacroAccess",1305,32,31,1305,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__wrap(start,245)}},"statement",false,false)),init.push(letLength)):(init.push(letLength),init.push(__node("MacroAccess",1309,28,38,1309,{macroName:"let",macroData:{declarable:__node("MacroAccess",1309,32,37,1309,__node("MacroAccess",1309,32,31,1309,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1309,49,64,1309,{left:__wrap(length,245),inverted:false,op:"+",right:__wrap(start,245)},"expression",false,false)}},"statement",false,false))):(init.push(letLength),init.push(__node("MacroAccess",1312,26,38,1312,{macroName:"let",macroData:{declarable:__node("MacroAccess",1312,30,37,1312,__node("MacroAccess",1312,30,31,1312,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("Call",1312,47,__node("Ident",1312,47,"__int"),[__wrap(start,245)],false,false)}},"statement",false,false)),init.push(__node("MacroAccess",1313,27,16,1313,{macroName:"if",macroData:{test:__node("MacroAccess",1313,30,9,1313,{left:__wrap(index,245),inverted:false,op:"~<",right:__node("Const",1313,41,0)},"expression",false,false),body:__node("MacroAccess",1313,49,101,1313,{left:__wrap(index,245),op:"+=",right:__wrap(length,245)},"expression",false,false),elseIfs:[]}},"expression",false,false))),this.isConst(end)&&(this.value(end)===1/0||this.isConst(inclusive)&&this.value(inclusive)&&this.value(end)===-1)?[__node("MacroAccess",1315,18,9,1315,{left:__wrap(index,245),inverted:false,op:"~<",right:__wrap(length,245)},"expression",false,false),__node("MacroAccess",1315,44,52,1315,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)]:(tmp=this.tmp("end",false,"number"),init.push(__node("MacroAccess",1318,26,38,1318,{macroName:"let",macroData:{declarable:__node("MacroAccess",1318,30,37,1318,__node("MacroAccess",1318,30,31,1318,{isMutable:"mutable",ident:__wrap(tmp,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1318,45,58,1318,{op:"+",node:__wrap(end,245)},"expression",false,false)}},"statement",false,false)),!this.isConst(end)?init.push(__node("MacroAccess",1320,29,16,1320,{macroName:"if",macroData:{test:__node("MacroAccess",1320,32,9,1320,{left:__wrap(tmp,245),inverted:false,op:"~<",right:__node("Const",1320,41,0)},"expression",false,false),body:__node("MacroAccess",1320,49,52,1320,{left:__wrap(tmp,245),op:"~+=",right:__wrap(length,245)},"expression",false,false),elseIfs:[]}},"expression",false,false)):__num(this.value(end))<0?init.push(__node("MacroAccess",1322,29,52,1322,{left:__wrap(tmp,245),op:"~+=",right:__wrap(length,245)},"expression",false,false)):void 0,init.push(__node("MacroAccess",1323,27,16,1323,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1323,48,30,1323,{left:__wrap(tmp,245),op:":=",right:__node("MacroAccess",1323,55,2,1323,{left:__node("MacroAccess",1323,55,64,1323,{left:__wrap(tmp,245),inverted:false,op:"+",right:__node("Const",1323,63,1)},"expression",false,false),inverted:false,op:"or",right:__node("Const",1323,67,1/0)},"expression",false,false)},"expression",false,false),elseIfs:[]}},"expression",false,false)),init.push(__node("MacroAccess",1324,27,84,1324,{left:__wrap(tmp,245),op:"~min=",right:__wrap(length,245)},"expression",false,false)),[__node("MacroAccess",1325,18,9,1325,{left:__wrap(index,245),inverted:false,op:"~<",right:__wrap(tmp,245)},"expression",false,false),__node("MacroAccess",1325,39,52,1325,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)])):this.value(step)===-1&&(!start||this.isConst(start)&&((_ref2=this.value(start))===-1||_ref2===1/0)&&this.isConst(end)&&this.value(end)===0&&this.isConst(inclusive)&&this.value(inclusive))?(hasLength?(init.push(letLength),init.push(__node("MacroAccess",1329,26,38,1329,{macroName:"let",macroData:{declarable:__node("MacroAccess",1329,30,37,1329,__node("MacroAccess",1329,30,31,1329,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__wrap(length,245)}},"statement",false,false))):init.push(__node("MacroAccess",1331,26,38,1331,{macroName:"let",macroData:{declarable:__node("MacroAccess",1331,30,37,1331,__node("MacroAccess",1331,30,31,1331,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1331,47,58,1331,{op:"+",node:__node("Access",1331,49,__wrap(array,245),__node("Const",1331,56,"length"))},"expression",false,false)}},"statement",false,false)),[__node("MacroAccess",1332,16,13,1332,{op:"postDec!",node:__wrap(index,245)},"expression",false,false),this.noop()]):(!this.isConst(end)||__num(this.value(end))<0?(hasLength=true):void 0,this.isConst(start)?(_ref2=this.value(start))===-1||_ref2===1/0?hasLength?(init.push(letLength),init.push(__node("MacroAccess",1340,30,38,1340,{macroName:"let",macroData:{declarable:__node("MacroAccess",1340,34,37,1340,__node("MacroAccess",1340,34,31,1340,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1340,51,49,1340,{left:__wrap(length,245),inverted:false,op:"~-",right:__node("Const",1340,63,1)},"expression",false,false)}},"statement",false,false))):init.push(__node("MacroAccess",1342,30,38,1342,{macroName:"let",macroData:{declarable:__node("MacroAccess",1342,34,37,1342,__node("MacroAccess",1342,34,31,1342,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1342,51,49,1342,{left:__node("MacroAccess",1342,51,58,1342,{op:"+",node:__node("Access",1342,53,__wrap(array,245),__node("Const",1342,60,"length"))},"expression",false,false),inverted:false,op:"~-",right:__node("Const",1342,70,1)},"expression",false,false)}},"statement",false,false)):(init.push(letLength),__num(this.value(start))>=0?init.push(__node("MacroAccess",1346,30,38,1346,{macroName:"let",macroData:{declarable:__node("MacroAccess",1346,34,37,1346,__node("MacroAccess",1346,34,31,1346,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1346,51,16,1346,{macroName:"if",macroData:{test:__node("MacroAccess",1346,54,9,1346,{left:__wrap(start,245),inverted:false,op:"~<",right:__wrap(length,245)},"expression",false,false),body:__wrap(start,245),elseIfs:[],elseBody:__node("MacroAccess",1346,89,49,1346,{left:__wrap(length,245),inverted:false,op:"~-",right:__node("Const",1346,101,1)},"expression",false,false)}},"expression",false,false)}},"statement",false,false)):init.push(__node("MacroAccess",1348,30,38,1348,{macroName:"let",macroData:{declarable:__node("MacroAccess",1348,34,37,1348,__node("MacroAccess",1348,34,31,1348,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1348,51,49,1348,{left:__wrap(length,245),inverted:false,op:"~+",right:__node("MacroAccess",1348,62,58,1348,{op:"+",node:__wrap(start,245)},"expression",false,false)},"expression",false,false)}},"statement",false,false))):(init.push(letLength),init.push(__node("MacroAccess",1351,26,38,1351,{macroName:"let",macroData:{declarable:__node("MacroAccess",1351,30,37,1351,__node("MacroAccess",1351,30,31,1351,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1351,47,58,1351,{op:"+",node:__wrap(start,245)},"expression",false,false)}},"statement",false,false)),init.push(__node("MacroAccess",1352,26,16,1352,{macroName:"if",macroData:{test:__node("MacroAccess",1352,29,9,1352,{left:__wrap(index,245),inverted:false,op:"~<",right:__node("Const",1352,40,0)},"statement",false,false),body:__node("MacroAccess",1352,48,52,1352,{left:__wrap(index,245),op:"~+=",right:__wrap(length,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1352,74,84,1352,{left:__wrap(index,245),op:"~min=",right:__wrap(length,245)},"expression",false,false)}},"statement",false,false)),init.push(__node("MacroAccess",1353,26,53,1353,{left:__wrap(index,245),op:"~-=",right:__node("Const",1353,38,1)},"statement",false,false))),this.isConst(end)?__num(this.value(end))>=0?[__node("MacroAccess",1356,20,16,1356,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1356,39,10,1356,{left:__wrap(index,245),inverted:false,op:"~>=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1356,60,10,1356,{left:__wrap(index,245),inverted:false,op:"~>",right:__wrap(end,245)},"expression",false,false)}},"expression",false,false),__node("MacroAccess",1356,81,52,1356,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)]:[__node("MacroAccess",1358,20,16,1358,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1358,39,10,1358,{left:__wrap(index,245),inverted:false,op:"~>=",right:__node("MacroAccess",1358,50,64,1358,{left:__wrap(end,245),inverted:false,op:"+",right:__wrap(length,245)},"expression",false,false)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1358,70,10,1358,{left:__wrap(index,245),inverted:false,op:"~>",right:__node("MacroAccess",1358,80,64,1358,{left:__wrap(end,245),inverted:false,op:"+",right:__wrap(length,245)},"expression",false,false)},"expression",false,false)}},"expression",false,false),__node("MacroAccess",1358,101,52,1358,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)]:(tmp=this.tmp("end",false,"number"),init.push(__node("MacroAccess",1361,26,38,1361,{macroName:"let",macroData:{declarable:__node("MacroAccess",1361,30,37,1361,__node("MacroAccess",1361,30,31,1361,{isMutable:"mutable",ident:__wrap(tmp,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1361,45,58,1361,{op:"+",node:__wrap(end,245)},"expression",false,false)}},"statement",false,false)),init.push(__node("MacroAccess",1362,26,16,1362,{macroName:"if",macroData:{test:__node("MacroAccess",1362,29,9,1362,{left:__wrap(tmp,245),inverted:false,op:"~<",right:__node("Const",1362,38,0)},"statement",false,false),body:__node("MacroAccess",1362,46,52,1362,{left:__wrap(tmp,245),op:"~+=",right:__wrap(length,245)},"expression",false,false),elseIfs:[]}},"statement",false,false)),[__node("MacroAccess",1363,18,16,1363,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1363,37,10,1363,{left:__wrap(index,245),inverted:false,op:"~>=",right:__wrap(tmp,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1363,58,10,1363,{left:__wrap(index,245),inverted:false,op:"~>",right:__wrap(tmp,245)},"expression",false,false)}},"expression",false,false),__node("MacroAccess",1363,79,52,1363,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)])):(this.isComplex(step)?(step=this.cache(__node("Call",1366,31,__node("Ident",1366,31,"__int"),[__node("Call",1366,38,__node("Ident",1366,38,"__nonzero"),[__wrap(step,245)],false,false)],false,false),init,"step",false)):init.unshift(__node("Call",1368,28,__node("Ident",1368,28,"__int"),[__node("Call",1368,35,__node("Ident",1368,35,"__nonzero"),[__wrap(step,245)],false,false)],false,false)),init.push(letLength),!start?(init.push(__node("MacroAccess",1371,24,38,1371,{macroName:"let",macroData:{declarable:__node("MacroAccess",1371,28,37,1371,__node("MacroAccess",1371,28,31,1371,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1371,45,16,1371,{macroName:"if",macroData:{test:__node("MacroAccess",1371,48,10,1371,{left:__wrap(step,245),inverted:false,op:"~>",right:__node("Const",1371,58,0)},"expression",false,false),body:__node("Const",1371,65,0),elseIfs:[],elseBody:__node("MacroAccess",1371,71,49,1371,{left:__wrap(length,245),inverted:false,op:"~-",right:__node("Const",1371,83,1)},"expression",false,false)}},"expression",false,false)}},"statement",false,false)),[__node("MacroAccess",1373,17,16,1373,{macroName:"if",macroData:{test:__node("MacroAccess",1373,20,10,1373,{left:__wrap(step,245),inverted:false,op:"~>",right:__node("Const",1373,30,0)},"expression",false,false),body:__node("MacroAccess",1373,36,9,1373,{left:__wrap(index,245),inverted:false,op:"~<",right:__wrap(length,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1373,59,10,1373,{left:__wrap(index,245),inverted:false,op:"~>=",right:__node("Const",1373,71,0)},"expression",false,false)}},"expression",false,false),__node("MacroAccess",1374,17,52,1374,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)]):(this.isConst(start)?this.value(start)===1/0?init.push(__node("MacroAccess",1379,28,38,1379,{macroName:"let",macroData:{declarable:__node("MacroAccess",1379,32,37,1379,__node("MacroAccess",1379,32,31,1379,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1379,49,49,1379,{left:__wrap(length,245),inverted:false,op:"~-",right:__node("Const",1379,61,1)},"expression",false,false)}},"statement",false,false)):init.push(__node("MacroAccess",1381,28,38,1381,{macroName:"let",macroData:{declarable:__node("MacroAccess",1381,32,37,1381,__node("MacroAccess",1381,32,31,1381,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1381,49,16,1381,{macroName:"if",macroData:{test:__node("MacroAccess",1381,52,10,1381,{left:__wrap(start,245),inverted:false,op:"~>=",right:__node("Const",1381,64,0)},"expression",false,false),body:__wrap(start,245),elseIfs:[],elseBody:__node("MacroAccess",1381,82,64,1381,{left:__wrap(start,245),inverted:false,op:"+",right:__wrap(length,245)},"expression",false,false)}},"expression",false,false)}},"statement",false,false)):(init.push(__node("MacroAccess",1383,26,38,1383,{macroName:"let",macroData:{declarable:__node("MacroAccess",1383,30,37,1383,__node("MacroAccess",1383,30,31,1383,{isMutable:"mutable",ident:__wrap(index,245)},"statement",false,false),"statement",false,false),value:__wrap(start,245)}},"statement",false,false)),init.push(__node("MacroAccess",1384,26,16,1384,{macroName:"if",macroData:{test:__node("MacroAccess",1384,29,9,1384,{left:__wrap(index,245),inverted:false,op:"~<",right:__node("Const",1384,40,0)},"statement",false,false),body:__node("MacroAccess",1384,48,101,1384,{left:__wrap(index,245),op:"+=",right:__wrap(length,245)},"expression",false,false),elseIfs:[{test:__node("MacroAccess",1384,74,9,1384,{left:__wrap(step,245),inverted:false,op:"~<",right:__node("Const",1384,84,0)},"statement",false,false),body:__node("MacroAccess",1384,92,84,1384,{left:__wrap(index,245),op:"~min=",right:__wrap(length,245)},"expression",false,false)}]}},"statement",false,false))),tmp=this.tmp("end",false,"number"),this.isConst(end)?init.push(__node("MacroAccess",1387,26,38,1387,{macroName:"let",macroData:{declarable:__node("MacroAccess",1387,30,37,1387,__node("MacroAccess",1387,30,31,1387,{isMutable:"mutable",ident:__wrap(tmp,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1387,45,16,1387,{macroName:"if",macroData:{test:__node("MacroAccess",1387,48,9,1387,{left:__wrap(end,245),inverted:false,op:"~<",right:__node("Const",1387,57,0)},"expression",false,false),body:__node("MacroAccess",1387,63,49,1387,{left:__wrap(end,245),inverted:false,op:"~+",right:__wrap(length,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1387,84,81,1387,{left:__wrap(end,245),inverted:false,op:"max",right:__node("MacroAccess",1387,95,16,1387,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1387,113,49,1387,{left:__wrap(length,245),inverted:false,op:"~-",right:__node("Const",1387,125,1)},"expression",false,false),elseIfs:[],elseBody:__wrap(length,245)}},"expression",false,false)},"expression",false,false)}},"expression",false,false)}},"statement",false,false)):(init.push(__node("MacroAccess",1389,26,38,1389,{macroName:"let",macroData:{declarable:__node("MacroAccess",1389,30,37,1389,__node("MacroAccess",1389,30,31,1389,{isMutable:"mutable",ident:__wrap(tmp,245)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1389,45,58,1389,{op:"+",node:__wrap(end,245)},"expression",false,false)}},"statement",false,false)),init.push(__node("MacroAccess",1390,26,16,1390,{macroName:"if",macroData:{test:__node("MacroAccess",1390,29,9,1390,{left:__wrap(tmp,245),inverted:false,op:"~<",right:__node("Const",1390,38,0)},"statement",false,false),body:__node("MacroAccess",1390,46,101,1390,{left:__wrap(tmp,245),op:"+=",right:__wrap(length,245)},"expression",false,false),elseIfs:[{test:__node("MacroAccess",1390,70,10,1390,{left:__wrap(step,245),inverted:false,op:"~>",right:__node("Const",1390,80,0)},"statement",false,false),body:__node("MacroAccess",1390,88,84,1390,{left:__wrap(tmp,245),op:"~min=",right:__node("MacroAccess",1390,98,16,1390,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1390,117,49,1390,{left:__wrap(length,245),inverted:false,op:"~-",right:__node("Const",1390,129,1)},"expression",false,false),elseIfs:[],elseBody:__wrap(length,245)}},"expression",false,false)},"expression",false,false)}],elseBody:__node("MacroAccess",1390,151,85,1390,{left:__wrap(tmp,245),op:"~max=",right:__node("MacroAccess",1390,163,16,1390,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("Const",1390,182,0),elseIfs:[],elseBody:__node("MacroAccess",1390,188,59,1390,{op:"-",node:__node("Const",1390,190,1)},"expression",false,false)}},"expression",false,false)},"expression",false,false)}},"statement",false,false))),end=tmp,[__node("MacroAccess",1393,17,17,1393,{macroName:"if",macroData:{test:__node("MacroAccess",1393,20,10,1393,{left:__wrap(step,245),inverted:false,op:"~>",right:__node("Const",1393,30,0)},"expression",false,false),body:__node("MacroAccess",1394,15,16,1394,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1394,33,9,1394,{left:__wrap(index,245),inverted:false,op:"~<=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1394,54,9,1394,{left:__wrap(index,245),inverted:false,op:"~<",right:__wrap(end,245)},"expression",false,false)}},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",1396,15,16,1396,{macroName:"if",macroData:{test:__wrap(inclusive,245),body:__node("MacroAccess",1396,33,10,1396,{left:__wrap(index,245),inverted:false,op:"~>=",right:__wrap(end,245)},"expression",false,false),elseIfs:[],elseBody:__node("MacroAccess",1396,54,9,1396,{left:__wrap(index,245),inverted:false,op:"~<",right:__wrap(end,245)},"expression",false,false)}},"statement",false,false)}},"expression",false,false),__node("MacroAccess",1397,17,52,1397,{left:__wrap(index,245),op:"~+=",right:__wrap(step,245)},"expression",false,false)])))[0];increment=_ref[1];if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(value&&valueIdent!==value.ident){body=__node("Block",1404,1,[__node("MacroAccess",1404,13,38,1404,{macroName:"let",macroData:{declarable:__node("MacroAccess",1404,16,37,1404,__node("MacroAccess",1404,16,31,1404,{ident:__wrap(value,245)},"statement",false,false),"statement",false,false),value:__wrap(valueIdent,245)}},"statement",false,false),__wrap(body,245)],null);}if(hasIndex){init.push(__node("MacroAccess",1407,24,38,1407,{macroName:"let",macroData:{declarable:__node("MacroAccess",1407,28,37,1407,__node("MacroAccess",1407,28,31,1407,{ident:__wrap(func,245)},"statement",false,false),"statement",false,false),value:__node("Function",1407,38,[__node("Param",1407,39,__wrap(valueIdent,276),void 0,false,false,void 0),__node("Param",1407,52,__wrap(index,276),void 0,false,false,void 0)],__wrap(body,276),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1408,23,__wrap(func,245),[__node("This",1408,31),__wrap(valueExpr,245),__wrap(index,245)],false,true);}else{init.push(__node("MacroAccess",1410,24,38,1410,{macroName:"let",macroData:{declarable:__node("MacroAccess",1410,28,37,1410,__node("MacroAccess",1410,28,31,1410,{ident:__wrap(func,245)},"statement",false,false),"statement",false,false),value:__node("Function",1410,38,[__node("Param",1410,39,__wrap(valueIdent,278),void 0,false,false,void 0)],__wrap(body,278),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1411,23,__wrap(func,245),[__node("This",1411,31),__wrap(valueExpr,245)],false,true);}}else if(valueIdent===value.ident||reducer!=="filter"){body=__node("Block",1414,1,[__node("MacroAccess",1414,11,38,1414,{macroName:"let",macroData:{declarable:__node("MacroAccess",1414,14,37,1414,__node("MacroAccess",1414,14,31,1414,{ident:__wrap(value,245)},"statement",false,false),"statement",false,false),value:__wrap(valueExpr,245)}},"statement",false,false),__wrap(body,245)],null);}else{body=__node("Block",1418,1,[__node("MacroAccess",1418,11,38,1418,{macroName:"let",macroData:{declarable:__node("MacroAccess",1418,14,37,1418,__node("MacroAccess",1418,14,31,1418,{ident:__wrap(valueIdent,245)},"statement",false,false),"statement",false,false),value:__wrap(valueExpr,245)}},"statement",false,false),__node("MacroAccess",1419,11,38,1419,{macroName:"let",macroData:{declarable:__node("MacroAccess",1419,14,37,1419,__node("MacroAccess",1419,14,31,1419,{ident:__wrap(value,245)},"statement",false,false),"statement",false,false),value:__wrap(valueIdent,245)}},"statement",false,false),__wrap(body,245)],null);}if(reducer==="every"){return __node("MacroAccess",1423,13,104,1423,{macroName:"for",macroData:{reducer:"every",init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(reducer==="some"){return __node("MacroAccess",1428,13,104,1428,{macroName:"for",macroData:{reducer:"some",init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(reducer==="first"){return __node("MacroAccess",1433,13,104,1433,{macroName:"for",macroData:{reducer:"first",init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",1439,14,17,1439,{macroName:"if",macroData:{test:__wrap(node,282),body:__wrap(valueIdent,282),elseIfs:[]}},"statement",false,false);});return __node("MacroAccess",1441,13,104,1441,{macroName:"for",macroData:{init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else if(this.position==="expression"){return __node("MacroAccess",1446,13,104,1446,{macroName:"for",macroData:{init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"expression",false,false);}else{return __node("MacroAccess",1452,11,104,1452,{macroName:"for",macroData:{init:__wrap(init,245),test:__wrap(test,245),step:__wrap(increment,245),body:__wrap(body,245),elseBody:__wrap(elseBody,245)}},"statement",false,false);}}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"],["const","filter"]],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:111},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var array,body,current,currentStart,index,length,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;value=macroData.value;index=macroData.index;array=macroData.array;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;value=this.macroExpand1(value);body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1459,59,30,1459,{left:__wrap(current,284),op:":=",right:__wrap(node,284)},"expression",false,false);});if(index!=null){length=index.length;}index=index!=null?index.value:void 0;return __node("Block",1463,1,[__node("MacroAccess",1463,7,38,1463,{macroName:"let",macroData:{declarable:__node("MacroAccess",1463,10,37,1463,__node("MacroAccess",1463,10,31,1463,{isMutable:"mutable",ident:__wrap(current,283)},"statement",false,false),"statement",false,false),value:__wrap(currentStart,283)}},"statement",false,false),__node("MacroAccess",1464,7,111,1464,{macroName:"for",macroData:{value:__node("MacroAccess",1464,10,37,1464,__node("MacroAccess",1464,10,31,1464,{ident:__wrap(value,283)},"statement",false,false),"statement",false,false),index:{value:__wrap(index,283),length:__wrap(length,283)},array:__wrap(array,283),body:__wrap(body,283)}},"statement",false,false),__wrap(current,283)],null);};}.call(this));',params:[["const","reduce"],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:112},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var arr,body,elseBody,func,index,init,key,letIndex,letValue,loop,macroData,macroName,object,own,post,reducer,runElse,type,value,valueIdent;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;elseBody=macroData.elseBody;index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}own=type==="of";init=[];if(own||value){object=this.cache(object,init,"obj",false);}this["let"](key,false,this.type("string"));letValue=value&&this.macroExpandAll(__node("MacroAccess",1480,52,38,1480,{macroName:"let",macroData:{declarable:__node("MacroAccess",1480,56,37,1480,__node("MacroAccess",1480,56,31,1480,{ident:__wrap(value,286)},"statement",false,false),"statement",false,false),value:__node("Access",1480,65,__wrap(object,286),__wrap(key,286))}},"statement",false,false));letIndex=index&&this.macroExpandAll(__node("MacroAccess",1481,52,38,1481,{macroName:"let",macroData:{declarable:__node("MacroAccess",1481,56,37,1481,__node("MacroAccess",1481,56,31,1481,{isMutable:"mutable",ident:__wrap(index,286)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1481,73,59,1481,{op:"-",node:__node("Const",1481,75,1)},"expression",false,false)}},"statement",false,false));if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(value){if(value.type==="ident"){valueIdent=value.ident;}else{valueIdent=this.tmp("v",false);}}if(value&&valueIdent!==value.ident){body=__node("Block",1487,1,[__node("MacroAccess",1487,11,38,1487,{macroName:"let",macroData:{declarable:__node("MacroAccess",1487,14,37,1487,__node("MacroAccess",1487,14,31,1487,{ident:__wrap(value,286)},"statement",false,false),"statement",false,false),value:__wrap(valueIdent,286)}},"statement",false,false),__wrap(body,286)],null);}if(index){init.push(__node("MacroAccess",1490,23,38,1490,{macroName:"let",macroData:{declarable:__node("MacroAccess",1490,27,37,1490,__node("MacroAccess",1490,27,31,1490,{ident:__wrap(func,286)},"statement",false,false),"statement",false,false),value:__node("Function",1490,37,[__node("Param",1490,38,__wrap(key,296),void 0,false,false,void 0),__node("Param",1490,43,__wrap(valueIdent,296),void 0,false,false,void 0),__node("Param",1490,57,__wrap(index,296),void 0,false,false,void 0)],__wrap(body,296),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1491,22,__wrap(func,286),[__node("This",1491,30),__wrap(key,286),__node("Access",1491,41,__wrap(object,286),__wrap(key,286)),__wrap(index,286)],false,true);}else if(value){init.push(__node("MacroAccess",1493,23,38,1493,{macroName:"let",macroData:{declarable:__node("MacroAccess",1493,27,37,1493,__node("MacroAccess",1493,27,31,1493,{ident:__wrap(func,286)},"statement",false,false),"statement",false,false),value:__node("Function",1493,37,[__node("Param",1493,38,__wrap(key,298),void 0,false,false,void 0),__node("Param",1493,43,__wrap(valueIdent,298),void 0,false,false,void 0)],__wrap(body,298),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1494,22,__wrap(func,286),[__node("This",1494,30),__wrap(key,286),__node("Access",1494,41,__wrap(object,286),__wrap(key,286))],false,true);}else{init.push(__node("MacroAccess",1496,23,38,1496,{macroName:"let",macroData:{declarable:__node("MacroAccess",1496,27,37,1496,__node("MacroAccess",1496,27,31,1496,{ident:__wrap(func,286)},"statement",false,false),"statement",false,false),value:__node("Function",1496,37,[__node("Param",1496,38,__wrap(key,300),void 0,false,false,void 0)],__wrap(body,300),true,false,false,void 0,false,[])}},"statement",false,false));body=__node("Call",1497,22,__wrap(func,286),[__node("This",1497,30),__wrap(key,286)],false,true);}}else if(value){body=__node("Block",1500,1,[__wrap(letValue,286),__wrap(body,286)],null);}post=[];if(elseBody){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",1506,21,38,1506,{macroName:"let",macroData:{declarable:__node("MacroAccess",1506,25,37,1506,__node("MacroAccess",1506,25,31,1506,{ident:__wrap(runElse,286)},"statement",false,false),"statement",false,false),value:__node("Const",1506,37,true)}},"statement",false,false));body=__node("Block",1508,1,[__node("MacroAccess",1508,9,30,1508,{left:__wrap(runElse,286),op:":=",right:__node("Const",1508,21,false)},"statement",false,false),__wrap(body,286)],null);post.push(__node("MacroAccess",1511,9,17,1511,{macroName:"if",macroData:{test:__wrap(runElse,286),body:__wrap(elseBody,286),elseIfs:[]}},"statement",false,false));}if(index){init.push(letIndex);body=__node("Block",1517,1,[__node("MacroAccess",1517,9,52,1517,{left:__wrap(index,286),op:"~+=",right:__node("Const",1517,20,1)},"statement",false,false),__wrap(body,286)],null);}if(own){body=__node("MacroAccess",1522,9,17,1522,{macroName:"if",macroData:{test:__node("MacroAccess",1522,11,71,1522,{left:__wrap(object,286),inverted:false,op:"ownskey",right:__wrap(key,286)},"statement",false,false),body:__wrap(body,286),elseIfs:[]}},"statement",false,false);}if(reducer){if(reducer==="first"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1527,62,39,1527,{macroName:"return",macroData:{node:__wrap(node,304)}},"statement",false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",1529,12,0,1529,{macroName:"do",macroData:{body:__node("Block",1530,1,[__wrap(init,286),__wrap(loop,286),__wrap(elseBody,286)],null)}},"statement",false,false);}else{if(elseBody){throw Error("Cannot use a for loop with an else with "+__strnum(reducer));}if(reducer==="some"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1538,13,17,1538,{macroName:"if",macroData:{test:__wrap(node,306),body:__node("MacroAccess",1539,15,39,1539,{macroName:"return",macroData:{node:__node("Const",1539,21,true)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",1541,14,0,1541,{macroName:"do",macroData:{body:__node("Block",1542,1,[__wrap(init,286),__wrap(loop,286),__node("Const",1544,13,false)],null)}},"statement",false,false);}else if(reducer==="every"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1547,13,17,1547,{macroName:"if",macroData:{test:__node("MacroAccess",1547,15,3,1547,{op:"not",node:__wrap(node,308)},"statement",false,false),body:__node("MacroAccess",1548,15,39,1548,{macroName:"return",macroData:{node:__node("Const",1548,21,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",1550,14,0,1550,{macroName:"do",macroData:{body:__node("Block",1551,1,[__wrap(init,286),__wrap(loop,286),__node("Const",1553,13,true)],null)}},"statement",false,false);}else{throw Error("Unknown reducer: "+__strnum(reducer));}}}else if(this.position==="expression"){if(elseBody){throw Error("Cannot use a for loop with an else as an expression");}arr=this.tmp("arr",false,this.type(body).array());body=this.mutateLast(body||this.noop(),function(node){return __node("Call",1560,61,__node("Access",1560,61,__wrap(arr,311),__node("Const",1560,67,"push")),[__wrap(node,311)],false,false);});init.unshift(__node("MacroAccess",1561,23,38,1561,{macroName:"let",macroData:{declarable:__node("MacroAccess",1561,27,37,1561,__node("MacroAccess",1561,27,31,1561,{ident:__wrap(arr,286)},"statement",false,false),"statement",false,false),value:__node("Array",1561,34,[])}},"statement",false,false));loop=this.forIn(key,object,body);return __node("Block",1564,1,[__wrap(init,286),__wrap(loop,286),__wrap(arr,286)],null);}else{loop=this.forIn(key,object,body);return __node("Block",1570,1,[__wrap(init,286),__wrap(loop,286),__wrap(post,286)],null);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:113},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,current,currentStart,index,key,loop,macroData,macroName,object,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1575,59,30,1575,{left:__wrap(current,316),op:":=",right:__wrap(node,316)},"expression",false,false);});if(value!=null){index=value.index;}value=value!=null?value.value:void 0;if(type==="of"){loop=__node("MacroAccess",1579,10,113,1579,{macroName:"for",macroData:{key:__wrap(key,315),value:{value:__node("MacroAccess",1579,20,37,1579,__node("MacroAccess",1579,20,31,1579,{ident:__wrap(value,315)},"statement",false,false),"statement",false,false),index:__wrap(index,315)},type:"of",object:__wrap(object,315),body:__wrap(body,315)}},"statement",false,false);}else{loop=__node("MacroAccess",1582,10,113,1582,{macroName:"for",macroData:{key:__wrap(key,315),value:{value:__node("MacroAccess",1582,20,37,1582,__node("MacroAccess",1582,20,31,1582,{ident:__wrap(value,315)},"statement",false,false),"statement",false,false),index:__wrap(index,315)},type:"ofall",object:__wrap(object,315),body:__wrap(body,315)}},"statement",false,false);}return __node("Block",1585,1,[__node("MacroAccess",1585,7,38,1585,{macroName:"let",macroData:{declarable:__node("MacroAccess",1585,10,37,1585,__node("MacroAccess",1585,10,31,1585,{isMutable:"mutable",ident:__wrap(current,315)},"statement",false,false),"statement",false,false),value:__wrap(currentStart,315)}},"statement",false,false),__wrap(loop,315),__wrap(current,315)],null);};}.call(this));',params:[["const","reduce"],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:114},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _this,catchBody,catchIdent,catchPart,current,elseBody,finallyBody,hasElse,init,macroData,macroName,runElse,tryBody,typedCatches;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;tryBody=macroData.tryBody;typedCatches=macroData.typedCatches;catchPart=macroData.catchPart;elseBody=macroData.elseBody;finallyBody=macroData.finallyBody;hasElse=!!elseBody;if(!catchPart&&hasElse&&!finallyBody){throw Error("Must provide at least a catch, else, or finally to a try block");}if(catchPart!=null){catchIdent=catchPart.ident;}if(catchPart!=null){catchBody=catchPart.body;}if(typedCatches.length!==0){if(!catchIdent){catchIdent=typedCatches[0].ident;}catchBody=(function(){var _arr,_f,_i,current;current=catchBody||__node("MacroAccess",1993,94,11,1993,{op:"throw",node:__wrap(catchIdent,407)},"statement",false,false);for(_arr=__toArray(typedCatches), _i=_arr.length, _f=function(typeCatch){var _this,letErr,typeIdent,types,value;_this=this;typeIdent=typeCatch.ident;if(this.name(typeIdent)!==this.name(catchIdent)){letErr=__node("MacroAccess",1996,14,38,1996,{macroName:"let",macroData:{declarable:__node("MacroAccess",1996,18,37,1996,__node("MacroAccess",1996,18,31,1996,{ident:__wrap(typeIdent,407)},"statement",false,false),"statement",false,false),value:__wrap(catchIdent,407)}},"statement",false,false);}else{letErr=this.noop();}if(typeCatch.check.type==="as"){types=this.array((function(){var _arr,_arr2,_i,_len,type;for(_arr=[], _arr2=__toArray(_this.isTypeUnion(typeCatch.check.value)?_this.types(typeCatch.check.value):[typeCatch.check.value]), _i=0, _len=_arr2.length;_i<_len;++_i){type=_arr2[_i];if(_this.isTypeArray(type)){throw Error("Expected a normal type, cannot use an array type");}else if(_this.isTypeGeneric(type)){throw Error("Expected a normal type, cannot use a generic type");}else if(_this.isTypeFunction(type)){throw Error("Expected a normal type, cannot use a function type");}else if(_this.isTypeObject(type)){throw Error("Expected a normal type, cannot use an object type");}_arr.push(type);}return _arr;}()));return current=__node("MacroAccess",2011,13,17,2011,{macroName:"if",macroData:{test:__node("MacroAccess",2011,15,116,2011,{left:__wrap(catchIdent,407),inverted:false,op:"instanceofsome",right:__wrap(types,407)},"statement",false,false),body:__node("Block",2012,1,[__wrap(letErr,407),__wrap(typeCatch.body,407)],null),elseIfs:[],elseBody:__wrap(current,407)}},"statement",false,false);}else{value=typeCatch.check.value;return current=__node("MacroAccess",2019,13,17,2019,{macroName:"if",macroData:{test:__node("MacroAccess",2019,15,5,2019,{left:__wrap(catchIdent,407),inverted:false,op:"==",right:__wrap(value,407)},"statement",false,false),body:__node("Block",2020,1,[__wrap(letErr,407),__wrap(typeCatch.body,407)],null),elseIfs:[],elseBody:__wrap(current,407)}},"statement",false,false);}};_i--;){_f.call(_this,_arr[_i]);}return current;}());}init=[];if(hasElse){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",2028,20,38,2028,{macroName:"let",macroData:{declarable:__node("MacroAccess",2028,24,37,2028,__node("MacroAccess",2028,24,31,2028,{ident:__wrap(runElse,407)},"statement",false,false),"statement",false,false),value:__node("Const",2028,36,true)}},"statement",false,false));if(catchBody){catchBody=__node("Block",2031,1,[__node("MacroAccess",2031,11,30,2031,{left:__wrap(runElse,407),op:":=",right:__node("Const",2031,23,false)},"statement",false,false),__wrap(catchBody,407)],null);}else{catchIdent=this.tmp("err");catchBody=__node("Block",2036,1,[__node("MacroAccess",2036,11,30,2036,{left:__wrap(runElse,407),op:":=",right:__node("Const",2036,23,false)},"statement",false,false),__node("MacroAccess",2037,11,11,2037,{op:"throw",node:__wrap(catchIdent,407)},"statement",false,false)],null);}}current=tryBody;if(catchBody){current=this.tryCatch(current,catchIdent,catchBody);}if(hasElse){current=this.tryFinally(current,__node("MacroAccess",2044,9,17,2044,{macroName:"if",macroData:{test:__wrap(runElse,407),body:__wrap(elseBody,407),elseIfs:[]}},"statement",false,false));}if(finallyBody){current=this.tryFinally(current,finallyBody);}return __node("Block",2050,1,[__wrap(init,407),__wrap(current,407)],null);};}.call(this));',params:[["ident","tryBody","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","typedCatches","many","*","sequence",["const","\n"],["const","catch"],["ident","ident","ident","Identifier"],["ident","check","choice",["sequence",["ident","type","const","as"],["ident","value","ident","Type"]],["sequence",["ident","type","const","=="],["ident","value","ident","Expression"]]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","catchPart","many","?","sequence",["const","\n"],["const","catch"],["ident","ident","ident","Identifier"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","finallyBody","many","?","sequence",["const","\n"],["const","finally"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"try",id:117},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,captureValue,elseBody,err,func,index,init,item,iterable,iterator,macroData,macroName,main,post,reducer,runElse,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;value=macroData.value;index=macroData.index;iterable=macroData.iterable;body=macroData.body;elseBody=macroData.elseBody;init=[];iterator=this.cache(__node("Call",2086,30,__node("Ident",2086,30,"__iter"),[__wrap(iterable,427)],false,false),init,"iter",false);item=this.tmp("item",false);err=this.tmp("e",true);step=[];if(index){init.push(__node("MacroAccess",2092,20,38,2092,{macroName:"let",macroData:{declarable:__node("MacroAccess",2092,24,37,2092,__node("MacroAccess",2092,24,31,2092,{isMutable:"mutable",ident:__wrap(index,427)},"statement",false,false),"statement",false,false),value:__node("Const",2092,42,0)}},"statement",false,false));step.push(__node("MacroAccess",2093,21,52,2093,{left:__wrap(index,427),op:"~+=",right:__node("Const",2093,33,1)},"expression",false,false));}captureValue=__node("Block",2096,1,[__node("MacroAccess",2096,7,38,2096,{macroName:"let",macroData:{declarable:__node("MacroAccess",2096,10,37,2096,__node("MacroAccess",2096,10,31,2096,{ident:__wrap(item,427)},"statement",false,false),"statement",false,false),value:__node("Call",2096,18,__node("Access",2096,18,__wrap(iterator,427),__node("Const",2096,29,"next")),[],false,false)}},"statement",false,false),__node("MacroAccess",2097,7,17,2097,{macroName:"if",macroData:{test:__node("Access",2097,9,__wrap(item,427),__node("Const",2097,16,"done")),body:__node("MacroAccess",2098,9,19,2098,{macroName:"break",macroData:{}},"statement",false,false),elseIfs:[]}},"statement",false,false),__node("MacroAccess",2099,7,38,2099,{macroName:"let",macroData:{declarable:__node("MacroAccess",2099,10,37,2099,__node("MacroAccess",2099,10,31,2099,{ident:__wrap(value,427)},"statement",false,false),"statement",false,false),value:__node("Access",2099,19,__wrap(item,427),__node("Const",2099,26,"value"))}},"statement",false,false)],null);post=[];if(elseBody&&!reducer&&this.position!=="expression"){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",2104,21,38,2104,{macroName:"let",macroData:{declarable:__node("MacroAccess",2104,25,37,2104,__node("MacroAccess",2104,25,31,2104,{ident:__wrap(runElse,427)},"statement",false,false),"statement",false,false),value:__node("Const",2104,37,true)}},"statement",false,false));body=__node("Block",2106,1,[__node("MacroAccess",2106,9,30,2106,{left:__wrap(runElse,427),op:":=",right:__node("Const",2106,21,false)},"statement",false,false),__wrap(body,427)],null);post.push(__node("MacroAccess",2109,9,17,2109,{macroName:"if",macroData:{test:__wrap(runElse,427),body:__wrap(elseBody,427),elseIfs:[]}},"statement",false,false));}if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(!index){init.push(__node("MacroAccess",2115,22,38,2115,{macroName:"let",macroData:{declarable:__node("MacroAccess",2115,26,37,2115,__node("MacroAccess",2115,26,31,2115,{ident:__wrap(func,427)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2115,36,115,2115,{op:"",node:__node("Function",2115,36,[__node("Param",2115,37,__wrap(value,441),void 0,false,false,void 0)],__wrap(body,441),true,false,false,void 0,false,[])},"expression",false,false)}},"statement",false,false));body=__node("Block",2117,1,[__wrap(captureValue,427),__node("Call",2118,11,__wrap(func,427),[__node("This",2118,18),__wrap(value,427)],false,true)],null);}else{init.push(__node("MacroAccess",2120,22,38,2120,{macroName:"let",macroData:{declarable:__node("MacroAccess",2120,26,37,2120,__node("MacroAccess",2120,26,31,2120,{ident:__wrap(func,427)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2120,36,115,2120,{op:"",node:__node("Function",2120,36,[__node("Param",2120,37,__wrap(value,443),void 0,false,false,void 0),__node("Param",2120,44,__wrap(index,443),void 0,false,false,void 0)],__wrap(body,443),true,false,false,void 0,false,[])},"expression",false,false)}},"statement",false,false));body=__node("Block",2122,1,[__wrap(captureValue,427),__node("Call",2123,11,__wrap(func,427),[__node("This",2123,18),__wrap(value,427),__wrap(index,427)],false,true)],null);}}else{body=__node("Block",2126,1,[__wrap(captureValue,427),__wrap(body,427)],null);}if(reducer==="every"){main=__node("MacroAccess",2130,11,104,2130,{macroName:"for",macroData:{reducer:"every",init:__wrap(init,427),test:__node("Const",2130,28,true),step:__wrap(step,427),body:__wrap(body,427),elseBody:__wrap(elseBody,427)}},"expression",false,false);}else if(reducer==="some"){main=__node("MacroAccess",2135,11,104,2135,{macroName:"for",macroData:{reducer:"some",init:__wrap(init,427),test:__node("Const",2135,27,true),step:__wrap(step,427),body:__wrap(body,427),elseBody:__wrap(elseBody,427)}},"expression",false,false);}else if(reducer==="first"){main=__node("MacroAccess",2140,11,104,2140,{macroName:"for",macroData:{reducer:"first",init:__wrap(init,427),test:__node("Const",2140,28,true),step:__wrap(step,427),body:__wrap(body,427),elseBody:__wrap(elseBody,427)}},"expression",false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",2146,12,17,2146,{macroName:"if",macroData:{test:__wrap(node,445),body:__wrap(value,445),elseIfs:[]}},"statement",false,false);});main=__node("MacroAccess",2148,11,104,2148,{macroName:"for",macroData:{init:__wrap(init,427),test:__node("Const",2148,22,true),step:__wrap(step,427),body:__wrap(body,427),elseBody:__wrap(elseBody,427)}},"expression",false,false);}else if(this.position==="expression"){main=__node("MacroAccess",2153,11,104,2153,{macroName:"for",macroData:{init:__wrap(init,427),test:__node("Const",2153,22,true),step:__wrap(step,427),body:__wrap(body,427),elseBody:__wrap(elseBody,427)}},"expression",false,false);}else{main=__node("Block",2159,1,[__node("MacroAccess",2159,9,104,2159,{macroName:"for",macroData:{init:__wrap(init,427),test:__node("Const",2159,19,true),step:__wrap(step,427),body:__wrap(body,427)}},"statement",false,false),__wrap(post,427)],null);}return __node("MacroAccess",2163,8,117,2163,{macroName:"try",macroData:{tryBody:__wrap(main,427),typedCatches:[],finallyBody:__node("MacroAccess",2166,7,117,2166,{macroName:"try",macroData:{tryBody:__node("Call",2167,9,__node("Access",2167,9,__wrap(iterator,427),__node("Const",2167,19,"close")),[],false,false),typedCatches:[],catchPart:{ident:__wrap(err,427),body:__node("Const",2169,9,void 0)}}},"statement",false,false)}},"statement",false,false);};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"],["const","filter"]],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterable","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:118},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,current,currentStart,index,iterator,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;value=macroData.value;index=macroData.index;iterator=macroData.iterator;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",2172,59,30,2172,{left:__wrap(current,447),op:":=",right:__wrap(node,447)},"expression",false,false);});return __node("Block",2174,1,[__node("MacroAccess",2174,7,38,2174,{macroName:"let",macroData:{declarable:__node("MacroAccess",2174,10,37,2174,__node("MacroAccess",2174,10,31,2174,{isMutable:"mutable",ident:__wrap(current,446)},"statement",false,false),"statement",false,false),value:__wrap(currentStart,446)}},"statement",false,false),__node("MacroAccess",2175,7,118,2175,{macroName:"for",macroData:{value:__wrap(value,446),index:__wrap(index,446),iterable:__wrap(iterator,446),body:__wrap(body,446)}},"statement",false,false),__wrap(current,446)],null);};}.call(this));',params:[["const","reduce"],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:119},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _arr,_arr2,_i,_i2,_len,_len2,body,case_,caseNode,caseNodes,cases,defaultCase,isFallthrough,lastNode,macroData,macroName,node,nodes,resultCases;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;cases=macroData.cases;defaultCase=macroData.defaultCase;resultCases=[];for(_arr=__toArray(cases), _i=0, _len=_arr.length;_i<_len;++_i){case_=_arr[_i];caseNodes=[case_.nodeHead].concat(case_.nodeTail);body=case_.body;isFallthrough=false;if(this.isBlock(body)){nodes=this.nodes(body);lastNode=nodes[__num(nodes.length)-1];if(this.isIdent(lastNode)&&this.name(lastNode)==="fallthrough"){body=this.block(nodes.slice(0,-1));isFallthrough=true;}}else if(this.isIdent(body)&&this.name(body)==="fallthrough"){body=this.noop();isFallthrough=true;}for(_arr2=__toArray(caseNodes.slice(0,-1)), _i2=0, _len2=_arr2.length;_i2<_len2;++_i2){caseNode=_arr2[_i2];resultCases.push({node:caseNode,body:this.noop(),fallthrough:true});}resultCases.push({node:caseNodes[__num(caseNodes.length)-1],body:body,fallthrough:isFallthrough});}return this["switch"](node,resultCases,defaultCase);};}.call(this));',params:[["ident","node","ident","Logic"],["ident","cases","many","*","sequence",["const","\n"],["const","case"],["ident","nodeHead","ident","Logic"],["ident","nodeTail","many","*","sequence",["const",","],["this","ident","Logic"]],["ident","body","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","defaultCase","many","?","sequence",["const","\n"],["const","default"],["this","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"switch",id:120},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _arr,_i,body,case_,cases,current,defaultCase,fall,isFallthrough,lastNode,macroData,macroName,nodes,result,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;cases=macroData.cases;defaultCase=macroData.defaultCase;current=defaultCase;for(_arr=__toArray(cases), _i=_arr.length;_i--;){case_=_arr[_i];test=case_.test;body=case_.body;isFallthrough=false;result=void 0;if(this.isBlock(body)){nodes=this.nodes(body);lastNode=nodes[__num(nodes.length)-1];if(this.isIdent(lastNode)&&this.name(lastNode)==="fallthrough"){body=this.block(nodes.slice(0,-1));result=this.isIf(current)?(fall=this.tmp("fall",false,"boolean"),__node("Block",2222,1,[__node("MacroAccess",2222,15,38,2222,{macroName:"let",macroData:{declarable:__node("MacroAccess",2222,18,37,2222,__node("MacroAccess",2222,18,31,2222,{isMutable:"mutable",ident:__wrap(fall,453)},"statement",false,false),"statement",false,false),value:__node("Const",2222,34,false)}},"statement",false,false),__node("MacroAccess",2223,15,17,2223,{macroName:"if",macroData:{test:__wrap(test,453),body:__node("Block",2224,1,[__node("MacroAccess",2224,17,30,2224,{left:__wrap(fall,453),op:":=",right:__node("Const",2224,25,true)},"statement",false,false),__wrap(body,453)],null),elseIfs:[]}},"statement",false,false),__node("MacroAccess",2226,15,17,2226,{macroName:"if",macroData:{test:__node("MacroAccess",2226,17,2,2226,{left:__wrap(fall,453),inverted:false,op:"or",right:__wrap(this.test(current),453)},"statement",false,false),body:__wrap(this.whenTrue(current),453),elseIfs:[],elseBody:__wrap(this.whenFalse(current),453)}},"statement",false,false)],null)):__node("Block",2232,1,[__node("MacroAccess",2232,15,17,2232,{macroName:"if",macroData:{test:__wrap(test,453),body:__wrap(body,453),elseIfs:[]}},"statement",false,false),__wrap(current,453)],null);}}else if(this.isIdent(body)&&this.name(body)==="fallthrough"){if(this.isIf(current)){result=__node("MacroAccess",2237,24,17,2237,{macroName:"if",macroData:{test:__node("MacroAccess",2237,27,2,2237,{left:__wrap(test,453),inverted:false,op:"or",right:__wrap(this.test(current),453)},"statement",false,false),body:__wrap(this.whenTrue(current),453),elseIfs:[],elseBody:__wrap(this.whenFalse(current),453)}},"statement",false,false);}else{result=__node("Block",2243,1,[__wrap(test,453),__wrap(current,453)],null);}}current=result||__node("MacroAccess",2246,20,17,2246,{macroName:"if",macroData:{test:__wrap(case_.test,453),body:__wrap(body,453),elseIfs:[],elseBody:__wrap(current,453)}},"statement",false,false);}return current;};}.call(this));',params:[["ident","cases","many","*","sequence",["const","\n"],["const","case"],["ident","test","ident","Logic"],["ident","body","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","defaultCase","many","?","sequence",["const","\n"],["const","default"],["this","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"switch",id:121},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,call,func,macroData,macroName,params;macroName=macroFullData.macroName;macroData=macroFullData.macroData;params=macroData.params;call=macroData.call;body=macroData.body;if(!this.isCall(call)){throw Error("async call expression must be a call");}if(body==null){body=this.noop();}params=params?[params.head].concat(params.tail):[];func=this.func(params,body,true,true);return this.call(this.callFunc(call),this.callArgs(call).concat([__node("MacroAccess",2362,58,124,2362,{macroName:"once!",macroData:[__node("MacroAccess",2362,66,115,2362,{op:"mutateFunction!",node:__wrap(func,791)},"expression",false,false)]},"expression",false,false)]),this.callIsNew(call),this.callIsApply(call));};}.call(this));',params:[["ident","params","many","?","sequence",["ident","head","ident","Parameter"],["ident","tail","many","*","sequence",["const",","],["this","ident","Parameter"]]],["const","<-"],["ident","call","ident","Expression"],["ident","body","ident","DedentedBody"]],names:"async",id:125},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,call,callback,error,func,macroData,macroName,params;macroName=macroFullData.macroName;macroData=macroFullData.macroData;callback=macroData.callback;params=macroData.params;call=macroData.call;body=macroData.body;if(!this.isCall(call)){throw Error("async! call expression must be a call");}if(body==null){body=this.noop();}error=this.tmp("e",false);params=[this.param(error)].concat(params);func=this.func(params,callback==="throw"?__node("Block",2376,1,[__node("MacroAccess",2376,11,100,2376,{op:"throw?",node:__wrap(error,793)},"statement",false,false),__wrap(body,793)],null):__node("Block",2380,1,[__node("MacroAccess",2380,11,17,2380,{macroName:"if",macroData:{test:__node("MacroAccess",2380,13,20,2380,{op:"?",node:__wrap(error,793)},"statement",false,false),body:__node("MacroAccess",2381,13,39,2381,{macroName:"return",macroData:{node:__node("Call",2381,19,__wrap(callback,793),[__wrap(error,793)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__wrap(body,793)],null),true,true);return this.call(this.callFunc(call),this.callArgs(call).concat([__node("MacroAccess",2385,58,124,2385,{macroName:"once!",macroData:[__node("MacroAccess",2385,66,115,2385,{op:"mutateFunction!",node:__wrap(func,793)},"expression",false,false)]},"expression",false,false)]),this.callIsNew(call),this.callIsApply(call));};}.call(this));',params:[["ident","callback","choice",["const","throw"],["ident","Expression"]],["ident","params","many","*","sequence",["const",","],["this","ident","Parameter"]],["const","<-"],["ident","call","ident","Expression"],["ident","body","ident","DedentedBody"]],names:"async!",id:126},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _arr,_i,_len,ident,identName,key,macroData,macroName,name,obj,path,requires,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;if(this.isConst(name)&&typeof this.value(name)!=="string"){throw Error("Expected a constant string, got "+__typeof(this.value(name)));}if(this.isConst(name)){identName=this.value(name);if(identName.indexOf("/")!==-1){identName=identName.substring(__num(identName.lastIndexOf("/"))+1);}ident=this.ident(identName);return __node("MacroAccess",2398,10,38,2398,{macroName:"let",macroData:{declarable:__node("MacroAccess",2398,14,37,2398,__node("MacroAccess",2398,14,31,2398,{ident:__wrap(ident,796)},"statement",false,false),"statement",false,false),value:__node("Call",2398,23,__node("Ident",2398,23,"require"),[__wrap(name,796)],false,false)}},"statement",false,false);}else if(this.isIdent(name)){path=this.name(name);return __node("MacroAccess",2401,10,38,2401,{macroName:"let",macroData:{declarable:__node("MacroAccess",2401,14,37,2401,__node("MacroAccess",2401,14,31,2401,{ident:__wrap(name,796)},"statement",false,false),"statement",false,false),value:__node("Call",2401,22,__node("Ident",2401,22,"require"),[__wrap(path,796)],false,false)}},"statement",false,false);}else if(this.isObject(name)){requires=[];for(_arr=__toArray(this.pairs(name)), _i=0, _len=_arr.length;_i<_len;++_i){obj=_arr[_i];key=obj.key;value=obj.value;if(!this.isConst(key)){throw Error("If providing an object to require!, all keys must be constant strings");}identName=this.value(key);if(identName.indexOf("/")!==-1){identName=identName.substring(__num(identName.lastIndexOf("/"))+1);}ident=this.ident(identName);if(this.isConst(value)){requires.push(__node("MacroAccess",2413,28,38,2413,{macroName:"let",macroData:{declarable:__node("MacroAccess",2413,32,37,2413,__node("MacroAccess",2413,32,31,2413,{ident:__wrap(ident,796)},"statement",false,false),"statement",false,false),value:__node("Call",2413,41,__node("Ident",2413,41,"require"),[__wrap(value,796)],false,false)}},"statement",false,false));}else if(this.isIdent(value)){path=this.name(value);requires.push(__node("MacroAccess",2416,28,38,2416,{macroName:"let",macroData:{declarable:__node("MacroAccess",2416,32,37,2416,__node("MacroAccess",2416,32,31,2416,{ident:__wrap(ident,796)},"statement",false,false),"statement",false,false),value:__node("Call",2416,41,__node("Ident",2416,41,"require"),[__wrap(path,796)],false,false)}},"statement",false,false));}else{throw Error("If providing an object to require!, all values must be constant strings or idents");}}return this.block(requires);}else{throw Error("Expected either a constant string or ident or object");}};}.call(this));',params:[["ident","name","ident","Expression"]],names:"require!",id:127},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,arr,body,done,err,first,init,macroData,macroName,next,rest,result,results,step,test,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;next=macroData.next;init=macroData.init;test=macroData.test;step=macroData.step;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;if(err==null){err=this.tmp("err",true);}if(init==null){init=this.noop();}if(test==null){test=__node("Const",2519,17,true);}if(step==null){step=this.noop();}if(rest==null){rest=this.noop();}done=this.tmp("done",true,"function");if(!result){if(!step){return __node("Block",2526,1,[__wrap(init,819),__node("MacroAccess",2527,11,15,2527,{macroName:"let",macroData:{ident:__wrap(next,819),func:__node("MacroAccess",2527,20,115,2527,{op:"",node:__node("Function",2527,20,[__node("Param",2527,21,__wrap(err,821),void 0,false,false,void 0)],__node("Block",2528,1,[__node("MacroAccess",2528,13,17,2528,{macroName:"if",macroData:{test:__node("MacroAccess",2528,15,20,2528,{op:"?",node:__wrap(err,821)},"statement",false,false),body:__node("MacroAccess",2529,15,39,2529,{macroName:"return",macroData:{node:__node("Call",2529,21,__wrap(done,821),[__wrap(err,821)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__node("MacroAccess",2530,13,17,2530,{macroName:"unless",macroData:{test:__wrap(test,821),body:__node("MacroAccess",2531,15,39,2531,{macroName:"return",macroData:{node:__node("Call",2531,21,__wrap(done,821),[__node("Const",2531,28,null)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__wrap(body,821)],null),true,true,false,void 0,false,[])},"statement",false,false)}},"statement",false,false),__node("MacroAccess",2533,11,15,2533,{macroName:"let",macroData:{ident:__wrap(done,819),func:__node("MacroAccess",2533,20,115,2533,{op:"",node:__node("Function",2533,20,[__node("Param",2533,21,__wrap(err,822),void 0,false,false,void 0)],__wrap(rest,822),true,true,false,void 0,false,[])},"statement",false,false)}},"statement",false,false),__node("Call",2535,11,__wrap(next,819),[],false,false)],null);}else{first=this.tmp("first",true,"boolean");return __node("Block",2539,1,[__wrap(init,819),__node("MacroAccess",2540,11,38,2540,{macroName:"let",macroData:{declarable:__node("MacroAccess",2540,14,37,2540,__node("MacroAccess",2540,14,31,2540,{ident:__wrap(first,819)},"statement",false,false),"statement",false,false),value:__node("Const",2540,23,true)}},"statement",false,false),__node("MacroAccess",2541,11,15,2541,{macroName:"let",macroData:{ident:__wrap(next,819),func:__node("MacroAccess",2541,20,115,2541,{op:"",node:__node("Function",2541,20,[__node("Param",2541,21,__wrap(err,825),void 0,false,false,void 0)],__node("Block",2542,1,[__node("MacroAccess",2542,13,17,2542,{macroName:"if",macroData:{test:__node("MacroAccess",2542,15,20,2542,{op:"?",node:__wrap(err,825)},"statement",false,false),body:__node("MacroAccess",2543,15,39,2543,{macroName:"return",macroData:{node:__node("Call",2543,21,__wrap(done,825),[__wrap(err,825)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__node("MacroAccess",2544,13,17,2544,{macroName:"if",macroData:{test:__wrap(first,825),body:__node("MacroAccess",2545,15,30,2545,{left:__wrap(first,825),op:":=",right:__node("Const",2545,24,false)},"statement",false,false),elseIfs:[],elseBody:__wrap(step,825)}},"statement",false,false),__node("MacroAccess",2548,13,17,2548,{macroName:"unless",macroData:{test:__wrap(test,825),body:__node("MacroAccess",2549,15,39,2549,{macroName:"return",macroData:{node:__node("Call",2549,21,__wrap(done,825),[__node("Const",2549,28,null)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__wrap(body,825)],null),true,true,false,void 0,false,[])},"statement",false,false)}},"statement",false,false),__node("MacroAccess",2551,11,15,2551,{macroName:"let",macroData:{ident:__wrap(done,819),func:__node("MacroAccess",2551,20,115,2551,{op:"",node:__node("Function",2551,20,[__node("Param",2551,21,__wrap(err,826),void 0,false,false,void 0)],__wrap(rest,826),true,true,false,void 0,false,[])},"statement",false,false)}},"statement",false,false),__node("Call",2553,11,__wrap(next,819),[],false,false)],null);}}else{first=this.tmp("first",true,"boolean");value=this.tmp("value",true);arr=this.tmp("arr",true);return __node("Block",2559,1,[__wrap(init,819),__node("MacroAccess",2560,9,38,2560,{macroName:"let",macroData:{declarable:__node("MacroAccess",2560,12,37,2560,__node("MacroAccess",2560,12,31,2560,{ident:__wrap(first,819)},"statement",false,false),"statement",false,false),value:__node("Const",2560,21,true)}},"statement",false,false),__node("MacroAccess",2561,9,38,2561,{macroName:"let",macroData:{declarable:__node("MacroAccess",2561,12,37,2561,__node("MacroAccess",2561,12,31,2561,{ident:__wrap(arr,819)},"statement",false,false),"statement",false,false),value:__node("Array",2561,19,[])}},"statement",false,false),__node("MacroAccess",2562,9,15,2562,{macroName:"let",macroData:{ident:__wrap(next,819),func:__node("MacroAccess",2562,18,115,2562,{op:"",node:__node("Function",2562,18,[__node("Param",2562,19,__wrap(err,832),void 0,false,false,void 0),__node("Param",2562,24,__wrap(value,832),void 0,false,false,void 0)],__node("Block",2563,1,[__node("MacroAccess",2563,11,17,2563,{macroName:"if",macroData:{test:__node("MacroAccess",2563,13,20,2563,{op:"?",node:__wrap(err,832)},"statement",false,false),body:__node("MacroAccess",2564,13,39,2564,{macroName:"return",macroData:{node:__node("Call",2564,19,__wrap(done,832),[__wrap(err,832)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__node("MacroAccess",2565,11,17,2565,{macroName:"if",macroData:{test:__wrap(first,832),body:__node("MacroAccess",2566,13,30,2566,{left:__wrap(first,832),op:":=",right:__node("Const",2566,22,false)},"statement",false,false),elseIfs:[],elseBody:__node("Block",2568,1,[__wrap(step,832),__node("MacroAccess",2569,13,17,2569,{macroName:"if",macroData:{test:__node("MacroAccess",2569,15,10,2569,{left:__node("Access",2569,15,__node("Args",2569,15),__node("Const",2569,26,"length")),inverted:false,op:"~>",right:__node("Const",2569,36,1)},"statement",false,false),body:__node("Call",2570,15,__node("Access",2570,15,__wrap(arr,832),__node("Const",2570,20,"push")),[__wrap(value,832)],false,false),elseIfs:[]}},"statement",false,false)],null)}},"statement",false,false),__node("MacroAccess",2571,11,17,2571,{macroName:"unless",macroData:{test:__wrap(test,832),body:__node("MacroAccess",2572,13,39,2572,{macroName:"return",macroData:{node:__node("Call",2572,19,__wrap(done,832),[__node("Const",2572,26,null),__wrap(arr,832)],false,false)}},"statement",false,false),elseIfs:[]}},"statement",false,false),__wrap(body,832)],null),true,true,false,void 0,false,[])},"statement",false,false)}},"statement",false,false),__node("MacroAccess",2574,9,15,2574,{macroName:"let",macroData:{ident:__wrap(done,819),func:__node("MacroAccess",2574,18,115,2574,{op:"",node:__node("Function",2574,18,[__node("Param",2574,19,__wrap(err,833),void 0,false,false,void 0),__node("Param",2574,24,__wrap(result,833),void 0,false,false,void 0)],__wrap(rest,833),true,true,false,void 0,false,[])},"statement",false,false)}},"statement",false,false),__node("Call",2576,9,__wrap(next,819),[],false,false)],null);}};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","init","choice",["ident","Statement"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","Statement"],["const",""]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:128},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,array,body,end,err,hasResult,inclusive,index,init,length,lengthCalc,macroData,macroName,next,parallelism,rest,result,results,start,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;hasResult=!!result;if(err==null){err=this.tmp("err",true);}init=[];if(rest==null){rest=this.noop();}value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(parallelism==null){parallelism=__node("Const",2592,25,1);}if(index==null){index=this.tmp("i",true,"number");}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){throw Error("Cannot assign a number to a complex declarable");}value=value.ident;start=(_ref=this.callArgs(array))[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];if(this.isConst(start)){if(typeof this.value(start)!=="number"){throw Error("Cannot start with a non-number: #(@value start)");}}else{start=__node("MacroAccess",2605,22,58,2605,{op:"+",node:__wrap(start,834)},"expression",false,false);}if(this.isConst(end)){if(typeof this.value(end)!=="number"){throw Error("Cannot end with a non-number: #(@value start)");}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",2611,28,58,2611,{op:"+",node:__wrap(end,834)},"expression",false,false),init,"end",false);}else{init.push(__node("MacroAccess",2613,23,58,2613,{op:"+",node:__wrap(end,834)},"expression",false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){throw Error("Cannot step with a non-number: #(@value step)");}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",2619,29,58,2619,{op:"+",node:__wrap(step,834)},"expression",false,false),init,"step",false);}else{init.push(__node("MacroAccess",2621,23,58,2621,{op:"+",node:__wrap(step,834)},"expression",false,false));}body=__node("Block",2624,1,[__node("MacroAccess",2624,9,38,2624,{macroName:"let",macroData:{declarable:__node("MacroAccess",2624,12,37,2624,__node("MacroAccess",2624,12,31,2624,{ident:__wrap(value,834)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2624,21,49,2624,{left:__node("MacroAccess",2624,21,45,2624,{left:__wrap(index,834),inverted:false,op:"~*",right:__wrap(step,834)},"expression",false,false),inverted:false,op:"~+",right:__wrap(start,834)},"expression",false,false)}},"statement",false,false),__wrap(body,834)],null);lengthCalc=__node("MacroAccess",2627,29,17,2627,{macroName:"if",macroData:{test:__wrap(inclusive,834),body:__node("MacroAccess",2628,9,45,2628,{left:__node("MacroAccess",2628,10,49,2628,{left:__node("MacroAccess",2628,10,49,2628,{left:__wrap(end,834),inverted:false,op:"~-",right:__wrap(start,834)},"expression",false,false),inverted:false,op:"~+",right:__wrap(step,834)},"expression",false,false),inverted:false,op:"~\\\\",right:__wrap(step,834)},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",2630,9,45,2630,{left:__node("MacroAccess",2630,10,49,2630,{left:__wrap(end,834),inverted:false,op:"~-",right:__wrap(start,834)},"expression",false,false),inverted:false,op:"~\\\\",right:__wrap(step,834)},"statement",false,false)}},"expression",false,false);if(!length){length=lengthCalc;}else{init.push(__node("MacroAccess",2634,22,38,2634,{macroName:"let",macroData:{declarable:__node("MacroAccess",2634,26,37,2634,__node("MacroAccess",2634,26,31,2634,{ident:__wrap(length,834)},"statement",false,false),"statement",false,false),value:__wrap(lengthCalc,834)}},"statement",false,false));}}else{array=this.cache(array,init,"arr",true);body=__node("Block",2639,1,[__node("MacroAccess",2639,9,38,2639,{macroName:"let",macroData:{declarable:__node("MacroAccess",2639,12,37,2639,__node("MacroAccess",2639,12,31,2639,{ident:__wrap(value,834)},"statement",false,false),"statement",false,false),value:__node("Access",2639,21,__wrap(array,834),__wrap(index,834))}},"statement",false,false),__wrap(body,834)],null);if(!length){length=__node("MacroAccess",2643,23,58,2643,{op:"+",node:__node("Access",2643,25,__wrap(array,834),__node("Const",2643,32,"length"))},"expression",false,false);}else{init.push(__node("MacroAccess",2645,22,38,2645,{macroName:"let",macroData:{declarable:__node("MacroAccess",2645,26,37,2645,__node("MacroAccess",2645,26,31,2645,{ident:__wrap(length,834)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2645,36,58,2645,{op:"+",node:__node("Access",2645,38,__wrap(array,834),__node("Const",2645,45,"length"))},"expression",false,false)}},"statement",false,false));}}return __node("Block",2648,1,[__wrap(init,834),__node("Call",2649,7,__node("Ident",2649,7,"__async"),[__node("MacroAccess",2649,15,58,2649,{op:"+",node:__wrap(parallelism,834)},"expression",false,false),__wrap(length,834),__wrap(hasResult,834),__node("MacroAccess",2650,10,115,2650,{op:"",node:__node("Function",2650,10,[__node("Param",2650,11,__wrap(index,842),void 0,false,false,void 0),__node("Param",2650,18,__wrap(next,842),void 0,false,false,void 0)],__wrap(body,842),true,true,false,void 0,false,[])},"expression",false,false),__node("MacroAccess",2651,9,17,2651,{macroName:"if",macroData:{test:__wrap(hasResult,834),body:__node("MacroAccess",2652,12,115,2652,{op:"",node:__node("Function",2652,12,[__node("Param",2652,13,__wrap(err,843),void 0,false,false,void 0),__node("Param",2652,18,__wrap(result,843),void 0,false,false,void 0)],__wrap(rest,843),true,true,false,void 0,false,[])},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",2654,12,115,2654,{op:"",node:__node("Function",2654,12,[__node("Param",2654,13,__wrap(err,844),void 0,false,false,void 0)],__wrap(rest,844),true,true,false,void 0,false,[])},"statement",false,false)}},"expression",false,false)],false,false)],null);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:129},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,body,err,index,init,key,keys,macroData,macroName,next,object,own,parallelism,rest,result,results,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;own=type==="of";init=[];object=this.cache(object,init,"obj",true);if(rest==null){rest=this.noop();}index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}if(value){body=__node("Block",2670,1,[__node("MacroAccess",2670,9,38,2670,{macroName:"let",macroData:{declarable:__node("MacroAccess",2670,12,37,2670,__node("MacroAccess",2670,12,31,2670,{ident:__wrap(value,845)},"statement",false,false),"statement",false,false),value:__node("Access",2670,21,__wrap(object,845),__wrap(key,845))}},"statement",false,false),__wrap(body,845)],null);}keys=this.tmp("keys",true,"stringArray");return __node("Block",2675,1,[__wrap(init,845),__node("MacroAccess",2676,7,38,2676,{macroName:"let",macroData:{declarable:__node("MacroAccess",2676,10,37,2676,__node("MacroAccess",2676,10,31,2676,{ident:__wrap(keys,845)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2676,18,17,2676,{macroName:"if",macroData:{test:__wrap(own,845),body:__node("Call",2677,9,__node("Ident",2677,9,"__keys"),[__wrap(object,845)],false,false),elseIfs:[],elseBody:__node("Call",2679,9,__node("Ident",2679,9,"__allkeys"),[__wrap(object,845)],false,false)}},"expression",false,false)}},"statement",false,false),__node("MacroAccess",2680,7,129,2680,{macroName:"asyncfor",macroData:{parallelism:__wrap(parallelism,845),results:{err:__wrap(err,845),result:__wrap(result,845)},next:__wrap(next,845),value:__node("MacroAccess",2680,53,37,2680,__node("MacroAccess",2680,53,31,2680,{ident:__wrap(key,845)},"statement",false,false),"statement",false,false),index:{value:__wrap(index,845)},array:__wrap(keys,845),body:__wrap(body,845),rest:__wrap(rest,845)}},"statement",false,false)],null);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:130},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,body,err,hasResult,index,iterator,macroData,macroName,next,parallelism,rest,result,results,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;value=macroData.value;index=macroData.index;iterator=macroData.iterator;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;hasResult=!!result;if(rest==null){rest=this.noop();}if(index==null){index=this.tmp("i",true);}if(err==null){err=this.tmp("err",true);}if(parallelism==null){parallelism=__node("Const",2692,25,1);}return __node("Call",2694,9,__node("Ident",2694,9,"__asyncIter"),[__node("MacroAccess",2694,23,58,2694,{op:"+",node:__wrap(parallelism,851)},"expression",false,false),__wrap(iterator,851),__wrap(hasResult,851),__node("MacroAccess",2695,8,115,2695,{op:"",node:__node("Function",2695,8,[__node("Param",2695,9,__wrap(value,853),void 0,false,false,void 0),__node("Param",2695,16,__wrap(index,853),void 0,false,false,void 0),__node("Param",2695,24,__wrap(next,853),void 0,false,false,void 0)],__wrap(body,853),true,true,false,void 0,false,[])},"expression",false,false),__node("MacroAccess",2696,7,17,2696,{macroName:"if",macroData:{test:__wrap(hasResult,851),body:__node("MacroAccess",2697,10,115,2697,{op:"",node:__node("Function",2697,10,[__node("Param",2697,11,__wrap(err,854),void 0,false,false,void 0),__node("Param",2697,16,__wrap(result,854),void 0,false,false,void 0)],__wrap(rest,854),true,true,false,void 0,false,[])},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",2699,10,115,2699,{op:"",node:__node("Function",2699,10,[__node("Param",2699,11,__wrap(err,855),void 0,false,false,void 0)],__wrap(rest,855),true,true,false,void 0,false,[])},"statement",false,false)}},"expression",false,false)],false,false);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:131},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,body,err,macroData,macroName,next,rest,result,results,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;next=macroData.next;test=macroData.test;step=macroData.step;body=macroData.body;rest=macroData.rest;if(macroName==="asyncuntil"){test=__node("MacroAccess",2704,19,3,2704,{op:"not",node:__wrap(test,856)},"expression",false,false);}if(rest==null){rest=this.noop();}err=(_ref=results!=null?results:{}).err;result=_ref.result;return __node("MacroAccess",2710,7,128,2710,{macroName:"asyncfor",macroData:{results:{err:__wrap(err,856),result:__wrap(result,856)},next:__wrap(next,856),test:__wrap(test,856),step:__wrap(step,856),body:__wrap(body,856),rest:__wrap(rest,856)}},"statement",false,false);};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","Statement"]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:["asyncwhile","asyncuntil"],id:132},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _ref,body,current,done,elseBody,elseIf,elseIfs,err,f,i,innerTest,macroData,macroName,rest,result,results,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;done=macroData.done;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;rest=macroData.rest;if(macroName==="asyncunless"){test=__node("MacroAccess",2717,19,3,2717,{op:"not",node:__wrap(test,857)},"expression",false,false);}err=(_ref=results!=null?results:{}).err;result=_ref.result;f=this.tmp("f",false);if(rest==null){rest=this.noop();}if(elseBody){current=__node("MacroAccess",2725,11,30,2725,{left:__wrap(f,857),op:":=",right:__node("MacroAccess",2725,19,115,2725,{op:"",node:__node("Function",2725,19,[__node("Param",2725,20,__wrap(done,859),void 0,false,false,void 0)],__wrap(elseBody,859),true,true,false,void 0,false,[])},"expression",false,false)},"expression",false,false);}else{current=__node("MacroAccess",2727,11,30,2727,{left:__wrap(f,857),op:":=",right:__node("MacroAccess",2727,19,115,2727,{op:"",node:__node("Function",2727,19,[__node("Param",2727,20,__wrap(done,860),void 0,false,false,void 0)],__node("Call",2727,30,__wrap(done,860),[],false,false),true,true,false,void 0,false,[])},"expression",false,false)},"expression",false,false);}i=__num(elseIfs.length)-1;for(;i>=0;--i){elseIf=elseIfs[i];innerTest=elseIf.test;if(elseIf.type==="unless"){innerTest=__node("MacroAccess",2734,27,3,2734,{op:"not",node:__wrap(innerTest,857)},"expression",false,false);}current=__node("MacroAccess",2735,21,17,2735,{macroName:"if",macroData:{test:__wrap(innerTest,857),body:__node("MacroAccess",2736,9,30,2736,{left:__wrap(f,857),op:":=",right:__node("MacroAccess",2736,16,115,2736,{op:"",node:__node("Function",2736,16,[__node("Param",2736,17,__wrap(done,862),void 0,false,false,void 0)],__wrap(elseIf.body,862),true,true,false,void 0,false,[])},"expression",false,false)},"statement",false,false),elseIfs:[],elseBody:__wrap(current,857)}},"statement",false,false);}current=__node("MacroAccess",2740,19,17,2740,{macroName:"if",macroData:{test:__wrap(test,857),body:__node("MacroAccess",2741,7,30,2741,{left:__wrap(f,857),op:":=",right:__node("MacroAccess",2741,14,115,2741,{op:"",node:__node("Function",2741,14,[__node("Param",2741,15,__wrap(done,863),void 0,false,false,void 0)],__wrap(body,863),true,true,false,void 0,false,[])},"expression",false,false)},"statement",false,false),elseIfs:[],elseBody:__wrap(current,857)}},"statement",false,false);if(!err&&!result){return __node("Block",2747,1,[__wrap(current,857),__node("Call",2748,9,__wrap(f,857),[__node("MacroAccess",2748,13,115,2748,{op:"",node:__node("Function",2748,13,[],__wrap(rest,864),true,true,false,void 0,false,[])},"expression",false,false)],false,false)],null);}else if(!result){return __node("Block",2751,1,[__wrap(current,857),__node("Call",2752,9,__wrap(f,857),[__node("MacroAccess",2752,13,115,2752,{op:"",node:__node("Function",2752,13,[__node("Param",2752,14,__wrap(err,865),void 0,false,false,void 0)],__wrap(rest,865),true,true,false,void 0,false,[])},"expression",false,false)],false,false)],null);}else{if(err==null){err=this.tmp("err",true);}return __node("Block",2756,1,[__wrap(current,857),__node("Call",2757,9,__wrap(f,857),[__node("MacroAccess",2757,13,115,2757,{op:"",node:__node("Function",2757,13,[__node("Param",2757,14,__wrap(err,866),void 0,false,false,void 0),__node("Param",2757,19,__wrap(result,866),void 0,false,false,void 0)],__wrap(rest,866),true,true,false,void 0,false,[])},"expression",false,false)],false,false)],null);}};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","done","ident","Identifier"],["const",","],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseIfs","many","*","sequence",["const","\n"],["const","else"],["ident","type","choice",["const","if"],["const","unless"]],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:["asyncif","asyncunless"],id:133},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var func,key,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;func=macroData.func;return this.def(key,func);};}.call(this));',params:[["ident","key","ident","ObjectKey"],["ident","func","ident","FunctionDeclaration"]],names:"def",id:134},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var key,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;value=macroData.value;return this.def(key,value);};}.call(this));',params:[["ident","key","ident","ObjectKey"],["const","="],["ident","value","ident","ExpressionOrAssignment"]],names:"def",id:135},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var key,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;return this.def(key,void 0);};}.call(this));',params:[["ident","key","ident","ObjectKey"]],names:"def",id:136},{code:'return (function(){"use strict";var __isArray,__owns,__slice,__strnum,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__owns=Object.prototype.hasOwnProperty;__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _arr,_i,_len,_ref,_this,assignment,body,constructorCount,ctor,declaration,displayName,generic,genericArg,genericArgs,genericCache,genericParams,hasSuperclass,hasTopLevelConstructor,i,init,instanceofLets,instanceofs,item,key,macroData,macroName,makeClassFunc,makeClassIdent,name,parts,prototype,result,self,sup,superclass,superproto;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;generic=macroData.generic;superclass=macroData.superclass;body=macroData.body;if(generic!=null){genericArgs=[generic.head].concat(__toArray(generic.tail));}else{genericArgs=[];}if(this.isIdent(name)){declaration=name;}else if(this.isAccess(name)){assignment=name;if(this.isConst(this.child(name))&&typeof this.value(this.child(name))==="string"){name=(_ref=this.ident(this.value(this.child(name))))!=null?_ref:this.tmp("class",false,"function");}else{name=this.tmp("class",false,"function");}}else{name=this.tmp("class",false,"function");}hasSuperclass=!!superclass;sup=superclass&&(this.isIdent(superclass)?superclass:this.tmp("super",false,"function"));init=[];if(!superclass){superproto=__node("Access",2789,11,__node("Ident",2789,11,"Object"),__node("Const",2789,19,"prototype"));}else{superproto=this.tmp(this.isIdent(sup)?__strnum(this.name(sup))+"_prototype":"super_prototype",false,"object");}prototype=this.tmp(this.isIdent(name)?__strnum(this.name(name))+"_prototype":"prototype",false,"object");if(superclass){init.push(__node("MacroAccess",2794,20,38,2794,{macroName:"let",macroData:{declarable:__node("MacroAccess",2794,24,37,2794,__node("MacroAccess",2794,24,31,2794,{ident:__wrap(superproto,870)},"statement",false,false),"statement",false,false),value:__node("Access",2794,38,__wrap(sup,870),__node("Const",2794,44,"prototype"))}},"statement",false,false));init.push(__node("MacroAccess",2795,20,38,2795,{macroName:"let",macroData:{declarable:__node("MacroAccess",2795,24,37,2795,__node("MacroAccess",2795,24,31,2795,{ident:__wrap(prototype,870)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2795,37,30,2795,{left:__node("Access",2795,43,__wrap(name,870),__node("Const",2795,44,"prototype")),op:":=",right:__node("Object",92440,92464,[],__wrap(superproto,870))},"expression",false,false)}},"statement",false,false));init.push(__node("MacroAccess",2796,21,30,2796,{left:__node("Access",2796,32,__wrap(prototype,870),__node("Const",2796,33,"constructor")),op:":=",right:__wrap(name,870)},"expression",false,false));}else{init.push(__node("MacroAccess",2798,20,38,2798,{macroName:"let",macroData:{declarable:__node("MacroAccess",2798,24,37,2798,__node("MacroAccess",2798,24,31,2798,{ident:__wrap(prototype,870)},"statement",false,false),"statement",false,false),value:__node("Access",2798,37,__wrap(name,870),__node("Const",2798,44,"prototype"))}},"statement",false,false));}if(this.isIdent(name)){displayName=this["const"](this.name(name));}if(displayName!=null){if(genericArgs.length>0){parts=[displayName,this["const"]("<")];for(i=0, _len=genericArgs.length;i<_len;++i){genericArg=genericArgs[i];if(i>0){parts.push(this["const"](", "));}parts.push(__node("MacroAccess",2807,26,16,2807,{macroName:"if",macroData:{test:__node("MacroAccess",2807,29,8,2807,{left:__wrap(genericArg,870),inverted:false,op:"!~=",right:__node("Const",2807,46,null)},"expression",false,false),body:__node("Call",2807,56,__node("Ident",2807,56,"__name"),[__wrap(genericArg,870)],false,false),elseIfs:[],elseBody:__node("Const",2807,82,"")}},"expression",false,false));}parts.push(this["const"](">"));displayName=this.binaryChain("+",parts);}init.push(__node("MacroAccess",2810,21,30,2810,{left:__node("Access",2810,27,__wrap(name,870),__node("Const",2810,28,"displayName")),op:":=",right:__wrap(displayName,870)},"expression",false,false));}if(superclass){init.push(__node("If",2813,20,__node("Binary",2813,20,__node("Unary",2813,20,"typeof",__node("Access",2813,20,__wrap(sup,870),__node("Const",2813,26,"extended"))),"===",__node("Const",2813,20,"function")),__node("Call",2813,20,__node("Access",2813,20,__wrap(sup,870),__node("Const",2813,26,"extended")),[__wrap(name,870)],false,false),__node("Nothing",0,0),null));}function fixSupers(node){return _this.walk(node,function(node){var _arr,_arr2,_i,_len,args,child,superArg;if(_this.isSuper(node)){child=_this.superChild(node);if(child!=null){child=fixSupers(child);}for(_arr=[], _arr2=__toArray(_this.superArgs(node)), _i=0, _len=_arr2.length;_i<_len;++_i){superArg=_arr2[_i];_arr.push(fixSupers(superArg));}args=_arr;return _this.call(child!=null?__node("Access",2825,17,__wrap(superproto,882),__wrap(child,882)):!superclass?__node("Ident",2827,17,"Object"):__wrap(sup,882),[__node("This",2830,16)].concat(args),false,true);}});};body=fixSupers(this.macroExpandAll(body));constructorCount=0;this.walk(body,function(node){var key;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){++constructorCount;}}return;});hasTopLevelConstructor=false;if(constructorCount===1){this.walk(body,function(node){var key;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"&&_this.isFunc(_this.right(node))&&!_this.funcIsCurried(_this.right(node))){hasTopLevelConstructor=true;}return node;}else{return node;}});}self=this.tmp("this");if(hasTopLevelConstructor){body=this.walk(body,function(node){var constructor,key,value;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){value=_this.right(node);constructor=_this.rewrap(_this.func(_this.funcParams(value),_this.funcBody(value),false,__node("MacroAccess",2867,18,16,2867,{macroName:"if",macroData:{test:__node("MacroAccess",2867,21,72,2867,{left:__node("Eval",2867,21,__node("Const",2867,27,"this")),inverted:false,op:"instanceof",right:__wrap(name,889)},"statement",false,false),body:__node("Eval",2867,56,__node("Const",2867,62,"this")),elseIfs:[],elseBody:__node("Object",94904,94927,[],__wrap(prototype,889))}},"statement",false,false)),value);init.unshift(__node("MacroAccess",2868,29,38,2868,{macroName:"let",macroData:{declarable:__node("MacroAccess",2868,33,37,2868,__node("MacroAccess",2868,33,31,2868,{ident:__wrap(name,889)},"statement",false,false),"statement",false,false),value:__wrap(constructor,889)}},"statement",false,false));return _this.noop();}}else{return node;}});}else if(constructorCount!==0){ctor=this.tmp("ctor",false,"function");result=this.tmp("ref");init.push(__node("Block",2876,1,[__node("MacroAccess",2876,9,38,2876,{macroName:"let",macroData:{declarable:__node("MacroAccess",2876,12,37,2876,__node("MacroAccess",2876,12,31,2876,{isMutable:"mutable",ident:__wrap(ctor,870)},"statement",false,false),"statement",false,false),value:__node("Const",2876,28,void 0)}},"statement",false,false),__node("MacroAccess",2877,9,15,2877,{macroName:"let",macroData:{ident:__wrap(name,870),func:__node("MacroAccess",2877,18,115,2877,{op:"",node:__node("Function",2877,18,[],__node("Block",2878,1,[__node("MacroAccess",2878,11,38,2878,{macroName:"let",macroData:{declarable:__node("MacroAccess",2878,14,37,2878,__node("MacroAccess",2878,14,31,2878,{ident:__wrap(self,896)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2878,22,16,2878,{macroName:"if",macroData:{test:__node("MacroAccess",2878,25,72,2878,{left:__node("This",2878,25),inverted:false,op:"instanceof",right:__wrap(name,896)},"expression",false,false),body:__node("This",2878,52),elseIfs:[],elseBody:__node("Object",95283,95306,[],__wrap(prototype,896))}},"expression",false,false)}},"statement",false,false),__node("MacroAccess",2880,11,17,2880,{macroName:"if",macroData:{test:__node("MacroAccess",2880,13,26,2880,{op:"isFunction!",node:__wrap(ctor,896)},"statement",false,false),body:__node("Block",2881,1,[__node("MacroAccess",2881,13,38,2881,{macroName:"let",macroData:{declarable:__node("MacroAccess",2881,16,37,2881,__node("MacroAccess",2881,16,31,2881,{ident:__wrap(result,896)},"statement",false,false),"statement",false,false),value:__node("Call",2881,26,__wrap(ctor,896),[__wrap(self,896),__node("Spread",2881,40,__node("Args",2881,44))],false,true)}},"statement",false,false),__node("MacroAccess",2882,13,17,2882,{macroName:"if",macroData:{test:__node("MacroAccess",2882,15,5,2882,{left:__node("Call",2882,15,__node("Ident",2882,15,"Object"),[__wrap(result,896)],false,false),inverted:false,op:"==",right:__wrap(result,896)},"statement",false,false),body:__node("MacroAccess",2883,15,39,2883,{macroName:"return",macroData:{node:__wrap(result,896)}},"statement",false,false),elseIfs:[]}},"statement",false,false)],null),elseIfs:[{type:"if",test:__wrap(hasSuperclass,896),body:__node("Block",2885,1,[__node("MacroAccess",2885,13,38,2885,{macroName:"let",macroData:{declarable:__node("MacroAccess",2885,16,37,2885,__node("MacroAccess",2885,16,31,2885,{ident:__wrap(result,896)},"statement",false,false),"statement",false,false),value:__node("Call",2885,26,__wrap(sup,896),[__wrap(self,896),__node("Spread",2885,39,__node("Args",2885,43))],false,true)}},"statement",false,false),__node("MacroAccess",2886,13,17,2886,{macroName:"if",macroData:{test:__node("MacroAccess",2886,15,5,2886,{left:__node("Call",2886,15,__node("Ident",2886,15,"Object"),[__wrap(result,896)],false,false),inverted:false,op:"==",right:__wrap(result,896)},"statement",false,false),body:__node("MacroAccess",2887,15,39,2887,{macroName:"return",macroData:{node:__wrap(result,896)}},"statement",false,false),elseIfs:[]}},"statement",false,false)],null)}]}},"statement",false,false),__wrap(self,896)],null),true,false,false,void 0,false,[])},"statement",false,false)}},"statement",false,false)],null));body=this.walk(body,function(node){var constructor,firstArg,key,value;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){value=_this.right(node);if(_this.isCall(value)&&_this.isIdent(_this.callFunc(value))&&_this.name(_this.callFunc(value))==="__curry"&&_this.callArgs(value).length===2&&_this.isFunc(_this.callArgs(value)[1])){firstArg=_this.callArgs(value)[0];constructor=_this.callArgs(value)[1];constructor=_this.rewrap(_this.func(_this.funcParams(constructor),_this.funcBody(constructor),false,__node("MacroAccess",2901,20,16,2901,{macroName:"if",macroData:{test:__node("MacroAccess",2901,23,72,2901,{left:__node("Eval",2901,23,__node("Const",2901,29,"this")),inverted:false,op:"instanceof",right:__wrap(name,900)},"statement",false,false),body:__node("Eval",2901,58,__node("Const",2901,64,"this")),elseIfs:[],elseBody:__node("Object",96343,96366,[],__wrap(prototype,900))}},"statement",false,false),false),value);return __node("MacroAccess",2903,19,30,2903,{left:__wrap(ctor,900),op:":=",right:__node("Call",2903,28,__node("Ident",2903,28,"__curry"),[__wrap(firstArg,900),__wrap(constructor,900)],false,false)},"expression",false,false);}else if(_this.isFunc(value)){constructor=_this.rewrap(_this.func(_this.funcParams(value),_this.funcBody(value),false,__node("MacroAccess",2909,20,16,2909,{macroName:"if",macroData:{test:__node("MacroAccess",2909,23,72,2909,{left:__node("Eval",2909,23,__node("Const",2909,29,"this")),inverted:false,op:"instanceof",right:__wrap(name,900)},"statement",false,false),body:__node("Eval",2909,58,__node("Const",2909,64,"this")),elseIfs:[],elseBody:__node("Object",96706,96729,[],__wrap(prototype,900))}},"statement",false,false),_this.funcIsCurried(value)),value);return __node("MacroAccess",2911,19,30,2911,{left:__wrap(ctor,900),op:":=",right:__wrap(constructor,900)},"expression",false,false);}else{return __node("MacroAccess",2913,19,30,2913,{left:__wrap(ctor,900),op:":=",right:__wrap(value,900)},"expression",false,false);}}}});}else if(!superclass){init.push(__node("MacroAccess",2917,11,15,2917,{macroName:"let",macroData:{ident:__wrap(name,870),func:__node("MacroAccess",2917,20,115,2917,{op:"",node:__node("Function",2917,20,[],__node("MacroAccess",2917,25,16,2917,{macroName:"if",macroData:{test:__node("MacroAccess",2917,28,72,2917,{left:__node("This",2917,28),inverted:false,op:"instanceof",right:__wrap(name,905)},"statement",false,false),body:__node("This",2917,55),elseIfs:[],elseBody:__node("Object",96990,97013,[],__wrap(prototype,905))}},"statement",false,false),true,false,false,void 0,false,[])},"statement",false,false)}},"statement",false,false));}else{result=this.tmp("ref");init.push(__node("MacroAccess",2921,11,15,2921,{macroName:"let",macroData:{ident:__wrap(name,870),func:__node("MacroAccess",2921,20,115,2921,{op:"",node:__node("Function",2921,20,[],__node("Block",2922,1,[__node("MacroAccess",2922,13,38,2922,{macroName:"let",macroData:{declarable:__node("MacroAccess",2922,16,37,2922,__node("MacroAccess",2922,16,31,2922,{ident:__wrap(self,907)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",2922,24,16,2922,{macroName:"if",macroData:{test:__node("MacroAccess",2922,27,72,2922,{left:__node("This",2922,27),inverted:false,op:"instanceof",right:__wrap(name,907)},"expression",false,false),body:__node("This",2922,54),elseIfs:[],elseBody:__node("Object",97163,97186,[],__wrap(prototype,907))}},"expression",false,false)}},"statement",false,false),__node("MacroAccess",2923,13,38,2923,{macroName:"let",macroData:{declarable:__node("MacroAccess",2923,16,37,2923,__node("MacroAccess",2923,16,31,2923,{ident:__wrap(result,907)},"statement",false,false),"statement",false,false),value:__node("Call",2923,26,__wrap(sup,907),[__wrap(self,907),__node("Spread",2923,39,__node("Args",2923,43))],false,true)}},"statement",false,false),__node("MacroAccess",2924,13,17,2924,{macroName:"if",macroData:{test:__node("MacroAccess",2924,15,5,2924,{left:__node("Call",2924,15,__node("Ident",2924,15,"Object"),[__wrap(result,907)],false,false),inverted:false,op:"==",right:__wrap(result,907)},"statement",false,false),body:__wrap(result,907),elseIfs:[],elseBody:__wrap(self,907)}},"statement",false,false)],null),true,false,false,void 0,false,[])},"statement",false,false)}},"statement",false,false));}function changeDefs(node){return _this.walk(node,function(node){var _ref,key,value;if(_this.isDef(node)){key=_this.left(node);if((_ref=_this.right(node))!=null){value=_ref;}else{value=__node("MacroAccess",2932,42,115,2932,{op:"",node:__node("Function",2932,42,[],__node("MacroAccess",2932,44,11,2932,{op:"throw",node:__node("Call",2932,50,__node("Ident",2932,50,"Error"),[__node("MacroAccess",2932,57,67,2932,{left:__node("MacroAccess",2932,57,67,2932,{left:__node("MacroAccess",2932,57,67,2932,{left:__node("MacroAccess",2932,57,67,2932,{left:__node("Const",2932,57,"Not implemented: "),op:"",right:__node("Call",2932,77,__node("Ident",2932,77,"__name"),[__node("Access",2932,84,__node("This",2932,84),__node("Const",2932,85,"constructor"))],false,false)},"expression",false,false),op:"",right:__node("Const",2932,57,".")},"expression",false,false),op:"",right:__wrap(key,914)},"expression",false,false),op:"",right:__node("Const",2932,57,"()")},"expression",false,false)],false,false)},"statement",false,false),true,false,false,void 0,false,[])},"expression",false,false);}return changeDefs(__node("MacroAccess",2933,25,30,2933,{left:__node("Access",2933,36,__wrap(prototype,911),__wrap(key,911)),op:":=",right:__wrap(value,911)},"expression",false,false));}});};body=changeDefs(body);body=this.walk(body,function(node){if(_this.isFunc(node)){if(!_this.funcIsBound(node)){return node;}}else if(_this.isThis(node)){return name;}});result=__node("MacroAccess",2943,29,102,2943,{macroName:"do",macroData:{locals:{ident:__wrap(sup,870),value:__wrap(superclass,870),rest:[]},body:__node("Block",2944,1,[__wrap(init,870),__wrap(body,870),__node("MacroAccess",2946,7,39,2946,{macroName:"return",macroData:{node:__wrap(name,870)}},"statement",false,false)],null)}},"statement",false,false);if(genericArgs.length>0){genericCache=this.tmp("cache",false,"object");for(_arr=[], _i=0, _len=genericArgs.length;_i<_len;++_i){genericArg=genericArgs[_i];_arr.push(this.param(genericArg));}genericParams=_arr;makeClassIdent=this.tmp("make",false,"function");instanceofs={};for(_i=0, _len=genericArgs.length;_i<_len;++_i){genericArg=genericArgs[_i];name=this.name(genericArg);key=this.tmp("instanceof_"+__strnum(name),false,"function");instanceofs[name]={key:key,"let":__node("MacroAccess",2958,19,38,2958,{macroName:"let",macroData:{declarable:__node("MacroAccess",2958,23,37,2958,__node("MacroAccess",2958,23,31,2958,{ident:__wrap(key,870)},"statement",false,false),"statement",false,false),value:__node("Call",2958,30,__node("Ident",2958,30,"__getInstanceof"),[__wrap(genericArg,870)],false,false)}},"statement",false,false),used:false};}result=this.walk(this.macroExpandAll(result),function(node){var func,left,name,right;if(_this.isBinary(node)&&_this.op(node)==="instanceof"){right=_this.right(node);if(_this.isIdent(right)){name=_this.name(right);if(__owns.call(instanceofs,name)){func=instanceofs[name].key;instanceofs[name].used=true;left=_this.left(node);return __node("Call",2970,26,__wrap(func,924),[__wrap(left,924)],false,false);}}}});_arr=[];for(name in instanceofs){if(__owns.call(instanceofs,name)){item=instanceofs[name];if(item.used){_arr.push(item["let"]);}}}instanceofLets=_arr;if(instanceofLets.length){result=__node("Block",2976,1,[__wrap(instanceofLets,870),__wrap(result,870)],null);}makeClassFunc=this.func(genericParams,result,true,false);result=__node("Call",2979,20,__node("Ident",2979,20,"__genericFunc"),[__wrap(genericArgs.length,870),__wrap(makeClassFunc,870)],false,false);}if(declaration!=null){return __node("MacroAccess",2982,10,38,2982,{macroName:"let",macroData:{declarable:__node("MacroAccess",2982,14,37,2982,__node("MacroAccess",2982,14,31,2982,{ident:__wrap(declaration,870)},"statement",false,false),"statement",false,false),value:__wrap(result,870)}},"statement",false,false);}else if(assignment!=null){return __node("MacroAccess",2984,11,30,2984,{left:__wrap(assignment,870),op:":=",right:__wrap(result,870)},"expression",false,false);}else{return result;}};}.call(this));',params:[["ident","name","many","?","ident","SimpleAssignable"],["ident","generic","many","?","sequence",["const","<"],["ident","head","ident","Identifier"],["ident","tail","many","*","sequence",["const",","],["this","ident","Identifier"]],["const",">"]],["ident","superclass","many","?","sequence",["const","extends"],["this"]],["ident","body","many","?","ident","Body"]],names:"class",id:137},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _ref,_this,assignment,body,declaration,index,macroData,macroName,name,result;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;body=macroData.body;if(this.isIdent(name)){declaration=name;}else if(this.isAccess(name)){assignment=name;if(this.isConst(this.child(name))&&typeof this.value(this.child(name))==="string"){name=(_ref=this.ident(this.value(this.child(name))))!=null?_ref:this.tmp("enum",false,"object");}else{name=this.tmp("enum",false,"object");}}else{name=this.tmp("enum",false,"object");}index=0;body=this.walk(this.macroExpandAll(body),function(node){var key,value;if(_this.isDef(node)){key=_this.left(node);value=_this.right(node);if(!_this.isConst(key)){throw Error("Cannot have non-const enum keys");}if(!value){++index;value=index;}return __node("MacroAccess",3013,13,30,3013,{left:__node("Access",3013,13,__node("This",3013,13),__wrap(key,933)),op:":=",right:__wrap(value,933)},"expression",false,false);}else{return node;}});result=__node("MacroAccess",3017,22,103,3017,{macroName:"with",macroData:{node:__node("Object",100229,100232,[],void 0),body:__node("Block",3018,1,[__wrap(body,932),__node("MacroAccess",3019,7,39,3019,{macroName:"return",macroData:{node:__node("This",3019,13)}},"statement",false,false)],null)}},"expression",false,false);if(declaration!=null){return __node("MacroAccess",3022,10,38,3022,{macroName:"let",macroData:{declarable:__node("MacroAccess",3022,14,37,3022,__node("MacroAccess",3022,14,31,3022,{ident:__wrap(declaration,932)},"statement",false,false),"statement",false,false),value:__wrap(result,932)}},"statement",false,false);}else if(assignment!=null){return __node("MacroAccess",3024,11,30,3024,{left:__wrap(assignment,932),op:":=",right:__wrap(result,932)},"expression",false,false);}else{return result;}};}.call(this));',params:[["ident","name","many","?","ident","SimpleAssignable"],["ident","body","many","?","ident","Body"]],names:"enum",id:138},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _ref,_this,assignment,body,declaration,init,macroData,macroName,name,result,sup,superobject;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;superobject=macroData.superobject;body=macroData.body;if(this.isIdent(name)){declaration=name;}else if(this.isAccess(name)){assignment=name;if(this.isConst(this.child(name))&&typeof this.value(this.child(name))==="string"){name=(_ref=this.ident(this.value(this.child(name))))!=null?_ref:this.tmp("ns",false,"object");}else{name=this.tmp("ns",false,"object");}}else{name=this.tmp("ns",false,"object");}sup=superobject&&(this.isIdent(superobject)?superobject:this.tmp("super",false,"object"));init=[];if(!superobject){init.push(__node("MacroAccess",3046,20,38,3046,{macroName:"let",macroData:{declarable:__node("MacroAccess",3046,24,37,3046,__node("MacroAccess",3046,24,31,3046,{ident:__wrap(name,937)},"statement",false,false),"statement",false,false),value:__node("Object",101103,101106,[],void 0)}},"statement",false,false));}else{init.push(__node("MacroAccess",3048,20,38,3048,{macroName:"let",macroData:{declarable:__node("MacroAccess",3048,24,37,3048,__node("MacroAccess",3048,24,31,3048,{ident:__wrap(name,937)},"statement",false,false),"statement",false,false),value:__node("Object",101147,101164,[],__wrap(sup,937))}},"statement",false,false));}function fixSupers(node){return _this.walk(node,function(node){var _arr,_arr2,_i,_len,args,child,parent,superArg;if(_this.isSuper(node)){child=_this.superChild(node);if(child!=null){child=fixSupers(child);}for(_arr=[], _arr2=__toArray(_this.superArgs(node)), _i=0, _len=_arr2.length;_i<_len;++_i){superArg=_arr2[_i];_arr.push(fixSupers(superArg));}args=_arr;if(!superobject){parent=__node("Access",3058,15,__node("Ident",3058,15,"Object"),__node("Const",3058,23,"prototype"));}else{parent=__wrap(sup,943);}return _this.call(child!=null?__node("Access",3063,17,__wrap(parent,943),__wrap(child,943)):__wrap(parent,943),[__node("This",3066,16)].concat(args),false,true);}});};body=fixSupers(this.macroExpandAll(body));function changeDefs(node){return _this.walk(node,function(node){var key,value;if(_this.isDef(node)){key=_this.left(node);value=_this.right(node);return changeDefs(__node("MacroAccess",3075,25,30,3075,{left:__node("Access",3075,31,__wrap(name,947),__wrap(key,947)),op:":=",right:__wrap(value,947)},"expression",false,false));}});};body=changeDefs(body);body=this.walk(body,function(node){if(_this.isFunc(node)){if(!_this.funcIsBound(node)){return node;}}else if(_this.isThis(node)){return name;}});result=__node("MacroAccess",3085,29,102,3085,{macroName:"do",macroData:{locals:{ident:__wrap(sup,937),value:__wrap(superobject,937),rest:[]},body:__node("Block",3086,1,[__wrap(init,937),__wrap(body,937),__node("MacroAccess",3088,7,39,3088,{macroName:"return",macroData:{node:__wrap(name,937)}},"statement",false,false)],null)}},"statement",false,false);if(declaration!=null){return __node("MacroAccess",3091,10,38,3091,{macroName:"let",macroData:{declarable:__node("MacroAccess",3091,14,37,3091,__node("MacroAccess",3091,14,31,3091,{ident:__wrap(declaration,937)},"statement",false,false),"statement",false,false),value:__wrap(result,937)}},"statement",false,false);}else if(assignment!=null){return __node("MacroAccess",3093,11,30,3093,{left:__wrap(assignment,937),op:":=",right:__wrap(result,937)},"expression",false,false);}else{return result;}};}.call(this));',params:[["ident","name","many","?","ident","SimpleAssignable"],["ident","superobject","many","?","sequence",["const","extends"],["this"]],["ident","body","many","?","ident","Body"]],names:"namespace",id:139},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(!this.inGenerator){throw Error("Can only use yield in a generator function");}if(this.position==="expression"&&false){throw Error("yield can only be used in a statement position");}return this.mutateLast(node||this.noop(),function(n){return _this["yield"](n);},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"yield",id:140},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var err,index,init,item,iterator,length,macroData,macroName,node,received,send,yieldItem,yieldNext;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(!this.inGenerator){throw Error("Can only use yield* in a generator function");}if(this.position==="expression"){throw Error("yield* can only be used in a statement position");}init=[];if(this.isType(node,"arrayLike")){index=this.tmp("i",false,"number");init.push(__node("MacroAccess",3114,20,38,3114,{macroName:"let",macroData:{declarable:__node("MacroAccess",3114,24,37,3114,__node("MacroAccess",3114,24,31,3114,{ident:__wrap(index,954)},"statement",false,false),"statement",false,false),value:__node("Const",3114,34,0)}},"statement",false,false));length=this.tmp("len",false,"number");node=this.cache(node,init,"arr",false);init.push(__node("MacroAccess",3117,20,38,3117,{macroName:"let",macroData:{declarable:__node("MacroAccess",3117,24,37,3117,__node("MacroAccess",3117,24,31,3117,{ident:__wrap(length,954)},"statement",false,false),"statement",false,false),value:__node("Access",3117,34,__wrap(node,954),__node("Const",3117,41,"length"))}},"statement",false,false));yieldItem=this["yield"](__node("Access",3118,35,__wrap(node,954),__wrap(index,954)));return __node("MacroAccess",3120,9,104,3120,{macroName:"for",macroData:{init:__wrap(init,954),test:__node("MacroAccess",3120,19,9,3120,{left:__wrap(index,954),inverted:false,op:"~<",right:__wrap(length,954)},"statement",false,false),step:__node("MacroAccess",3120,38,101,3120,{left:__wrap(index,954),op:"+=",right:__node("Const",3120,49,1)},"expression",false,false),body:__wrap(yieldItem,954)}},"statement",false,false);}else{iterator=this.cache(__node("Call",3123,33,__node("Ident",3123,33,"__iter"),[__wrap(node,954)],false,false),init,"iter",false);err=this.tmp("e",true);send=this.tmp("send");item=this.tmp("item");yieldNext=this["yield"](__node("Access",3127,35,__wrap(item,954),__node("Const",3127,42,"value")));received=this.tmp("tmp");return __node("Block",3130,1,[__wrap(init,954),__node("MacroAccess",3131,9,38,3131,{macroName:"let",macroData:{declarable:__node("MacroAccess",3131,12,37,3131,__node("MacroAccess",3131,12,31,3131,{isMutable:"mutable",ident:__wrap(received,954)},"statement",false,false),"statement",false,false),value:__node("Const",3131,32,void 0)}},"statement",false,false),__node("MacroAccess",3132,9,38,3132,{macroName:"let",macroData:{declarable:__node("MacroAccess",3132,12,37,3132,__node("MacroAccess",3132,12,31,3132,{isMutable:"mutable",ident:__wrap(send,954)},"statement",false,false),"statement",false,false),value:__node("Const",3132,28,true)}},"statement",false,false),__node("MacroAccess",3134,9,106,3134,{macroName:"while",macroData:{test:__node("Const",3134,14,true),body:__node("Block",3135,1,[__node("MacroAccess",3135,11,38,3135,{macroName:"let",macroData:{declarable:__node("MacroAccess",3135,14,37,3135,__node("MacroAccess",3135,14,31,3135,{ident:__wrap(item,954)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",3135,22,16,3135,{macroName:"if",macroData:{test:__wrap(send,954),body:__node("Call",3135,36,__node("Access",3135,36,__wrap(iterator,954),__node("Const",3135,47,"send")),[__wrap(received,954)],false,false),elseIfs:[],elseBody:__node("Call",3135,67,__node("Access",3135,67,__wrap(iterator,954),__node("Const",3135,78,"throw")),[__wrap(received,954)],false,false)}},"expression",false,false)}},"statement",false,false),__node("MacroAccess",3136,11,17,3136,{macroName:"if",macroData:{test:__node("Access",3136,13,__wrap(item,954),__node("Const",3136,20,"done")),body:__node("MacroAccess",3137,13,19,3137,{macroName:"break",macroData:{}},"statement",false,false),elseIfs:[]}},"statement",false,false),__node("MacroAccess",3138,11,117,3138,{macroName:"try",macroData:{tryBody:__node("Block",3139,1,[__node("MacroAccess",3139,13,30,3139,{left:__wrap(received,954),op:":=",right:__wrap(yieldNext,954)},"statement",false,false),__node("MacroAccess",3140,13,30,3140,{left:__wrap(send,954),op:":=",right:__node("Const",3140,21,true)},"statement",false,false)],null),typedCatches:[],catchPart:{ident:__wrap(err,954),body:__node("Block",3142,1,[__node("MacroAccess",3142,13,30,3142,{left:__wrap(received,954),op:":=",right:__wrap(err,954)},"statement",false,false),__node("MacroAccess",3143,13,30,3143,{left:__wrap(send,954),op:":=",right:__node("Const",3143,21,false)},"statement",false,false)],null)}}},"statement",false,false)],null)}},"statement",false,false),__node("MacroAccess",3144,9,117,3144,{macroName:"try",macroData:{tryBody:__node("Call",3145,11,__node("Access",3145,11,__wrap(iterator,954),__node("Const",3145,21,"close")),[],false,false),typedCatches:[],catchPart:{ident:__wrap(err,954),body:__node("Const",3147,11,void 0)}}},"statement",false,false),__node("Access",3148,9,__wrap(item,954),__node("Const",3148,15,"value"))],null);}};}.call(this));',params:[["ident","node","ident","Expression"]],names:"yield*",id:141},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var macroData,macroName,node,rest;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;rest=macroData.rest;if(rest==null){rest=this.noop();}return __node("Block",3154,1,[__wrap(rest,968),__node("MacroAccess",3155,7,39,3155,{macroName:"return",macroData:{node:__wrap(node,968)}},"statement",false,false)],null);};}.call(this));',params:[["ident","node","ident","Expression"],["ident","rest","ident","DedentedBody"]],names:"returning",id:142},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var label,macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;node=macroData.node;return this.withLabel(node,label);};}.call(this));',params:[["ident","label","ident","Identifier"],["ident","node","choice",["ident","Statement"],["ident","Body"]]],names:"label!",id:145},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(this.isFunc(node)&&!this.funcIsGenerator(node)){throw Error("Must be used with a generator function");}return __node("Call",3659,9,__node("Ident",3659,9,"__generatorToPromiser"),[__wrap(node,1109)],false,false);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"promise!",id:156},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,func,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;body=macroData.body;func=this.rewrap(this.func([],body,true,true,false,null,true),body);return __node("Call",3670,9,__node("Call",3670,9,__node("Ident",3670,9,"__generatorToPromiser"),[__wrap(func,1110)],false,false),[],false,false);};}.call(this));',params:[["ident","body","ident","GeneratorBody"]],names:"promise!",id:157}],binaryOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"&&",right);};}.call(this));',operators:"and",options:{precedence:1},id:1},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"||",right);};}.call(this));',operators:"or",options:{precedence:1},id:2},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"===",right);};}.call(this));',operators:"==",options:{precedence:2,maximum:1,type:"boolean"},id:5},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",37,7,3,37,{op:"not",node:__node("MacroAccess",37,13,5,37,{left:__wrap(left,10),inverted:false,op:"==",right:__wrap(right,10)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"!=",options:{precedence:2,maximum:1,type:"boolean"},id:6},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"==",right);};}.call(this));',operators:"~=",options:{precedence:2,maximum:1,type:"boolean"},id:7},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",43,7,3,43,{op:"not",node:__node("MacroAccess",43,13,7,43,{left:__wrap(left,12),inverted:false,op:"~=",right:__wrap(right,12)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"!~=",options:{precedence:2,maximum:1,type:"boolean"},id:8},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,op==="~<"&&"<"||"<=",right);};}.call(this));',operators:["~<","~<="],options:{precedence:2,maximum:1,type:"boolean"},id:9},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return op==="~>"&&__node("MacroAccess",51,23,3,51,{op:"not",node:__node("MacroAccess",51,29,9,51,{left:__wrap(left,14),inverted:false,op:"~<=",right:__wrap(right,14)},"expression",false,false)},"expression",false,false)||__node("MacroAccess",51,55,3,51,{op:"not",node:__node("MacroAccess",51,61,9,51,{left:__wrap(left,14),inverted:false,op:"~<",right:__wrap(right,14)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:["~>","~>="],options:{precedence:2,maximum:1,type:"boolean"},id:10},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.hasType(left,"numeric")&&this.hasType(right,"numeric")){return this.binary(this.binary(this["const"](""),"+",left),"+",right);}else if(this.isConst(left)&&this.value(left)===""&&this.isType(right,"string")){return right;}else if(this.isConst(right)&&this.value(right)===""&&this.isType(left,"string")){return left;}else{return this.binary(left,"+",right);}};}.call(this));',operators:"~&",options:{precedence:7,type:"string"},id:29},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~\\\\"){return __node("Call",306,9,__node("Access",306,9,__node("Ident",306,9,"Math"),__node("Const",306,15,"floor")),[__wrap(this.binary(left,"/",right),81)],false,false);}else if(op==="~*"){return this.binary(left,"*",right);}else if(op==="~/"){return this.binary(left,"/",right);}else{return this.binary(left,"%",right);}};}.call(this));',operators:["~*","~/","~%","~\\"],options:{precedence:11,type:"number"},id:45},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~+"){if(!this.isType(right,"numeric")){return this.binary(left,"-",__node("MacroAccess",348,30,48,348,{op:"~-",node:__wrap(right,89)},"expression",false,false));}else{if(!this.isType(left,"numeric")){left=__node("MacroAccess",351,21,48,351,{op:"~+",node:__wrap(left,89)},"expression",false,false);}return this.binary(left,"+",right);}}else{return this.binary(left,"-",right);}};}.call(this));',operators:["~+","~-"],options:{precedence:10,type:"number"},id:49},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right,value;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===0){return __node("Block",361,1,[__wrap(left,90),__node("Const",362,9,1)],null);}else if(value===0.5){return __node("Call",364,18,__node("Access",364,18,__node("Ident",364,18,"Math"),__node("Const",364,24,"sqrt")),[__wrap(left,90)],false,false);}else if(value===1){return __node("MacroAccess",366,18,48,366,{op:"~+",node:__wrap(left,90)},"expression",false,false);}else if(value===2){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",369,13,45,369,{left:__wrap(setLeft,92),inverted:false,op:"~*",right:__wrap(left,92)},"expression",false,false);});}else if(value===3){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",372,13,45,372,{left:__node("MacroAccess",372,13,45,372,{left:__wrap(setLeft,93),inverted:false,op:"~*",right:__wrap(left,93)},"expression",false,false),inverted:false,op:"~*",right:__wrap(left,93)},"expression",false,false);});}else if(value===-0.5){return __node("MacroAccess",374,18,45,374,{left:__node("Const",374,19,1),inverted:false,op:"~/",right:__node("Call",374,23,__node("Access",374,23,__node("Ident",374,23,"Math"),__node("Const",374,29,"sqrt")),[__wrap(left,90)],false,false)},"expression",false,false);}else if(value===-1){return __node("MacroAccess",376,18,45,376,{left:__node("Const",376,19,1),inverted:false,op:"~/",right:__wrap(left,90)},"expression",false,false);}else if(value===-2){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",379,13,45,379,{left:__node("Const",379,14,1),inverted:false,op:"~/",right:__node("MacroAccess",379,20,45,379,{left:__wrap(setLeft,94),inverted:false,op:"~*",right:__wrap(left,94)},"expression",false,false)},"expression",false,false);});}else if(value===-3){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",382,13,45,382,{left:__node("Const",382,14,1),inverted:false,op:"~/",right:__node("MacroAccess",382,20,45,382,{left:__node("MacroAccess",382,20,45,382,{left:__wrap(setLeft,95),inverted:false,op:"~*",right:__wrap(left,95)},"expression",false,false),inverted:false,op:"~*",right:__wrap(left,95)},"expression",false,false)},"expression",false,false);});}}return __node("Call",383,7,__node("Access",383,7,__node("Ident",383,7,"Math"),__node("Const",383,13,"pow")),[__wrap(left,90),__wrap(right,90)],false,false);};}.call(this));',operators:"~^",options:{precedence:12,rightToLeft:!0,type:"number"},id:50},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~bitlshift"){return this.binary(left,"<<",right);}else if(op==="~bitrshift"){return this.binary(left,">>",right);}else{return this.binary(left,">>>",right);}};}.call(this));',operators:["~bitlshift","~bitrshift","~biturshift"],options:{precedence:9,maximum:1,type:"number"},id:54},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",516,7,50,516,{left:__node("MacroAccess",516,7,58,516,{op:"+",node:__wrap(left,121)},"expression",false,false),inverted:false,op:"~^",right:__node("MacroAccess",516,17,58,516,{op:"+",node:__wrap(right,121)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"^",options:{precedence:12,rightToLeft:!0,type:"number"},id:60},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="*"){return __node("MacroAccess",524,9,45,524,{left:__node("MacroAccess",524,9,58,524,{op:"+",node:__wrap(left,124)},"expression",false,false),inverted:false,op:"~*",right:__node("MacroAccess",524,19,58,524,{op:"+",node:__wrap(right,124)},"expression",false,false)},"expression",false,false);}else if(op==="/"){return __node("MacroAccess",526,9,45,526,{left:__node("MacroAccess",526,9,58,526,{op:"+",node:__wrap(left,124)},"expression",false,false),inverted:false,op:"~/",right:__node("MacroAccess",526,19,58,526,{op:"+",node:__wrap(right,124)},"expression",false,false)},"expression",false,false);}else if(op==="%"){return __node("MacroAccess",528,9,45,528,{left:__node("MacroAccess",528,9,58,528,{op:"+",node:__wrap(left,124)},"expression",false,false),inverted:false,op:"~%",right:__node("MacroAccess",528,19,58,528,{op:"+",node:__wrap(right,124)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",530,9,45,530,{left:__node("MacroAccess",530,9,58,530,{op:"+",node:__wrap(left,124)},"expression",false,false),inverted:false,op:"~\\\\",right:__node("MacroAccess",530,19,58,530,{op:"+",node:__wrap(right,124)},"expression",false,false)},"expression",false,false);}};}.call(this));',operators:["*","/","%","\\"],options:{precedence:11,type:"number"},id:62},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="+"){return __node("MacroAccess",537,9,49,537,{left:__node("MacroAccess",537,9,58,537,{op:"+",node:__wrap(left,126)},"expression",false,false),inverted:false,op:"~+",right:__node("MacroAccess",537,19,58,537,{op:"+",node:__wrap(right,126)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",539,9,49,539,{left:__node("MacroAccess",539,9,58,539,{op:"+",node:__wrap(left,126)},"expression",false,false),inverted:false,op:"~-",right:__node("MacroAccess",539,19,58,539,{op:"+",node:__wrap(right,126)},"expression",false,false)},"expression",false,false);}};}.call(this));',operators:["+","-"],options:{precedence:10,type:"number"},id:64},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="bitlshift"){return __node("MacroAccess",543,9,54,543,{left:__node("MacroAccess",543,9,58,543,{op:"+",node:__wrap(left,127)},"expression",false,false),inverted:false,op:"~bitlshift",right:__node("MacroAccess",543,27,58,543,{op:"+",node:__wrap(right,127)},"expression",false,false)},"expression",false,false);}else if(op==="bitrshift"){return __node("MacroAccess",545,9,54,545,{left:__node("MacroAccess",545,9,58,545,{op:"+",node:__wrap(left,127)},"expression",false,false),inverted:false,op:"~bitrshift",right:__node("MacroAccess",545,27,58,545,{op:"+",node:__wrap(right,127)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",547,9,54,547,{left:__node("MacroAccess",547,9,58,547,{op:"+",node:__wrap(left,127)},"expression",false,false),inverted:false,op:"~biturshift",right:__node("MacroAccess",547,28,58,547,{op:"+",node:__wrap(right,127)},"expression",false,false)},"expression",false,false);}};}.call(this));',operators:["bitlshift","bitrshift","biturshift"],options:{precedence:9,maximum:1,type:"number"},id:65},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isType(left,"stringOrNumber")){left=!this.hasType(left,"number")?__node("Call",556,11,__node("Ident",556,11,"__str"),[__wrap(left,130)],false,false):__node("Call",558,11,__node("Ident",558,11,"__strnum"),[__wrap(left,130)],false,false);}if(!this.isType(right,"stringOrNumber")){right=!this.hasType(right,"number")?__node("Call",561,11,__node("Ident",561,11,"__str"),[__wrap(right,130)],false,false):__node("Call",563,11,__node("Ident",563,11,"__strnum"),[__wrap(right,130)],false,false);}return __node("MacroAccess",564,7,29,564,{left:__wrap(left,130),inverted:false,op:"~&",right:__wrap(right,130)},"expression",false,false);};}.call(this));',operators:"&",options:{precedence:7,type:"string",label:"stringConcat"},id:67},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var elements,f,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isArray(right)){elements=this.elements(right);if(elements.length===0){if(this.isComplex(left)){return __node("Block",579,1,[__wrap(left,133),__node("Const",580,11,false)],null);}else{return __node("Const",582,13,false);}}else if(elements.length===1){return __node("MacroAccess",584,11,5,584,{left:__wrap(left,133),inverted:false,op:"==",right:__wrap(elements[0],133)},"expression",false,false);}else{f=function(i,current,left){if(i<elements.length){return f(+i+1,__node("MacroAccess",588,25,2,588,{left:__wrap(current,135),inverted:false,op:"or",right:__node("MacroAccess",588,37,5,588,{left:__wrap(left,135),inverted:false,op:"==",right:__wrap(elements[i],135)},"expression",false,false)},"expression",false,false),left);}else{return current;}};return this.maybeCache(left,function(setLeft,left){return f(1,__node("MacroAccess",592,18,5,592,{left:__wrap(setLeft,136),inverted:false,op:"==",right:__wrap(elements[0],136)},"expression",false,false),left);});}}else{return __node("Call",594,9,__node("Ident",594,9,"__in"),[__wrap(left,133),__wrap(right,133)],false,false);}};}.call(this));',operators:"in",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:69},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(right,"in",left);};}.call(this));',operators:"haskey",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:70},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",602,7,__node("Ident",602,7,"__owns"),[__wrap(left,138),__wrap(right,138)],false,true);};}.call(this));',operators:"ownskey",options:{precedence:6,maximum:1,invertible:!0,type:"boolean",label:"ownership"},id:71},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isIdent(right)){if(this.name(right)==="String"){return __node("MacroAccess",607,18,23,607,{op:"isString!",node:__wrap(left,139)},"expression",false,false);}else if(this.name(right)==="Number"){return __node("MacroAccess",609,18,24,609,{op:"isNumber!",node:__wrap(left,139)},"expression",false,false);}else if(this.name(right)==="Boolean"){return __node("MacroAccess",611,18,25,611,{op:"isBoolean!",node:__wrap(left,139)},"expression",false,false);}else if(this.name(right)==="Function"){return __node("MacroAccess",613,18,26,613,{op:"isFunction!",node:__wrap(left,139)},"expression",false,false);}else if(this.name(right)==="Array"){return __node("MacroAccess",615,18,27,615,{op:"isArray!",node:__wrap(left,139)},"expression",false,false);}else if(this.name(right)==="Object"){return __node("MacroAccess",617,18,28,617,{op:"isObject!",node:__wrap(left,139)},"expression",false,false);}}return this.binary(left,"instanceof",right);};}.call(this));',operators:"instanceof",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:72},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",635,7,__node("Ident",635,7,"__cmp"),[__wrap(left,142),__wrap(right,142)],false,false);};}.call(this));',operators:"<=>",options:{precedence:5,maximum:1,type:"number"},id:73},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",638,7,5,638,{left:__node("MacroAccess",638,7,62,638,{left:__wrap(left,143),inverted:false,op:"%",right:__wrap(right,143)},"expression",false,false),inverted:false,op:"==",right:__node("Const",638,26,0)},"expression",false,false);};}.call(this));',operators:"%%",options:{precedence:2,maximum:1,invertible:!0,type:"boolean"},id:74},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",641,7,5,641,{left:__node("MacroAccess",641,7,45,641,{left:__wrap(left,144),inverted:false,op:"~%",right:__wrap(right,144)},"expression",false,false),inverted:false,op:"==",right:__node("Const",641,27,0)},"expression",false,false);};}.call(this));',operators:"~%%",options:{precedence:2,maximum:1,invertible:!0,type:"boolean"},id:75},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"number")){if(this.isType(right,"number")){if(op==="<"){return __node("MacroAccess",679,13,9,679,{left:__wrap(left,151),inverted:false,op:"~<",right:__wrap(right,151)},"expression",false,false);}else{return __node("MacroAccess",681,13,9,681,{left:__wrap(left,151),inverted:false,op:"~<=",right:__wrap(right,151)},"expression",false,false);}}else if(op==="<"){return __node("MacroAccess",684,13,9,684,{left:__wrap(left,151),inverted:false,op:"~<",right:__node("Call",684,22,__node("Ident",684,22,"__num"),[__wrap(right,151)],false,false)},"expression",false,false);}else{return __node("MacroAccess",686,13,9,686,{left:__wrap(left,151),inverted:false,op:"~<=",right:__node("Call",686,23,__node("Ident",686,23,"__num"),[__wrap(right,151)],false,false)},"expression",false,false);}}else if(this.isType(left,"string")){if(this.isType(right,"string")){if(op==="<"){return __node("MacroAccess",690,13,9,690,{left:__wrap(left,151),inverted:false,op:"~<",right:__wrap(right,151)},"expression",false,false);}else{return __node("MacroAccess",692,13,9,692,{left:__wrap(left,151),inverted:false,op:"~<=",right:__wrap(right,151)},"expression",false,false);}}else if(op==="<"){return __node("MacroAccess",695,13,9,695,{left:__wrap(left,151),inverted:false,op:"~<",right:__node("Call",695,22,__node("Ident",695,22,"__str"),[__wrap(right,151)],false,false)},"expression",false,false);}else{return __node("MacroAccess",697,13,9,697,{left:__wrap(left,151),inverted:false,op:"~<=",right:__node("Call",697,23,__node("Ident",697,23,"__str"),[__wrap(right,151)],false,false)},"expression",false,false);}}else if(this.isType(right,"number")){if(op==="<"){return __node("MacroAccess",700,11,9,700,{left:__node("Call",700,11,__node("Ident",700,11,"__num"),[__wrap(left,151)],false,false),inverted:false,op:"~<",right:__wrap(right,151)},"expression",false,false);}else{return __node("MacroAccess",702,11,9,702,{left:__node("Call",702,11,__node("Ident",702,11,"__num"),[__wrap(left,151)],false,false),inverted:false,op:"~<=",right:__wrap(right,151)},"expression",false,false);}}else if(this.isType(right,"string")){if(op==="<"){return __node("MacroAccess",705,11,9,705,{left:__node("Call",705,11,__node("Ident",705,11,"__str"),[__wrap(left,151)],false,false),inverted:false,op:"~<",right:__wrap(right,151)},"expression",false,false);}else{return __node("MacroAccess",707,11,9,707,{left:__node("Call",707,11,__node("Ident",707,11,"__str"),[__wrap(left,151)],false,false),inverted:false,op:"~<=",right:__wrap(right,151)},"expression",false,false);}}else if(op==="<"){return __node("Call",709,9,__node("Ident",709,9,"__lt"),[__wrap(left,151),__wrap(right,151)],false,false);}else{return __node("Call",711,9,__node("Ident",711,9,"__lte"),[__wrap(left,151),__wrap(right,151)],false,false);}};}.call(this));',operators:["<","<="],options:{precedence:2,maximum:1,type:"boolean"},id:76},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op===">"){return __node("MacroAccess",715,9,3,715,{op:"not",node:__node("MacroAccess",715,15,76,715,{left:__wrap(left,152),inverted:false,op:"<=",right:__wrap(right,152)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",717,9,3,717,{op:"not",node:__node("MacroAccess",717,15,76,717,{left:__wrap(left,152),inverted:false,op:"<",right:__wrap(right,152)},"expression",false,false)},"expression",false,false);}};}.call(this));',operators:[">",">="],options:{precedence:2,maximum:1,type:"boolean"},id:77},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",722,11,16,722,{macroName:"if",macroData:{test:__node("MacroAccess",722,14,9,722,{left:__wrap(setLeft,155),inverted:false,op:"~<",right:__wrap(setRight,155)},"expression",false,false),body:__wrap(left,155),elseIfs:[],elseBody:__wrap(right,155)}},"expression",false,false);});});};}.call(this));',operators:"~min",options:{precedence:8},id:78},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",727,11,16,727,{macroName:"if",macroData:{test:__node("MacroAccess",727,14,10,727,{left:__wrap(setLeft,158),inverted:false,op:"~>",right:__wrap(setRight,158)},"expression",false,false),body:__wrap(left,158),elseIfs:[],elseBody:__wrap(right,158)}},"expression",false,false);});});};}.call(this));',operators:"~max",options:{precedence:8},id:79},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",732,11,16,732,{macroName:"if",macroData:{test:__node("MacroAccess",732,14,76,732,{left:__wrap(setLeft,161),inverted:false,op:"<",right:__wrap(setRight,161)},"expression",false,false),body:__wrap(left,161),elseIfs:[],elseBody:__wrap(right,161)}},"expression",false,false);});});};}.call(this));',operators:"min",options:{precedence:8},id:80},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",737,11,16,737,{macroName:"if",macroData:{test:__node("MacroAccess",737,14,77,737,{left:__wrap(setLeft,164),inverted:false,op:">",right:__wrap(setRight,164)},"expression",false,false),body:__wrap(left,164),elseIfs:[],elseBody:__wrap(right,164)}},"expression",false,false);});});};}.call(this));',operators:"max",options:{precedence:8},id:81},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",740,7,__node("Ident",740,7,"__xor"),[__wrap(left,165),__wrap(right,165)],false,false);};}.call(this));',operators:"xor",options:{precedence:1},id:82},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",744,9,16,744,{macroName:"if",macroData:{test:__node("MacroAccess",744,12,20,744,{op:"?",node:__wrap(setLeft,167)},"expression",false,false),body:__wrap(left,167),elseIfs:[],elseBody:__wrap(right,167)}},"expression",false,false);});};}.call(this));',operators:"?",options:{precedence:1},id:83},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"&",right);};}.call(this));',operators:"~bitand",options:{precedence:1,type:"number"},id:90},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"|",right);};}.call(this));',operators:"~bitor",options:{precedence:1,type:"number"},id:91},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"^",right);};}.call(this));',operators:"~bitxor",options:{precedence:1,type:"number"},id:92},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",820,7,90,820,{left:__node("MacroAccess",820,7,58,820,{op:"+",node:__wrap(left,190)},"expression",false,false),inverted:false,op:"~bitand",right:__node("MacroAccess",820,22,58,820,{op:"+",node:__wrap(right,190)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"bitand",options:{precedence:1,type:"number"},id:94},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",823,7,91,823,{left:__node("MacroAccess",823,7,58,823,{op:"+",node:__wrap(left,191)},"expression",false,false),inverted:false,op:"~bitor",right:__node("MacroAccess",823,21,58,823,{op:"+",node:__wrap(right,191)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"bitor",options:{precedence:1,type:"number"},id:95},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",826,7,92,826,{left:__node("MacroAccess",826,7,58,826,{op:"+",node:__wrap(left,192)},"expression",false,false),inverted:false,op:"~bitxor",right:__node("MacroAccess",826,22,58,826,{op:"+",node:__wrap(right,192)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"bitxor",options:{precedence:1,type:"number"},id:96},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",1084,7,__node("Ident",1084,7,"__range"),[__wrap(left,237),__wrap(right,237),__node("Const",1084,31,1),__node("Const",1084,33,true)],false,false);};}.call(this));',operators:"to",options:{maximum:1,precedence:4,type:"array"},id:108},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",1087,7,__node("Ident",1087,7,"__range"),[__wrap(left,238),__wrap(right,238),__node("Const",1087,31,1),__node("Const",1087,33,false)],false,false);};}.call(this));',operators:"til",options:{maximum:1,precedence:4,type:"array"},id:109},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node){var callArgs,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.hasType(right,"number")){throw Error("Must provide a number to the \'by\' operator");}if(this.isConst(right)&&this.value(right)===0){throw Error("\'by\' step must be non-zero");}if(this.isCall(left)&&this.isIdent(this.callFunc(left))&&this.name(this.callFunc(left))==="__range"&&!this.callIsApply(left)){callArgs=this.callArgs(left);return __node("Call",1096,9,__node("Ident",1096,9,"__range"),[__wrap(callArgs[0],239),__wrap(callArgs[1],239),__wrap(right,239),__wrap(callArgs[3],239)],false,false);}else{if(this.isConst(right)&&__num(this.value(right))%1!==0){throw Error("\'by\' step must be an integer");}return __node("Call",1100,9,__node("Ident",1100,9,"__step"),[__wrap(left,239),__wrap(right,239)],false,false);}};}.call(this));',operators:"by",options:{maximum:1,precedence:3,type:"array"},id:110},{code:'return (function(){"use strict";var __lt,__num,__typeof;__lt=function(x,y){var type;type=typeof x;if(type!=="number"&&type!=="string"){throw TypeError("Cannot compare a non-number/string: "+type);}else if(type!==typeof y){throw TypeError("Cannot compare elements of different types: "+type+" vs "+typeof y);}else{return x<y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node){var element,elements,f,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isArray(right)){elements=this.elements(right);if(elements.length===0){if(this.isComplex(left)){return __node("Block",1962,1,[__wrap(left,400),__node("Const",1963,11,false)],null);}else{return __node("Const",1965,13,false);}}else if(elements.length===1){element=elements[0];return __node("MacroAccess",1968,11,72,1968,{left:__wrap(left,400),inverted:false,op:"instanceof",right:__wrap(element,400)},"expression",false,false);}else{f=function(i,current,left){var element;if(__lt(i,elements.length)){element=elements[i];return f(__num(i)+1,__node("MacroAccess",1973,24,2,1973,{left:__wrap(current,403),inverted:false,op:"or",right:__node("MacroAccess",1973,36,72,1973,{left:__wrap(left,403),inverted:false,op:"instanceof",right:__wrap(element,403)},"expression",false,false)},"expression",false,false),left);}else{return current;}};return this.maybeCache(left,function(setLeft,left){var element;element=elements[0];return f(1,__node("MacroAccess",1978,18,72,1978,{left:__wrap(setLeft,405),inverted:false,op:"instanceof",right:__wrap(element,405)},"expression",false,false),left);});}}else{return __node("Call",1980,9,__node("Ident",1980,9,"__instanceofsome"),[__wrap(left,400),__wrap(right,400)],false,false);}};}.call(this));',operators:"instanceofsome",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:116},{code:'return (function(){"use strict";var __is,__num,__typeof;__is=typeof Object.is==="function"?Object.is:function(x,y){if(x===y){return x!==0||1/x===1/y;}else{return x!==x&&y!==y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node){var _this,left,op,result,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.hasType(left,"number")&&this.hasType(right,"number")){if(this.isConst(left)){if(this.isConst(right)){result=__is(this.value(left),this.value(right));return __wrap(result,970);}else if(typeof this.value(left)==="number"&&isNaN(this.value(left))){return this.maybeCache(right,function(setRight,right){return __node("MacroAccess",3175,17,6,3175,{left:__wrap(setRight,972),inverted:false,op:"!=",right:__wrap(right,972)},"expression",false,false);});}else if(this.value(left)===0){return this.maybeCache(right,function(setRight,right){if(1/__num(_this.value(left))<0){return __node("MacroAccess",3179,19,1,3179,{left:__node("MacroAccess",3179,19,5,3179,{left:__wrap(setRight,973),inverted:false,op:"==",right:__node("Const",3179,34,0)},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",3179,39,76,3179,{left:__node("MacroAccess",3179,39,45,3179,{left:__node("Const",3179,40,1),inverted:false,op:"~/",right:__wrap(right,973)},"expression",false,false),inverted:false,op:"<",right:__node("Const",3179,54,0)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",3181,19,1,3181,{left:__node("MacroAccess",3181,19,5,3181,{left:__wrap(setRight,973),inverted:false,op:"==",right:__node("Const",3181,34,0)},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",3181,39,77,3181,{left:__node("MacroAccess",3181,39,45,3181,{left:__node("Const",3181,40,1),inverted:false,op:"~/",right:__wrap(right,973)},"expression",false,false),inverted:false,op:">",right:__node("Const",3181,54,0)},"expression",false,false)},"expression",false,false);}});}else{return __node("MacroAccess",3183,15,5,3183,{left:__wrap(left,970),inverted:false,op:"==",right:__wrap(right,970)},"expression",false,false);}}else if(this.isConst(right)){if(typeof this.value(right)==="number"&&isNaN(this.value(right))){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",3187,15,6,3187,{left:__wrap(setLeft,974),inverted:false,op:"!=",right:__wrap(left,974)},"expression",false,false);});}else if(this.value(right)===0){return this.maybeCache(left,function(setLeft,left){if(1/__num(_this.value(right))<0){return __node("MacroAccess",3191,17,1,3191,{left:__node("MacroAccess",3191,17,5,3191,{left:__wrap(setLeft,975),inverted:false,op:"==",right:__node("Const",3191,31,0)},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",3191,36,76,3191,{left:__node("MacroAccess",3191,36,45,3191,{left:__node("Const",3191,37,1),inverted:false,op:"~/",right:__wrap(left,975)},"expression",false,false),inverted:false,op:"<",right:__node("Const",3191,50,0)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",3193,17,1,3193,{left:__node("MacroAccess",3193,17,5,3193,{left:__wrap(setLeft,975),inverted:false,op:"==",right:__node("Const",3193,31,0)},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",3193,36,77,3193,{left:__node("MacroAccess",3193,36,45,3193,{left:__node("Const",3193,37,1),inverted:false,op:"~/",right:__wrap(left,975)},"expression",false,false),inverted:false,op:">",right:__node("Const",3193,50,0)},"expression",false,false)},"expression",false,false);}});}else{return __node("MacroAccess",3195,13,5,3195,{left:__wrap(left,970),inverted:false,op:"==",right:__wrap(right,970)},"expression",false,false);}}else{return __node("Call",3197,11,__node("Ident",3197,11,"__is"),[__wrap(left,970),__wrap(right,970)],false,false);}}else{return __node("MacroAccess",3199,9,5,3199,{left:__wrap(left,970),inverted:false,op:"==",right:__wrap(right,970)},"expression",false,false);}};}.call(this));',operators:"is",options:{precedence:2,maximum:1,type:"boolean"},id:143},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",3202,7,3,3202,{op:"not",node:__node("MacroAccess",3202,13,143,3202,{left:__wrap(left,976),inverted:false,op:"is",right:__wrap(right,976)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"isnt",options:{precedence:2,maximum:1,type:"boolean"},id:144},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",3261,7,__node("Ident",3261,7,"__compose"),[__wrap(left,994),__wrap(right,994)],false,false);};}.call(this));',operators:"<<",options:{precedence:13,type:"function"},id:146},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",3267,1,[__node("MacroAccess",3267,7,38,3267,{macroName:"let",macroData:{declarable:__node("MacroAccess",3267,10,37,3267,__node("MacroAccess",3267,10,31,3267,{ident:__wrap(tmp,995)},"statement",false,false),"statement",false,false),value:__wrap(left,995)}},"statement",false,false),__node("Call",3268,7,__node("Ident",3268,7,"__compose"),[__wrap(right,995),__wrap(tmp,995)],false,false)],null);}else{return __node("Call",3270,9,__node("Ident",3270,9,"__compose"),[__wrap(right,995),__wrap(left,995)],false,false);}};}.call(this));',operators:">>",options:{precedence:13,type:"function",rightToLeft:!0},id:147},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",3289,7,__wrap(left,1002),[__wrap(right,1002)],false,false);};}.call(this));',operators:"<|",options:{precedence:0,rightToLeft:!0},id:148},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",3295,1,[__node("MacroAccess",3295,7,38,3295,{macroName:"let",macroData:{declarable:__node("MacroAccess",3295,10,37,3295,__node("MacroAccess",3295,10,31,3295,{ident:__wrap(tmp,1003)},"statement",false,false),"statement",false,false),value:__wrap(left,1003)}},"statement",false,false),__node("Call",3296,7,__wrap(right,1003),[__wrap(tmp,1003)],false,false)],null);}else{return __node("Call",3298,9,__wrap(right,1003),[__wrap(left,1003)],false,false);}};}.call(this));',operators:"|>",options:{precedence:0},id:149},{code:'return (function(){"use strict";var __isArray,__slice,__strnum,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isObject(right)){return this.maybeCache(left,function(setLeft,nextLeft){var _arr,_ref,block,currentLeft,descriptor,i,key,len,pairs,property,value;currentLeft=setLeft;block=[];pairs=_this.pairs(right);for(_arr=__toArray(pairs), i=0, len=_arr.length;i<len;++i){key=(_ref=_arr[i]).key;value=_ref.value;property=_ref.property;if(property!=null){if((property==="get"||property==="set")&&i<len-1&&pairs[i+1].property!=null&&_this.eq(key,pairs[i+1].key)&&pairs[i+1].property!==property&&((_ref=pairs[i+1].property)==="get"||_ref==="set")){continue;}if(property==="property"){block.push(__node("Call",3317,27,__node("Ident",3317,27,"__defProp"),[__wrap(currentLeft,1008),__wrap(key,1008),__wrap(value,1008)],false,false));}else if(property==="get"||property==="set"){if(i>0&&pairs[i-1].property!=null&&_this.eq(key,pairs[i-1].key)&&pairs[i-1].property!==property&&((_ref=pairs[i-1].property)==="get"||_ref==="set")){descriptor=__node("Object",109664,109852,[{key:__wrap(pairs[i-1].property,1008),value:__wrap(pairs[i-1].value,1008),property:void 0},{key:__wrap(property,1008),value:__wrap(value,1008),property:void 0},{key:__node("Const",3323,17,"enumerable"),value:__node("Const",3323,28,true),property:void 0},{key:__node("Const",3324,17,"configurable"),value:__node("Const",3324,30,true),property:void 0}],void 0);}else{descriptor=__node("Object",109888,110010,[{key:__wrap(property,1008),value:__wrap(value,1008),property:void 0},{key:__node("Const",3329,17,"enumerable"),value:__node("Const",3329,28,true),property:void 0},{key:__node("Const",3330,17,"configurable"),value:__node("Const",3330,30,true),property:void 0}],void 0);}block.push(__node("Call",3332,27,__node("Ident",3332,27,"__defProp"),[__wrap(currentLeft,1008),__wrap(key,1008),__wrap(descriptor,1008)],false,false));}else{throw Error("Unknown property: "+__strnum(property));}}else{block.push(__node("MacroAccess",3336,25,30,3336,{left:__node("Access",3336,39,__wrap(currentLeft,1008),__wrap(key,1008)),op:":=",right:__wrap(value,1008)},"statement",false,false));}currentLeft=nextLeft;}block.push(__wrap(currentLeft,1008));return __wrap(block,1008);});}else{return __node("Call",3341,9,__node("Ident",3341,9,"__import"),[__wrap(left,1007),__wrap(right,1007)],false,false);}};}.call(this));',operators:"<<<",options:{precedence:6},id:150},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",3347,1,[__node("MacroAccess",3347,7,38,3347,{macroName:"let",macroData:{declarable:__node("MacroAccess",3347,10,37,3347,__node("MacroAccess",3347,10,31,3347,{ident:__wrap(tmp,1015)},"statement",false,false),"statement",false,false),value:__wrap(left,1015)}},"statement",false,false),__node("MacroAccess",3348,7,150,3348,{left:__wrap(right,1015),inverted:false,op:"<<<",right:__wrap(tmp,1015)},"statement",false,false)],null);}else{return __node("MacroAccess",3350,9,150,3350,{left:__wrap(right,1015),inverted:false,op:"<<<",right:__wrap(left,1015)},"expression",false,false);}};}.call(this));',operators:">>>",options:{precedence:6,rightToLeft:!0},id:151}],unaryOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("!",n);},true);};}.call(this));',operators:"not",options:{type:"boolean"},id:3},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("typeof",n);},true);};}.call(this));',operators:"typeof",options:{type:"string"},id:4},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this["throw"](n);},true);};}.call(this));',operators:"throw",options:{type:"none"},id:11},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return this.unary("++post",node);};}.call(this));',operators:"postInc!",options:{type:"number"},id:12},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return this.unary("--post",node);};}.call(this));',operators:"postDec!",options:{type:"number"},id:13},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",102,9,1,102,{left:__node("MacroAccess",102,9,6,102,{left:__node("MacroAccess",102,9,4,102,{op:"typeof",node:__wrap(node,29)},"expression",false,false),inverted:false,op:"!=",right:__node("Const",102,27,"undefined")},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",102,40,6,102,{left:__wrap(node,29),inverted:false,op:"!=",right:__node("Const",102,49,null)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",104,9,8,104,{left:__wrap(node,29),inverted:false,op:"!~=",right:__node("Const",104,19,null)},"expression",false,false);}};}.call(this));',operators:"?",options:{postfix:!0,type:"boolean",label:"existential"},id:20},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",108,9,5,108,{left:__node("MacroAccess",108,9,4,108,{op:"typeof",node:__wrap(node,30)},"expression",false,false),inverted:false,op:"==",right:__node("Const",108,27,"undefined")},"expression",false,false);}else{return __node("MacroAccess",110,9,5,110,{left:__wrap(node,30),inverted:false,op:"==",right:__node("Const",110,18,void 0)},"expression",false,false);}};}.call(this));',operators:["isVoid!","isUndefined!"],options:{type:"boolean"},id:21},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",114,9,1,114,{left:__node("MacroAccess",114,9,6,114,{left:__node("MacroAccess",114,9,4,114,{op:"typeof",node:__wrap(node,31)},"expression",false,false),inverted:false,op:"!=",right:__node("Const",114,27,"undefined")},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",114,40,5,114,{left:__wrap(node,31),inverted:false,op:"==",right:__node("Const",114,49,null)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",116,9,5,116,{left:__wrap(node,31),inverted:false,op:"==",right:__node("Const",116,18,null)},"expression",false,false);}};}.call(this));',operators:"isNull!",options:{type:"boolean"},id:22},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",119,7,5,119,{left:__node("MacroAccess",119,7,4,119,{op:"typeof",node:__wrap(node,32)},"expression",false,false),inverted:false,op:"==",right:__node("Const",119,25,"string")},"expression",false,false);};}.call(this));',operators:"isString!",options:{type:"boolean"},id:23},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",122,7,5,122,{left:__node("MacroAccess",122,7,4,122,{op:"typeof",node:__wrap(node,33)},"expression",false,false),inverted:false,op:"==",right:__node("Const",122,25,"number")},"expression",false,false);};}.call(this));',operators:"isNumber!",options:{type:"boolean"},id:24},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",125,7,5,125,{left:__node("MacroAccess",125,7,4,125,{op:"typeof",node:__wrap(node,34)},"expression",false,false),inverted:false,op:"==",right:__node("Const",125,25,"boolean")},"expression",false,false);};}.call(this));',operators:"isBoolean!",options:{type:"boolean"},id:25},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",128,7,5,128,{left:__node("MacroAccess",128,7,4,128,{op:"typeof",node:__wrap(node,35)},"expression",false,false),inverted:false,op:"==",right:__node("Const",128,25,"function")},"expression",false,false);};}.call(this));',operators:"isFunction!",options:{type:"boolean"},id:26},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.isIdentOrTmp(n)&&!_this.hasVariable(n)&&__node("MacroAccess",131,97,1,131,{left:__node("MacroAccess",131,97,5,131,{left:__node("MacroAccess",131,97,4,131,{op:"typeof",node:__wrap(n,37)},"expression",false,false),inverted:false,op:"==",right:__node("Const",131,112,"object")},"expression",false,false),inverted:false,op:"and",right:__node("Call",131,122,__node("Ident",131,122,"__isArray"),[__wrap(n,37)],false,false)},"expression",false,false)||__node("Call",131,146,__node("Ident",131,146,"__isArray"),[__wrap(n,37)],false,false);},true);};}.call(this));',operators:"isArray!",options:{type:"boolean"},id:27},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return __node("MacroAccess",134,47,1,134,{left:__node("MacroAccess",134,47,5,134,{left:__node("MacroAccess",134,47,4,134,{op:"typeof",node:__wrap(n,39)},"expression",false,false),inverted:false,op:"==",right:__node("Const",134,62,"object")},"expression",false,false),inverted:false,op:"and",right:__node("MacroAccess",134,72,6,134,{left:__wrap(n,39),inverted:false,op:"!=",right:__node("Const",134,78,null)},"expression",false,false)},"expression",false,false);},true);};}.call(this));',operators:"isObject!",options:{type:"boolean"},id:28},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,negate,node,op,value;_this=this;op=macroData.op;node=macroData.node;if(this.isConst(node)){value=Number(this.value(node));if(op==="~-"){negate=function(x){return -x;};value=negate(value);}return this["const"](value);}else{return this.mutateLast(node||this.noop(),function(n){return _this.unary(op==="~+"?"+":"-",n);},true);}};}.call(this));',operators:["~+","~-"],options:{type:"number"},id:48},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",475,9,16,475,{macroName:"if",macroData:{test:__node("MacroAccess",475,12,5,475,{left:__node("MacroAccess",475,12,4,475,{op:"typeof",node:__wrap(node,112)},"expression",false,false),inverted:false,op:"==",right:__node("Const",475,30,"undefined")},"expression",false,false),body:__node("Const",475,45,"Undefined"),elseIfs:[],elseBody:__node("Call",475,61,__node("Ident",475,61,"__typeof"),[__wrap(node,112)],false,false)}},"expression",false,false);}else{return this.mutateLast(node||this.noop(),function(n){return __node("Call",477,49,__node("Ident",477,49,"__typeof"),[__wrap(n,113)],false,false);},true);}};}.call(this));',operators:"typeof!",options:{type:"string"},id:57},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"number")){return n;}else{return __node("Call",507,11,__node("Ident",507,11,"__num"),[__wrap(n,119)],false,false);}},true);};}.call(this));',operators:"+",options:{type:"number"},id:58},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;if(this.isConst(node)&&typeof this.value(node)==="number"){return this["const"](-this.value(node));}else{return __node("MacroAccess",513,9,48,513,{op:"~-",node:__node("MacroAccess",513,13,58,513,{op:"+",node:__wrap(node,120)},"expression",false,false)},"expression",false,false);}};}.call(this));',operators:"-",options:{type:"number"},id:59},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",533,7,62,533,{left:__wrap(node,125),inverted:false,op:"/",right:__node("Const",533,16,100)},"expression",false,false);};}.call(this));',operators:"%",options:{postfix:!0,type:"number"},id:63},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("~",n);},true);};}.call(this));',operators:"~bitnot",options:{type:"number"},id:97},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",832,7,97,832,{op:"~bitnot",node:__node("MacroAccess",832,15,58,832,{op:"+",node:__wrap(node,195)},"expression",false,false)},"expression",false,false);};}.call(this));',operators:"bitnot",options:{type:"number"},id:98},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;if(!this.isAccess(node)){throw Error("Can only use delete on an access");}if(this.position==="expression"){return this.maybeCacheAccess(node,function(setNode,node){var del,tmp;tmp=_this.tmp("ref");del=_this.unary("delete",node);return __node("Block",842,1,[__node("MacroAccess",842,9,38,842,{macroName:"let",macroData:{declarable:__node("MacroAccess",842,12,37,842,__node("MacroAccess",842,12,31,842,{ident:__wrap(tmp,197)},"statement",false,false),"statement",false,false),value:__wrap(setNode,197)}},"statement",false,false),__wrap(del,197),__wrap(tmp,197)],null);});}else{return this.unary("delete",node);}};}.call(this));',operators:"delete",options:{standalone:!1},id:99},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return this.maybeCache(node,function(setNode,node){return __node("MacroAccess",850,9,16,850,{macroName:"if",macroData:{test:__node("MacroAccess",850,12,20,850,{op:"?",node:__wrap(setNode,202)},"expression",false,false),body:__node("MacroAccess",850,28,11,850,{op:"throw",node:__wrap(node,202)},"expression",false,false),elseIfs:[]}},"expression",false,false);});};}.call(this));',operators:"throw?",options:{type:"undefined"},id:100},{code:'return (function(){"use strict";var __isArray,__num,__owns,__slice,__strnum,__toArray,__typeof,__xor;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__owns=Object.prototype.hasOwnProperty;__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());__xor=function(x,y){if(x){return !y&&x;}else{return y||x;}};return function(macroData,__wrap,__node){var _arr,_arr2,_i,_len,_this,body,changed,foundSpread,genericArg,genericArgs,genericCache,genericParams,i,ident,init,initIndex,instanceofLets,instanceofs,item,key,len,makeFunctionFunc,makeFunctionIdent,name,node,op,p,param,params,PRIMORDIAL_TYPES,result,spreadCounter;_this=this;op=macroData.op;node=macroData.node;function article(text){if(/^[aeiou]/i.test(text)){return "an";}else{return "a";}};function withArticle(text){return article(text)+" "+__strnum(text);};PRIMORDIAL_TYPES={Number:true,String:true,Boolean:true,Function:true,Array:true,Object:true};function translateGenericType(type){var _ref,basetype,typeArguments;if(!_this.isTypeGeneric(type)){return type;}else{basetype=_this.basetype(type);if((_ref=_this.name(basetype))==="Array"||_ref==="Function"){return basetype;}else{typeArguments=_this.array((function(){var _arr,_arr2,_i,_len,subtype;for(_arr=[], _arr2=__toArray(_this.typeArguments(type)), _i=0, _len=_arr2.length;_i<_len;++_i){subtype=_arr2[_i];_arr.push(translateGenericType(subtype));}return _arr;}()));return __node("Call",1631,13,__node("Access",1631,13,__wrap(basetype,330),__node("Const",1631,24,"generic")),[__node("Spread",1631,32,__wrap(typeArguments,330))],false,false);}}};function translateTypeCheck(value,valueName,type,hasDefaultValue){var _arr,_arr2,_i,_len,_ref,check,checks,current,genericType,hasBoolean,hasNull,hasVoid,index,key,name,names,pairValue,result,subCheck,t,test,tests,typeNames;if(_this.isIdent(type)){if(__owns.call(PRIMORDIAL_TYPES,_this.name(type))){result=__node("MacroAccess",1636,11,17,1636,{macroName:"if",macroData:{test:__node("MacroAccess",1636,13,72,1636,{left:__wrap(value,333),inverted:true,op:"instanceof",right:__wrap(type,333)},"statement",false,false),body:__node("MacroAccess",1637,13,11,1637,{op:"throw",node:__node("Call",1637,18,__node("Ident",1637,18,"TypeError"),[__node("MacroAccess",1637,29,67,1637,{left:__node("MacroAccess",1637,29,67,1637,{left:__node("MacroAccess",1637,29,67,1637,{left:__node("MacroAccess",1637,29,67,1637,{left:__node("MacroAccess",1637,29,67,1637,{left:__node("Const",1637,29,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1637,29," to be ")},"expression",false,false),op:"",right:__wrap(withArticle(_this.name(type)),333)},"expression",false,false),op:"",right:__node("Const",1637,29,", got ")},"expression",false,false),op:"",right:__node("MacroAccess",1637,98,57,1637,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[]}},"statement",false,false);}else{result=__node("MacroAccess",1640,11,17,1640,{macroName:"if",macroData:{test:__node("MacroAccess",1640,13,72,1640,{left:__wrap(value,333),inverted:true,op:"instanceof",right:__wrap(type,333)},"statement",false,false),body:__node("MacroAccess",1641,13,11,1641,{op:"throw",node:__node("Call",1641,18,__node("Ident",1641,18,"TypeError"),[__node("MacroAccess",1641,29,67,1641,{left:__node("MacroAccess",1641,29,67,1641,{left:__node("MacroAccess",1641,29,67,1641,{left:__node("MacroAccess",1641,29,67,1641,{left:__node("MacroAccess",1641,29,67,1641,{left:__node("Const",1641,29,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1641,29," to be a ")},"expression",false,false),op:"",right:__node("Call",1641,64,__node("Ident",1641,64,"__name"),[__wrap(type,333)],false,false)},"expression",false,false),op:"",right:__node("Const",1641,29,", got ")},"expression",false,false),op:"",right:__node("MacroAccess",1641,85,57,1641,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[]}},"statement",false,false);}if(!hasDefaultValue&&_this.name(type)==="Boolean"){return __node("MacroAccess",1643,13,17,1643,{macroName:"if",macroData:{test:__node("MacroAccess",1643,16,3,1643,{op:"not",node:__node("MacroAccess",1643,20,20,1643,{op:"?",node:__wrap(value,333)},"statement",false,true)},"statement",false,true),body:__node("MacroAccess",1644,11,30,1644,{left:__wrap(value,333),op:":=",right:__node("Const",1644,20,false)},"statement",false,true),elseIfs:[],elseBody:__wrap(result,333)}},"statement",false,true);}else{return result;}}else if(_this.isAccess(type)){return __node("MacroAccess",1651,9,17,1651,{macroName:"if",macroData:{test:__node("MacroAccess",1651,11,72,1651,{left:__wrap(value,333),inverted:true,op:"instanceof",right:__wrap(type,333)},"statement",false,false),body:__node("MacroAccess",1652,11,11,1652,{op:"throw",node:__node("Call",1652,16,__node("Ident",1652,16,"TypeError"),[__node("MacroAccess",1652,27,67,1652,{left:__node("MacroAccess",1652,27,67,1652,{left:__node("MacroAccess",1652,27,67,1652,{left:__node("MacroAccess",1652,27,67,1652,{left:__node("MacroAccess",1652,27,67,1652,{left:__node("Const",1652,27,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1652,27," to be ")},"expression",false,false),op:"",right:__wrap(withArticle(_this.value(_this.child(type))),333)},"expression",false,false),op:"",right:__node("Const",1652,27,", got ")},"expression",false,false),op:"",right:__node("MacroAccess",1652,105,57,1652,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[]}},"statement",false,false);}else if(_this.isTypeUnion(type)){hasBoolean=false;hasVoid=false;hasNull=false;names=[];tests=[];for(_arr=__toArray(_this.types(type)), _i=0, _len=_arr.length;_i<_len;++_i){t=_arr[_i];if(_this.isConst(t)){if(_this.value(t)===null){hasNull=true;names.push(_this["const"]("null"));}else if(_this.value(t)===void 0){hasVoid=true;names.push(_this["const"]("undefined"));}else{throw Error("Unknown const value for typechecking: "+String(_this.value(t)));}}else if(_this.isIdent(t)){if(_this.name(t)==="Boolean"){hasBoolean=true;}if(__owns.call(PRIMORDIAL_TYPES,_this.name(t))){names.push(_this["const"](_this.name(t)));}else{names.push(__node("Call",1676,28,__node("Ident",1676,28,"__name"),[__wrap(t,333)],false,false));}tests.push(__node("MacroAccess",1677,26,72,1677,{left:__wrap(value,333),inverted:true,op:"instanceof",right:__wrap(t,333)},"expression",false,false));}else{throw Error("Not implemented: typechecking for non-idents/consts within a type-union");}}if(tests.length){test=_this.binaryChain("&&",tests);}else{test=__node("Const",1684,13,true);}current=names[0];for(_i=1, _len=names.length;_i<_len;++_i){name=names[_i];current=__node("MacroAccess",1686,14,67,1686,{left:__node("MacroAccess",1686,14,67,1686,{left:__wrap(current,333),op:"",right:__node("Const",1686,14," or ")},"expression",false,false),op:"",right:__wrap(name,333)},"expression",false,false);}typeNames=current;result=__node("MacroAccess",1687,31,17,1687,{macroName:"if",macroData:{test:__wrap(test,333),body:__node("MacroAccess",1688,9,11,1688,{op:"throw",node:__node("Call",1688,14,__node("Ident",1688,14,"TypeError"),[__node("MacroAccess",1688,25,67,1688,{left:__node("MacroAccess",1688,25,67,1688,{left:__node("MacroAccess",1688,25,67,1688,{left:__node("MacroAccess",1688,25,67,1688,{left:__node("MacroAccess",1688,25,67,1688,{left:__node("Const",1688,25,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1688,25," to be one of ")},"expression",false,false),op:"",right:__wrap(typeNames,333)},"expression",false,false),op:"",right:__node("Const",1688,25,", got ")},"expression",false,false),op:"",right:__node("MacroAccess",1688,85,57,1688,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[]}},"statement",false,false);if(!hasDefaultValue){if(hasNull||hasVoid){if(__xor(hasNull,hasVoid)){result=__node("MacroAccess",1693,27,17,1693,{macroName:"if",macroData:{test:__node("MacroAccess",1693,30,3,1693,{op:"not",node:__node("MacroAccess",1693,34,20,1693,{op:"?",node:__wrap(value,333)},"statement",false,true)},"statement",false,true),body:__node("MacroAccess",1694,15,30,1694,{left:__wrap(value,333),op:":=",right:__node("MacroAccess",1694,24,16,1694,{macroName:"if",macroData:{test:__wrap(hasNull,333),body:__node("Const",1694,42,null),elseIfs:[],elseBody:__node("Const",1694,52,void 0)}},"expression",false,true)},"statement",false,true),elseIfs:[],elseBody:__wrap(result,333)}},"statement",false,true);}else{result=__node("MacroAccess",1698,26,17,1698,{macroName:"if",macroData:{test:__node("MacroAccess",1698,29,20,1698,{op:"?",node:__wrap(value,333)},"statement",false,false),body:__wrap(result,333),elseIfs:[]}},"statement",false,false);}}else if(hasBoolean){result=__node("MacroAccess",1701,25,17,1701,{macroName:"if",macroData:{test:__node("MacroAccess",1701,28,3,1701,{op:"not",node:__node("MacroAccess",1701,32,20,1701,{op:"?",node:__wrap(value,333)},"statement",false,true)},"statement",false,true),body:__node("MacroAccess",1702,13,30,1702,{left:__wrap(value,333),op:":=",right:__node("Const",1702,22,false)},"statement",false,true),elseIfs:[],elseBody:__wrap(result,333)}},"statement",false,true);}}return result;}else if(_this.isTypeGeneric(type)){if(_this.name(_this.basetype(type))==="Array"){index=_this.tmp("i",false,"number");subCheck=translateTypeCheck(__node("Access",1709,51,__wrap(value,333),__wrap(index,333)),__node("MacroAccess",1709,74,67,1709,{left:__node("MacroAccess",1709,74,67,1709,{left:__node("MacroAccess",1709,74,67,1709,{left:__wrap(valueName,333),inverted:false,op:"&",right:__node("Const",1709,89,"[")},"expression",false,false),inverted:false,op:"&",right:__wrap(index,333)},"expression",false,false),inverted:false,op:"&",right:__node("Const",1709,104,"]")},"expression",false,false),_this.typeArguments(type)[0],false);return __node("MacroAccess",1710,12,17,1710,{macroName:"if",macroData:{test:__node("MacroAccess",1710,15,3,1710,{op:"not",node:__node("MacroAccess",1710,19,27,1710,{op:"isArray!",node:__wrap(value,333)},"statement",false,false)},"statement",false,false),body:__node("MacroAccess",1711,11,11,1711,{op:"throw",node:__node("Call",1711,16,__node("Ident",1711,16,"TypeError"),[__node("MacroAccess",1711,27,67,1711,{left:__node("MacroAccess",1711,27,67,1711,{left:__node("MacroAccess",1711,27,67,1711,{left:__node("Const",1711,27,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1711,27," to be an Array, got ")},"expression",false,false),op:"",right:__node("MacroAccess",1711,74,57,1711,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",1713,11,104,1713,{macroName:"for",macroData:{init:__node("MacroAccess",1713,16,38,1713,{macroName:"let",macroData:{declarable:__node("MacroAccess",1713,19,37,1713,__node("MacroAccess",1713,19,31,1713,{isMutable:"mutable",ident:__wrap(index,333)},"expression",false,false),"expression",false,false),value:__node("Access",1713,36,__wrap(value,333),__node("Const",1713,44,"length"))}},"expression",false,false),test:__node("MacroAccess",1713,52,13,1713,{op:"postDec!",node:__wrap(index,333)},"statement",false,false),body:__wrap(subCheck,333)}},"statement",false,false)}},"statement",false,false);}else if(_this.name(_this.basetype(type))==="Function"){return translateTypeCheck(value,valueName,_this.basetype(type),hasDefaultValue);}else{genericType=translateGenericType(type);return __node("MacroAccess",1720,11,17,1720,{macroName:"if",macroData:{test:__node("MacroAccess",1720,13,72,1720,{left:__wrap(value,333),inverted:true,op:"instanceof",right:__wrap(genericType,333)},"statement",false,false),body:__node("MacroAccess",1721,13,11,1721,{op:"throw",node:__node("Call",1721,18,__node("Ident",1721,18,"TypeError"),[__node("MacroAccess",1721,29,67,1721,{left:__node("MacroAccess",1721,29,67,1721,{left:__node("MacroAccess",1721,29,67,1721,{left:__node("MacroAccess",1721,29,67,1721,{left:__node("MacroAccess",1721,29,67,1721,{left:__node("Const",1721,29,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1721,29," to be a ")},"expression",false,false),op:"",right:__node("Call",1721,64,__node("Ident",1721,64,"__name"),[__wrap(genericType,333)],false,false)},"expression",false,false),op:"",right:__node("Const",1721,29,", got ")},"expression",false,false),op:"",right:__node("MacroAccess",1721,93,57,1721,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[]}},"statement",false,false);}}else if(_this.isTypeObject(type)){for(_arr=[], _arr2=__toArray(_this.pairs(type)), _i=0, _len=_arr2.length;_i<_len;++_i){key=(_ref=_arr2[_i]).key;pairValue=_ref.value;_arr.push(translateTypeCheck(__node("Access",1724,35,__wrap(value,333),__wrap(key,333)),__node("MacroAccess",1724,56,67,1724,{left:__node("MacroAccess",1724,56,67,1724,{left:__wrap(valueName,333),inverted:false,op:"&",right:__node("Const",1724,71,".")},"expression",false,false),inverted:false,op:"&",right:__wrap(key,333)},"expression",false,false),pairValue,false));}checks=_arr;return __node("MacroAccess",1725,10,17,1725,{macroName:"if",macroData:{test:__node("MacroAccess",1725,13,3,1725,{op:"not",node:__node("MacroAccess",1725,17,28,1725,{op:"isObject!",node:__wrap(value,333)},"statement",false,false)},"statement",false,false),body:__node("MacroAccess",1726,9,11,1726,{op:"throw",node:__node("Call",1726,14,__node("Ident",1726,14,"TypeError"),[__node("MacroAccess",1726,25,67,1726,{left:__node("MacroAccess",1726,25,67,1726,{left:__node("MacroAccess",1726,25,67,1726,{left:__node("Const",1726,25,"Expected "),op:"",right:__wrap(valueName,333)},"expression",false,false),op:"",right:__node("Const",1726,25," to be an Object, got ")},"expression",false,false),op:"",right:__node("MacroAccess",1726,73,57,1726,{op:"typeof!",node:__wrap(value,333)},"expression",false,false)},"expression",false,false)],false,false)},"statement",false,false),elseIfs:[],elseBody:__wrap(checks,333)}},"statement",false,false);}else{throw Error("Unknown type to translate: "+__typeof(type));}};init=[];changed=false;function translateParam(param,inDestructure){var _arr,_i,_len,arrayIdent,asType,blankIdent,defaultValue,element,elementIdent,elementParam,foundSpread,i,ident,initIndex,key,len,objectIdent,pair,paramIdent,spreadCounter,typeCheck,value,valueIdent;if(_this.isArray(param)){changed=true;arrayIdent=_this.tmp("p",false,"array");foundSpread=-1;for(_arr=__toArray(_this.elements(param)), i=0, len=_arr.length;i<len;++i){element=_arr[i];initIndex=init.length;elementParam=translateParam(element,true);if(elementParam!=null){elementIdent=_this.paramIdent(elementParam);if(!_this.paramIsSpread(elementParam)){if(foundSpread===-1){init.splice(initIndex,0,__node("MacroAccess",1746,45,38,1746,{macroName:"let",macroData:{declarable:__node("MacroAccess",1746,49,37,1746,__node("MacroAccess",1746,49,31,1746,{ident:__wrap(elementIdent,345)},"statement",false,false),"statement",false,false),value:__node("Access",1746,66,__wrap(arrayIdent,345),__wrap(i,345))}},"statement",false,false));}else{init.splice(initIndex,0,__node("MacroAccess",1748,45,38,1748,{macroName:"let",macroData:{declarable:__node("MacroAccess",1748,49,37,1748,__node("MacroAccess",1748,49,31,1748,{ident:__wrap(elementIdent,345)},"statement",false,false),"statement",false,false),value:__node("Access",1748,66,__wrap(arrayIdent,345),__node("MacroAccess",1748,80,64,1748,{left:__wrap(spreadCounter,345),inverted:false,op:"+",right:__node("MacroAccess",1748,99,64,1748,{left:__node("MacroAccess",1748,99,64,1748,{left:__wrap(i,345),inverted:false,op:"-",right:__wrap(foundSpread,345)},"expression",false,false),inverted:false,op:"-",right:__node("Const",1748,120,1)},"expression",false,false)},"expression",false,false))}},"statement",false,false));}}else{if(foundSpread!==-1){throw Error("Cannot have multiple spread parameters in an array destructure");}foundSpread=i;if(i===len-1){init.splice(initIndex,0,__node("MacroAccess",1754,45,38,1754,{macroName:"let",macroData:{declarable:__node("MacroAccess",1754,49,37,1754,__node("MacroAccess",1754,49,31,1754,{ident:__wrap(elementIdent,345)},"statement",false,false),"statement",false,false),value:__node("Call",1754,66,__node("Ident",1754,66,"__slice"),[__wrap(arrayIdent,345),__node("Spread",1754,89,__node("MacroAccess",1754,94,16,1754,{macroName:"if",macroData:{test:__node("MacroAccess",1754,96,5,1754,{left:__wrap(i,345),inverted:false,op:"==",right:__node("Const",1754,103,0)},"expression",false,false),body:__node("Array",1754,109,[]),elseIfs:[],elseBody:__node("Array",1754,117,[__wrap(i,345)])}},"expression",false,false))],false,true)}},"statement",false,false));}else{spreadCounter=_this.tmp("i",false,"number");init.splice(initIndex,0,__node("Block",1758,1,[__node("MacroAccess",1758,17,38,1758,{macroName:"let",macroData:{declarable:__node("MacroAccess",1758,20,37,1758,__node("MacroAccess",1758,20,31,1758,{isMutable:"mutable",ident:__wrap(spreadCounter,345)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1758,46,64,1758,{left:__node("Access",1758,46,__wrap(arrayIdent,345),__node("Const",1758,60,"length")),inverted:false,op:"-",right:__node("MacroAccess",1758,70,64,1758,{left:__node("MacroAccess",1758,70,64,1758,{left:__wrap(len,345),inverted:false,op:"-",right:__wrap(i,345)},"expression",false,false),inverted:false,op:"-",right:__node("Const",1758,82,1)},"expression",false,false)},"expression",false,false)}},"statement",false,false),__node("MacroAccess",1759,17,38,1759,{macroName:"let",macroData:{declarable:__node("MacroAccess",1759,20,37,1759,__node("MacroAccess",1759,20,31,1759,{ident:__wrap(elementIdent,345)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1759,37,17,1759,{macroName:"if",macroData:{test:__node("MacroAccess",1759,40,77,1759,{left:__wrap(spreadCounter,345),inverted:false,op:">",right:__wrap(i,345)},"expression",false,false),body:__node("Call",1760,19,__node("Ident",1760,19,"__slice"),[__wrap(arrayIdent,345),__wrap(i,345),__wrap(spreadCounter,345)],false,true),elseIfs:[],elseBody:__node("Block",1762,1,[__node("MacroAccess",1762,19,30,1762,{left:__wrap(spreadCounter,345),op:":=",right:__wrap(i,345)},"statement",false,false),__node("Array",1763,19,[])],null)}},"expression",false,false)}},"statement",false,false)],null));}}}}return _this.rewrap(_this.param(arrayIdent,null,false,false,null),param);}else if(_this.isObject(param)){changed=true;objectIdent=_this.tmp("p",false,"object");for(_arr=__toArray(_this.pairs(param)), _i=0, _len=_arr.length;_i<_len;++_i){pair=_arr[_i];initIndex=init.length;value=translateParam(pair.value,true);if(value!=null){valueIdent=_this.paramIdent(value);key=pair.key;init.splice(initIndex,0,__node("MacroAccess",1775,41,38,1775,{macroName:"let",macroData:{declarable:__node("MacroAccess",1775,45,37,1775,__node("MacroAccess",1775,45,31,1775,{ident:__wrap(valueIdent,345)},"statement",false,false),"statement",false,false),value:__node("Access",1775,60,__wrap(objectIdent,345),__wrap(key,345))}},"statement",false,false));}}return _this.rewrap(_this.param(objectIdent,null,false,false,null),param);}else if(_this.isParam(param)){defaultValue=_this.paramDefaultValue(param);asType=_this.paramType(param);paramIdent=_this.paramIdent(param);if(defaultValue!=null||asType!=null||!_this.isIdentOrTmp(paramIdent)){changed=true;if(_this.isIdentOrTmp(paramIdent)){ident=paramIdent;}else if(_this.isAccess(paramIdent)){ident=_this.ident(_this.value(_this.child(paramIdent)));}else{throw Error("Not an ident or this-access: "+__typeof(paramIdent));}if(asType!=null){typeCheck=translateTypeCheck(ident,_this.name(ident),asType,defaultValue!=null);}else{typeCheck=_this.noop();}init.push(defaultValue!=null?__node("MacroAccess",1796,13,17,1796,{macroName:"if",macroData:{test:__node("MacroAccess",1796,15,3,1796,{op:"not",node:__node("MacroAccess",1796,19,20,1796,{op:"?",node:__wrap(ident,345)},"statement",false,true)},"statement",false,true),body:__node("MacroAccess",1797,15,30,1797,{left:__wrap(ident,345),op:":=",right:__wrap(defaultValue,345)},"statement",false,true),elseIfs:[],elseBody:__wrap(typeCheck,345)}},"statement",false,true):typeCheck);if(paramIdent!==ident){init.push(__node("MacroAccess",1803,24,30,1803,{left:__wrap(paramIdent,345),op:":=",right:__wrap(ident,345)},"statement",false,false));}return _this.rewrap(_this.param(ident,null,_this.paramIsSpread(param),_this.paramIsMutable(param),null),param);}else{return param;}}else if(_this.isNothing(param)){changed=true;if(inDestructure){return null;}else{blankIdent=_this.tmp("p",false,"object");return _this.rewrap(_this.param(blankIdent,null,false,false,null),param);}}else{throw Error("Unknown param type: "+__typeof(param));}};foundSpread=-1;params=[];for(_arr=__toArray(this.funcParams(node)), i=0, len=_arr.length;i<len;++i){param=_arr[i];initIndex=init.length;p=translateParam(param,false);ident=this.paramIdent(p);if(this.paramIsSpread(p)){if(foundSpread!==-1){throw Error("Cannot have two spread parameters");}changed=true;foundSpread=i;if(i===len-1){init.splice(initIndex,0,__node("MacroAccess",1831,11,38,1831,{macroName:"let",macroData:{declarable:__node("MacroAccess",1831,14,37,1831,__node("MacroAccess",1831,14,31,1831,{ident:__wrap(ident,326)},"statement",false,false),"statement",false,false),value:__node("Call",1831,23,__node("Ident",1831,23,"__slice"),[__node("Args",1831,33),__node("Spread",1831,43,__node("MacroAccess",1831,48,16,1831,{macroName:"if",macroData:{test:__node("MacroAccess",1831,50,5,1831,{left:__wrap(i,326),inverted:false,op:"==",right:__node("Const",1831,57,0)},"expression",false,false),body:__node("Array",1831,63,[]),elseIfs:[],elseBody:__node("Array",1831,71,[__wrap(i,326)])}},"expression",false,false))],false,true)}},"statement",false,false));}else{spreadCounter=this.tmp("i",false,"number");init.splice(initIndex,0,__node("Block",1835,1,[__node("MacroAccess",1835,11,38,1835,{macroName:"let",macroData:{declarable:__node("MacroAccess",1835,14,37,1835,__node("MacroAccess",1835,14,31,1835,{isMutable:"mutable",ident:__wrap(spreadCounter,326)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1835,40,64,1835,{left:__node("Access",1835,40,__node("Args",1835,40),__node("Const",1835,51,"length")),inverted:false,op:"-",right:__node("MacroAccess",1835,61,64,1835,{left:__node("MacroAccess",1835,61,64,1835,{left:__wrap(len,326),inverted:false,op:"-",right:__wrap(i,326)},"expression",false,false),inverted:false,op:"-",right:__node("Const",1835,73,1)},"expression",false,false)},"expression",false,false)}},"statement",false,false),__node("MacroAccess",1836,11,38,1836,{macroName:"let",macroData:{declarable:__node("MacroAccess",1836,14,37,1836,__node("MacroAccess",1836,14,31,1836,{ident:__wrap(ident,326)},"statement",false,false),"statement",false,false),value:__node("MacroAccess",1836,23,17,1836,{macroName:"if",macroData:{test:__node("MacroAccess",1836,26,77,1836,{left:__wrap(spreadCounter,326),inverted:false,op:">",right:__wrap(i,326)},"expression",false,false),body:__node("Call",1837,13,__node("Ident",1837,13,"__slice"),[__node("Args",1837,22),__wrap(i,326),__wrap(spreadCounter,326)],false,true),elseIfs:[],elseBody:__node("Block",1839,1,[__node("MacroAccess",1839,13,30,1839,{left:__wrap(spreadCounter,326),op:":=",right:__wrap(i,326)},"statement",false,false),__node("Array",1840,13,[])],null)}},"expression",false,false)}},"statement",false,false)],null));}}else if(foundSpread===-1){params.push(p);}else{init.splice(initIndex,0,__node("MacroAccess",1846,11,38,1846,{macroName:"let",macroData:{declarable:__node("MacroAccess",1846,14,37,1846,__node("MacroAccess",1846,14,31,1846,{ident:__wrap(ident,326)},"statement",false,false),"statement",false,false),value:__node("Access",1846,23,__node("Args",1846,23),__node("MacroAccess",1846,34,64,1846,{left:__wrap(spreadCounter,326),inverted:false,op:"+",right:__node("MacroAccess",1846,53,64,1846,{left:__node("MacroAccess",1846,53,64,1846,{left:__wrap(i,326),inverted:false,op:"-",right:__wrap(foundSpread,326)},"expression",false,false),inverted:false,op:"-",right:__node("Const",1846,74,1)},"expression",false,false)},"expression",false,false))}},"statement",false,false));}}if(init.length||changed||this.funcIsCurried(node)){body=this.funcBody(node);result=this.rewrap(this.func(params,__node("Block",1852,1,[__wrap(init,326),__wrap(body,326)],null),this.funcIsAutoReturn(node)&&!this.isNothing(body),this.funcIsBound(node),false,this.funcAsType(node),this.funcIsGenerator(node),this.funcGeneric(node)),node);}else{result=node;}if(this.funcIsCurried(node)){result=__node("Call",1864,19,__node("Ident",1864,19,"__curry"),[__wrap(params.length,326),__wrap(result,326)],false,false);}genericArgs=this.funcGeneric(node);if(__num(genericArgs.length)>0){genericCache=this.tmp("cache",false,"object");for(_arr=[], _arr2=__toArray(genericArgs), _i=0, _len=_arr2.length;_i<_len;++_i){genericArg=_arr2[_i];_arr.push(this.param(genericArg));}genericParams=_arr;makeFunctionIdent=this.tmp("make",false,"function");instanceofs={};for(_arr=__toArray(genericArgs), _i=0, _len=_arr.length;_i<_len;++_i){genericArg=_arr[_i];name=this.name(genericArg);key=this.tmp("instanceof_"+__strnum(name),false,"function");instanceofs[name]={key:key,"let":__node("MacroAccess",1877,17,38,1877,{macroName:"let",macroData:{declarable:__node("MacroAccess",1877,21,37,1877,__node("MacroAccess",1877,21,31,1877,{ident:__wrap(key,326)},"statement",false,false),"statement",false,false),value:__node("Call",1877,28,__node("Ident",1877,28,"__getInstanceof"),[__wrap(genericArg,326)],false,false)}},"statement",false,false),used:false};}result=this.walk(this.macroExpandAll(result),function(node){var func,left,name,right;if(_this.isBinary(node)&&_this.op(node)==="instanceof"){right=_this.right(node);if(_this.isIdent(right)){name=_this.name(right);if(__owns.call(instanceofs,name)){func=instanceofs[name].key;instanceofs[name].used=true;left=_this.left(node);return __node("Call",1889,24,__wrap(func,383),[__wrap(left,383)],false,false);}}}});_arr=[];for(name in instanceofs){if(__owns.call(instanceofs,name)){item=instanceofs[name];if(item.used){_arr.push(item["let"]);}}}instanceofLets=_arr;if(instanceofLets.length){result=__node("Block",1895,1,[__wrap(instanceofLets,326),__wrap(result,326)],null);}makeFunctionFunc=this.func(genericParams,result,true,false);result=__node("Call",1898,18,__node("Ident",1898,18,"__genericFunc"),[__wrap(genericArgs.length,326),__wrap(makeFunctionFunc,326)],false,false);}return result;};}.call(this));',operators:"mutateFunction!",options:{type:"node",label:"mutateFunction"},id:115},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("Call",2261,7,__node("Ident",2261,7,"__keys"),[__wrap(node,460)],false,false);};}.call(this));',operators:"keys!",id:122},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var node,op;op=macroData.op;node=macroData.node;return __node("Call",2270,7,__node("Ident",2270,7,"__allkeys"),[__wrap(node,463)],false,false);};}.call(this));',operators:"allkeys!",id:123},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node){var _arr,_i,_len,element,item,node,op,parts,set;op=macroData.op;node=macroData.node;set=this.tmp("s",false,"object");if(this.isArray(node)&&!this.arrayHasSpread(node)){if(this.elements(node).length===0){return __node("Call",3528,11,__node("Ident",3528,11,"Set"),[],false,false);}else{parts=[];for(_arr=__toArray(this.elements(node)), _i=0, _len=_arr.length;_i<_len;++_i){element=_arr[_i];parts.push(__node("Call",3532,23,__node("Access",3532,23,__wrap(set,1067),__node("Const",3532,29,"add")),[__wrap(element,1067)],false,false));}return __node("Block",3534,1,[__node("MacroAccess",3534,9,38,3534,{macroName:"let",macroData:{declarable:__node("MacroAccess",3534,12,37,3534,__node("MacroAccess",3534,12,31,3534,{ident:__wrap(set,1067)},"statement",false,false),"statement",false,false),value:__node("Call",3534,19,__node("Ident",3534,19,"Set"),[],false,false)}},"statement",false,false),__wrap(parts,1067),__wrap(set,1067)],null);}}else{item=this.tmp("x",false,"any");return __node("Block",3540,1,[__node("MacroAccess",3540,7,38,3540,{macroName:"let",macroData:{declarable:__node("MacroAccess",3540,10,37,3540,__node("MacroAccess",3540,10,31,3540,{ident:__wrap(set,1067)},"statement",false,false),"statement",false,false),value:__node("Call",3540,17,__node("Ident",3540,17,"Set"),[],false,false)}},"statement",false,false),__node("MacroAccess",3541,7,111,3541,{macroName:"for",macroData:{value:__node("MacroAccess",3541,10,37,3541,__node("MacroAccess",3541,10,31,3541,{ident:__wrap(item,1067)},"statement",false,false),"statement",false,false),array:__wrap(node,1067),body:__node("Call",3542,9,__node("Access",3542,9,__wrap(set,1067),__node("Const",3542,14,"add")),[__wrap(item,1067)],false,false)}},"statement",false,false),__wrap(set,1067)],null);}};}.call(this));',operators:"set!",options:{type:"object",label:"constructSet"},id:152},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node){var _arr,_i,_len,_ref,key,map,node,op,pairs,parts,property,value;op=macroData.op;node=macroData.node;if(!this.isObject(node)){throw Error("map! can only be used on literal objects");}pairs=this.pairs(node);if(pairs.length===0){return __node("Call",3551,9,__node("Ident",3551,9,"Map"),[],false,false);}else{map=this.tmp("m",false,"object");parts=[];for(_arr=__toArray(pairs), _i=0, _len=_arr.length;_i<_len;++_i){key=(_ref=_arr[_i]).key;value=_ref.value;property=_ref.property;if(property!=null){throw Error("Cannot use map! on an object with custom properties");}parts.push(__node("Call",3558,21,__node("Access",3558,21,__wrap(map,1073),__node("Const",3558,27,"set")),[__wrap(key,1073),__wrap(value,1073)],false,false));}return __node("Block",3560,1,[__node("MacroAccess",3560,7,38,3560,{macroName:"let",macroData:{declarable:__node("MacroAccess",3560,10,37,3560,__node("MacroAccess",3560,10,31,3560,{ident:__wrap(map,1073)},"statement",false,false),"statement",false,false),value:__node("Call",3560,17,__node("Ident",3560,17,"Map"),[],false,false)}},"statement",false,false),__wrap(parts,1073),__wrap(map,1073)],null);}};}.call(this));',operators:"map!",options:{type:"object",label:"constructMap"},id:153},{code:'return (function(){"use strict";var __slice;__slice=Array.prototype.slice;return function(macroData,__wrap,__node){var _this,args,func,head,node,op,tail;_this=this;op=macroData.op;node=macroData.node;if(!this.isCall(node)){throw Error("async call expression must be a call");}func=this.callFunc(node);args=this.callArgs(node);if(this.callIsNew(node)){args=this.array(args);return __node("Call",3689,9,__node("Ident",3689,9,"__toPromise"),[__node("Ident",3689,23,"__new"),__wrap(func,1115),__wrap(args,1115)],false,false);}else if(this.callIsApply(node)){if(args.length===0||!this.isSpread(args[0])){head=args[0];tail=this.array(__slice.call(args,1));return __node("Call",3694,11,__node("Ident",3694,11,"__toPromise"),[__wrap(func,1115),__wrap(head,1115),__wrap(tail,1115)],false,false);}else{return this.maybeCache(this.array(args),function(setArgs,args){return __node("Call",3697,13,__node("Ident",3697,13,"__toPromise"),[__wrap(func,1119),__node("Access",3697,33,__wrap(setArgs,1119),__node("Const",3697,44,0)),__node("Call",3697,47,__node("Access",3697,47,__wrap(args,1119),__node("Const",3697,54,"slice")),[__node("Const",3697,60,1)],false,false)],false,false);});}}else{args=this.array(args);if(this.isAccess(func)){return this.maybeCache(this.parent(func),function(setParent,parent){var child;child=_this.child(func);return __node("Call",3703,13,__node("Ident",3703,13,"__toPromise"),[__node("Access",3703,27,__wrap(setParent,1120),__wrap(child,1120)),__wrap(parent,1120),__wrap(args,1120)],false,false);});}else{return __node("Call",3705,11,__node("Ident",3705,11,"__toPromise"),[__wrap(func,1115),__node("Const",3705,31,void 0),__wrap(args,1115)],false,false);}}};}.call(this));',operators:"toPromise!",options:{type:"promise"},id:158}],helpers:{GLOBAL:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",136,39,0,"window"],"!==","Const",108,27,0,"undefined"],["Ident",136,51,0,"window"],"IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",136,79,0,"global"],"!==","Const",108,27,0,"undefined"],["Ident",136,91,0,"global"],"This",136,103,0],type:"any",dependencies:["GLOBAL"]},__xor:{helper:["Func",138,24,0,0,[["Ident",138,25,0,"x"],["Ident",138,27,0,"y"]],[],[],"IfStatement",1,1,0,0,["Ident",139,5,0,"x"],["Return",1,1,0,"Binary",1,1,0,["Unary",1,1,0,"!","Ident",140,8,0,"y"],"&&","Ident",140,14,0,"x"],"Return",1,1,0,"Binary",1,1,0,["Ident",142,5,0,"y"],"||","Ident",142,9,0,"x"],type:"function",dependencies:["__xor"]},__typeof:{helper:["Call",3,9,0,["Func",3,12,0,0,[],["_toString"],[],"BlockStatement",464,1,0,0,["Binary",1,1,0,["Ident",464,6,0,"_toString"],"=","Binary",464,19,0,["Binary",464,19,0,["Ident",464,19,0,"Object"],".","Const",464,27,0,"prototype"],".","Const",464,37,0,"toString"],["Return",465,4,0,"Func",465,4,0,0,[["Ident",465,5,0,"o"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",466,16,0,"o"],"===","Const",110,18,0],["Return",467,7,0,"Const",467,7,0,"Undefined"],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",468,21,0,"o"],"===","Const",116,18,0,null],["Return",469,7,0,"Const",469,7,0,"Null"],"Return",1,1,0,"Binary",1,1,0,["Binary",1,1,0,["Binary",471,8,0,["Ident",471,8,0,"o"],".","Const",471,10,0,"constructor"],"&&","Binary",471,25,0,["Binary",471,25,0,["Ident",471,25,0,"o"],".","Const",471,28,0,"constructor"],".","Const",471,40,0,"name"],"||","Call",471,48,0,["Binary",471,48,0,["Call",471,48,0,["Binary",471,48,0,["Ident",471,48,0,"_toString"],".","Const",471,48,0,"call"],0,["Ident",471,61,0,"o"]],".","Const",471,64,0,"slice"],0,["Const",471,70,0,8],["Const",1,1,0,-1]]],0],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__typeof"]},__num:{helper:["Func",479,24,0,0,[["Ident",479,25,0,"num"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",480,20,0,"num"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",481,10,0,["Ident",481,10,0,"TypeError"],0,["Binary",1,1,0,["Const",481,21,0,"Expected a number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",481,57,0,"num"]]],"Return",483,5,0,"Ident",483,5,0,"num"],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__num","__typeof"]},__str:{helper:["Func",485,24,0,0,[["Ident",485,25,0,"str"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",486,20,0,"str"],"!==","Const",119,25,0,"string"],["Throw",1,1,0,"Call",487,10,0,["Ident",487,10,0,"TypeError"],0,["Binary",1,1,0,["Const",487,21,0,"Expected a string, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",487,57,0,"str"]]],"Return",489,5,0,"Ident",489,5,0,"str"],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__str","__typeof"]},__strnum:{helper:["Func",491,27,0,0,[["Ident",491,28,0,"strnum"]],["type"],[],"BlockStatement",492,1,0,0,["Binary",1,1,0,["Ident",492,6,0,"type"],"=","Unary",1,1,0,"typeof","Ident",492,20,0,"strnum"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",493,5,0,"type"],"===","Const",493,15,0,"string"],["Return",494,5,0,"Ident",494,5,0,"strnum"],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",495,10,0,"type"],"===","Const",495,20,0,"number"],["Return",496,5,0,"Call",496,5,0,["Ident",496,5,0,"String"],0,["Ident",496,12,0,"strnum"]],"Throw",1,1,0,"Call",498,10,0,["Ident",498,10,0,"TypeError"],0,["Binary",1,1,0,["Const",498,21,0,"Expected a string or number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",498,67,0,"strnum"]]]],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__strnum","__typeof"]},__owns:{helper:["Binary",599,23,0,["Binary",599,23,0,["Ident",599,23,0,"Object"],".","Const",599,31,0,"prototype"],".","Const",599,41,0,"hasOwnProperty"],type:"any",dependencies:["__owns"]},__cmp:{helper:["Func",620,24,0,0,[["Ident",620,25,0,"left"],["Ident",620,30,0,"right"]],["type"],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",621,5,0,"left"],"===","Ident",621,13,0,"right"],["Return",622,5,0,"Const",622,5,0,0],"BlockStatement",624,1,0,0,["Binary",1,1,0,["Ident",624,8,0,"type"],"=","Unary",1,1,0,"typeof","Ident",624,22,0,"left"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",625,7,0,"type"],"!==","Const",625,17,0,"number"],"&&","Binary",1,1,0,["Ident",625,27,0,"type"],"!==","Const",625,37,0,"string"],["Throw",1,1,0,"Call",626,12,0,["Ident",626,12,0,"TypeError"],0,["Binary",1,1,0,["Const",626,23,0,"Cannot compare a non-number/string: "],"+","Ident",626,64,0,"type"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",627,12,0,"type"],"!==","Unary",1,1,0,"typeof","Ident",627,27,0,"right"],["Throw",1,1,0,"Call",628,12,0,["Ident",628,12,0,"TypeError"],0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Const",628,23,0,"Cannot compare elements of different types: "],"+","Ident",628,72,0,"type"],"+","Const",628,81,0," vs "],"+","Unary",1,1,0,"typeof","Ident",628,97,0,"right"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",629,12,0,"left"],"<","Ident",629,20,0,"right"],["Return",1,1,0,"Const",1,1,0,-1],"Return",632,7,0,"Const",632,7,0,1]],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__cmp"]},__int:{helper:["Func",643,24,0,0,[["Ident",643,25,0,"num"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",644,20,0,"num"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",645,10,0,["Ident",645,10,0,"TypeError"],0,["Binary",1,1,0,["Const",645,21,0,"Expected a number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",645,57,0,"num"]]],"IfStatement",1,1,0,0,["Binary",641,7,0,["Binary",1,1,0,["Ident",646,10,0,"num"],"%","Const",646,23,0,1],"!==","Const",641,27,0,0],["Throw",1,1,0,"Call",647,10,0,["Ident",647,10,0,"TypeError"],0,["Binary",1,1,0,["Const",647,21,0,"Expected an integer, got "],"+","Ident",647,51,0,"num"]],"Return",649,5,0,"Ident",649,5,0,"num"],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__int","__typeof"]},__nonzero:{helper:["Func",651,28,0,0,[["Ident",651,29,0,"num"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",652,5,0,"num"],"===","Const",652,13,0,0],["Throw",1,1,0,"Call",653,10,0,["Ident",653,10,0,"RangeError"],0,["Binary",1,1,0,["Const",653,22,0,"Expected non-zero, got "],"+","Ident",653,50,0,"num"]],"Return",655,5,0,"Ident",655,5,0,"num"],type:"function",dependencies:["__nonzero"]},__lt:{helper:["Func",657,23,0,0,[["Ident",657,24,0,"x"],["Ident",657,26,0,"y"]],["type"],[],"BlockStatement",658,1,0,0,["Binary",1,1,0,["Ident",658,6,0,"type"],"=","Unary",1,1,0,"typeof","Ident",658,20,0,"x"],["IfStatement",1,1,0,0,["Binary",588,25,0,["Binary",1,1,0,["Ident",659,5,0,"type"],"!==","Const",659,20,0,"number"],"&&","Binary",1,1,0,["Ident",659,5,0,"type"],"!==","Const",659,29,0,"string"],["Throw",1,1,0,"Call",660,10,0,["Ident",660,10,0,"TypeError"],0,["Binary",1,1,0,["Const",660,21,0,"Cannot compare a non-number/string: "],"+","Ident",660,62,0,"type"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",661,10,0,"type"],"!==","Unary",1,1,0,"typeof","Ident",661,25,0,"y"],["Throw",1,1,0,"Call",662,10,0,["Ident",662,10,0,"TypeError"],0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Const",662,21,0,"Cannot compare elements of different types: "],"+","Ident",662,70,0,"type"],"+","Const",662,79,0," vs "],"+","Unary",1,1,0,"typeof","Ident",662,95,0,"y"]],"Return",1,1,0,"Binary",1,1,0,["Ident",664,5,0,"x"],"<","Ident",664,9,0,"y"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__lt"]},__lte:{helper:["Func",666,24,0,0,[["Ident",666,25,0,"x"],["Ident",666,27,0,"y"]],["type"],[],"BlockStatement",667,1,0,0,["Binary",1,1,0,["Ident",667,6,0,"type"],"=","Unary",1,1,0,"typeof","Ident",667,20,0,"x"],["IfStatement",1,1,0,0,["Binary",588,25,0,["Binary",1,1,0,["Ident",668,5,0,"type"],"!==","Const",668,20,0,"number"],"&&","Binary",1,1,0,["Ident",668,5,0,"type"],"!==","Const",668,29,0,"string"],["Throw",1,1,0,"Call",669,10,0,["Ident",669,10,0,"TypeError"],0,["Binary",1,1,0,["Const",669,21,0,"Cannot compare a non-number/string: "],"+","Ident",669,62,0,"type"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",670,10,0,"type"],"!==","Unary",1,1,0,"typeof","Ident",670,25,0,"y"],["Throw",1,1,0,"Call",671,10,0,["Ident",671,10,0,"TypeError"],0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Const",671,21,0,"Cannot compare elements of different types: "],"+","Ident",671,70,0,"type"],"+","Const",671,79,0," vs "],"+","Unary",1,1,0,"typeof","Ident",671,95,0,"y"]],"Return",1,1,0,"Binary",1,1,0,["Ident",673,5,0,"x"],"<=","Ident",673,10,0,"y"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__lte"]},__slice:{helper:["Binary",928,24,0,["Binary",928,24,0,["Ident",928,24,0,"Array"],".","Const",928,31,0,"prototype"],".","Const",928,41,0,"slice"],type:"any",dependencies:["__slice"]},__freeze:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",930,41,0,["Ident",930,41,0,"Object"],".","Const",930,49,0,"freeze"],"===","Const",128,25,0,"function"],["Binary",931,3,0,["Ident",931,3,0,"Object"],".","Const",931,10,0,"freeze"],"Func",933,4,0,0,[["Ident",933,5,0,"x"]],[],[],"Return",933,10,0,"Ident",933,10,0,"x"],type:"any",dependencies:["__freeze"]},__freezeFunc:{helper:["Func",935,32,0,0,[["Ident",935,33,0,"x"]],[],[],"BlockStatement",936,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",936,5,0,["Ident",936,5,0,"x"],".","Const",936,8,0,"prototype"],"!=","Const",104,19,0,null],["Call",937,5,0,["Ident",937,5,0,"__freeze"],0,["Binary",937,14,0,["Ident",937,14,0,"x"],".","Const",937,16,0,"prototype"]]],["Return",938,3,0,"Call",938,3,0,["Ident",938,3,0,"__freeze"],0,["Ident",938,12,0,"x"]]],type:"function",dependencies:["__freeze","__freezeFunc"]},__isArray:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",940,43,0,["Ident",940,43,0,"Array"],".","Const",940,50,0,"isArray"],"===","Const",128,25,0,"function"],["Binary",941,3,0,["Ident",941,3,0,"Array"],".","Const",941,9,0,"isArray"],"Call",3,9,0,["Func",3,12,0,0,[],["_toString"],[],"BlockStatement",944,1,0,0,["Binary",1,1,0,["Ident",944,8,0,"_toString"],"=","Binary",944,21,0,["Binary",944,21,0,["Ident",944,21,0,"Object"],".","Const",944,29,0,"prototype"],".","Const",944,39,0,"toString"],["Return",945,6,0,"Func",945,6,0,0,[["Ident",945,7,0,"x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Call",945,23,0,["Binary",945,23,0,["Ident",945,23,0,"_toString"],".","Const",945,23,0,"call"],0,["Ident",945,36,0,"x"]],"===","Const",945,42,0,"[object Array]"]],0],type:"any",dependencies:["__isArray"]},__isObject:{helper:["Func",947,30,0,0,[["Ident",947,31,0,"x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",947,54,0,"x"],"===","Const",947,61,0,"object"],"&&","Binary",1,1,0,["Ident",947,71,0,"x"],"!==","Const",947,76,0,null],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__isObject"]},__toArray:{helper:["Func",949,29,0,0,[["Ident",949,30,0,"x"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",950,9,0,"x"],"==","Const",104,19,0,null],["Throw",1,1,0,"Call",951,10,0,["Ident",951,10,0,"TypeError"],0,["Binary",1,1,0,["Const",951,21,0,"Expected an object, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",951,58,0,"x"]]],"IfStatement",1,1,0,0,["Call",131,146,0,["Ident",131,146,0,"__isArray"],0,["Ident",952,20,0,"x"]],["Return",953,5,0,"Ident",953,5,0,"x"],"IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",954,17,0,"x"],"===","Const",954,24,0,"string"],["Return",955,5,0,"Call",955,5,0,["Binary",955,5,0,["Ident",955,5,0,"x"],".","Const",955,7,0,"split"],0,["Const",955,13,0,""]],"Return",957,5,0,"Call",957,5,0,["Binary",957,5,0,["Ident",957,5,0,"__slice"],".","Const",957,5,0,"call"],0,["Ident",957,14,0,"x"]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__isArray","__slice","__toArray","__typeof"]},__create:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",959,41,0,["Ident",959,41,0,"Object"],".","Const",959,49,0,"create"],"===","Const",128,25,0,"function"],["Binary",960,3,0,["Ident",960,3,0,"Object"],".","Const",960,10,0,"create"],"Func",962,4,0,0,[["Ident",962,5,0,"x"]],[],[],"BlockStatement",963,1,0,0,["Func",1,1,0,["Ident",963,8,0,"F"],[],[],[]],["Binary",1,1,0,["Binary",964,6,0,["Ident",964,5,0,"F"],".","Const",964,7,0,"prototype"],"=","Ident",964,19,0,"x"],["Return",965,5,0,"Call",965,5,0,["Ident",965,8,0,"F"],1]],type:"any",dependencies:["__create"]},__pow:{helper:["Binary",967,22,0,["Ident",967,22,0,"Math"],".","Const",967,28,0,"pow"],type:"any",dependencies:["__pow"]},__floor:{helper:["Binary",968,24,0,["Ident",968,24,0,"Math"],".","Const",968,30,0,"floor"],type:"any",dependencies:["__floor"]},__sqrt:{helper:["Binary",969,23,0,["Ident",969,23,0,"Math"],".","Const",969,29,0,"sqrt"],type:"any",dependencies:["__sqrt"]},__log:{helper:["Binary",970,22,0,["Ident",970,22,0,"Math"],".","Const",970,28,0,"log"],type:"any",dependencies:["__log"]},__in:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",1102,37,0,["Binary",1102,37,0,["Ident",1102,37,0,"Array"],".","Const",1102,44,0,"prototype"],".","Const",1102,54,0,"indexOf"],"===","Const",128,25,0,"function"],["Call",3,9,0,["Func",3,12,0,0,[],["indexOf"],[],"BlockStatement",1104,1,0,0,["Binary",1,1,0,["Ident",1104,8,0,"indexOf"],"=","Binary",1104,19,0,["Binary",1104,19,0,["Ident",1104,19,0,"Array"],".","Const",1104,26,0,"prototype"],".","Const",1104,36,0,"indexOf"],["Return",1105,6,0,"Func",1105,6,0,0,[["Ident",1105,7,0,"child"],["Ident",1105,13,0,"parent"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Call",1105,35,0,["Binary",1105,35,0,["Ident",1105,35,0,"indexOf"],".","Const",1105,35,0,"call"],0,["Ident",1105,46,0,"parent"],["Ident",1105,53,0,"child"]],"!==","Const",1,1,0,-1]],0],"Func",1107,4,0,0,[["Ident",1107,5,0,"child"],["Ident",1107,11,0,"parent"]],["i","len"],[],"BlockStatement",1108,1,0,0,["Binary",1,1,0,["Ident",1108,8,0,"len"],"=","Unary",1,1,0,"+","Binary",1108,17,0,["Ident",1108,17,0,"parent"],".","Const",1108,24,0,"length"],["Binary",1,1,0,["Ident",1109,16,0,"i"],"=","Const",1,1,0,-1],["For",1,1,0,0,0,["Binary",1,1,0,["Unary",1,1,0,"++","Ident",1110,12,0,"i"],"<","Ident",1110,22,0,"len"],0,"IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",1111,9,0,"child"],"===","Binary",1111,18,0,["Ident",1111,18,0,"parent"],".","Ident",1111,26,0,"i"],"&&","Binary",1,1,0,["Ident",1111,46,0,"i"],"in","Ident",1111,32,0,"parent"],["Return",1,1,0,"Const",1112,15,0,!0]],["Return",1113,5,0,"Const",1113,5,0,!1]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__in"]},__genericFunc:{helper:["Func",1589,33,0,0,[["Ident",1589,34,0,"numArgs"],["Ident",1589,53,0,"make"]],["any","cache","result"],[],"BlockStatement",1590,1,0,0,["Binary",1,1,0,["Ident",1590,6,0,"cache"],"=","Call",1590,14,0,["Ident",1590,14,0,"WeakMap"],0],["Binary",1,1,0,["Ident",1591,6,0,"any"],"=","Obj",52897,52900,0],["Func",1,1,0,["Ident",1592,6,0,"generic"],[],["_ref","current","i","item","type"],[],"BlockStatement",1463,1,0,0,["Binary",1,1,0,["Ident",1593,45,0,"current"],"=","Ident",1593,55,0,"cache"],["For",1,1,0,0,["Binary",1,1,0,["Ident",1593,15,0,"i"],"=","Binary",1,1,0,["Ident",1593,20,0,"numArgs"],"-","Const",1593,32,0,1],["Binary",1,1,0,["Ident",1593,15,0,"i"],">=","Const",1593,37,0,0],["Unary",1,1,0,"--","Ident",1593,15,0,"i"],"BlockStatement",1594,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",1,1,0,"_ref"],"=","Binary",1594,17,0,["Arguments",1594,17,0],".","Ident",1594,28,0,"i"],"!=","Const",104,19,0,null],["Binary",1,1,0,["Ident",1594,10,0,"type"],"=","Ident",1,1,0,"_ref"],"Binary",1,1,0,["Ident",1594,10,0,"type"],"=","Ident",1594,32,0,"any"],["Binary",1,1,0,["Ident",1595,18,0,"item"],"=","Call",1595,25,0,["Binary",1595,25,0,["Ident",1595,25,0,"current"],".","Const",1595,34,0,"get"],0,["Ident",1595,38,0,"type"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1596,13,0,"item"],"==","Const",104,19,0,null],["BlockStatement",1597,1,0,0,["Binary",1,1,0,["Ident",1597,9,0,"item"],"=","IfExpression",1,1,0,["Binary",1,1,0,["Ident",1597,19,0,"i"],"===","Const",1597,25,0,0],["Call",1598,11,0,["Binary",1598,11,0,["Ident",1598,11,0,"make"],".","Const",1598,11,0,"apply"],0,["This",1598,17,0],["Arguments",1598,26,0]],"Call",1600,11,0,["Ident",1600,11,0,"WeakMap"],0],["Call",1601,9,0,["Binary",1601,9,0,["Ident",1601,9,0,"current"],".","Const",1601,17,0,"set"],0,["Ident",1601,21,0,"type"],["Ident",1601,26,0,"item"]]]],["Binary",1,1,0,["Ident",1593,45,0,"current"],"=","Ident",1602,7,0,"item"]],["Return",1593,45,0,"Ident",1593,45,0,"current"]],["Binary",1,1,0,["Ident",1603,6,0,"result"],"=","Call",1603,15,0,["Ident",1603,15,0,"generic"],0],["Binary",1,1,0,["Binary",1604,9,0,["Ident",1604,3,0,"result"],".","Const",1604,10,0,"generic"],"=","Ident",1604,20,0,"generic"],["Return",1605,3,0,"Ident",1605,3,0,"result"]],type:"function",dependencies:["__genericFunc","__toArray","WeakMap"]},__range:{helper:["Func",1852,1,0,0,[["Ident",1901,27,0,"start"],["Ident",1901,43,0,"end"],["Ident",1901,58,0,"step"],["Ident",1901,74,0,"inclusive"]],["i","result"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",1901,27,0,"start"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected start to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",1901,27,0,"start"]]]],["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",1901,43,0,"end"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected end to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",1901,43,0,"end"]]]],["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",1901,58,0,"step"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected step to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",1901,58,0,"step"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1901,74,0,"inclusive"],"==","Const",104,19,0,null],["Binary",1,1,0,["Ident",1901,74,0,"inclusive"],"=","Const",1644,20,0,!1],"IfStatement",1,1,0,0,["Binary",611,18,0,["Unary",1,1,0,"typeof","Ident",1901,74,0,"inclusive"],"!==","Const",125,25,0,"boolean"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected inclusive to be a Boolean, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",1901,74,0,"inclusive"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1902,5,0,"step"],"===","Const",1902,14,0,0],["Throw",1,1,0,"Call",1903,10,0,["Ident",1903,10,0,"RangeError"],0,["Const",1903,22,0,"step cannot be zero"]],"IfStatement",1,1,0,0,["Unary",1,1,0,"!","Call",1904,14,0,["Ident",1904,14,0,"isFinite"],0,["Ident",1904,25,0,"start"]],["Throw",1,1,0,"Call",1905,10,0,["Ident",1905,10,0,"RangeError"],0,["Const",1905,22,0,"start must be finite"]],"IfStatement",1,1,0,0,["Unary",1,1,0,"!","Call",1906,14,0,["Ident",1906,14,0,"isFinite"],0,["Ident",1906,25,0,"end"]],["Throw",1,1,0,"Call",1907,10,0,["Ident",1907,10,0,"RangeError"],0,["Const",1907,22,0,"end must be finite"]]],["Binary",1,1,0,["Ident",1908,6,0,"result"],"=","Arr",1908,15,0],["Binary",1,1,0,["Ident",1909,14,0,"i"],"=","Ident",1909,18,0,"start"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1910,5,0,"step"],">","Const",1910,14,0,0],["BlockStatement",1911,1,0,0,["For",1,1,0,0,0,["Binary",1,1,0,["Ident",1911,10,0,"i"],"<","Ident",1911,15,0,"end"],["Binary",1,1,0,["Ident",1911,20,0,"i"],"+=","Ident",1911,26,0,"step"],"Call",1912,7,0,["Binary",1912,7,0,["Ident",1912,7,0,"result"],".","Const",1912,14,0,"push"],0,["Ident",1912,19,0,"i"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1913,7,0,"inclusive"],"&&","Binary",1,1,0,["Ident",1913,21,0,"i"],"<=","Ident",1913,27,0,"end"],["Call",1914,7,0,["Binary",1914,7,0,["Ident",1914,7,0,"result"],".","Const",1914,14,0,"push"],0,["Ident",1914,19,0,"i"]]]],"BlockStatement",1916,1,0,0,["For",1,1,0,0,0,["Binary",1,1,0,["Ident",1916,10,0,"i"],">","Ident",1916,15,0,"end"],["Binary",1,1,0,["Ident",1916,20,0,"i"],"+=","Ident",1916,26,0,"step"],"Call",1917,7,0,["Binary",1917,7,0,["Ident",1917,7,0,"result"],".","Const",1917,14,0,"push"],0,["Ident",1917,19,0,"i"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1918,7,0,"inclusive"],"&&","Binary",1,1,0,["Ident",1918,21,0,"i"],">=","Ident",1918,27,0,"end"],["Call",1919,7,0,["Binary",1919,7,0,["Ident",1919,7,0,"result"],".","Const",1919,14,0,"push"],0,["Ident",1919,19,0,"i"]]]],["Return",1920,3,0,"Ident",1920,3,0,"result"]],type:{type:"generic",base:"functionBase",args:["numberArray"]},dependencies:["__range","__typeof"]},__step:{helper:["Func",1852,1,0,0,[["Ident",1922,26,0,"array"],["Ident",1922,32,0,"step"]],["i","len","result"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",1922,32,0,"step"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected step to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",1922,32,0,"step"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1923,5,0,"step"],"===","Const",1923,14,0,0],["Throw",1,1,0,"Call",1924,10,0,["Ident",1924,10,0,"RangeError"],0,["Const",1924,22,0,"step cannot be zero"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1925,10,0,"step"],"===","Const",1925,19,0,1],["Return",1926,5,0,"Call",1926,5,0,["Ident",1926,5,0,"__toArray"],0,["Ident",1926,16,0,"array"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1927,10,0,"step"],"===","Const",1,1,0,-1],["Return",1928,5,0,"Call",1928,5,0,["Binary",1928,5,0,["Call",1928,5,0,["Binary",1928,5,0,["Ident",1928,5,0,"__slice"],".","Const",1928,5,0,"call"],0,["Ident",1928,14,0,"array"]],".","Const",1928,21,0,"reverse"],0],"IfStatement",1,1,0,0,["Binary",638,7,0,["Binary",1,1,0,["Ident",1929,10,0,"step"],"%","Const",1929,23,0,1],"!==","Const",638,26,0,0],["Throw",1,1,0,"Call",1930,10,0,["Ident",1930,10,0,"RangeError"],0,["Binary",1,1,0,["Const",1930,22,0,"step must be an integer, got "],"+","Call",1930,54,0,["Ident",1930,54,0,"String"],0,["Ident",1930,61,0,"step"]]],"BlockStatement",1932,1,0,0,["Binary",1,1,0,["Ident",1932,8,0,"result"],"=","Arr",1932,17,0],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1933,7,0,"step"],">","Const",1933,15,0,0],["BlockStatement",1934,1,0,0,["Binary",1,1,0,["Ident",1934,18,0,"i"],"=","Const",1934,23,0,0],["Binary",1,1,0,["Ident",1935,10,0,"len"],"=","Call",507,11,0,["Ident",507,11,0,"__num"],0,["Binary",1935,18,0,["Ident",1935,18,0,"array"],".","Const",1935,24,0,"length"]],["For",1,1,0,0,0,["Binary",1,1,0,["Ident",1936,12,0,"i"],"<","Ident",1936,16,0,"len"],["Binary",1,1,0,["Ident",1936,21,0,"i"],"+=","Ident",1936,26,0,"step"],"Call",1937,9,0,["Binary",1937,9,0,["Ident",1937,9,0,"result"],".","Const",1937,16,0,"push"],0,["Binary",1937,21,0,["Ident",1937,21,0,"array"],".","Ident",1937,27,0,"i"]]],"BlockStatement",1939,1,0,0,["Binary",1,1,0,["Ident",1939,18,0,"i"],"=","Binary",1,1,0,["Call",507,11,0,["Ident",507,11,0,"__num"],0,["Binary",1939,22,0,["Ident",1939,22,0,"array"],".","Const",1939,29,0,"length"]],"-","Const",1939,38,0,1],["For",1,1,0,0,0,["Binary",1,1,0,["Ident",1940,12,0,"i"],">=","Const",1940,18,0,0],["Binary",1,1,0,["Ident",1940,20,0,"i"],"+=","Ident",1940,25,0,"step"],"Call",1941,9,0,["Binary",1941,9,0,["Ident",1941,9,0,"result"],".","Const",1941,16,0,"push"],0,["Binary",1941,21,0,["Ident",1941,21,0,"array"],".","Ident",1941,27,0,"i"]]],["Return",1942,5,0,"Ident",1942,5,0,"result"]]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__num","__slice","__step","__toArray","__typeof"]},__sliceStep:{helper:["Func",1944,31,0,0,[["Ident",1944,32,0,"array"],["Ident",1944,38,0,"start"],["Ident",1944,45,0,"end"],["Ident",1944,58,0,"step"],["Ident",1944,64,0,"inclusive"]],["arr"],[],"BlockStatement",1945,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1945,15,0,"step"],"<","Const",1945,24,0,0],["Binary",1,1,0,["Ident",1945,6,0,"arr"],"=","Call",1946,5,0,["Binary",1946,5,0,["Ident",1946,5,0,"__slice"],".","Const",1946,5,0,"call"],0,["Ident",1946,14,0,"array"],["IfExpression",1,1,0,["Ident",1946,23,0,"inclusive"],["Ident",1946,38,0,"end"],"Binary",1,1,0,["Unary",1,1,0,"+","Ident",1946,47,0,"end"],"+","Const",1946,55,0,1],["Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"+","Ident",1946,57,0,"start"],"+","Const",1946,67,0,1],"||","Const",1946,71,0,1,1]],"Binary",1,1,0,["Ident",1945,6,0,"arr"],"=","Call",1948,5,0,["Binary",1948,5,0,["Ident",1948,5,0,"__slice"],".","Const",1948,5,0,"call"],0,["Ident",1948,14,0,"array"],["Ident",1948,20,0,"start"],["IfExpression",1,1,0,["Ident",1948,30,0,"inclusive"],["Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"+","Ident",1948,45,0,"end"],"+","Const",1948,53,0,1],"||","Const",1948,57,0,1,1],"Ident",1948,71,0,"end"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1949,5,0,"step"],"===","Const",1949,14,0,1],["Return",1950,5,0,"Ident",1950,5,0,"arr"],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",1951,10,0,"step"],"===","Const",1,1,0,-1],["Return",1952,5,0,"Call",1952,5,0,["Binary",1952,5,0,["Ident",1952,5,0,"arr"],".","Const",1952,9,0,"reverse"],0],"Return",1954,5,0,"Call",1954,5,0,["Ident",1954,5,0,"__step"],0,["Ident",1954,12,0,"arr"],["Ident",1954,16,0,"step"]]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__slice","__sliceStep","__step"]},__arrayToIter:{helper:["Call",3,9,0,["Func",3,12,0,0,[],["proto"],[],"BlockStatement",2054,1,0,0,["Binary",1,1,0,["Ident",2054,6,0,"proto"],"=","Obj",69400,69626,0,2055,5,null,"iterator",["Func",2055,16,0,0,[],[],[],"Return",2055,18,0,"This",2055,18,0],2056,5,null,"next",["Func",2056,12,0,0,[],["array","i"],[],"BlockStatement",2057,1,0,0,["Binary",1,1,0,["Ident",2057,10,0,"i"],"=","Binary",1,1,0,["Call",507,11,0,["Ident",507,11,0,"__num"],0,["Binary",2057,14,0,["This",2057,14,0],".","Const",2057,16,0,"index"]],"+","Const",2057,24,0,1],["Binary",1,1,0,["Ident",2058,10,0,"array"],"=","Binary",2058,18,0,["This",2058,18,0],".","Const",2058,20,0,"array"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2059,9,0,"i"],">=","Call",684,22,0,["Ident",684,22,0,"__num"],0,["Binary",2059,14,0,["Ident",2059,14,0,"array"],".","Const",2059,21,0,"length"]],["Return",69523,69550,0,"Obj",69523,69550,0,2060,11,null,"done",["Const",2060,16,0,!0],2060,22,null,"value",["Const",2060,29,0]],"BlockStatement",2062,1,0,0,["Binary",1,1,0,["Binary",2062,9,0,["This",2062,9,0],".","Const",2062,10,0,"index"],"=","Ident",2062,18,0,"i"],["Return",69590,69622,0,"Obj",69590,69622,0,2063,11,null,"done",["Const",2063,16,0,!1],2063,23,null,"value",["Binary",2063,30,0,["Ident",2063,30,0,"array"],".","Ident",2063,37,0,"i"]]]]],["Return",1852,1,0,"Func",1852,1,0,0,[["Ident",2065,5,0,"array"]],["_o"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Unary",615,18,0,"!","Call",131,146,0,["Ident",131,146,0,"__isArray"],0,["Ident",2065,5,0,"array"]],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected array to be an Array, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2065,5,0,"array"]]]],["Binary",69648,69697,0,["Ident",69648,69697,0,"_o"],"=","Call",69648,69697,0,["Ident",69648,69697,0,"__create"],0,["Ident",2066,14,0,"proto"]],["Binary",2067,7,0,["Binary",2067,7,0,["Ident",69648,69697,0,"_o"],".","Const",2067,7,0,"array"],"=","Ident",2067,7,0,"array"],["Binary",2068,7,0,["Binary",2068,7,0,["Ident",69648,69697,0,"_o"],".","Const",2068,7,0,"index"],"=","Const",1,1,0,-1],["Return",69648,69697,0,"Ident",69648,69697,0,"_o"]]],0],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{index:"number"}}]},dependencies:["__arrayToIter","__create","__isArray","__num","__typeof"]},__iter:{helper:["Func",2071,25,0,0,[["Ident",2071,26,0,"iterable"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2072,9,0,"iterable"],"==","Const",104,19,0,null],["Throw",1,1,0,"Call",2073,10,0,["Ident",2073,10,0,"TypeError"],0,["Binary",1,1,0,["Const",2073,21,0,"Expected iterable to be an Object, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2073,70,0,"iterable"]]],"IfStatement",1,1,0,0,["Call",131,146,0,["Ident",131,146,0,"__isArray"],0,["Ident",2074,20,0,"iterable"]],["Return",2075,5,0,"Call",2075,5,0,["Ident",2075,5,0,"__arrayToIter"],0,["Ident",2075,21,0,"iterable"]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",2076,23,0,["Ident",2076,23,0,"iterable"],".","Const",2076,33,0,"iterator"],"===","Const",128,25,0,"function"],["Return",2077,5,0,"Call",2077,5,0,["Binary",2077,5,0,["Ident",2077,5,0,"iterable"],".","Const",2077,14,0,"iterator"],0],"IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",2078,23,0,["Ident",2078,23,0,"iterable"],".","Const",2078,33,0,"next"],"===","Const",128,25,0,"function"],["Return",2079,5,0,"Ident",2079,5,0,"iterable"],"Throw",1,1,0,"Call",2081,10,0,["Ident",2081,10,0,"Error"],0,["Binary",1,1,0,["Const",2081,17,0,"Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2081,142,0,"iterable"]]],type:"function",dependencies:["__arrayToIter","__isArray","__iter","__typeof"]},__keys:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",2251,39,0,["Ident",2251,39,0,"Object"],".","Const",2251,47,0,"keys"],"===","Const",128,25,0,"function"],["Binary",2252,3,0,["Ident",2252,3,0,"Object"],".","Const",2252,10,0,"keys"],"Func",2254,4,0,0,[["Ident",2254,5,0,"x"]],["key","keys"],[],"BlockStatement",2255,1,0,0,["Binary",1,1,0,["Ident",2255,8,0,"keys"],"=","Arr",2255,15,0],["ForIn",1,1,0,0,["Ident",2256,8,0,"key"],["Ident",2256,15,0,"x"],"IfStatement",1,1,0,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",2256,15,0,"x"],["Ident",2256,8,0,"key"]],["Call",2257,7,0,["Binary",2257,7,0,["Ident",2257,7,0,"keys"],".","Const",2257,12,0,"push"],0,["Ident",2257,17,0,"key"]]],["Return",2258,5,0,"Ident",2258,5,0,"keys"]],type:"any",dependencies:["__keys","__owns"]},__allkeys:{helper:["Func",2263,28,0,0,[["Ident",2263,29,0,"x"]],["key","keys"],[],"BlockStatement",2264,1,0,0,["Binary",1,1,0,["Ident",2264,6,0,"keys"],"=","Arr",2264,13,0],["ForIn",1,1,0,0,["Ident",2265,6,0,"key"],["Ident",2265,16,0,"x"],"Call",2266,5,0,["Binary",2266,5,0,["Ident",2266,5,0,"keys"],".","Const",2266,10,0,"push"],0,["Ident",2266,15,0,"key"]],["Return",2267,3,0,"Ident",2267,3,0,"keys"]],type:{type:"generic",base:"functionBase",args:["stringArray"]},dependencies:["__allkeys"]},__new:{helper:["Call",3,9,0,["Func",3,12,0,0,[],["newCreators"],[],"BlockStatement",2273,1,0,0,["Binary",1,1,0,["Ident",2273,6,0,"newCreators"],"=","Arr",2273,21,0],["Return",2274,4,0,"Func",2274,4,0,0,[],["creator","func","i","length"],[],"BlockStatement",2275,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","This",2275,24,0],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",2276,12,0,["Ident",2276,12,0,"Error"],0,["Binary",1,1,0,["Const",2276,19,0,"Expected this to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["This",2276,65,0]]]],["Binary",1,1,0,["Ident",2277,8,0,"length"],"=","Binary",2277,17,0,["Arguments",2277,17,0],".","Const",2277,28,0,"length"],["Binary",1,1,0,["Ident",2278,16,0,"creator"],"=","Binary",2278,26,0,["Ident",2278,26,0,"newCreators"],".","Ident",2278,40,0,"length"],["IfStatement",1,1,0,0,["Unary",1,1,0,"!","Ident",2279,11,0,"creator"],["BlockStatement",2280,1,0,0,["Binary",1,1,0,["Ident",2280,10,0,"func"],"=","Arr",2280,17,0,["Const",2280,19,0,"return new C("]],["For",1,1,0,0,["BlockExpression",0,0,0,["Binary",1,1,0,["Ident",2281,10,0,"i"],"=","Const",2281,16,0,0],["Ident",2281,21,0,"length"]],["Binary",1,1,0,["Ident",2281,10,0,"i"],"<","Ident",2281,21,0,"length"],["Unary",1,1,0,"++","Ident",2281,10,0,"i"],"BlockStatement",2282,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2282,11,0,"i"],">","Const",2282,16,0,0],["Call",2283,11,0,["Binary",2283,11,0,["Ident",2283,11,0,"func"],".","Const",2283,16,0,"push"],0,["Const",2283,21,0,", "]]],["Call",2284,9,0,["Binary",2284,9,0,["Ident",2284,9,0,"func"],".","Const",2284,14,0,"push"],0,["Const",2284,19,0,"a["],["Ident",2284,24,0,"i"],["Const",2284,28,0,"]"]]],["Call",2285,7,0,["Binary",2285,7,0,["Ident",2285,7,0,"func"],".","Const",2285,12,0,"push"],0,["Const",2285,17,0,");"]],["Binary",1,1,0,["Ident",2286,7,0,"creator"],"=","Call",2286,17,0,["Ident",2286,17,0,"Function"],0,["Const",2286,27,0,"C"],["Const",2286,32,0,"a"],["Call",2286,36,0,["Binary",2286,36,0,["Ident",2286,36,0,"func"],".","Const",2286,42,0,"join"],0,["Const",2286,47,0,""]]],["Binary",1,1,0,["Binary",2287,19,0,["Ident",2287,7,0,"newCreators"],".","Ident",2287,20,0,"length"],"=","Ident",2287,30,0,"creator"]]],["Return",2288,5,0,"Call",2288,5,0,["Ident",2288,5,0,"creator"],0,["This",2288,13,0],["Arguments",2288,18,0]]]],0],type:"function",dependencies:["__new","__typeof"]},__instanceofsome:{helper:["Func",2290,35,0,0,[["Ident",2290,36,0,"value"],["Ident",2290,42,0,"array"]],[],[],"Return",3,9,0,"Call",3,9,0,["Func",3,12,0,0,[],["_arr","_i","item"],[],"BlockStatement",0,0,0,0,["For",1,1,0,0,["BlockExpression",0,0,0,["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Ident",2291,19,0,"array"]],["Binary",1,1,0,["Ident",1,1,0,"_i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"]],["Unary",1,1,0,"--post","Ident",1,1,0,"_i"],0,"BlockStatement",1414,1,0,0,["Binary",1,1,0,["Ident",2291,11,0,"item"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",1,1,0,"_i"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2292,5,0,"value"],"instanceof","Ident",2292,21,0,"item"],["Return",1,1,0,"Const",990,21,0,!0]]],["Return",1,1,0,"Const",991,64,0,!1]],0],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__instanceofsome","__toArray"]},__getInstanceof:{helper:["Call",3,9,0,["Func",3,12,0,0,[],[],[],"BlockStatement",2295,1,0,0,["Func",1,1,0,["Ident",2295,6,0,"isAny"],[],[],[],"Return",2295,19,0,"Const",2295,19,0,!0],["Func",1,1,0,["Ident",2296,6,0,"isStr"],[["Ident",2296,17,0,"x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",2296,17,0,"x"],"===","Const",119,25,0,"string"],["Func",1,1,0,["Ident",2297,6,0,"isNum"],[["Ident",2297,17,0,"x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",2297,17,0,"x"],"===","Const",122,25,0,"number"],["Func",1,1,0,["Ident",2298,6,0,"isFunc"],[["Ident",2298,18,0,"x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",2298,18,0,"x"],"===","Const",128,25,0,"function"],["Func",1,1,0,["Ident",2299,6,0,"isBool"],[["Ident",2299,18,0,"x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",2299,18,0,"x"],"===","Const",125,25,0,"boolean"],["Return",2300,4,0,"Func",2300,4,0,0,[["Ident",2300,5,0,"ctor"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2301,11,0,"ctor"],"==","Const",104,19,0,null],["Return",2302,7,0,"Ident",2302,7,0,"isAny"],"Switch",1,1,0,0,["Ident",2304,13,0,"ctor"],2305,11,null,["Ident",2305,11,0,"String"],["Return",2305,19,0,"Ident",2305,19,0,"isStr"],2306,11,null,["Ident",2306,11,0,"Number"],["Return",2306,19,0,"Ident",2306,19,0,"isNum"],2307,11,null,["Ident",2307,11,0,"Function"],["Return",2307,21,0,"Ident",2307,21,0,"isFunc"],2308,11,null,["Ident",2308,11,0,"Boolean"],["Return",2308,20,0,"Ident",2308,20,0,"isBool"],2309,11,null,["Ident",2309,11,0,"Array"],["Return",2309,18,0,"Ident",2309,18,0,"__isArray"],2310,11,null,["Ident",2310,11,0,"Object"],["Return",2310,19,0,"Ident",2310,19,0,"__isObject"],["Return",2311,17,0,"Func",2311,17,0,0,[["Ident",2311,17,0,"_x"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Ident",2311,17,0,"_x"],"instanceof","Ident",2311,27,0,"ctor"]]],0],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:["boolean"]}]},dependencies:["__getInstanceof","__isArray","__isObject"]},__name:{helper:["Func",1852,1,0,0,[["Ident",2313,26,0,"func"]],[],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",2313,26,0,"func"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected func to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2313,26,0,"func"]]]],["Return",1,1,0,"Binary",1,1,0,["Binary",1,1,0,["Binary",2313,50,0,["Ident",2313,50,0,"func"],".","Const",2313,56,0,"displayName"],"||","Binary",2313,71,0,["Ident",2313,71,0,"func"],".","Const",2313,77,0,"name"],"||","Const",2313,85,0,""]],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__name","__typeof"]},__once:{helper:["Call",3,9,0,["Func",3,12,0,0,[],[],[],"BlockStatement",2316,1,0,0,["Func",1,1,0,["Ident",2316,6,0,"replacement"],[],[],[],"Throw",1,1,0,"Call",2316,29,0,["Ident",2316,29,0,"Error"],0,["Const",2316,36,0,"Attempted to call function more than once"]],["Func",1,1,0,["Ident",2317,6,0,"doNothing"],[],[],[]],["Return",1852,1,0,"Func",1852,1,0,0,[["Ident",2318,12,0,"func"],["Ident",2318,24,0,"silentFail"]],[],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",2318,12,0,"func"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected func to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2318,12,0,"func"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2318,24,0,"silentFail"],"==","Const",104,19,0,null],["Binary",1,1,0,["Ident",2318,24,0,"silentFail"],"=","Const",1644,20,0,!1],"IfStatement",1,1,0,0,["Binary",611,18,0,["Unary",1,1,0,"typeof","Ident",2318,24,0,"silentFail"],"!==","Const",125,25,0,"boolean"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected silentFail to be a Boolean, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2318,24,0,"silentFail"]]]],["Return",2318,53,0,"Func",2318,53,0,0,[],["f"],[],"BlockStatement",2319,1,0,0,["Binary",1,1,0,["Ident",2319,8,0,"f"],"=","Ident",2319,12,0,"func"],["Binary",1,1,0,["Ident",2320,5,0,"func"],"=","IfExpression",1,1,0,["Ident",2320,15,0,"silentFail"],["Ident",2320,32,0,"doNothing"],"Ident",2320,48,0,"replacement"],["Return",2321,5,0,"Call",2321,5,0,["Binary",2321,5,0,["Ident",2321,5,0,"f"],".","Const",2321,5,0,"apply"],0,["This",2321,8,0],["Arguments",2321,17,0]]]]],0],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__once","__toArray","__typeof"]},__async:{helper:["Func",1852,1,0,0,[["Ident",2423,34,0,"limit"],["Ident",2423,51,0,"length"],["Ident",2423,69,0,"hasResult"],["Ident",2423,92,0,"onValue"],["Ident",2423,108,0,"onComplete"]],["broken","completed","index","result","slotsUsed","sync"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",2423,34,0,"limit"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected limit to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2423,34,0,"limit"]]]],["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",2423,51,0,"length"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected length to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2423,51,0,"length"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2423,69,0,"hasResult"],"==","Const",104,19,0,null],["Binary",1,1,0,["Ident",2423,69,0,"hasResult"],"=","Const",1644,20,0,!1],"IfStatement",1,1,0,0,["Binary",611,18,0,["Unary",1,1,0,"typeof","Ident",2423,69,0,"hasResult"],"!==","Const",125,25,0,"boolean"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected hasResult to be a Boolean, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2423,69,0,"hasResult"]]]],["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",2423,92,0,"onValue"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected onValue to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2423,92,0,"onValue"]]]],["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",2423,108,0,"onComplete"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected onComplete to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2423,108,0,"onComplete"]]]],["IfStatement",1,1,0,0,["Ident",2424,18,0,"hasResult"],["Binary",1,1,0,["Ident",2424,6,0,"result"],"=","Arr",2424,34,0],"Binary",1,1,0,["Ident",2424,6,0,"result"],"=","Const",2424,42,0,null],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2425,5,0,"length"],"<=","Const",2425,17,0,0],["Return",1,1,0,"Call",2426,11,0,["Ident",2426,11,0,"onComplete"],0,["Const",2426,24,0,null],["Ident",2426,29,0,"result"]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",2427,5,0,"limit"],"<","Const",2427,15,0,1],"||","Binary",1,1,0,["Ident",2427,19,0,"limit"],"!==","Ident",2427,28,0,"limit"],["Binary",1,1,0,["Ident",2428,5,0,"limit"],"=","Const",2428,13,0,1,1]],["Binary",1,1,0,["Ident",2430,14,0,"broken"],"=","Const",2430,23,0,null],["Binary",1,1,0,["Ident",2431,14,0,"slotsUsed"],"=","Const",2431,28,0,0],["Binary",1,1,0,["Ident",2432,14,0,"sync"],"=","Const",2432,21,0,!1],["Binary",1,1,0,["Ident",2433,14,0,"completed"],"=","Const",2433,26,0,!1],["Func",1,1,0,["Ident",2434,6,0,"onValueCallback"],[["Ident",2434,25,0,"err"],["Ident",2434,29,0,"value"]],[],[],"BlockStatement",2435,1,0,0,["IfStatement",1,1,0,0,["Ident",2435,7,0,"completed"],["Return",1,1,0,"Const",1,1,0]],["Unary",1,1,0,"--","Ident",2437,5,0,"slotsUsed"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",2438,7,0,"err"],"!=","Const",104,19,0,null],"&&","Binary",1,1,0,["Ident",2438,20,0,"broken"],"==","Const",104,19,0,null],["Binary",1,1,0,["Ident",2439,7,0,"broken"],"=","Ident",2439,16,0,"err"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",2440,7,0,"hasResult"],"&&","Binary",1,1,0,["Ident",2440,26,0,"broken"],"==","Const",104,19,0,null],"&&","Binary",1,1,0,["Binary",2440,38,0,["Arguments",2440,38,0],".","Const",2440,49,0,"length"],">","Const",2440,59,0,1],["Call",2441,7,0,["Binary",2441,7,0,["Ident",2441,7,0,"result"],".","Const",2441,14,0,"push"],0,["Ident",2441,19,0,"value"]]],["IfStatement",1,1,0,0,["Unary",1,1,0,"!","Ident",2442,11,0,"sync"],["Call",2443,7,0,["Ident",2443,7,0,"next"],0]]],["Binary",1,1,0,["Ident",2444,14,0,"index"],"=","Const",1,1,0,-1],["Func",1,1,0,["Ident",2445,6,0,"next"],[],[],[],"BlockStatement",2446,1,0,0,["For",1,1,0,0,0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"!","Ident",2446,14,0,"completed"],"&&","Binary",1,1,0,["Ident",2446,32,0,"broken"],"==","Const",104,19,0,null],"&&","Binary",1,1,0,["Ident",2446,44,0,"slotsUsed"],"<","Ident",2446,58,0,"limit"],"&&","Binary",1,1,0,["Unary",1,1,0,"++","Ident",2446,70,0,"index"],"<","Ident",2446,84,0,"length"],0,"BlockStatement",2447,1,0,0,["Unary",1,1,0,"++","Ident",2447,7,0,"slotsUsed"],["Binary",1,1,0,["Ident",2448,7,0,"sync"],"=","Const",2448,14,0,!0],["Call",2449,7,0,["Ident",2449,7,0,"onValue"],0,["Ident",2449,16,0,"index"],["Call",2349,11,0,["Ident",2349,11,0,"__once"],0,["Ident",2449,29,0,"onValueCallback"]]],["Binary",1,1,0,["Ident",2450,7,0,"sync"],"=","Const",2450,14,0,!1]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"!","Ident",2451,11,0,"completed"],"&&","Binary",1,1,0,["Binary",1,1,0,["Ident",2451,27,0,"broken"],"!=","Const",104,19,0,null],"||","Binary",1,1,0,["Ident",2451,37,0,"slotsUsed"],"===","Const",2451,52,0,0],["BlockStatement",2452,1,0,0,["Binary",1,1,0,["Ident",2452,7,0,"completed"],"=","Const",2452,19,0,!0],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2453,9,0,"broken"],"!=","Const",104,19,0,null],["Call",2454,9,0,["Ident",2454,9,0,"onComplete"],0,["Ident",2454,21,0,"broken"]],"Call",2456,9,0,["Ident",2456,9,0,"onComplete"],0,["Const",2456,21,0,null],["Ident",2456,26,0,"result"]]]]],["Call",2457,3,0,["Ident",2457,3,0,"next"],0]],type:"function",dependencies:["__async","__once","__typeof"]},__asyncIter:{helper:["Func",1852,1,0,0,[["Ident",2459,39,0,"limit"],["Ident",2459,56,0,"iterator"],["Ident",2459,86,0,"hasResult"],["Ident",2459,109,0,"onValue"],["Ident",2459,125,0,"onComplete"]],["broken","close","completed","index","iterStopped","result","slotsUsed","sync"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",2459,39,0,"limit"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected limit to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2459,39,0,"limit"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",134,47,0,["Unary",1,1,0,"typeof","Ident",2459,56,0,"iterator"],"!==","Const",134,62,0,"object"],"||","Binary",134,72,0,["Ident",2459,56,0,"iterator"],"===","Const",134,78,0,null],["Throw",1,1,0,"Call",1726,14,0,["Ident",1726,14,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected iterator to be an Object, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2459,56,0,"iterator"]]],"IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Binary",1724,35,0,["Ident",2459,56,0,"iterator"],".","Const",2459,70,0,"next"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected iterator.next to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Binary",1724,35,0,["Ident",2459,56,0,"iterator"],".","Const",2459,70,0,"next"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2459,86,0,"hasResult"],"==","Const",104,19,0,null],["Binary",1,1,0,["Ident",2459,86,0,"hasResult"],"=","Const",1644,20,0,!1],"IfStatement",1,1,0,0,["Binary",611,18,0,["Unary",1,1,0,"typeof","Ident",2459,86,0,"hasResult"],"!==","Const",125,25,0,"boolean"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected hasResult to be a Boolean, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2459,86,0,"hasResult"]]]],["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",2459,109,0,"onValue"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected onValue to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2459,109,0,"onValue"]]]],["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",2459,125,0,"onComplete"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected onComplete to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",2459,125,0,"onComplete"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",2460,5,0,"limit"],"<","Const",2460,15,0,1],"||","Binary",1,1,0,["Ident",2460,19,0,"limit"],"!==","Ident",2460,28,0,"limit"],["Binary",1,1,0,["Ident",2461,5,0,"limit"],"=","Const",2461,13,0,1,1]],["Binary",1,1,0,["Ident",2462,14,0,"broken"],"=","Const",2462,23,0,null],["Binary",1,1,0,["Ident",2463,14,0,"slotsUsed"],"=","Const",2463,28,0,0],["Binary",1,1,0,["Ident",2464,14,0,"sync"],"=","Const",2464,21,0,!1],["IfStatement",1,1,0,0,["Ident",2465,18,0,"hasResult"],["Binary",1,1,0,["Ident",2465,6,0,"result"],"=","Arr",2465,34,0],"Binary",1,1,0,["Ident",2465,6,0,"result"],"=","Const",2465,42,0,null],["Binary",1,1,0,["Ident",2466,14,0,"completed"],"=","Const",2466,26,0,!1],["Func",1,1,0,["Ident",2467,6,0,"onValueCallback"],[["Ident",2467,25,0,"err"],["Ident",2467,29,0,"value"]],[],[],"BlockStatement",2468,1,0,0,["IfStatement",1,1,0,0,["Ident",2468,7,0,"completed"],["Return",1,1,0,"Const",1,1,0]],["Unary",1,1,0,"--","Ident",2470,5,0,"slotsUsed"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",2471,7,0,"err"],"!=","Const",104,19,0,null],"&&","Binary",1,1,0,["Ident",2471,20,0,"broken"],"==","Const",104,19,0,null],["Binary",1,1,0,["Ident",2472,7,0,"broken"],"=","Ident",2472,16,0,"err"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",2473,7,0,"hasResult"],"&&","Binary",1,1,0,["Ident",2473,26,0,"broken"],"==","Const",104,19,0,null],"&&","Binary",1,1,0,["Binary",2473,38,0,["Arguments",2473,38,0],".","Const",2473,49,0,"length"],">","Const",2473,59,0,1],["Call",2474,7,0,["Binary",2474,7,0,["Ident",2474,7,0,"result"],".","Const",2474,14,0,"push"],0,["Ident",2474,19,0,"value"]]],["IfStatement",1,1,0,0,["Unary",1,1,0,"!","Ident",2475,11,0,"sync"],["Call",2476,7,0,["Ident",2476,7,0,"next"],0]]],["Binary",1,1,0,["Ident",2477,14,0,"index"],"=","Const",1,1,0,-1],["Binary",1,1,0,["Ident",2478,14,0,"iterStopped"],"=","Const",2478,29,0,!1],["Binary",1,1,0,["Ident",2479,14,0,"close"],"=","Func",2479,24,0,0,[],[],[],"BlockStatement",2480,1,0,0,["Binary",1,1,0,["Ident",2480,5,0,"close"],"=","Func",2480,15,0,0,[],[],[]],["TryCatch",1,1,0,0,["Return",2482,7,0,"Call",2482,7,0,["Binary",2482,7,0,["Ident",2482,7,0,"iterator"],".","Const",2482,16,0,"close"],0],["Ident",2483,10,0,"e"],"Return",2484,7,0,"Const",2484,7,0]],["Func",1,1,0,["Ident",2485,6,0,"next"],[],["item"],[],"BlockStatement",2486,1,0,0,["For",1,1,0,0,0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"!","Ident",2486,14,0,"completed"],"&&","Binary",1,1,0,["Ident",2486,32,0,"broken"],"==","Const",104,19,0,null],"&&","Binary",1,1,0,["Ident",2486,44,0,"slotsUsed"],"<","Ident",2486,58,0,"limit"],"&&","Unary",1,1,0,"!","Ident",2486,72,0,"iterStopped"],0,"BlockStatement",2487,1,0,0,["TryCatch",1,1,0,0,["Binary",1,1,0,["Ident",2488,12,0,"item"],"=","Call",2488,19,0,["Binary",2488,19,0,["Ident",2488,19,0,"iterator"],".","Const",2488,29,0,"next"],0],["Ident",2489,12,0,"e"],"BlockStatement",2490,1,0,0,["Binary",1,1,0,["Ident",2490,9,0,"broken"],"=","Const",2490,18,0,!0],["Break",1,1,0]],["IfStatement",1,1,0,0,["Binary",2493,9,0,["Ident",2493,9,0,"item"],".","Const",2493,15,0,"done"],["BlockStatement",2494,1,0,0,["Binary",1,1,0,["Ident",2494,9,0,"iterStopped"],"=","Const",2494,24,0,!0],["Break",1,1,0]]],["Unary",1,1,0,"++","Ident",2497,7,0,"slotsUsed"],["Binary",1,1,0,["Ident",2498,7,0,"sync"],"=","Const",2498,14,0,!0],["TryCatch",1,1,0,0,["Call",2500,9,0,["Ident",2500,9,0,"onValue"],0,["Binary",2500,18,0,["Ident",2500,18,0,"item"],".","Const",2500,23,0,"value"],["Unary",1,1,0,"++","Ident",2500,31,0,"index"],["Call",2349,11,0,["Ident",2349,11,0,"__once"],0,["Ident",2500,50,0,"onValueCallback"]]],["Ident",2501,12,0,"e"],"BlockStatement",2502,1,0,0,["Call",2502,9,0,["Ident",2502,9,0,"close"],0],["Throw",1,1,0,"Ident",2503,14,0,"e"]],["Binary",1,1,0,["Ident",2504,7,0,"sync"],"=","Const",2504,14,0,!1]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"!","Ident",2505,11,0,"completed"],"&&","Binary",1,1,0,["Binary",1,1,0,["Ident",2505,27,0,"broken"],"!=","Const",104,19,0,null],"||","Binary",1,1,0,["Ident",2505,37,0,"slotsUsed"],"===","Const",2505,52,0,0],["BlockStatement",2506,1,0,0,["Binary",1,1,0,["Ident",2506,7,0,"completed"],"=","Const",2506,19,0,!0],["Call",2507,7,0,["Ident",2507,7,0,"close"],0],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",2508,9,0,"broken"],"!=","Const",104,19,0,null],["Call",2509,9,0,["Ident",2509,9,0,"onComplete"],0,["Ident",2509,21,0,"broken"]],"Call",2511,9,0,["Ident",2511,9,0,"onComplete"],0,["Const",2511,21,0,null],["Ident",2511,26,0,"result"]]]]],["Call",2512,3,0,["Ident",2512,3,0,"next"],0]],type:{type:"generic",base:"functionBase",args:["undefined"]},dependencies:["__asyncIter","__once","__typeof"]},__is:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3157,37,0,["Ident",3157,37,0,"Object"],".","Const",3157,45,0,"is"],"===","Const",128,25,0,"function"],["Binary",3158,3,0,["Ident",3158,3,0,"Object"],".","Const",3158,10,0,"is"],"Func",3160,4,0,0,[["Ident",3160,5,0,"x"],["Ident",3160,7,0,"y"]],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3161,7,0,"x"],"===","Ident",3161,12,0,"y"],["Return",1,1,0,"Binary",1,1,0,["Binary",1,1,0,["Ident",3162,7,0,"x"],"!==","Const",3162,12,0,0],"||","Binary",1,1,0,["Binary",1,1,0,["Const",3162,18,0,1],"/","Ident",3162,22,0,"x"],"===","Binary",1,1,0,["Const",3162,28,0,1],"/","Ident",3162,32,0,"y"],"Return",1,1,0,"Binary",1,1,0,["Binary",1,1,0,["Ident",3164,7,0,"x"],"!==","Ident",3164,11,0,"x"],"&&","Binary",1,1,0,["Ident",3164,17,0,"y"],"!==","Ident",3164,22,0,"y"],type:"any",dependencies:["__is"]},__bind:{helper:["Func",3204,25,0,0,[["Ident",3204,26,0,"parent"],["Ident",3204,33,0,"child"]],["func"],[],"BlockStatement",3205,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3205,9,0,"parent"],"==","Const",104,19,0,null],["Throw",1,1,0,"Call",3206,10,0,["Ident",3206,10,0,"TypeError"],0,["Binary",1,1,0,["Const",3206,21,0,"Expected parent to be an object, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3206,68,0,"parent"]]]],["Binary",1,1,0,["Ident",3207,6,0,"func"],"=","Binary",3207,13,0,["Ident",3207,13,0,"parent"],".","Ident",3207,21,0,"child"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3208,22,0,"func"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",3209,10,0,["Ident",3209,10,0,"Error"],0,["Binary",1,1,0,["Binary",1,1,0,["Const",3209,17,0,"Trying to bind child '"],"+","Call",3209,42,0,["Ident",3209,42,0,"String"],0,["Ident",3209,49,0,"child"]],"+","Const",3209,17,0,"' which is not a function"]]],["Return",3210,4,0,"Func",3210,4,0,0,[],[],[],"Return",3210,7,0,"Call",3210,7,0,["Binary",3210,7,0,["Ident",3210,7,0,"func"],".","Const",3210,7,0,"apply"],0,["Ident",3210,14,0,"parent"],["Arguments",3210,25,0]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__bind","__toArray","__typeof"]},__defProp:{helper:["Call",3,9,0,["Func",3,12,0,0,[],["defineGetter","defineSetter","fallback","lookupGetter","lookupSetter","supportsAccessors"],[],"BlockStatement",3213,1,0,0,["Binary",1,1,0,["Ident",3213,6,0,"fallback"],"=","Binary",3213,17,0,["Ident",3213,17,0,"Object"],".","Const",3213,25,0,"defineProperty"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3214,18,0,"fallback"],"===","Const",128,25,0,"function"],"&&","Call",3,9,0,["Func",3,12,0,0,[],["o"],[],"TryCatch",1,1,0,0,["BlockStatement",3216,1,0,0,["Binary",1,1,0,["Ident",3216,12,0,"o"],"=","Obj",106109,106112,0],["Call",3217,9,0,["Ident",3217,9,0,"fallback"],0,["Ident",3217,18,0,"o"],["Const",3217,22,0,"sentinel"],["Obj",106143,106146,0]],["Return",1,1,0,"Binary",1,1,0,["Const",3218,19,0,"sentinel"],"in","Ident",3218,9,0,"o"]],["Ident",3219,12,0,"e"],"Return",3220,9,0,"Const",3220,9,0,!1],0],["Return",3221,5,0,"Ident",3221,5,0,"fallback"],"BlockStatement",3223,1,0,0,["Binary",1,1,0,["Ident",3223,8,0,"supportsAccessors"],"=","Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Binary",3223,29,0,["Ident",3223,29,0,"Object"],".","Const",3223,37,0,"prototype"],["Const",3223,56,0,"__defineGetter__"]],["Binary",1,1,0,["Ident",3224,8,0,"lookupGetter"],"=","Binary",1,1,0,["Ident",3224,24,0,"supportsAccessors"],"&&","Binary",3224,47,0,["Binary",3224,47,0,["Ident",3224,47,0,"Object"],".","Const",3224,47,0,"prototype"],".","Const",3224,56,0,"__lookupGetter__"],["Binary",1,1,0,["Ident",3225,8,0,"lookupSetter"],"=","Binary",1,1,0,["Ident",3225,24,0,"supportsAccessors"],"&&","Binary",3225,47,0,["Binary",3225,47,0,["Ident",3225,47,0,"Object"],".","Const",3225,47,0,"prototype"],".","Const",3225,56,0,"__lookupSetter__"],["Binary",1,1,0,["Ident",3226,8,0,"defineGetter"],"=","Binary",1,1,0,["Ident",3226,24,0,"supportsAccessors"],"&&","Binary",3226,47,0,["Binary",3226,47,0,["Ident",3226,47,0,"Object"],".","Const",3226,47,0,"prototype"],".","Const",3226,56,0,"__defineGetter__"],["Binary",1,1,0,["Ident",3227,8,0,"defineSetter"],"=","Binary",1,1,0,["Ident",3227,24,0,"supportsAccessors"],"&&","Binary",3227,47,0,["Binary",3227,47,0,["Ident",3227,47,0,"Object"],".","Const",3227,47,0,"prototype"],".","Const",3227,56,0,"__defineSetter__"],["Return",1852,1,0,"Func",1852,1,0,0,[["Ident",3228,7,0,"object"],["Ident",3228,23,0,"property"],["Ident",3228,43,0,"descriptor"]],["proto"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",617,18,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3228,7,0,"object"],"!==","Const",134,62,0,"object"],"||","Binary",1,1,0,["Ident",3228,7,0,"object"],"===","Const",134,78,0,null],"&&","Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",3228,7,0,"object"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1688,14,0,["Ident",1688,14,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected object to be one of Object or Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3228,7,0,"object"]]]],["IfStatement",1,1,0,0,["Binary",607,18,0,["Unary",1,1,0,"typeof","Ident",3228,23,0,"property"],"!==","Const",119,25,0,"string"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected property to be a String, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3228,23,0,"property"]]]],["IfStatement",1,1,0,0,["Binary",617,18,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3228,43,0,"descriptor"],"!==","Const",134,62,0,"object"],"||","Binary",1,1,0,["Ident",3228,43,0,"descriptor"],"===","Const",134,78,0,null],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected descriptor to be an Object, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3228,43,0,"descriptor"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3229,22,0,"fallback"],"===","Const",128,25,0,"function"],["TryCatch",1,1,0,0,["Return",1,1,0,"Call",3231,17,0,["Ident",3231,17,0,"fallback"],0,["Ident",3231,27,0,"object"],["Ident",3231,34,0,"property"],["Ident",3231,44,0,"descriptor"]],["Ident",3232,14,0,"e"],"Const",3233,11,0]],["IfStatement",1,1,0,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3235,9,0,"descriptor"],["Const",3235,30,0,"value"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3236,11,0,"supportsAccessors"],"&&","Call",3236,36,0,["Binary",3236,36,0,["Ident",3236,36,0,"lookupGetter"],".","Const",3236,36,0,"call"],0,["Ident",3236,51,0,"object"],["Binary",1,1,0,["Ident",3236,58,0,"property"],"||","Call",3236,70,0,["Binary",3236,70,0,["Ident",3236,70,0,"lookupSetter"],".","Const",3236,70,0,"call"],0,["Ident",3236,86,0,"object"],["Ident",3236,93,0,"property"]]],["BlockStatement",3237,1,0,0,["Binary",1,1,0,["Ident",3237,14,0,"proto"],"=","Binary",3237,22,0,["Ident",3237,22,0,"object"],".","Const",3237,30,0,"__proto__"],["Binary",1,1,0,["Binary",3238,17,0,["Ident",3238,11,0,"object"],".","Const",3238,18,0,"__proto__"],"=","Binary",3238,30,0,["Ident",3238,30,0,"Object"],".","Const",3238,38,0,"prototype"],["Unary",1,1,0,"delete","Binary",3239,17,0,["Ident",3239,17,0,"object"],".","Ident",3239,25,0,"property"],["Binary",1,1,0,["Binary",3240,17,0,["Ident",3240,11,0,"object"],".","Ident",3240,18,0,"property"],"=","Binary",3240,30,0,["Ident",3240,30,0,"descriptor"],".","Const",3240,42,0,"value"],["Binary",1,1,0,["Binary",3241,17,0,["Ident",3241,11,0,"object"],".","Const",3241,18,0,"__proto__"],"=","Ident",3241,30,0,"proto"]],"Binary",1,1,0,["Binary",3243,17,0,["Ident",3243,11,0,"object"],".","Ident",3243,18,0,"property"],"=","Binary",3243,30,0,["Ident",3243,30,0,"descriptor"],".","Const",3243,42,0,"value"],"BlockStatement",3245,1,0,0,["IfStatement",1,1,0,0,["Unary",1,1,0,"!","Ident",3245,15,0,"supportsAccessors"],["Throw",1,1,0,"Call",3246,16,0,["Ident",3246,16,0,"Error"],0,["Const",3246,23,0,"Getters and setters cannot be defined on this Javascript engine"]]],["IfStatement",1,1,0,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3247,11,0,"descriptor"],["Const",3247,32,0,"get"]],["Call",3248,11,0,["Binary",3248,11,0,["Ident",3248,11,0,"defineGetter"],".","Const",3248,11,0,"call"],0,["Ident",3248,26,0,"object"],["Ident",3248,33,0,"property"],["Binary",3248,43,0,["Ident",3248,43,0,"descriptor"],".","Const",3248,55,0,"get"]]],["IfStatement",1,1,0,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3249,11,0,"descriptor"],["Const",3249,32,0,"set"]],["Call",3250,11,0,["Binary",3250,11,0,["Ident",3250,11,0,"defineSetter"],".","Const",3250,11,0,"call"],0,["Ident",3250,26,0,"object"],["Ident",3250,33,0,"property"],["Binary",3250,43,0,["Ident",3250,43,0,"descriptor"],".","Const",3250,55,0,"set"]]]],["Return",3251,7,0,"Ident",3251,7,0,"object"]]]],0],type:"any",dependencies:["__defProp","__owns","__typeof"]},__compose:{helper:["Func",1852,1,0,0,[["Ident",3257,29,0,"left"],["Ident",3257,40,0,"right"]],[],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",3257,29,0,"left"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected left to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3257,29,0,"left"]]]],["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",3257,40,0,"right"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected right to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3257,40,0,"right"]]]],["Return",3258,4,0,"Func",3258,4,0,0,[],[],[],"Return",3258,6,0,"Call",3258,6,0,["Binary",3258,6,0,["Ident",3258,6,0,"left"],".","Const",3258,6,0,"call"],0,["This",3258,13,0],["Call",3258,18,0,["Binary",3258,18,0,["Ident",3258,18,0,"right"],".","Const",3258,18,0,"apply"],0,["This",3258,26,0],["Arguments",3258,35,0]]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__compose","__toArray","__typeof"]},__curry:{helper:["Func",1852,1,0,0,[["Ident",3272,27,0,"numArgs"],["Ident",3272,46,0,"f"]],["currier"],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",609,18,0,["Unary",1,1,0,"typeof","Ident",3272,27,0,"numArgs"],"!==","Const",122,25,0,"number"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected numArgs to be a Number, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3272,27,0,"numArgs"]]]],["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",3272,46,0,"f"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected f to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3272,46,0,"f"]]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3273,5,0,"numArgs"],">","Const",3273,17,0,1],["BlockStatement",3274,1,0,0,["Binary",1,1,0,["Ident",3274,8,0,"currier"],"=","Func",3274,16,0,0,[["Ident",3274,17,0,"args"]],["ret"],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Call",700,11,0,["Ident",700,11,0,"__num"],0,["Binary",3275,9,0,["Ident",3275,9,0,"args"],".","Const",3275,15,0,"length"]],">=","Ident",3275,24,0,"numArgs"],["Return",3276,9,0,"Call",3276,9,0,["Binary",3276,9,0,["Ident",3276,9,0,"f"],".","Const",3276,11,0,"apply"],0,["This",3276,17,0],["Ident",3276,22,0,"args"]],"BlockStatement",3278,1,0,0,["Binary",1,1,0,["Ident",3278,12,0,"ret"],"=","Func",3278,16,0,0,[],[],[],"IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",3279,13,0,["Arguments",3279,13,0],".","Const",3279,24,0,"length"],"===","Const",3279,34,0,0],["Return",3280,13,0,"Ident",3280,13,0,"ret"],"Return",3282,13,0,"Call",3282,13,0,["Binary",3282,13,0,["Ident",3282,13,0,"currier"],".","Const",3282,13,0,"call"],0,["This",3282,22,0],["Call",3282,27,0,["Binary",3282,27,0,["Ident",3282,27,0,"args"],".","Const",3282,33,0,"concat"],0,["Call",3282,40,0,["Binary",3282,40,0,["Ident",3282,40,0,"__slice"],".","Const",3282,40,0,"call"],0,["Arguments",3282,49,0]]]],["Return",3283,9,0,"Ident",3283,9,0,"ret"]],["Return",3284,5,0,"Call",3284,5,0,["Ident",3284,5,0,"currier"],0,["Arr",3284,13,0]]],"Return",3286,5,0,"Ident",3286,5,0,"f"]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__curry","__num","__slice","__typeof"]},__import:{helper:["Func",3300,27,0,0,[["Ident",3300,28,0,"dest"],["Ident",3300,33,0,"source"]],["k"],[],"BlockStatement",3301,1,0,0,["ForIn",1,1,0,0,["Ident",3301,6,0,"k"],["Ident",3301,11,0,"source"],"IfStatement",1,1,0,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3301,11,0,"source"],["Ident",3301,6,0,"k"]],["Binary",1,1,0,["Binary",3302,9,0,["Ident",3302,5,0,"dest"],".","Ident",3302,10,0,"k"],"=","Binary",3302,15,0,["Ident",3302,15,0,"source"],".","Ident",3302,23,0,"k"]],["Return",3303,3,0,"Ident",3303,3,0,"dest"]],type:{type:"generic",base:"functionBase",args:["object"]},dependencies:["__import","__owns"]},WeakMap:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3352,40,0,["Ident",3352,40,0,"GLOBAL"],".","Const",3352,48,0,"WeakMap"],"===","Const",128,25,0,"function"],["Binary",3352,60,0,["Ident",3352,60,0,"GLOBAL"],".","Const",3352,68,0,"WeakMap"],"Binary",1,1,0,["Ident",3352,86,0,"WeakMap"],"=","Call",2944,1,0,["Func",2944,1,0,0,[],["_WeakMap_prototype","defProp","isExtensible"],[],"BlockStatement",2944,1,0,0,["Func",1,1,0,["Ident",3352,86,0,"WeakMap"],[],["_this"],[],"BlockStatement",3360,1,0,0,["Binary",3360,1,0,["Ident",3360,1,0,"_this"],"=","IfExpression",1,1,0,["Binary",1,1,0,["Eval",2867,21,0,["Const",2867,27,0,"this"]],"instanceof","Ident",3352,86,0,"WeakMap"],["Eval",2867,56,0,["Const",2867,62,0,"this"]],"Call",94904,94927,0,["Ident",94904,94927,0,"__create"],0,["Ident",1,1,0,"_WeakMap_prototype"]],["Binary",1,1,0,["Binary",3360,5,0,["Ident",3360,5,0,"_this"],".","Const",3360,6,0,"_keys"],"=","Arr",3360,14,0],["Binary",1,1,0,["Binary",3361,5,0,["Ident",3361,5,0,"_this"],".","Const",3361,6,0,"_values"],"=","Arr",3361,16,0],["Binary",1,1,0,["Binary",3363,5,0,["Ident",3363,5,0,"_this"],".","Const",3363,6,0,"_chilly"],"=","Arr",3363,16,0],["Binary",1,1,0,["Binary",3364,5,0,["Ident",3364,5,0,"_this"],".","Const",3364,6,0,"_uid"],"=","Call",3364,13,0,["Ident",3364,13,0,"createUid"],0],["Return",3360,1,0,"Ident",3360,1,0,"_this"]],["Binary",1,1,0,["Ident",1,1,0,"_WeakMap_prototype"],"=","Binary",2798,37,0,["Ident",3352,86,0,"WeakMap"],".","Const",2798,44,0,"prototype"],["Binary",1,1,0,["Binary",2810,27,0,["Ident",3352,86,0,"WeakMap"],".","Const",2810,28,0,"displayName"],"=","Const",1,1,0,"WeakMap"],["Func",1,1,0,["Ident",3353,6,0,"uidRand"],[],[],[],"Return",3354,5,0,"Call",3354,5,0,["Binary",3354,5,0,["Call",3354,5,0,["Binary",3354,5,0,["Call",3354,5,0,["Binary",3354,5,0,["Ident",3354,5,0,"Math"],".","Const",3354,10,0,"random"],0],".","Const",3354,19,0,"toString"],0,["Const",3354,29,0,36]],".","Const",3354,33,0,"slice"],0,["Const",3354,39,0,2]],["Func",1,1,0,["Ident",3355,6,0,"createUid"],[],[],[],"Return",1,1,0,"Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Call",558,11,0,["Ident",558,11,0,"__strnum"],0,["Call",3356,8,0,["Ident",3356,8,0,"uidRand"],0]],"+","Const",3356,5,0,"-"],"+","Call",563,11,0,["Ident",563,11,0,"__strnum"],0,["Call",3356,22,0,["Binary",3356,22,0,["Call",3356,22,0,["Ident",3356,25,0,"Date"],1],".","Const",3356,33,0,"getTime"],0]],"+","Const",3356,5,0,"-"],"+","Call",563,11,0,["Ident",563,11,0,"__strnum"],0,["Call",3356,47,0,["Ident",3356,47,0,"uidRand"],0]],"+","Const",3356,5,0,"-"],"+","Call",563,11,0,["Ident",563,11,0,"__strnum"],0,["Call",3356,61,0,["Ident",3356,61,0,"uidRand"],0]],["Binary",1,1,0,["Ident",3357,6,0,"isExtensible"],"=","Binary",1,1,0,["Binary",3357,22,0,["Ident",3357,22,0,"Object"],".","Const",3357,30,0,"isExtensible"],"||","Func",3357,48,0,0,[],[],[],"Return",3357,50,0,"Const",3357,50,0,!0],["Func",1,1,0,["Ident",3366,6,0,"check"],[["Ident",3366,13,0,"key"]],["chilly","uid"],[],"BlockExpression",3367,1,0,["Binary",1,1,0,["Ident",3367,8,0,"uid"],"=","Binary",3367,14,0,["This",3367,14,0],".","Const",3367,16,0,"_uid"],["IfExpression",1,1,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3368,7,0,"key"],["Ident",3368,19,0,"uid"]],["BlockExpression",3369,1,0,["Binary",1,1,0,["Ident",3369,10,0,"chilly"],"=","Binary",3369,19,0,["This",3369,19,0],".","Const",3369,21,0,"_chilly"],["IfExpression",1,1,0,["Binary",1,1,0,["Call",3370,9,0,["Binary",3370,9,0,["Ident",3370,9,0,"chilly"],".","Const",3370,17,0,"indexOf"],0,["Ident",3370,26,0,"key"]],"===","Const",1,1,0,-1],["BlockExpression",3371,1,0,["Call",3371,9,0,["Binary",3371,9,0,["Ident",3371,9,0,"chilly"],".","Const",3371,16,0,"push"],0,["Ident",3371,21,0,"key"]],["Call",3372,9,0,["Binary",3372,9,0,["Binary",3372,9,0,["This",3372,9,0],".","Const",3372,10,0,"_keys"],".","Const",3372,16,0,"push"],0,["Ident",3372,21,0,"key"]],["Call",3373,9,0,["Binary",3373,9,0,["Binary",3373,9,0,["This",3373,9,0],".","Const",3373,10,0,"_values"],".","Const",3373,18,0,"push"],0,["Binary",3373,23,0,["Ident",3373,23,0,"key"],".","Ident",3373,27,0,"uid"]]]]]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_WeakMap_prototype"],".","Const",3375,6,0,"get"],"=","Func",3375,10,0,0,[["Ident",3375,11,0,"key"]],["_ref","index"],[],"BlockStatement",3376,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Call",3376,7,0,["Ident",3376,7,0,"Object"],0,["Ident",3376,15,0,"key"]],"!==","Ident",3376,22,0,"key"],["Throw",1,1,0,"Call",3377,12,0,["Ident",3377,12,0,"TypeError"],0,["Const",3377,23,0,"Invalid value used as weak map key"]]],["IfStatement",1,1,0,0,["Call",3379,7,0,["Ident",3379,7,0,"isExtensible"],0,["Ident",3379,22,0,"key"]],["IfStatement",3380,7,0,0,["Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3380,7,0,"key"],["Binary",3380,7,0,["Ident",3380,7,0,"_ref"],"=","Binary",3380,12,0,["This",3380,12,0],".","Const",3380,13,0,"_uid"]],["Return",3380,7,0,"Binary",3380,7,0,["Ident",3380,7,0,"key"],".","Ident",3380,7,0,"_ref"]],"BlockStatement",3382,1,0,0,["Call",3382,7,0,["Binary",3382,7,0,["Ident",3382,7,0,"check"],".","Const",3382,7,0,"call"],0,["This",3382,14,0],["Ident",3382,19,0,"key"]],["Binary",1,1,0,["Ident",3383,10,0,"index"],"=","Call",3383,18,0,["Binary",3383,18,0,["Binary",3383,18,0,["This",3383,18,0],".","Const",3383,20,0,"_keys"],".","Const",3383,26,0,"indexOf"],0,["Ident",3383,35,0,"key"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3384,9,0,"index"],"===","Const",1,1,0,-1],["Return",3385,9,0,"Const",3385,9,0],"Return",3387,9,0,"Binary",3387,9,0,["Binary",3387,9,0,["This",3387,9,0],".","Const",3387,10,0,"_values"],".","Ident",3387,18,0,"index"]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_WeakMap_prototype"],".","Const",3389,6,0,"has"],"=","Func",3389,10,0,0,[["Ident",3389,11,0,"key"]],[],[],"BlockStatement",3390,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Call",3390,7,0,["Ident",3390,7,0,"Object"],0,["Ident",3390,15,0,"key"]],"!==","Ident",3390,22,0,"key"],["Throw",1,1,0,"Call",3391,12,0,["Ident",3391,12,0,"TypeError"],0,["Const",3391,23,0,"Invalid value used as weak map key"]]],["IfStatement",1,1,0,0,["Call",3393,7,0,["Ident",3393,7,0,"isExtensible"],0,["Ident",3393,22,0,"key"]],["Return",602,7,0,"Call",602,7,0,["Binary",602,7,0,["Ident",602,7,0,"__owns"],".","Const",602,7,0,"call"],0,["Ident",3394,7,0,"key"],["Binary",3394,18,0,["This",3394,18,0],".","Const",3394,20,0,"_uid"]],"BlockStatement",3396,1,0,0,["Call",3396,7,0,["Binary",3396,7,0,["Ident",3396,7,0,"check"],".","Const",3396,7,0,"call"],0,["This",3396,14,0],["Ident",3396,19,0,"key"]],["Return",1,1,0,"Binary",1,1,0,["Call",3397,7,0,["Binary",3397,7,0,["Binary",3397,7,0,["This",3397,7,0],".","Const",3397,8,0,"_keys"],".","Const",3397,14,0,"indexOf"],0,["Ident",3397,23,0,"key"]],"!==","Const",1,1,0,-1]]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3399,33,0,["Ident",3399,33,0,"Object"],".","Const",3399,41,0,"defineProperty"],"===","Const",128,25,0,"function"],["Binary",1,1,0,["Ident",3399,6,0,"defProp"],"=","Binary",3399,61,0,["Ident",3399,61,0,"Object"],".","Const",3399,69,0,"defineProperty"],"Binary",1,1,0,["Ident",3399,6,0,"defProp"],"=","Func",3399,91,0,0,[["Ident",3399,92,0,"o"],["Ident",3399,94,0,"k"],["Ident",3399,97,0,"d"]],[],[],"Binary",1,1,0,["Binary",3399,106,0,["Ident",3399,104,0,"o"],".","Ident",3399,107,0,"k"],"=","Binary",3399,112,0,["Ident",3399,112,0,"d"],".","Const",3399,115,0,"value"],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_WeakMap_prototype"],".","Const",3400,6,0,"set"],"=","Func",3400,10,0,0,[["Ident",3400,11,0,"key"],["Ident",3400,15,0,"value"]],["index","keys"],[],"BlockStatement",3401,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Call",3401,7,0,["Ident",3401,7,0,"Object"],0,["Ident",3401,15,0,"key"]],"!==","Ident",3401,22,0,"key"],["Throw",1,1,0,"Call",3402,12,0,["Ident",3402,12,0,"TypeError"],0,["Const",3402,23,0,"Invalid value used as weak map key"]]],["IfStatement",1,1,0,0,["Call",3404,7,0,["Ident",3404,7,0,"isExtensible"],0,["Ident",3404,22,0,"key"]],["Call",3405,7,0,["Ident",3405,7,0,"defProp"],0,["Ident",3405,16,0,"key"],["Binary",3405,20,0,["This",3405,20,0],".","Const",3405,22,0,"_uid"],["Obj",112045,112129,0,3406,10,null,"configurable",["Const",3406,9,0,!0],3407,10,null,"writable",["Const",3407,9,0,!0],3408,10,null,"enumerable",["Const",3408,9,0,!1],3409,9,null,"value",["Ident",3409,9,0,"value"]]],"BlockStatement",3412,1,0,0,["Call",3412,7,0,["Binary",3412,7,0,["Ident",3412,7,0,"check"],".","Const",3412,7,0,"call"],0,["This",3412,14,0],["Ident",3412,19,0,"key"]],["Binary",1,1,0,["Ident",3413,10,0,"keys"],"=","Binary",3413,17,0,["This",3413,17,0],".","Const",3413,19,0,"_keys"],["Binary",1,1,0,["Ident",3414,18,0,"index"],"=","Call",3414,26,0,["Binary",3414,26,0,["Ident",3414,26,0,"keys"],".","Const",3414,32,0,"indexOf"],0,["Ident",3414,41,0,"key"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3415,9,0,"index"],"===","Const",1,1,0,-1],["BlockStatement",3416,1,0,0,["Binary",1,1,0,["Ident",3416,9,0,"index"],"=","Binary",3416,17,0,["Ident",3416,17,0,"keys"],".","Const",3416,23,0,"length"],["Binary",1,1,0,["Binary",3417,13,0,["Ident",3417,9,0,"keys"],".","Ident",3417,14,0,"index"],"=","Ident",3417,23,0,"key"]]],["Binary",1,1,0,["Binary",3418,15,0,["Binary",3418,7,0,["This",3418,7,0],".","Const",3418,8,0,"_values"],".","Ident",3418,16,0,"index"],"=","Ident",3418,25,0,"value"]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_WeakMap_prototype"],".","Const",3420,6,0,"delete"],"=","Func",3420,13,0,0,[["Ident",3420,14,0,"key"]],["index","keys"],[],"BlockStatement",3421,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Call",3421,7,0,["Ident",3421,7,0,"Object"],0,["Ident",3421,15,0,"key"]],"!==","Ident",3421,22,0,"key"],["Throw",1,1,0,"Call",3422,12,0,["Ident",3422,12,0,"TypeError"],0,["Const",3422,23,0,"Invalid value used as weak map key"]]],["IfStatement",1,1,0,0,["Call",3424,7,0,["Ident",3424,7,0,"isExtensible"],0,["Ident",3424,22,0,"key"]],["Unary",1,1,0,"delete","Binary",3425,13,0,["Ident",3425,13,0,"key"],".","Binary",3425,18,0,["This",3425,18,0],".","Const",3425,19,0,"_uid"],"BlockStatement",3427,1,0,0,["Call",3427,7,0,["Binary",3427,7,0,["Ident",3427,7,0,"check"],".","Const",3427,7,0,"call"],0,["This",3427,14,0],["Ident",3427,19,0,"key"]],["Binary",1,1,0,["Ident",3428,10,0,"keys"],"=","Binary",3428,17,0,["This",3428,17,0],".","Const",3428,19,0,"_keys"],["Binary",1,1,0,["Ident",3429,18,0,"index"],"=","Call",3429,26,0,["Binary",3429,26,0,["Ident",3429,26,0,"keys"],".","Const",3429,32,0,"indexOf"],0,["Ident",3429,41,0,"key"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3430,9,0,"index"],"!==","Const",1,1,0,-1],["BlockStatement",3431,1,0,0,["Call",3431,9,0,["Binary",3431,9,0,["Ident",3431,9,0,"keys"],".","Const",3431,14,0,"splice"],0,["Ident",3431,21,0,"index"],["Const",3431,28,0,1]],["Call",3432,9,0,["Binary",3432,9,0,["Binary",3432,9,0,["This",3432,9,0],".","Const",3432,10,0,"_values"],".","Const",3432,18,0,"splice"],0,["Ident",3432,25,0,"index"],["Const",3432,32,0,1]]]]]],["Return",1,1,0,"Ident",3352,86,0,"WeakMap"]],0],type:"any",dependencies:["__create","__owns","__strnum","GLOBAL","WeakMap"]},__indexOfIdentical:{helper:["Func",3434,39,0,0,[["Ident",3434,40,0,"array"],["Ident",3434,46,0,"item"]],["_arr","check","i","inf"],[],"BlockStatement",3435,1,0,0,["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3435,12,0,"item"],"===","Const",3435,22,0,"number"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3436,7,0,"item"],"!==","Ident",3436,7,0,"item"],["BlockStatement",3437,1,0,0,["For",1,1,0,0,["BlockExpression",0,0,0,["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Ident",3437,22,0,"array"]],["Binary",1,1,0,["Ident",3437,17,0,"i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"]],["Unary",1,1,0,"--post","Ident",3437,17,0,"i"],0,"BlockStatement",1414,1,0,0,["Binary",1,1,0,["Ident",3437,10,0,"check"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",3437,17,0,"i"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3438,11,0,"check"],"!==","Ident",3438,11,0,"check"],["Return",1,1,0,"Ident",3439,17,0,"i"]]],["Return",1,1,0,"Const",1,1,0,-1]],"IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3441,12,0,"item"],"===","Const",3441,21,0,0],["BlockStatement",3442,1,0,0,["Binary",1,1,0,["Ident",3442,10,0,"inf"],"=","Binary",1,1,0,["Const",3442,17,0,1],"/","Ident",3442,21,0,"item"],["For",1,1,0,0,["BlockExpression",0,0,0,["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Ident",3443,22,0,"array"]],["Binary",1,1,0,["Ident",3443,17,0,"i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"]],["Unary",1,1,0,"--post","Ident",3443,17,0,"i"],0,"BlockStatement",1414,1,0,0,["Binary",1,1,0,["Ident",3443,10,0,"check"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",3443,17,0,"i"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Binary",1,1,0,["Ident",3444,11,0,"check"],"===","Const",3444,21,0,0],"&&","Binary",1,1,0,["Binary",1,1,0,["Const",3444,27,0,1],"/","Ident",3444,31,0,"check"],"===","Ident",3444,40,0,"inf"],["Return",1,1,0,"Ident",3445,17,0,"i"]]],["Return",1,1,0,"Const",1,1,0,-1]]]],["Return",3447,3,0,"Call",3447,3,0,["Binary",3447,3,0,["Ident",3447,3,0,"array"],".","Const",3447,9,0,"indexOf"],0,["Ident",3447,18,0,"item"]]],type:"function",dependencies:["__indexOfIdentical","__toArray"]},Map:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3449,36,0,["Ident",3449,36,0,"GLOBAL"],".","Const",3449,44,0,"Map"],"===","Const",128,25,0,"function"],["Binary",3449,52,0,["Ident",3449,52,0,"GLOBAL"],".","Const",3449,60,0,"Map"],"Binary",1,1,0,["Ident",3449,74,0,"Map"],"=","Call",2944,1,0,["Func",2944,1,0,0,[],["_Map_prototype"],[],"BlockStatement",2944,1,0,0,["Func",1,1,0,["Ident",3449,74,0,"Map"],[["Ident",3450,19,0,"iterable"]],["_item","_iter","_this","x"],[],"BlockStatement",3451,1,0,0,["Binary",3451,1,0,["Ident",3451,1,0,"_this"],"=","IfExpression",1,1,0,["Binary",1,1,0,["Eval",2867,21,0,["Const",2867,27,0,"this"]],"instanceof","Ident",3449,74,0,"Map"],["Eval",2867,56,0,["Const",2867,62,0,"this"]],"Call",94904,94927,0,["Ident",94904,94927,0,"__create"],0,["Ident",1,1,0,"_Map_prototype"]],["Binary",1,1,0,["Binary",3451,5,0,["Ident",3451,5,0,"_this"],".","Const",3451,6,0,"_keys"],"=","Arr",3451,14,0],["Binary",1,1,0,["Binary",3452,5,0,["Ident",3452,5,0,"_this"],".","Const",3452,6,0,"_values"],"=","Arr",3452,16,0],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3453,7,0,"iterable"],"!=","Const",104,19,0,null],["TryFinally",1,1,0,0,["For",1,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_iter"],"=","Call",2086,30,0,["Ident",2086,30,0,"__iter"],0,["Ident",3454,17,0,"iterable"]],["Const",2159,19,0,!0],0,"BlockStatement",2126,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_item"],"=","Call",2096,18,0,["Binary",2096,18,0,["Ident",1,1,0,"_iter"],".","Const",2096,29,0,"next"],0],["IfStatement",1,1,0,0,["Binary",2097,9,0,["Ident",1,1,0,"_item"],".","Const",2097,16,0,"done"],["Break",1,1,0]],["Binary",1,1,0,["Ident",3454,10,0,"x"],"=","Binary",2099,19,0,["Ident",1,1,0,"_item"],".","Const",2099,26,0,"value"],["Call",3455,9,0,["Binary",3455,9,0,["Ident",3455,9,0,"_this"],".","Const",3455,10,0,"set"],0,["Binary",3455,14,0,["Ident",3455,14,0,"x"],".","Const",3455,16,0,0],["Binary",3455,19,0,["Ident",3455,19,0,"x"],".","Const",3455,22,0,1]]],"TryCatch",1,1,0,0,["Call",2167,9,0,["Binary",2167,9,0,["Ident",1,1,0,"_iter"],".","Const",2167,19,0,"close"],0],["Ident",1,1,0,"_e"],"Const",2169,9,0]],["Return",3451,1,0,"Ident",3451,1,0,"_this"]],["Binary",1,1,0,["Ident",1,1,0,"_Map_prototype"],"=","Binary",2798,37,0,["Ident",3449,74,0,"Map"],".","Const",2798,44,0,"prototype"],["Binary",1,1,0,["Binary",2810,27,0,["Ident",3449,74,0,"Map"],".","Const",2810,28,0,"displayName"],"=","Const",1,1,0,"Map"],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3457,6,0,"get"],"=","Func",3457,10,0,0,[["Ident",3457,11,0,"key"]],["index"],[],"BlockStatement",3458,1,0,0,["Binary",1,1,0,["Ident",3458,8,0,"index"],"=","Call",3458,16,0,["Ident",3458,16,0,"__indexOfIdentical"],0,["Binary",3458,38,0,["This",3458,38,0],".","Const",3458,39,0,"_keys"],["Ident",3458,45,0,"key"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3459,7,0,"index"],"===","Const",1,1,0,-1],["Return",3460,7,0,"Const",3460,7,0],"Return",3462,7,0,"Binary",3462,7,0,["Binary",3462,7,0,["This",3462,7,0],".","Const",3462,8,0,"_values"],".","Ident",3462,16,0,"index"]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3464,6,0,"has"],"=","Func",3464,10,0,0,[["Ident",3464,11,0,"key"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Call",3465,5,0,["Ident",3465,5,0,"__indexOfIdentical"],0,["Binary",3465,26,0,["This",3465,26,0],".","Const",3465,27,0,"_keys"],["Ident",3465,33,0,"key"]],"!==","Const",1,1,0,-1],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3467,6,0,"set"],"=","Func",3467,10,0,0,[["Ident",3467,11,0,"key"],["Ident",3467,15,0,"value"]],["index","keys"],[],"BlockExpression",3468,1,0,["Binary",1,1,0,["Ident",3468,8,0,"keys"],"=","Binary",3468,15,0,["This",3468,15,0],".","Const",3468,17,0,"_keys"],["Binary",1,1,0,["Ident",3469,16,0,"index"],"=","Call",3469,24,0,["Ident",3469,24,0,"__indexOfIdentical"],0,["Ident",3469,46,0,"keys"],["Ident",3469,51,0,"key"]],["IfExpression",1,1,0,["Binary",1,1,0,["Ident",3470,7,0,"index"],"===","Const",1,1,0,-1],["BlockExpression",3471,1,0,["Binary",1,1,0,["Ident",3471,7,0,"index"],"=","Binary",3471,15,0,["Ident",3471,15,0,"keys"],".","Const",3471,21,0,"length"],["Binary",1,1,0,["Binary",3472,11,0,["Ident",3472,7,0,"keys"],".","Ident",3472,12,0,"index"],"=","Ident",3472,21,0,"key"]]],["Binary",1,1,0,["Binary",3473,13,0,["Binary",3473,5,0,["This",3473,5,0],".","Const",3473,6,0,"_values"],".","Ident",3473,14,0,"index"],"=","Ident",3473,23,0,"value"]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3475,6,0,"delete"],"=","Func",3475,13,0,0,[["Ident",3475,14,0,"key"]],["index","keys"],[],"BlockStatement",3476,1,0,0,["Binary",1,1,0,["Ident",3476,8,0,"keys"],"=","Binary",3476,15,0,["This",3476,15,0],".","Const",3476,17,0,"_keys"],["Binary",1,1,0,["Ident",3477,8,0,"index"],"=","Call",3477,16,0,["Ident",3477,16,0,"__indexOfIdentical"],0,["Ident",3477,38,0,"keys"],["Ident",3477,43,0,"key"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3478,7,0,"index"],"===","Const",1,1,0,-1],["Return",3479,7,0,"Const",3479,7,0,!1],"BlockStatement",3481,1,0,0,["Call",3481,7,0,["Binary",3481,7,0,["Ident",3481,7,0,"keys"],".","Const",3481,12,0,"splice"],0,["Ident",3481,19,0,"index"],["Const",3481,26,0,1]],["Return",3482,7,0,"Call",3482,7,0,["Binary",3482,7,0,["Binary",3482,7,0,["This",3482,7,0],".","Const",3482,8,0,"_values"],".","Const",3482,16,0,"splice"],0,["Ident",3482,23,0,"index"],["Const",3482,30,0,1]]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3484,6,0,"keys"],"=","Func",3484,11,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","key"],[],"BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_this"],"=","This",1,1,0],["Binary",3484,11,0,["Ident",3484,11,0,"_state"],"=","Const",3484,11,0,0],["Func",3484,11,0,["Ident",3484,11,0,"_close"],[],[],[],"Binary",3484,11,0,["Ident",3484,11,0,"_state"],"=","Const",3484,11,0,3],["Func",3484,11,0,["Ident",3484,11,0,"_step"],[["Ident",3484,11,0,"_received"]],[],[],"For",3484,11,0,0,0,["Const",3484,11,0,!0],0,"Switch",3484,11,0,0,["Ident",3484,11,0,"_state"],0,0,null,["Const",0,0,0,0],["BlockStatement",0,0,0,0,["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Binary",3485,15,0,["Ident",3485,15,0,"_this"],".","Const",3485,17,0,"_keys"]],["Binary",1,1,0,["Ident",1,1,0,"_i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"],["Unary",1,1,0,"++","Ident",3484,11,0,"_state"]],1,1,null,["Const",1,1,0,1],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3484,11,0,"_state"],"=","IfExpression",1,1,0,["Unary",1,1,0,"--post","Ident",1,1,0,"_i"],["Const",1,1,0,2],"Const",1,1,0,3],["Break",1,1,0]],1,1,null,["Const",1,1,0,2],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3485,8,0,"key"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",1,1,0,"_i"],["Binary",1,1,0,["Ident",3484,11,0,"_state"],"=","Const",1,1,0,1],["Return",1,1,0,"Obj",1,1,0,1,1,null,"done",["Const",1,1,0,!1],1,1,null,"value",["Ident",3486,12,0,"key"]]],3484,11,null,["Const",3484,11,0,3],["Return",3484,11,0,"Obj",3484,11,0,3484,11,null,"done",["Const",3484,11,0,!0],3484,11,null,"value",["Const",3484,11,0]],["Throw",3484,11,0,"Call",3484,11,0,["Ident",3484,11,0,"Error"],0,["Binary",3484,11,0,["Const",3484,11,0,"Unknown state: "],"+","Ident",3484,11,0,"_state"]]],["Func",3484,11,0,["Ident",3484,11,0,"_send"],[["Ident",3484,11,0,"_received"]],[],[],"TryCatch",3484,11,0,0,["Return",3484,11,0,"Call",3484,11,0,["Ident",3484,11,0,"_step"],0,["Ident",3484,11,0,"_received"]],["Ident",3484,11,0,"_e"],"BlockStatement",3484,11,0,0,["Call",3484,11,0,["Ident",3484,11,0,"_close"],0],["Throw",3484,11,0,"Ident",3484,11,0,"_e"]],["Return",3484,11,0,"Obj",3484,11,0,3484,11,null,"close",["Ident",3484,11,0,"_close"],3484,11,null,"iterator",["Func",3484,11,0,0,[],[],[],"Return",3484,11,0,"This",3484,11,0],3484,11,null,"next",["Func",3484,11,0,0,[],[],[],"Return",3484,11,0,"Call",3484,11,0,["Ident",3484,11,0,"_send"],0,["Const",3484,11,0]],3484,11,null,"send",["Ident",3484,11,0,"_send"],3484,11,null,"throw",["Func",3484,11,0,0,[["Ident",3484,11,0,"e"]],[],[],"Throw",3484,11,0,"Ident",3484,11,0,"e"]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3488,6,0,"values"],"=","Func",3488,13,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","value"],[],"BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_this"],"=","This",1,1,0],["Binary",3488,13,0,["Ident",3488,13,0,"_state"],"=","Const",3488,13,0,0],["Func",3488,13,0,["Ident",3488,13,0,"_close"],[],[],[],"Binary",3488,13,0,["Ident",3488,13,0,"_state"],"=","Const",3488,13,0,3],["Func",3488,13,0,["Ident",3488,13,0,"_step"],[["Ident",3488,13,0,"_received"]],[],[],"For",3488,13,0,0,0,["Const",3488,13,0,!0],0,"Switch",3488,13,0,0,["Ident",3488,13,0,"_state"],0,0,null,["Const",0,0,0,0],["BlockStatement",0,0,0,0,["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Binary",3489,17,0,["Ident",3489,17,0,"_this"],".","Const",3489,19,0,"_values"]],["Binary",1,1,0,["Ident",1,1,0,"_i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"],["Unary",1,1,0,"++","Ident",3488,13,0,"_state"]],1,1,null,["Const",1,1,0,1],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3488,13,0,"_state"],"=","IfExpression",1,1,0,["Unary",1,1,0,"--post","Ident",1,1,0,"_i"],["Const",1,1,0,2],"Const",1,1,0,3],["Break",1,1,0]],1,1,null,["Const",1,1,0,2],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3489,8,0,"value"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",1,1,0,"_i"],["Binary",1,1,0,["Ident",3488,13,0,"_state"],"=","Const",1,1,0,1],["Return",1,1,0,"Obj",1,1,0,1,1,null,"done",["Const",1,1,0,!1],1,1,null,"value",["Ident",3490,12,0,"value"]]],3488,13,null,["Const",3488,13,0,3],["Return",3488,13,0,"Obj",3488,13,0,3488,13,null,"done",["Const",3488,13,0,!0],3488,13,null,"value",["Const",3488,13,0]],["Throw",3488,13,0,"Call",3488,13,0,["Ident",3488,13,0,"Error"],0,["Binary",3488,13,0,["Const",3488,13,0,"Unknown state: "],"+","Ident",3488,13,0,"_state"]]],["Func",3488,13,0,["Ident",3488,13,0,"_send"],[["Ident",3488,13,0,"_received"]],[],[],"TryCatch",3488,13,0,0,["Return",3488,13,0,"Call",3488,13,0,["Ident",3488,13,0,"_step"],0,["Ident",3488,13,0,"_received"]],["Ident",3488,13,0,"_e"],"BlockStatement",3488,13,0,0,["Call",3488,13,0,["Ident",3488,13,0,"_close"],0],["Throw",3488,13,0,"Ident",3488,13,0,"_e"]],["Return",3488,13,0,"Obj",3488,13,0,3488,13,null,"close",["Ident",3488,13,0,"_close"],3488,13,null,"iterator",["Func",3488,13,0,0,[],[],[],"Return",3488,13,0,"This",3488,13,0],3488,13,null,"next",["Func",3488,13,0,0,[],[],[],"Return",3488,13,0,"Call",3488,13,0,["Ident",3488,13,0,"_send"],0,["Const",3488,13,0]],3488,13,null,"send",["Ident",3488,13,0,"_send"],3488,13,null,"throw",["Func",3488,13,0,0,[["Ident",3488,13,0,"e"]],[],[],"Throw",3488,13,0,"Ident",3488,13,0,"e"]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3492,6,0,"items"],"=","Func",3492,12,0,0,[],["_arr","_e","_send","_state","_step","_this","i","key","values"],[],"BlockStatement",3493,1,0,0,["Binary",3493,1,0,["Ident",3493,1,0,"_this"],"=","This",3493,1,0],["Binary",3492,12,0,["Ident",3492,12,0,"_state"],"=","Const",3492,12,0,0],["Func",3492,12,0,["Ident",3492,12,0,"_close"],[],[],[],"Binary",3492,12,0,["Ident",3492,12,0,"_state"],"=","Const",3492,12,0,3],["Func",3492,12,0,["Ident",3492,12,0,"_step"],[["Ident",3492,12,0,"_received"]],[],[],"For",3492,12,0,0,0,["Const",3492,12,0,!0],0,"Switch",3492,12,0,0,["Ident",3492,12,0,"_state"],1,1,null,["Const",1,1,0,0],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3493,8,0,"values"],"=","Binary",3493,17,0,["Ident",3493,17,0,"_this"],".","Const",3493,19,0,"_values"],["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Binary",3494,18,0,["Ident",3494,18,0,"_this"],".","Const",3494,20,0,"_keys"]],["Binary",1,1,0,["Ident",3494,13,0,"i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"],["Unary",1,1,0,"++","Ident",3492,12,0,"_state"]],1,1,null,["Const",1,1,0,1],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3492,12,0,"_state"],"=","IfExpression",1,1,0,["Unary",1,1,0,"--post","Ident",3494,13,0,"i"],["Const",1,1,0,2],"Const",1,1,0,3],["Break",1,1,0]],1,1,null,["Const",1,1,0,2],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3494,8,0,"key"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",3494,13,0,"i"],["Binary",1,1,0,["Ident",3492,12,0,"_state"],"=","Const",1,1,0,1],["Return",1,1,0,"Obj",1,1,0,1,1,null,"done",["Const",1,1,0,!1],1,1,null,"value",["Arr",3495,12,0,["Ident",3495,14,0,"key"],["Binary",3495,18,0,["Ident",3495,18,0,"values"],".","Ident",3495,26,0,"i"]]]],3492,12,null,["Const",3492,12,0,3],["Return",3492,12,0,"Obj",3492,12,0,3492,12,null,"done",["Const",3492,12,0,!0],3492,12,null,"value",["Const",3492,12,0]],["Throw",3492,12,0,"Call",3492,12,0,["Ident",3492,12,0,"Error"],0,["Binary",3492,12,0,["Const",3492,12,0,"Unknown state: "],"+","Ident",3492,12,0,"_state"]]],["Func",3492,12,0,["Ident",3492,12,0,"_send"],[["Ident",3492,12,0,"_received"]],[],[],"TryCatch",3492,12,0,0,["Return",3492,12,0,"Call",3492,12,0,["Ident",3492,12,0,"_step"],0,["Ident",3492,12,0,"_received"]],["Ident",3492,12,0,"_e"],"BlockStatement",3492,12,0,0,["Call",3492,12,0,["Ident",3492,12,0,"_close"],0],["Throw",3492,12,0,"Ident",3492,12,0,"_e"]],["Return",3492,12,0,"Obj",3492,12,0,3492,12,null,"close",["Ident",3492,12,0,"_close"],3492,12,null,"iterator",["Func",3492,12,0,0,[],[],[],"Return",3492,12,0,"This",3492,12,0],3492,12,null,"next",["Func",3492,12,0,0,[],[],[],"Return",3492,12,0,"Call",3492,12,0,["Ident",3492,12,0,"_send"],0,["Const",3492,12,0]],3492,12,null,"send",["Ident",3492,12,0,"_send"],3492,12,null,"throw",["Func",3492,12,0,0,[["Ident",3492,12,0,"e"]],[],[],"Throw",3492,12,0,"Ident",3492,12,0,"e"]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Map_prototype"],".","Const",3496,6,0,"iterator"],"=","Binary",3496,17,0,["Binary",3496,17,0,["Ident",3496,17,0,"Map"],".","Const",3496,17,0,"prototype"],".","Const",3496,23,0,"items"],["Return",1,1,0,"Ident",3449,74,0,"Map"]],0],type:"any",dependencies:["__create","__indexOfIdentical","__iter","__toArray","GLOBAL","Map"]},Set:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3498,36,0,["Ident",3498,36,0,"GLOBAL"],".","Const",3498,44,0,"Set"],"===","Const",128,25,0,"function"],["Binary",3498,52,0,["Ident",3498,52,0,"GLOBAL"],".","Const",3498,60,0,"Set"],"Binary",1,1,0,["Ident",3498,74,0,"Set"],"=","Call",2944,1,0,["Func",2944,1,0,0,[],["_Set_prototype"],[],"BlockStatement",2944,1,0,0,["Func",1,1,0,["Ident",3498,74,0,"Set"],[["Ident",3499,19,0,"iterable"]],["_item","_iter","_this","item"],[],"BlockStatement",3500,1,0,0,["Binary",3500,1,0,["Ident",3500,1,0,"_this"],"=","IfExpression",1,1,0,["Binary",1,1,0,["Eval",2867,21,0,["Const",2867,27,0,"this"]],"instanceof","Ident",3498,74,0,"Set"],["Eval",2867,56,0,["Const",2867,62,0,"this"]],"Call",94904,94927,0,["Ident",94904,94927,0,"__create"],0,["Ident",1,1,0,"_Set_prototype"]],["Binary",1,1,0,["Binary",3500,5,0,["Ident",3500,5,0,"_this"],".","Const",3500,6,0,"_items"],"=","Arr",3500,15,0],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3501,7,0,"iterable"],"!=","Const",104,19,0,null],["TryFinally",1,1,0,0,["For",1,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_iter"],"=","Call",2086,30,0,["Ident",2086,30,0,"__iter"],0,["Ident",3502,20,0,"iterable"]],["Const",2159,19,0,!0],0,"BlockStatement",2126,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_item"],"=","Call",2096,18,0,["Binary",2096,18,0,["Ident",1,1,0,"_iter"],".","Const",2096,29,0,"next"],0],["IfStatement",1,1,0,0,["Binary",2097,9,0,["Ident",1,1,0,"_item"],".","Const",2097,16,0,"done"],["Break",1,1,0]],["Binary",1,1,0,["Ident",3502,10,0,"item"],"=","Binary",2099,19,0,["Ident",1,1,0,"_item"],".","Const",2099,26,0,"value"],["Call",3503,9,0,["Binary",3503,9,0,["Ident",3503,9,0,"_this"],".","Const",3503,10,0,"add"],0,["Ident",3503,14,0,"item"]]],"TryCatch",1,1,0,0,["Call",2167,9,0,["Binary",2167,9,0,["Ident",1,1,0,"_iter"],".","Const",2167,19,0,"close"],0],["Ident",1,1,0,"_e"],"Const",2169,9,0]],["Return",3500,1,0,"Ident",3500,1,0,"_this"]],["Binary",1,1,0,["Ident",1,1,0,"_Set_prototype"],"=","Binary",2798,37,0,["Ident",3498,74,0,"Set"],".","Const",2798,44,0,"prototype"],["Binary",1,1,0,["Binary",2810,27,0,["Ident",3498,74,0,"Set"],".","Const",2810,28,0,"displayName"],"=","Const",1,1,0,"Set"],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Set_prototype"],".","Const",3505,6,0,"has"],"=","Func",3505,10,0,0,[["Ident",3505,11,0,"item"]],[],[],"Return",1,1,0,"Binary",1,1,0,["Call",3506,5,0,["Ident",3506,5,0,"__indexOfIdentical"],0,["Binary",3506,26,0,["This",3506,26,0],".","Const",3506,27,0,"_items"],["Ident",3506,34,0,"item"]],"!==","Const",1,1,0,-1],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Set_prototype"],".","Const",3507,6,0,"add"],"=","Func",3507,10,0,0,[["Ident",3507,11,0,"item"]],["items"],[],"BlockExpression",3508,1,0,["Binary",1,1,0,["Ident",3508,8,0,"items"],"=","Binary",3508,16,0,["This",3508,16,0],".","Const",3508,18,0,"_items"],["IfExpression",1,1,0,["Binary",1,1,0,["Call",3509,7,0,["Ident",3509,7,0,"__indexOfIdentical"],0,["Ident",3509,29,0,"items"],["Ident",3509,35,0,"item"]],"===","Const",1,1,0,-1],["Call",3510,7,0,["Binary",3510,7,0,["Ident",3510,7,0,"items"],".","Const",3510,13,0,"push"],0,["Ident",3510,18,0,"item"]]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Set_prototype"],".","Const",3511,6,0,"delete"],"=","Func",3511,13,0,0,[["Ident",3511,14,0,"item"]],["index","items"],[],"BlockExpression",3512,1,0,["Binary",1,1,0,["Ident",3512,8,0,"items"],"=","Binary",3512,16,0,["This",3512,16,0],".","Const",3512,18,0,"_items"],["Binary",1,1,0,["Ident",3513,8,0,"index"],"=","Call",3513,16,0,["Ident",3513,16,0,"__indexOfIdentical"],0,["Ident",3513,38,0,"items"],["Ident",3513,44,0,"item"]],["IfExpression",1,1,0,["Binary",1,1,0,["Ident",3514,7,0,"index"],"!==","Const",1,1,0,-1],["BlockExpression",3515,1,0,["Call",3515,7,0,["Binary",3515,7,0,["Ident",3515,7,0,"items"],".","Const",3515,13,0,"splice"],0,["Ident",3515,20,0,"index"],["Const",3515,27,0,1]],["Const",3516,7,0,!0]],"Const",3518,7,0,!1]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Set_prototype"],".","Const",3519,6,0,"values"],"=","Func",3519,13,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","item"],[],"BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",1,1,0,"_this"],"=","This",1,1,0],["Binary",3519,13,0,["Ident",3519,13,0,"_state"],"=","Const",3519,13,0,0],["Func",3519,13,0,["Ident",3519,13,0,"_close"],[],[],[],"Binary",3519,13,0,["Ident",3519,13,0,"_state"],"=","Const",3519,13,0,3],["Func",3519,13,0,["Ident",3519,13,0,"_step"],[["Ident",3519,13,0,"_received"]],[],[],"For",3519,13,0,0,0,["Const",3519,13,0,!0],0,"Switch",3519,13,0,0,["Ident",3519,13,0,"_state"],0,0,null,["Const",0,0,0,0],["BlockStatement",0,0,0,0,["Binary",1,1,0,["Ident",1,1,0,"_arr"],"=","Call",1292,22,0,["Ident",1292,22,0,"__toArray"],0,["Binary",3520,16,0,["Ident",3520,16,0,"_this"],".","Const",3520,18,0,"_items"]],["Binary",1,1,0,["Ident",1,1,0,"_i"],"=","Binary",1331,49,0,["Ident",1,1,0,"_arr"],".","Const",1331,56,0,"length"],["Unary",1,1,0,"++","Ident",3519,13,0,"_state"]],1,1,null,["Const",1,1,0,1],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3519,13,0,"_state"],"=","IfExpression",1,1,0,["Unary",1,1,0,"--post","Ident",1,1,0,"_i"],["Const",1,1,0,2],"Const",1,1,0,3],["Break",1,1,0]],1,1,null,["Const",1,1,0,2],["BlockStatement",1,1,0,0,["Binary",1,1,0,["Ident",3520,8,0,"item"],"=","Binary",1295,75,0,["Ident",1,1,0,"_arr"],".","Ident",1,1,0,"_i"],["Binary",1,1,0,["Ident",3519,13,0,"_state"],"=","Const",1,1,0,1],["Return",1,1,0,"Obj",1,1,0,1,1,null,"done",["Const",1,1,0,!1],1,1,null,"value",["Ident",3521,12,0,"item"]]],3519,13,null,["Const",3519,13,0,3],["Return",3519,13,0,"Obj",3519,13,0,3519,13,null,"done",["Const",3519,13,0,!0],3519,13,null,"value",["Const",3519,13,0]],["Throw",3519,13,0,"Call",3519,13,0,["Ident",3519,13,0,"Error"],0,["Binary",3519,13,0,["Const",3519,13,0,"Unknown state: "],"+","Ident",3519,13,0,"_state"]]],["Func",3519,13,0,["Ident",3519,13,0,"_send"],[["Ident",3519,13,0,"_received"]],[],[],"TryCatch",3519,13,0,0,["Return",3519,13,0,"Call",3519,13,0,["Ident",3519,13,0,"_step"],0,["Ident",3519,13,0,"_received"]],["Ident",3519,13,0,"_e"],"BlockStatement",3519,13,0,0,["Call",3519,13,0,["Ident",3519,13,0,"_close"],0],["Throw",3519,13,0,"Ident",3519,13,0,"_e"]],["Return",3519,13,0,"Obj",3519,13,0,3519,13,null,"close",["Ident",3519,13,0,"_close"],3519,13,null,"iterator",["Func",3519,13,0,0,[],[],[],"Return",3519,13,0,"This",3519,13,0],3519,13,null,"next",["Func",3519,13,0,0,[],[],[],"Return",3519,13,0,"Call",3519,13,0,["Ident",3519,13,0,"_send"],0,["Const",3519,13,0]],3519,13,null,"send",["Ident",3519,13,0,"_send"],3519,13,null,"throw",["Func",3519,13,0,0,[["Ident",3519,13,0,"e"]],[],[],"Throw",3519,13,0,"Ident",3519,13,0,"e"]]],["Binary",1,1,0,["Binary",2933,36,0,["Ident",1,1,0,"_Set_prototype"],".","Const",3522,6,0,"iterator"],"=","Binary",3522,17,0,["Binary",3522,17,0,["Ident",3522,17,0,"Set"],".","Const",3522,17,0,"prototype"],".","Const",3522,23,0,"values"],["Return",1,1,0,"Ident",3498,74,0,"Set"]],0],type:"any",dependencies:["__create","__indexOfIdentical","__iter","__toArray","GLOBAL","Set"]},setImmediate:{helper:["IfExpression",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3587,46,0,["Ident",3587,46,0,"GLOBAL"],".","Const",3587,54,0,"setImmediate"],"===","Const",128,25,0,"function"],["Binary",3588,3,0,["Ident",3588,3,0,"GLOBAL"],".","Const",3588,10,0,"setImmediate"],"IfExpression",1,1,0,["Binary",1,1,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3589,21,0,"process"],"!==","Const",108,27,0,"undefined"],"&&","Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3589,46,0,["Ident",3589,46,0,"process"],".","Const",3589,55,0,"nextTick"],"===","Const",128,25,0,"function"],["Binary",3590,3,0,["Ident",3590,3,0,"process"],".","Const",3590,11,0,"nextTick"],"Func",1852,1,0,0,[["Ident",3592,5,0,"func"]],[],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",3592,5,0,"func"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected func to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3592,5,0,"func"]]]],["Return",3592,19,0,"Call",3592,19,0,["Ident",3592,19,0,"setTimeout"],0,["Ident",3592,32,0,"func"],["Const",3592,38,0,0]]],type:"any",dependencies:["__typeof","GLOBAL","setImmediate"]},__defer:{helper:["Func",3594,26,0,0,[],["deferred","isError","value"],[],"BlockStatement",3595,1,0,0,["Binary",1,1,0,["Ident",3595,14,0,"isError"],"=","Const",3595,25,0,!1],["Binary",1,1,0,["Ident",3596,14,0,"value"],"=","Const",3596,22,0,null],["Binary",1,1,0,["Ident",3598,14,0,"deferred"],"=","Arr",3598,39,0],["Func",1,1,0,["Ident",3599,6,0,"complete"],[["Ident",3599,16,0,"newIsError"],["Ident",3599,29,0,"newValue"]],["funcs"],[],"IfExpression",1,1,0,["Ident",3600,7,0,"deferred"],["BlockExpression",3601,1,0,["Binary",1,1,0,["Ident",3601,10,0,"funcs"],"=","Ident",3601,27,0,"deferred"],["Binary",1,1,0,["Ident",3602,7,0,"deferred"],"=","Const",3602,18,0,null],["Binary",1,1,0,["Ident",3603,7,0,"isError"],"=","Ident",3603,18,0,"newIsError"],["Binary",1,1,0,["Ident",3604,7,0,"value"],"=","Ident",3604,15,0,"newValue"],["IfExpression",1,1,0,["Binary",3605,9,0,["Ident",3605,9,0,"funcs"],".","Const",3605,16,0,"length"],["Call",3606,9,0,["Ident",3606,9,0,"setImmediate"],0,["Func",3606,24,0,0,[],["_end","i"],[],"For",1,1,0,0,["BlockExpression",0,0,0,["Binary",1,1,0,["Ident",3607,14,0,"i"],"=","Const",3607,20,0,0],["Binary",1,1,0,["Ident",1,1,0,"_end"],"=","Binary",3607,25,0,["Ident",3607,25,0,"funcs"],".","Const",3607,32,0,"length"]],["Binary",1,1,0,["Ident",3607,14,0,"i"],"<","Ident",1,1,0,"_end"],["Unary",1,1,0,"++","Ident",3607,14,0,"i"],"Call",3608,13,0,["Binary",3608,13,0,["Ident",3608,13,0,"funcs"],".","Ident",3608,19,0,"i"],0]]]]],["Return",116929,117651,0,"Obj",116929,117651,0,3611,5,null,"promise",["Obj",116943,117553,0,3612,7,null,"then",["Func",3612,14,0,0,[["Ident",3612,15,0,"onFulfilled"],["Ident",3612,28,0,"onRejected"]],["_ref","fulfill","promise","reject"],[],"BlockStatement",3613,1,0,0,["Binary",1,1,0,["Ident",3613,14,0,"promise"],"=","Binary",231,63,0,["Binary",1,1,0,["Ident",1,1,0,"_ref"],"=","Call",3613,41,0,["Ident",3613,41,0,"__defer"],0],".","Const",0,0,0,"promise"],["Binary",1,1,0,["Ident",3613,22,0,"fulfill"],"=","Binary",231,63,0,["Ident",1,1,0,"_ref"],".","Const",0,0,0,"fulfill"],["Binary",1,1,0,["Ident",3613,31,0,"reject"],"=","Binary",231,63,0,["Ident",1,1,0,"_ref"],".","Const",0,0,0,"reject"],["Func",1,1,0,["Ident",3614,12,0,"step"],[],["f","result"],[],"TryCatch",1,1,0,0,["BlockStatement",3615,1,0,0,["IfStatement",1,1,0,0,["Ident",3615,21,0,"isError"],["Binary",1,1,0,["Ident",3615,14,0,"f"],"=","Ident",3615,35,0,"onRejected"],"Binary",1,1,0,["Ident",3615,14,0,"f"],"=","Ident",3615,52,0,"onFulfilled"],["IfStatement",1,1,0,0,["Binary",1,1,0,["Unary",1,1,0,"typeof","Ident",3616,26,0,"f"],"===","Const",128,25,0,"function"],["BlockStatement",3617,1,0,0,["Binary",1,1,0,["Ident",3617,16,0,"result"],"=","Call",3617,25,0,["Ident",3617,25,0,"f"],0,["Ident",3617,28,0,"value"]],["IfStatement",1,1,0,0,["Binary",1,1,0,["Ident",3618,15,0,"result"],"&&","Binary",1,1,0,["Unary",1,1,0,"typeof","Binary",3618,39,0,["Ident",3618,39,0,"result"],".","Const",3618,47,0,"then"],"===","Const",128,25,0,"function"],["Call",3619,15,0,["Binary",3619,15,0,["Ident",3619,15,0,"result"],".","Const",3619,22,0,"then"],0,["Ident",3619,27,0,"fulfill"],["Ident",3619,35,0,"reject"]],"Call",3621,15,0,["Ident",3621,15,0,"fulfill"],0,["Ident",3621,23,0,"result"]]],"Call",3623,13,0,["IfExpression",1,1,0,["Ident",3623,16,0,"isError"],["Ident",3623,30,0,"reject"],"Ident",3623,42,0,"fulfill"],0,["Ident",3623,52,0,"value"]]],["Ident",3624,14,0,"e"],"Call",3625,11,0,["Ident",3625,11,0,"reject"],0,["Ident",3625,18,0,"e"]],["IfStatement",1,1,0,0,["Ident",3627,11,0,"deferred"],["Call",3628,11,0,["Binary",3628,11,0,["Ident",3628,11,0,"deferred"],".","Const",3628,20,0,"push"],0,["Ident",3628,25,0,"step"]],"Call",3630,11,0,["Ident",3630,11,0,"setImmediate"],0,["Ident",3630,25,0,"step"]],["Return",3631,9,0,"Ident",3631,9,0,"promise"]]],3633,5,null,"fulfill",["Func",3633,15,0,0,[["Ident",3633,16,0,"value"]],[],[],"Call",3633,26,0,["Ident",3633,26,0,"complete"],0,["Const",3633,36,0,!1],["Ident",3633,42,0,"value"]],3634,5,null,"reject",["Func",3634,14,0,0,[["Ident",3634,15,0,"value"]],[],[],"Call",3634,25,0,["Ident",3634,25,0,"complete"],0,["Const",3634,35,0,!0],["Ident",3634,40,0,"value"]]]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{fulfill:{type:"generic",base:"functionBase",args:["undefined"]},promise:{type:"object",pairs:{then:"function"}},reject:{type:"generic",base:"functionBase",args:["undefined"]}}}]},dependencies:["__defer","setImmediate"]},__generatorToPromiser:{helper:["Func",1852,1,0,0,[["Ident",3637,43,0,"factory"]],[],[],"BlockStatement",1852,1,0,0,["IfStatement",1,1,0,0,["Binary",613,18,0,["Unary",1,1,0,"typeof","Ident",3637,43,0,"factory"],"!==","Const",128,25,0,"function"],["Throw",1,1,0,"Call",1637,18,0,["Ident",1637,18,0,"TypeError"],0,["Binary",1,1,0,["Const",1,1,0,"Expected factory to be a Function, got "],"+","Call",477,49,0,["Ident",477,49,0,"__typeof"],0,["Ident",3637,43,0,"factory"]]]],["Return",3637,62,0,"Func",3637,62,0,0,[],["generator"],[],"BlockStatement",3638,1,0,0,["Binary",1,1,0,["Ident",3638,6,0,"generator"],"=","Call",3638,18,0,["Binary",3638,18,0,["Ident",3638,18,0,"factory"],".","Const",3638,18,0,"apply"],0,["This",3638,28,0],["Arguments",3638,37,0]],["Func",1,1,0,["Ident",3639,6,0,"continuer"],[["Ident",3639,17,0,"verb"],["Ident",3639,22,0,"arg"]],["defer","item"],[],"BlockStatement",3640,1,0,0,["TryCatch",1,1,0,0,["Binary",1,1,0,["Ident",3641,10,0,"item"],"=","Call",3641,17,0,["Binary",3641,17,0,["Ident",3641,17,0,"generator"],".","Ident",3641,28,0,"verb"],0,["Ident",3641,34,0,"arg"]],["Ident",3642,10,0,"e"],"BlockStatement",3643,1,0,0,["Binary",1,1,0,["Ident",3643,10,0,"defer"],"=","Call",3643,18,0,["Ident",3643,18,0,"__defer"],0],["Call",3644,7,0,["Binary",3644,7,0,["Ident",3644,7,0,"defer"],".","Const",3644,13,0,"reject"],0,["Ident",3644,20,0,"e"]],["Return",1,1,0,"Binary",3645,13,0,["Ident",3645,13,0,"defer"],".","Const",3645,20,0,"promise"]],["IfStatement",1,1,0,0,["Binary",3646,7,0,["Ident",3646,7,0,"item"],".","Const",3646,13,0,"done"],["Return",3647,7,0,"Binary",3647,7,0,["Ident",3647,7,0,"item"],".","Const",3647,12,0,"value"],"Return",3649,7,0,"Call",3649,7,0,["Binary",3649,7,0,["Binary",3649,7,0,["Ident",3649,7,0,"item"],".","Const",3649,12,0,"value"],".","Const",3649,18,0,"then"],0,["Ident",3649,23,0,"callback"],["Ident",3649,32,0,"errback"]]],["Func",1,1,0,["Ident",3650,6,0,"callback"],[["Ident",3650,16,0,"value"]],[],[],"Return",3650,25,0,"Call",3650,25,0,["Ident",3650,25,0,"continuer"],0,["Const",3650,37,0,"send"],["Ident",3650,42,0,"value"]],["Func",1,1,0,["Ident",3651,6,0,"errback"],[["Ident",3651,15,0,"value"]],[],[],"Return",3651,24,0,"Call",3651,24,0,["Ident",3651,24,0,"continuer"],0,["Const",3651,36,0,"throw"],["Ident",3651,42,0,"value"]],["Return",3652,3,0,"Call",3652,3,0,["Ident",3652,3,0,"callback"],0,["Const",3652,12,0]]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__defer","__generatorToPromiser","__toArray","__typeof"]},__toPromise:{helper:["Func",3672,31,0,0,[["Ident",3672,32,0,"func"],["Ident",3672,37,0,"context"],["Ident",3672,46,0,"args"]],["d"],[],"BlockStatement",3673,1,0,0,["Binary",1,1,0,["Ident",3673,6,0,"d"],"=","Call",3673,10,0,["Ident",3673,10,0,"__defer"],0],["Call",3674,3,0,["Binary",3674,3,0,["Ident",3674,3,0,"func"],".","Const",3674,3,0,"apply"],0,["Ident",3674,9,0,"context"],["Call",3674,3,0,["Binary",3674,3,0,["Call",3674,21,0,["Ident",3674,21,0,"__toArray"],0,["Ident",3674,21,0,"args"]],".","Const",3674,3,0,"concat"],0,["Arr",3674,28,0,["Func",3674,28,0,0,[["Ident",3674,29,0,"err"],["Ident",3674,33,0,"value"]],[],[],"IfExpression",1,1,0,["Binary",1,1,0,["Ident",3675,7,0,"err"],"!=","Const",104,19,0,null],["Call",3676,7,0,["Binary",3676,7,0,["Ident",3676,7,0,"d"],".","Const",3676,9,0,"reject"],0,["Ident",3676,16,0,"err"]],"Call",3678,7,0,["Binary",3678,7,0,["Ident",3678,7,0,"d"],".","Const",3678,9,0,"fulfill"],0,["Ident",3678,17,0,"value"]]]]],["Return",3679,3,0,"Binary",3679,3,0,["Ident",3679,3,0,"d"],".","Const",3679,5,0,"promise"]],type:"function",dependencies:["__defer","__toArray","__toPromise"]}},assignOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.assign(left,"=",right);};}.call(this));',operators:":=",options:{type:"right"},id:30},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){if(_this.position==="expression"){return __node("MacroAccess",286,11,1,286,{left:__wrap(setLeft,78),inverted:false,op:"and",right:__node("MacroAccess",286,27,30,286,{left:__wrap(left,78),op:":=",right:__wrap(right,78)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",288,10,17,288,{macroName:"if",macroData:{test:__wrap(setLeft,78),body:__node("MacroAccess",289,9,30,289,{left:__wrap(left,78),op:":=",right:__wrap(right,78)},"statement",false,false),elseIfs:[],elseBody:__wrap(left,78)}},"statement",false,false);}});};}.call(this));',operators:"and=",id:43},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){if(_this.position==="expression"){return __node("MacroAccess",296,11,2,296,{left:__wrap(setLeft,80),inverted:false,op:"or",right:__node("MacroAccess",296,26,30,296,{left:__wrap(left,80),op:":=",right:__wrap(right,80)},"expression",false,false)},"expression",false,false);}else{return __node("MacroAccess",298,10,17,298,{macroName:"if",macroData:{test:__node("MacroAccess",298,13,3,298,{op:"not",node:__wrap(setLeft,80)},"statement",false,false),body:__node("MacroAccess",299,9,30,299,{left:__wrap(left,80),op:":=",right:__wrap(right,80)},"statement",false,false),elseIfs:[],elseBody:__wrap(left,80)}},"statement",false,false);}});};}.call(this));',operators:"or=",id:44},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~*="){return _this.assign(left,"*=",n);}else if(op==="~/="){return _this.assign(left,"/=",n);}else{return _this.assign(left,"%=",n);}},true);}else if(op==="~*="){return this.assign(left,"*=",right);}else if(op==="~/="){return this.assign(left,"/=",right);}else{return this.assign(left,"%=",right);}};}.call(this));',operators:["~*=","~/=","~%="],options:{type:"number"},id:46},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",333,9,30,333,{left:__wrap(setLeft,85),op:":=",right:__node("MacroAccess",333,22,45,333,{left:__wrap(left,85),inverted:false,op:"~\\\\",right:__wrap(right,85)},"expression",false,false)},"expression",false,false);});};}.call(this));',operators:"~\\=",options:{type:"number"},id:47},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",387,9,30,387,{left:__wrap(setLeft,97),op:":=",right:__node("MacroAccess",387,22,50,387,{left:__wrap(left,97),inverted:false,op:"~^",right:__wrap(right,97)},"expression",false,false)},"expression",false,false);});};}.call(this));',operators:"~^=",options:{type:"number"},id:51},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right,value;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===1){return this.unary("++",left);}else if(value===-1){return this.unary("--",left);}else if(typeof value==="number"&&!this.isType(left,"numeric")){return this.assign(left,"-=",this["const"](-value));}}if(this.isType(left,"numeric")){if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(!_this.isType(n,"numeric")){n=__node("MacroAccess",403,20,48,403,{op:"~+",node:__wrap(n,100)},"expression",false,false);}return _this.assign(left,"+=",n);},true);}else{if(!this.isType(right,"numeric")){right=__node("MacroAccess",407,22,48,407,{op:"~+",node:__wrap(right,98)},"expression",false,false);}return this.assign(left,"+=",right);}}else if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"-=",__node("MacroAccess",411,72,48,411,{op:"~-",node:__wrap(n,101)},"expression",false,false));},true);}else{return this.assign(left,"-=",__node("MacroAccess",413,31,48,413,{op:"~-",node:__wrap(right,98)},"expression",false,false));}};}.call(this));',operators:"~+=",options:{type:"number"},id:52},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right,value;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===1){return this.unary("--",left);}else if(value===-1){return this.unary("++",left);}}if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"-=",n);},true);}else{return this.assign(left,"-=",right);}};}.call(this));',operators:"~-=",options:{type:"number"},id:53},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~bitlshift="){return _this.assign(left,"<<=",n);}else if(op==="~bitrshift="){return _this.assign(left,">>=",n);}else{return _this.assign(left,">>>=",n);}},true);}else if(op==="~bitlshift="){return this.assign(left,"<<=",right);}else if(op==="~bitrshift="){return this.assign(left,">>=",right);}else{return this.assign(left,">>>=",right);}};}.call(this));',operators:["~bitlshift=","~bitrshift=","~biturshift="],options:{type:"number"},id:55},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(_this.hasType(left,"numeric")&&_this.hasType(n,"numeric")){n=__node("MacroAccess",456,18,29,456,{left:__node("Const",456,19,""),inverted:false,op:"~&",right:__node("Ident",456,24,"n")},"expression",false,false);}return _this.assign(left,"+=",n);},true);}else{if(this.hasType(left,"numeric")&&this.hasType(right,"numeric")){right=__node("MacroAccess",460,20,29,460,{left:__node("Const",460,21,""),inverted:false,op:"~&",right:__node("Ident",460,26,"right")},"expression",false,false);}return this.assign(left,"+=",right);}};}.call(this));',operators:"~&=",options:{type:"string"},id:56},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",520,9,30,520,{left:__wrap(setLeft,123),op:":=",right:__node("MacroAccess",520,22,60,520,{left:__wrap(left,123),inverted:false,op:"^",right:__wrap(right,123)},"expression",false,false)},"expression",false,false);});};}.call(this));',operators:"^=",options:{type:"number"},id:61},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",551,9,30,551,{left:__wrap(setLeft,129),op:":=",right:__node("MacroAccess",551,22,62,551,{left:__wrap(left,129),inverted:false,op:"\\\\",right:__wrap(right,129)},"expression",false,false)},"expression",false,false);});};}.call(this));',operators:"\\=",options:{type:"number"},id:66},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"string")){return __node("MacroAccess",568,9,56,568,{left:__wrap(left,131),op:"~&=",right:__node("MacroAccess",568,19,67,568,{left:__node("Const",568,20,""),inverted:false,op:"&",right:__wrap(right,131)},"expression",false,false)},"expression",false,false);}else{return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",571,11,30,571,{left:__wrap(setLeft,132),op:":=",right:__node("MacroAccess",571,24,67,571,{left:__wrap(left,132),inverted:false,op:"&",right:__wrap(right,132)},"expression",false,false)},"expression",false,false);});}};}.call(this));',operators:"&=",options:{type:"string"},id:68},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",749,11,17,749,{macroName:"if",macroData:{test:__node("MacroAccess",749,14,10,749,{left:__wrap(setLeft,170),inverted:false,op:"~>",right:__wrap(setRight,170)},"expression",false,false),body:__node("MacroAccess",750,9,30,750,{left:__wrap(left,170),op:":=",right:__wrap(right,170)},"statement",false,false),elseIfs:[],elseBody:__wrap(left,170)}},"expression",false,false);});});};}.call(this));',operators:"~min=",id:84},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",757,11,17,757,{macroName:"if",macroData:{test:__node("MacroAccess",757,14,9,757,{left:__wrap(setLeft,173),inverted:false,op:"~<",right:__wrap(setRight,173)},"expression",false,false),body:__node("MacroAccess",758,9,30,758,{left:__wrap(left,173),op:":=",right:__wrap(right,173)},"statement",false,false),elseIfs:[],elseBody:__wrap(left,173)}},"expression",false,false);});});};}.call(this));',operators:"~max=",id:85},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",765,11,17,765,{macroName:"if",macroData:{test:__node("MacroAccess",765,14,77,765,{left:__wrap(setLeft,176),inverted:false,op:">",right:__wrap(setRight,176)},"expression",false,false),body:__node("MacroAccess",766,9,30,766,{left:__wrap(left,176),op:":=",right:__wrap(right,176)},"statement",false,false),elseIfs:[],elseBody:__wrap(left,176)}},"expression",false,false);});});};}.call(this));',operators:"min=",id:86},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",773,11,17,773,{macroName:"if",macroData:{test:__node("MacroAccess",773,14,76,773,{left:__wrap(setLeft,179),inverted:false,op:"<",right:__wrap(setRight,179)},"expression",false,false),body:__node("MacroAccess",774,9,30,774,{left:__wrap(left,179),op:":=",right:__wrap(right,179)},"statement",false,false),elseIfs:[],elseBody:__wrap(left,179)}},"expression",false,false);});});};}.call(this));',operators:"max=",id:87},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",780,9,30,780,{left:__wrap(setLeft,181),op:":=",right:__node("MacroAccess",780,22,82,780,{left:__wrap(left,181),inverted:false,op:"xor",right:__wrap(right,181)},"expression",false,false)},"expression",false,false);});};}.call(this));',operators:"xor=",id:88},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){if(_this.position==="expression"){return __node("MacroAccess",786,13,16,786,{macroName:"if",macroData:{test:__node("MacroAccess",786,16,20,786,{op:"?",node:__wrap(setLeft,184)},"expression",false,false),body:__wrap(leftValue,184),elseIfs:[],elseBody:__node("MacroAccess",786,51,30,786,{left:__wrap(left,184),op:":=",right:__wrap(right,184)},"expression",false,false)}},"expression",false,false);}else{return __node("MacroAccess",788,12,17,788,{macroName:"if",macroData:{test:__node("MacroAccess",788,15,3,788,{op:"not",node:__node("MacroAccess",788,19,20,788,{op:"?",node:__wrap(setLeft,184)},"statement",false,false)},"statement",false,false),body:__node("MacroAccess",789,11,30,789,{left:__wrap(left,184),op:":=",right:__wrap(right,184)},"statement",false,false),elseIfs:[],elseBody:__wrap(leftValue,184)}},"statement",false,false);}});});};}.call(this));',operators:"?=",id:89},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~bitand="){return _this.assign(left,"&=",n);}else if(op==="~bitor="){return _this.assign(left,"|=",n);}else{return _this.assign(left,"^=",n);}},true);}else if(op==="~bitand="){return this.assign(left,"&=",right);}else if(op==="~bitor="){return this.assign(left,"|=",right);}else{return this.assign(left,"^=",right);}};}.call(this));',operators:["~bitand=","~bitor=","~bitxor="],options:{type:"number"},id:93},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"number")){if(op==="*="){return __node("MacroAccess",855,11,46,855,{left:__wrap(left,203),op:"~*=",right:__node("MacroAccess",855,21,58,855,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="/="){return __node("MacroAccess",857,11,46,857,{left:__wrap(left,203),op:"~/=",right:__node("MacroAccess",857,21,58,857,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="%="){return __node("MacroAccess",859,11,46,859,{left:__wrap(left,203),op:"~%=",right:__node("MacroAccess",859,21,58,859,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="+="){return __node("MacroAccess",861,11,52,861,{left:__wrap(left,203),op:"~+=",right:__node("MacroAccess",861,21,58,861,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="-="){return __node("MacroAccess",863,11,53,863,{left:__wrap(left,203),op:"~-=",right:__node("MacroAccess",863,21,58,863,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="bitlshift="){return __node("MacroAccess",865,11,55,865,{left:__wrap(left,203),op:"~bitlshift=",right:__node("MacroAccess",865,29,58,865,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="bitrshift="){return __node("MacroAccess",867,11,55,867,{left:__wrap(left,203),op:"~bitrshift=",right:__node("MacroAccess",867,29,58,867,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="biturshift="){return __node("MacroAccess",869,11,55,869,{left:__wrap(left,203),op:"~biturshift=",right:__node("MacroAccess",869,30,58,869,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="bitand="){return __node("MacroAccess",871,11,93,871,{left:__wrap(left,203),op:"~bitand=",right:__node("MacroAccess",871,26,58,871,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="bitor="){return __node("MacroAccess",873,11,93,873,{left:__wrap(left,203),op:"~bitor=",right:__node("MacroAccess",873,25,58,873,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else if(op==="bitxor="){return __node("MacroAccess",875,11,93,875,{left:__wrap(left,203),op:"~bitxor=",right:__node("MacroAccess",875,26,58,875,{op:"+",node:__wrap(right,203)},"expression",false,false)},"expression",false,false);}else{throw Error();}}else{return this.maybeCacheAccess(left,function(setLeft,left){var action;if(op==="*="){action=__node("MacroAccess",881,13,62,881,{left:__wrap(left,204),inverted:false,op:"*",right:__wrap(right,204)},"expression",false,false);}else if(op==="/="){action=__node("MacroAccess",883,13,62,883,{left:__wrap(left,204),inverted:false,op:"/",right:__wrap(right,204)},"expression",false,false);}else if(op==="%="){action=__node("MacroAccess",885,13,62,885,{left:__wrap(left,204),inverted:false,op:"%",right:__wrap(right,204)},"expression",false,false);}else if(op==="+="){action=__node("MacroAccess",887,13,64,887,{left:__wrap(left,204),inverted:false,op:"+",right:__wrap(right,204)},"expression",false,false);}else if(op==="-="){action=__node("MacroAccess",889,13,64,889,{left:__wrap(left,204),inverted:false,op:"-",right:__wrap(right,204)},"expression",false,false);}else if(op==="bitlshift="){action=__node("MacroAccess",891,13,65,891,{left:__wrap(left,204),inverted:false,op:"bitlshift",right:__wrap(right,204)},"expression",false,false);}else if(op==="bitrshift="){action=__node("MacroAccess",893,13,65,893,{left:__wrap(left,204),inverted:false,op:"bitrshift",right:__wrap(right,204)},"expression",false,false);}else if(op==="biturshift="){action=__node("MacroAccess",895,13,65,895,{left:__wrap(left,204),inverted:false,op:"biturshift",right:__wrap(right,204)},"expression",false,false);}else if(op==="bitand="){action=__node("MacroAccess",897,13,94,897,{left:__wrap(left,204),inverted:false,op:"bitand",right:__wrap(right,204)},"expression",false,false);}else if(op==="bitor="){action=__node("MacroAccess",899,13,95,899,{left:__wrap(left,204),inverted:false,op:"bitor",right:__wrap(right,204)},"expression",false,false);}else if(op==="bitxor="){action=__node("MacroAccess",901,13,96,901,{left:__wrap(left,204),inverted:false,op:"bitxor",right:__wrap(right,204)},"expression",false,false);}else{throw Error();}return __node("MacroAccess",904,11,30,904,{left:__wrap(setLeft,204),op:":=",right:__wrap(action,204)},"expression",false,false);});}};}.call(this));',operators:["*=","/=","%=","+=","-=","bitlshift=","bitrshift=","biturshift=","bitand=","bitor=","bitxor="],options:{type:"number"},id:101}],defineSyntax:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var asType,ident,isMutable;isMutable=macroData.isMutable;ident=macroData.ident;asType=macroData.asType;if(this.isIdentOrTmp(ident)){return {type:"ident",isMutable:isMutable==="mutable",ident:ident,asType:asType};}else{return ident;}};}.call(this));',options:{name:"DeclarableIdent"},params:[["ident","isMutable","many","?","const","mutable"],["ident","ident","ident","Identifier"],["ident","asType","many","?","sequence",["const","as"],["this","ident","Type"]]],id:31},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var head,tail;head=macroData.head;tail=macroData.tail;return {type:"array",elements:[head].concat(tail)};};}.call(this));',options:{name:"DeclarableArray"},params:[["const","["],["ident","head","choice",["ident","Declarable"],["const",""]],["ident","tail","many","*","sequence",["const",","],["this","choice",["ident","Declarable"],["const",""]]],["const","]"]],id:32},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var value;value=macroData.value;value=this.macroExpand1(value);return {key:this.name(value.ident),value:value};};}.call(this));',options:{name:"DeclarableObjectSingularPair"},params:[["ident","value","ident","DeclarableIdent"]],id:33},{options:{name:"DeclarableObjectDualPair"},params:[["this","sequence",["ident","key","ident","ObjectKey"],["const",":"],["ident","value","ident","Declarable"]]],id:34},{options:{name:"DeclarableObjectPair"},params:[["this","choice",["ident","DeclarableObjectDualPair"],["ident","DeclarableObjectSingularPair"]]],id:35},{code:'return (function(){"use strict";return function(macroData,__wrap,__node){var head,tail;head=macroData.head;tail=macroData.tail;return {type:"object",pairs:[head].concat(tail)};};}.call(this));',options:{name:"DeclarableObject"},params:[["const","{"],["ident","head","ident","DeclarableObjectPair"],["ident","tail","many","*","sequence",["const",","],["this","ident","DeclarableObjectPair"]],["const","}"]],id:36},{options:{name:"Declarable"},params:[["this","choice",["ident","DeclarableArray"],["ident","DeclarableObject"],["ident","DeclarableIdent"]]],id:37}],call:[{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node){var body,func,macroData,macroName,ran,silentFail;macroName=macroFullData.macroName;macroData=macroFullData.macroData;func=macroData[0];silentFail=macroData[1];if(this.isFunc(func)){body=this.funcBody(func);ran=this.tmp("once",true,"boolean");func=this.rewrap(this.func(this.funcParams(func),__node("Block",2330,1,[__node("MacroAccess",2330,9,17,2330,{macroName:"if",macroData:{test:__wrap(ran,788),body:__node("MacroAccess",2331,11,17,2331,{macroName:"if",macroData:{test:__wrap(silentFail,788),body:__node("MacroAccess",2332,13,39,2332,{macroName:"return",macroData:{}},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",2334,13,11,2334,{op:"throw",node:__node("Call",2334,18,__node("Ident",2334,18,"Error"),[__node("Const",2334,25,"Attempted to call function more than once")],false,false)},"statement",false,false)}},"statement",false,false),elseIfs:[],elseBody:__node("MacroAccess",2336,11,30,2336,{left:__wrap(ran,788),op:":=",right:__node("Const",2336,18,true)},"statement",false,false)}},"statement",false,false),__wrap(body,788)],null),this.funcIsAutoReturn(func),this.funcIsBound(func),this.funcIsCurried(func),this.funcAsType(func),this.funcIsGenerator(func),this.funcGeneric(func)));return __node("Block",2345,1,[__node("MacroAccess",2345,7,38,2345,{macroName:"let",macroData:{declarable:__node("MacroAccess",2345,10,37,2345,__node("MacroAccess",2345,10,31,2345,{isMutable:"mutable",ident:__wrap(ran,788)},"statement",false,false),"statement",false,false),value:__node("Const",2345,25,false)}},"statement",false,false),__wrap(func,788)],null);}else if(this.isConst(silentFail)&&!this.value(silentFail)){return __node("Call",2349,11,__node("Ident",2349,11,"__once"),[__wrap(func,788)],false,false);}else{return __node("Call",2351,11,__node("Ident",2351,11,"__once"),[__wrap(func,788),__wrap(silentFail,788)],false,false);}};}.call(this));',names:"once!",id:124},{code:'return (function(){"use strict";var __slice;__slice=Array.prototype.slice;return function(macroFullData,__wrap,__node){var _this,head,macroData,macroName,tail;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;head=macroData[0];tail=__slice.call(arguments[0].macroData,1);if(tail.length===0){return __wrap(head,1081);}else{return this.maybeCache(head,function(setHead,head){return __node("Block",3572,1,[__wrap(setHead,1083),__wrap(tail,1083),__wrap(head,1083)],null);});}};}.call(this));',names:"first!",id:154},{code:'return (function(){"use strict";var __num,__slice,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node){var _ref,finish,macroData,macroName,start;macroName=macroFullData.macroName;macroData=macroFullData.macroData;start=__slice.call(arguments[0].macroData,0,-1);finish=(_ref=arguments[0].macroData)[__num(_ref.length)-1];if(start.length===0){return __wrap(finish,1084);}else{return __node("Block",3584,1,[__wrap(start,1084),__wrap(finish,1084)],null);}};}.call(this));',names:"last!",id:155}]})
}("undefined"!=typeof module&&"function"==typeof require?require:void 0);"function"==typeof define&&define.amd?define(function(){return t}):e.GorillaScript=t})(this),function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=t.util.clone(e[o]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var o in n)r[o]=n[o];return r},insertBefore:function(e,n,r,o){o=o||t.languages;var a=o[e],i={};for(var s in a)if(a.hasOwnProperty(s)){if(s==n)for(var c in r)r.hasOwnProperty(c)&&(i[c]=r[c]);i[s]=a[s]}return o[e]=i},DFS:function(e,n){for(var r in e)n.call(e,r,e[r]),t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}},highlightAll:function(e,n){for(var r,o=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),a=0;r=o[a++];)t.highlightElement(r,e===!0,n)},highlightElement:function(r,o,a){for(var i,s,c=r;c&&!e.test(c.className);)c=c.parentNode;if(c&&(i=(c.className.match(e)||[,""])[1],s=t.languages[i]),s){r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+i,c=r.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+i);var l=r.textContent;if(l){l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var u={element:r,language:i,grammar:s,code:l};if(t.hooks.run("before-highlight",u),o&&self.Worker){var f=new Worker(t.filename);f.onmessage=function(e){u.highlightedCode=n.stringify(JSON.parse(e.data),i),u.element.innerHTML=u.highlightedCode,a&&a.call(u.element),t.hooks.run("after-highlight",u)},f.postMessage(JSON.stringify({language:u.language,code:u.code}))}else u.highlightedCode=t.highlight(u.code,u.grammar,u.language),u.element.innerHTML=u.highlightedCode,a&&a.call(r),t.hooks.run("after-highlight",u)}}},highlight:function(e,r,o){return n.stringify(t.tokenize(e,r),o)},tokenize:function(e,n){var r=t.Token,o=[e],a=n.rest;if(a){for(var i in a)n[i]=a[i];delete n.rest}e:for(var i in n)if(n.hasOwnProperty(i)&&n[i]){var s=n[i],c=s.inside,l=!!s.lookbehind||0;s=s.pattern||s;for(var u=0;u<o.length;u++){var f=o[u];if(o.length>e.length)break e;if(!(f instanceof r)){s.lastIndex=0;var d=s.exec(f);if(d){l&&(l=d[1].length);var p=d.index-1+l,d=d[0].slice(l),h=d.length,_=p+h,m=f.slice(0,p+1),y=f.slice(_+1),g=[u,1];m&&g.push(m);var b=new r(i,c?t.tokenize(d,c):d);g.push(b),y&&g.push(y),Array.prototype.splice.apply(o,g)}}}}return o},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[],r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(r&&r.length)for(var o,a=0;o=r[a++];)o(n)}}},n=t.Token=function(e,t){this.type=e,this.content=t};if(n.stringify=function(e,r,o){if("string"==typeof e)return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var a={type:e.type,content:n.stringify(e.content,r,o),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:o};a.type=="comment"&&(a.attributes.spellcheck="true"),t.hooks.run("wrap",a);var i="";for(var s in a.attributes)i+=s+'="'+(a.attributes[s]||"")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'" '+i+">"+a.content+"</"+a.tag+">"},!self.document)return self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,o=n.code;self.postMessage(JSON.stringify(t.tokenize(o,t.languages[r]))),self.close()},!1),void 0;var r=document.getElementsByTagName("script");r=r[r.length-1],r&&(t.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll))}(),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),function(){"use strict";Prism.languages.gorillascript=Prism.languages.extend("javascript",{keyword:/\b(yield\*?|(throw|return)\??|((all)?keys|label|map|require|async)!|(to-)?promise!)|\b(as|break|continue|return|(for|while|until)(\s+(first|every|some|filter|reduce))?|if|else|unless|switch|then|case|default|catch|finally|try|return(if|ing|unless)?|new|class|extends|private|public|protected|def|super|require|async(if|for|unless|until|while)?|import|export|returnif|returning|returnunless|mutable|macro|const|static|var|do|of|let|enum|namespace|package|true|false|null|undefined|void|GLOBAL|this|prototype|arguments|from)(?!-)\b/g,operator:/\b((has|owns)key|bit(and|or|xor|not|lshift|u?rshift)|and|or|xor|min|max|instanceof(some)?|typeof\!?|is(nt)?(?!\-)|in|to|til|by|not|xor|delete)(?!\-)\b|\b((and|or|min|max)=|is-(array|boolean|function|null|number|object|string|undefined|void)!|post-(dec|inc)!)|!~?=|={1,2}|:=|::|&amp;|~=|\-(>|(?![\w]))|~?[\+\*\/%\^\\]=?|~?%%|\?=?|(&lt;){2,3}|(&gt;){2,3}|&lt;=&gt;|\|&gt;|&lt;\||@|\.{3}|\-&gt;|(&lt;|&gt;)=?/g,number:/\b-?(0x[\da-f_]+(\.[\da-f_]+)?|0b[01_]+(\.[\da-f_]+)?|0o[0-7_]+(\.[\da-f_]+)?|\d{1,2}r[\w\d_]+(\.[\w\d_]+)?|\d[_\d]*(\.[\d_]*)?(_[\w\d_]*)?|NaN|Infinity)\b/g,string:{pattern:/r"(\\?.)*?"[gimy]*|r'(\\?.)*?'[gimy]*|"(\\?.)*?"|'(\\?.)*?'|\\\w[\w\d_]*(-\w[\w\d_]*)*\b/g,inside:{interpolation:/\$(\w[\d\w]*(\-\w[\d\w]*)*|\(.*?\))/g}},punctuation:/[{}[\];(),.:]/g,ident:/\b\w[\d\w]*(\-\w[\d\w]*)*(?!['"])\b/g}),Prism.languages.insertBefore("gorillascript","operator",{property:/[\.@]\w[\d\w]*(\-\w[\d\w]*)*\b|\w[\d\w]*(\-\w[\d\w]*)*\s*:/g}),Prism.languages.insertBefore("gorillascript","ident",{primordial:/\b(Object|String|Number|Boolean|Function|Array|Math|JSON|Date|RegExp|Error|RangeError|ReferenceError|SyntaxError|TypeError|URIError|escape|unescape|parse(Int|\-int|Float|\-float)|is\-?NaN|is(F|\-f)inite|decode\-?URI((C|\-c)omponent)?|encode\-?URI((C|\-c)omponent)?)\b/g})}.call(this),function(e){"use strict";var t,n,r,o,a,i,s,c,l;t=function(e,t,n,r,a){function i(e,t){u||(--p,null!=e&&null==l&&(l=e),n&&null==l&&arguments.length>1&&d.push(t),h||s())}function s(){for(;!u&&null==l&&e>p&&++f<t;)++p,h=!0,r(f,o(i)),h=!1;u||null==l&&0!==p||(u=!0,null!=l?a(l):a(null,d))}var l,u,f,d,p,h;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+c(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+c(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+c(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+c(r));if("function"!=typeof a)throw TypeError("Expected onComplete to be a Function, got "+c(a));return d=n?[]:null,0>=t?a(null,d):((1>e||e!==e)&&(e=1/0),l=null,p=0,h=!1,u=!1,f=-1,s(),void 0)},n=typeof Array.isArray=="function"?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return e.call(t)==="[object Array]"}}(),r=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+c(e));return e},o=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+c(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+c(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),a=Array.prototype.slice,i=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+c(e))},s=function(e){if(null==e)throw TypeError("Expected an object, got "+c(e));return n(e)?e:"string"==typeof e?e.split(""):a.call(e)},c=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),l=typeof e.setImmediate=="function"?e.setImmediate:"undefined"!=typeof process&&typeof process.nextTick=="function"?process.nextTick:function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+c(e));return setTimeout(e,0)},jQuery(function(e){function n(){if(p)try{return Function(p)()}catch(e){return alert(String(e)),void 0}}function o(e){return function(){try{return e.apply(this,arguments)}catch(t){l(function(){throw t})}return!1}}function a(){return f||d||u?void 0:e("#toc").removeClass("hover")}function s(){var n;return Prism.languages.gorillascript?(n=e('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),t(1,r(n.length),!1,function(e,t){var r;return r=n[e],Prism.highlightElement(r),l(t)},function(){})):setTimeout(s,17)}var c,u,f,d,p,h;return c=function(){function t(){var t,r;return n?(c(),void 0):(r=e("#try-input").val(),n=!0,GorillaScript.compile(r,(t=!1,function(r,o){if(t)throw Error("Attempted to call function more than once");return t=!0,n=!1,r?(e("#try-input-wrap").addClass("error"),p="// Error: "+String(r)):(e("#try-input-wrap").removeClass("error"),p=o.code),e("#try-output").val(p)})))}var n,r;return n=!1,function(){return null!=r&&clearTimeout(r),r=setTimeout(t,250)}}(),setInterval(function(){var t;return t="",function(){var n;return n=e("#try-input").val(),n!==t?(t=n,c()):void 0}}(),17),e("a[href=#try]").click(o(function(){var t;return c(),t=e("#try"),t.slideToggle(),e("#run-link").toggleClass("hide"),!1})),e("a[href=#run]").click(o(function(){return n(),!1})),e("#irc-button").click(o(function(){var t;return t=e(this).data("url"),e(this).replaceWith(e("<iframe id='irc-iframe' src='"+i(t)+"'></iframe>")),!1})),u="ontouchstart"in window,d=!1,f=!1,e("#toc").removeClass("hover"),u||(e("#toc-label").addClass("no-touch").bind("touchstart",o(function(){return u=!0,e(this).removeClass("no-touch"),!0})),e("#toc-label").hover(o(function(){return u?void 0:(d=!0,e("#toc").addClass("hover"))}),o(function(){return u?void 0:(d=!1,setTimeout(a,17))})),e("#toc").hover(o(function(){return u?void 0:(f=!0,e("#toc").addClass("hover"))}),o(function(){return u?void 0:(f=!1,setTimeout(a,17))}))),e("#toc-label a").click(o(function(){return l(function(){return e("#toc").toggleClass("hover"),setTimeout(a,17)}),!1})),h=function(){function e(){var r,o,a,i;if(t.length!==0&&!n)return n=!0,i=(a=t.shift()).gsCode,r=a.$jsCode,GorillaScript.compile(i,{"return":!0,bare:!0},(o=!1,function(t,a){var i,s;if(o)throw Error("Attempted to call function more than once");return o=!0,i=r.find("code"),i.text(null!=t?"// Error: "+String(t):a.code),l((s=!1,function(){if(s)throw Error("Attempted to call function more than once");return s=!0,Prism.highlightElement(i[0]),n=!1,e()}))}))}var t,n;return t=[],n=!1,function(n,r){return r.find("code").text("// Compiling..."),t.push({gsCode:n,$jsCode:r}),e()}}(),e(".gs-code").each(function(){var t,n;return n=e(this),n.hasClass("no-convert")?void 0:(t=e("<div>"),n.replaceWith(t),t.append(e("<ul class='tabs'><li class='gs-tab active'><a href='#'>GorillaScript</a><li class='js-tab'><a href='#'>JavaScript</a></ul>")),t.append(n),t.find(".tabs a").on("click",o(function(){var r;return t.find(".tabs li").removeClass("active"),e(this).parent().addClass("active"),e(this).parent().hasClass("gs-tab")?(t.find(".js-code").hide(),t.find(".gs-code").show()):(t.find(".gs-code").hide(),r=t.find(".js-code"),r.length===0&&(r=e("<pre class='js-code'><code class='language-javascript'></code></pre>"),t.append(r),h(n.find("code").text(),r)),r.show()),!1})))}),s()})}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this);